"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["56035"],{242167:function(e,n,t){t(250668)("Uint32",function(e){return function(n,t,l){return e(this,n,t,l)}})},903749:function(e,n,t){t.d(n,{Z:()=>u});var l=t(512722),a=t.n(l),i=t(442837),s=t(339085),r=t(633302);function u(e){let{emojiId:n,emojiName:t}=e,l=(0,i.e7)([s.ZP],()=>null!=n?s.ZP.getCustomEmojiById(n):null);if(null!=l||null!=t)return null==n?(a()(null!=t,"emojiName must be defined if emojiId is not defined"),r.ZP.convertSurrogateToName(t,!1)):null==l?void 0:l.name}},349709:function(e,n,t){t.d(n,{Z:()=>y});var l=t(200651),a=t(192379),i=t(120356),s=t.n(i),r=t(442837),u=t(481060),o=t(596454),d=t(225433),c=t(727637),f=t(318766),m=t(907040),h=t(984933),g=t(903749),p=t(185923),x=t(388032),v=t(948243);function y(e){let{className:n,guildId:t,error:i,emojiId:y,emojiName:b,isRequiredField:N=!0,shouldUpdateBothEmojiFields:j=!1,setEmojiId:w,setEmojiName:C}=e,S=(0,g.Z)({emojiId:y,emojiName:b}),Z=(0,r.e7)([h.ZP],()=>null!=t?h.ZP.getDefaultChannel(t):null),M=a.createRef(),k=(0,c.Z)(M),E=()=>{C(void 0),w(void 0)},I=e=>(n,t)=>{let l=(null==n?void 0:n.id)==null;E(),l?C(null==n?void 0:n.optionallyDiverseSequence):(j&&C(null==n?void 0:n.name),w(null==n?void 0:n.id)),t&&e()},P=e=>{e.stopPropagation(),E()};return(0,l.jsx)(u.xJW,{required:N,title:x.intl.string(x.t["3BQmiI"]),className:s()(n,v.section),error:i,children:(0,l.jsx)(u.yRy,{animation:u.yRy.Animation.NONE,position:"top",renderPopout:e=>{let{closePopout:n}=e;return(0,l.jsx)(m.Z,{closePopout:n,pickerIntention:p.Hz.SOUNDBOARD,onNavigateAway:n,onSelectEmoji:I(n),guildId:t,channel:Z})},children:(e,n)=>{let{isShown:t}=n;return(0,l.jsxs)("div",{...e,className:v.emojiInput,ref:M,children:[(0,l.jsx)(f.Z,{className:v.emojiButton,active:t,tabIndex:0,renderButtonContents:null!=y||null!=b?()=>(0,l.jsx)(o.Z,{emojiName:b,emojiId:y}):null}),(0,l.jsx)(u.oil,{inputClassName:v.emojiText,placeholder:x.intl.string(x.t.QTK0TE),value:null!=S?":".concat(S,":"):"",readOnly:!0}),k&&null!=S&&(0,l.jsx)(d.Z,{...e,onClick:P,className:v.removeButton})]})}})})}},763610:function(e,n,t){t.d(n,{Z:()=>d});var l=t(200651),a=t(192379),i=t(120356),s=t.n(i),r=t(481060),u=t(53281),o=t(453356);function d(e){let{filename:n,className:t,filters:i,buttonText:d,placeholder:c,onFileSelect:f}=e,m=a.useRef(null);return(0,l.jsxs)("div",{className:s()(t,o.fileUpload),children:[(0,l.jsx)("input",{className:o.fileUploadInput,tabIndex:-1,readOnly:!0,placeholder:c,type:"text",value:n}),(0,l.jsxs)(r.zxk,{size:r.zxk.Sizes.MIN,className:o.fileUploadButton,children:[d,(0,l.jsx)(u.Z,{ref:m,tabIndex:-1,onChange:e=>{var n;f(null===(n=e.currentTarget.files)||void 0===n?void 0:n[0])},multiple:!1,filters:i})]})]})}},671895:function(e,n,t){t.d(n,{Z:()=>c});var l=t(200651),a=t(192379),i=t(481060),s=t(87686),r=t(586826),u=t(507419),o=t(388032),d=t(256724);let c=a.memo(function(e){let{sound:n,volume:t,disabled:a=!1,onChange:c}=e,{file:f}=(0,r.p)();return(0,l.jsx)(i.hjN,{className:d.section,title:o.intl.string(o.t.CCRKNz),children:(0,l.jsxs)("div",{className:d.fakeInput,children:[null!=n&&(0,l.jsx)(u.Z,{sound:n,volume:t,disabled:a}),null==n&&null!=f&&(0,l.jsx)(s.Z,{className:d.audioTrimmer,volume:t,disabled:a,onChange:c})]})})})},87686:function(e,n,t){t.d(n,{Z:()=>p}),t(47120);var l=t(200651),a=t(192379),i=t(120356),s=t.n(i),r=t(481060),u=t(70956),o=t(747071),d=t(586826),c=t(622594),f=t(174727),m=t(710111),h=t(543776);let g={startPositionMs:0,endPositionMs:2*(10*u.Z.Millis.SECOND),playheadPositionMs:0},p=a.memo(function(e){let{className:n,volume:t,disabled:i=!1,onChange:p}=e,{audio:x}=(0,d.p)(),[v,y]=a.useState(!1),[b,N]=a.useState(g),{playheadPositionMs:j,endPositionMs:w,startPositionMs:C}=b,S=null!=x,Z=w-C,M=Z>m.YW*u.Z.Millis.SECOND;a.useEffect(()=>{if(null!=x)return N({playheadPositionMs:0,endPositionMs:x.duration*u.Z.Millis.SECOND,startPositionMs:0}),()=>{x.pause(),y(!1)}},[x]);let k=a.useCallback(e=>{null!=x&&(x.pause(),null!=e&&(x.currentTime=e),y(!1))},[x]),E=a.useCallback(()=>{if(null!=x){if(v){k();return}j>=w?x.currentTime=(0,f.my)(C):x.currentTime=(0,f.my)(j),x.volume=(0,o.Z)(t),x.play(),y(!0)}},[x,w,k,j,v,C,t]),I=a.useCallback(e=>{N(e),null==p||p({startMs:e.startPositionMs,endMs:e.endPositionMs})},[p]),P=a.useCallback(e=>{null!=x&&(x.currentTime=e)},[x]);return(0,l.jsxs)("div",{className:s()(h.container,{[h.initialized]:S,[h.disabled]:!S||i},n),children:[(0,l.jsxs)("div",{className:h.playButtonContainer,children:[(0,l.jsx)(r.P3F,{className:h.playButton,onClick:S?E:void 0,children:v?(0,l.jsx)(r.wNq,{size:"xs",color:"currentColor",className:h.playButtonIcon}):(0,l.jsx)(r.o1U,{size:"xs",color:"currentColor",className:h.playButtonIcon})}),(0,l.jsx)("div",{className:h.durationContainer,children:(0,l.jsx)(r.Text,{className:h.__invalid_duration,variant:"text-xs/normal",color:M?"text-warning":"text-positive",children:"".concat((0,f.my)(Z).toFixed(2),"s")})})]}),(0,l.jsx)(c.Z,{playing:v,onPlaybackChange:P,onPausePlayback:k,onChangePosition:I,disabled:i})]})})},943351:function(e,n,t){t.d(n,{V3:()=>a,bp:()=>s,hp:()=>i,nl:()=>l}),t(47120);let l={waveformBlockWidth:2,waveformBarWidth:.5,fineTuningDelay:500,fineTuningScale:10,loudnessThreshold:.3},a=(e,n)=>{let t="".concat(e[0],"-").concat(e[e.length-1],"-").concat(e.byteLength);return"".concat(t,"-").concat(JSON.stringify(n))},i=e=>"".concat(e.name,"-").concat(e.size,"-").concat(e.lastModified),s=new Set(["audio/mpeg","audio/mp3","audio/wav","audio/x-wav","audio/ogg","video/mp4"])},586826:function(e,n,t){t.d(n,{p:()=>u});var l=t(232713),a=t(65400),i=t(731965),s=t(174727);let r=(0,a.F)(e=>({audio:null,file:null,loading:!1,loadAudioFromFile:async n=>{if((0,i.j)(()=>e({file:n,audio:null,loading:null!=n})),null==n)return;let t=await (0,s.lj)(n);null!=t&&(0,i.j)(()=>e({audio:t,loading:!1}))},maxVolume:1,setMaxVolume:n=>{(0,i.j)(()=>e({maxVolume:n}))}}));function u(){return r(e=>({audio:e.audio,file:e.file,loading:e.loading,loadAudioFromFile:e.loadAudioFromFile,maxVolume:e.maxVolume,setMaxVolume:e.setMaxVolume}),l.X)}},622594:function(e,n,t){t.d(n,{Z:()=>h}),t(47120);var l=t(200651),a=t(192379),i=t(120356),s=t.n(i),r=t(259580),u=t(70956),o=t(586826),d=t(174727),c=t(882126),f=t(943351),m=t(246800);let h=a.memo(function(e){let{playing:n,onPausePlayback:t,onPlaybackChange:i,onChangePosition:h,disabled:g=!1}=e,p={...f.nl},{audio:x}=(0,o.p)(),v=null!=x,y=a.useRef(null),b=a.useRef(null),N=a.useRef(null),[j,w]=a.useState(0),[C,S]=a.useState(0),[Z,M]=a.useState(0),[k,E]=a.useState(!1),[I,P]=a.useState(!1),[_,R]=a.useState(!1),[T,F]=a.useState(0),[D,z]=a.useState(-1),O=a.useMemo(()=>T/p.fineTuningScale,[p.fineTuningScale,T]);a.useEffect(()=>{if(null==x)return;let e=x.duration*u.Z.Millis.SECOND;w(0),S(0),M(e),F(e)},[x]);let A=a.useCallback((e,n)=>{if(t(),0===e.button)switch(n){case 0:E(!0);break;case 1:P(!0);break;case 2:R(!0)}},[t]),L=a.useCallback(e=>{switch(e){case 0:E(!1);break;case 1:P(!1);break;case 2:R(!1)}z(-1)},[]),B=a.useCallback(e=>{if(null==x||!k)return;let n=parseInt(e.target.value),t=n>Z?Z:n;i((0,d.my)(t)),w(t),S(t)},[x,i,Z,k]),U=a.useCallback(e=>{if(null==x||!I)return;let n=parseInt(e.target.value);n<j?(i((0,d.my)(j)),S(j)):n>Z?(i((0,d.my)(Z)),S(Z)):(i((0,d.my)(n)),S(n))},[x,i,Z,I,j]),G=a.useCallback(e=>{if(null==x||!_)return;let n=parseInt(e.target.value),t=n>j?n:j;i((0,d.my)(j)),S(j),M(t)},[x,i,_,j]);return a.useEffect(()=>{null!=h&&v&&h({startPositionMs:j,endPositionMs:Z,playheadPositionMs:C})},[j,Z,h,v,C]),a.useEffect(()=>{let e;if(null!=x)return n&&(e=setInterval(()=>{x.currentTime<(0,d.my)(Z)?x.currentTime>=(0,d.my)(C)&&S(x.currentTime*u.Z.Millis.SECOND):(t((0,d.my)(j)),S(j))},16)),()=>{clearInterval(e)}},[x,Z,t,C,n,j]),a.useEffect(()=>{if(p.fineTuningDelay<=0)return;let e=setTimeout(()=>{k&&j==j&&-1===D?z(j):_&&Z==Z&&-1===D?z(Z):I&&C==C&&-1===D&&z(C)},p.fineTuningDelay);return()=>{clearTimeout(e)}},[p.fineTuningDelay,_,Z,D,I,C,k,j]),(0,l.jsxs)("div",{className:s()(m.timeline,{[m.initialized]:v}),children:[(0,l.jsxs)("div",{className:m.rangeHandleContainer,children:[(0,l.jsxs)("div",{className:m.rangeHandleFrame,children:[(0,l.jsx)("input",{ref:y,className:s()(m.rangeHandle,m.rangeHandleStart),type:"range",min:(0,d.ao)(D,O,T),max:(0,d.MN)(D,O,T),value:j,onChange:B,onMouseDown:e=>A(e,0),onMouseUp:()=>L(0),disabled:!v||g}),(0,l.jsx)("input",{ref:N,className:s()(m.rangeHandle,m.rangeHandleEnd),type:"range",min:(0,d.ao)(D,O,T),max:(0,d.MN)(D,O,T),value:Z,onChange:G,onMouseDown:e=>A(e,2),onMouseUp:()=>L(2),disabled:!v||g})]}),(0,l.jsx)("div",{className:m.__invalid_handlePlayheadTrack,children:(0,l.jsx)("input",{ref:b,className:s()(m.rangeHandle,m.rangeHandlePlayhead),type:"range",min:(0,d.ao)(D,O,T),max:(0,d.MN)(D,O,T),value:C,onChange:U,onMouseDown:e=>A(e,1),onMouseUp:()=>L(1),disabled:!v||g})})]}),(0,l.jsxs)("div",{className:m.handleContainer,children:[(0,l.jsxs)("div",{className:s()(m.handleFrame,{[m.startDragging]:k,[m.endDragging]:_}),style:{left:"".concat((0,d.pN)(j,D,O,T),"%"),right:"".concat((0,d.kD)(Z,D,O,T),"%")},children:[(0,l.jsx)("div",{className:s()(m.handleIconFrame,m.handleIconFrameStart),children:(0,l.jsx)("div",{className:s()(m.handleIconContainer,m.__invalid_start),children:(0,l.jsx)(r.Z,{direction:r.Z.Directions.RIGHT,className:m.handleIcon,width:16,height:16})})}),(0,l.jsx)("div",{className:s()(m.handleIconFrame,m.handleIconFrameEnd),children:(0,l.jsx)("div",{className:s()(m.handleIconContainer,m.__invalid_end),children:(0,l.jsx)(r.Z,{direction:r.Z.Directions.LEFT,className:m.handleIcon,width:16,height:16})})})]}),(0,l.jsx)("div",{className:m.playheadTrack,children:(0,l.jsx)("div",{className:s()(m.playhead,{[m.dragging]:I||k||_||n}),style:{left:"".concat((0,d.pN)(C,D,O,T),"%")}})})]}),(0,l.jsx)("div",{className:m.waveformContainer,children:(0,l.jsx)(c.Z,{fineTuning:D,fineTuningResolution:O,duration:T})})]})})},174727:function(e,n,t){t.d(n,{MN:()=>r,XG:()=>c,ao:()=>i,kD:()=>o,lj:()=>d,my:()=>s,pN:()=>u}),t(411104),t(315314),t(309749),t(610138),t(216116),t(78328),t(815648),t(47120);var l=t(943351),a=t(388032);let i=(e,n,t)=>-1===e?0:e-n*e/t;function s(e){return e/1e3}let r=(e,n,t)=>-1===e?t:e+n*(t-e)/t,u=(e,n,t,l)=>{let a=0;return(n>=0&&t>0?(e-(n-t*n/l))*100/t:100*e/l).toFixed(4)},o=(e,n,t,l)=>{let a=0;return(n>=0&&t>0?-((e-(n+t*(l-n)/l))*100)/t:-100*e/l+100).toFixed(4)};async function d(e){if(!(e.type.startsWith("audio")||e.type.startsWith("video"))||!l.bp.has(e.type))throw Error(a.intl.formatToPlainString(a.t["2y3xGR"],{fileType:e.type}));let n=new Audio(URL.createObjectURL(e));return await new Promise(e=>{let t=()=>{e(),n.removeEventListener("canplaythrough",t)};n.addEventListener("canplaythrough",t),n.load()}),n}async function c(e,n){let t=await fetch(e);return new File([await t.blob()],n,{type:"audio/mp3"})}},812613:function(e,n,t){t.d(n,{Zk:()=>c,bb:()=>f,kV:()=>h}),t(411104),t(653041),t(951953),t(970173),t(520712),t(268111),t(941497),t(32026),t(480839),t(744285),t(492257),t(873817),t(518263);var l=t(512722),a=t.n(l),i=t(304809),s=t(70956),r=t(208049),u=t(419202);let o=new AudioContext({sampleRate:Math.min((0,i.N)().sampleRate,48e3)});async function d(e){let n=await e.arrayBuffer();if(!(n instanceof ArrayBuffer))throw Error("Unexpected file type");return o.decodeAudioData(n)}async function c(e){var n;let t=await (n=n=>{n.readAsDataURL(e)},new Promise((e,t)=>{let l=new FileReader,a=()=>{l.removeEventListener("load",a),l.removeEventListener("error",t),e(l.result)};l.addEventListener("load",a),l.addEventListener("error",t),n(l)}));if("string"!=typeof t)throw Error("Unexpected file type");return t}async function f(e){let{readPromise:n,guildId:t,name:l,volume:a,emojiId:i,emojiName:s}=e;return(0,r.Dx)({guildId:t,name:l,sound:await n,volume:a,emojiId:i,emojiName:s})}async function m(e){let n=[],t=function(e){if(1===e.length)return e[0];if(2===e.length){let n=e[0],t=e[1],l=[];for(let e=0;e<n.length;e++)l.push(n[e]),l.push(t[e]);let a=new Float32Array(l.length);return a.set(l),a}throw Error("Only handles up to 2 channels")}(function(e){let{numberOfChannels:n}=e,t=[];for(let l=0;l<n;l++)t.push(e.getChannelData(l));return t}(e)),l=new AudioData({format:"f32",sampleRate:e.sampleRate,numberOfFrames:e.length,numberOfChannels:e.numberOfChannels,timestamp:1e6*e.duration,data:t}),i=new AudioEncoder({output:function(t){a()(null!=t.duration,"Chunk duration must not be null");let l=t.duration/1e6*e.sampleRate,i=new Uint8Array(t.byteLength);t.copyTo(i),n.push({buffer:i,numSamples:l})},error:e=>{throw Error("Audio encoding error: ".concat(e.message))}});return i.configure({codec:"opus",sampleRate:e.sampleRate,numberOfChannels:e.numberOfChannels}),i.encode(l),await i.flush(),new Blob([(0,u.Z)(n,{channelCount:e.numberOfChannels,inputSampleRate:e.sampleRate,outputGain:0,channelMappingFamily:0})],{type:"audio/ogg"})}async function h(e,n){let t=function(e,n){let{startMs:t,endMs:l}=n,{sampleRate:a,numberOfChannels:i,duration:r}=e,u=r*s.Z.Millis.SECOND,d=Math.min(l,u);if(0===t&&d===u)return e;let c=Math.floor(t/u*e.length),f=Math.floor(d/u*e.length),m=o.createBuffer(i,f-c,a);for(let n=0;n<i;n++){let t=m.getChannelData(n),l=e.getChannelData(n),a=0;for(let e=c;e<=f;e++)t[a]=l[e],a++}return m}(await d(e),n);return new File([await m(t)],"sound.ogg",{type:"audio/ogg"})}},882126:function(e,n,t){t.d(n,{Z:()=>r});var l=t(200651),a=t(192379),i=t(586826),s=t(990792);let r=a.memo(function(e){let{fineTuning:n,fineTuningResolution:t,duration:a}=e,{file:r,audio:u}=(0,i.p)();return(0,l.jsx)(s.Z,{file:r,audio:u,waveformSettings:{fineTuning:n,fineTuningResolution:t,duration:a}})})},990792:function(e,n,t){t.d(n,{Z:()=>p}),t(47120);var l=t(200651),a=t(192379),i=t(120356),s=t.n(i),r=t(392711),u=t(780384),o=t(481060),d=t(410030),c=t(44315),f=t(293501),m=t(943351),h=t(231338),g=t(335351);let p=a.memo(function(e){let{file:n,audio:t,className:i,waveformSettings:p}=e,[x,v]=a.useState({width:0,height:0}),y=a.useRef(null),b=a.useMemo(()=>{var e;let n=null!==(e=null==t?void 0:t.duration)&&void 0!==e?e:1;return{fineTuning:-1,fineTuningResolution:n/m.nl.fineTuningScale,duration:n,...null!=p?p:{}}},[t,p]),N=(0,f.b1)(n),j=(0,f.NN)(N,y.current,b),w=(0,d.ZP)(),C=(0,c.Sl)((0,u.wj)(w)?h.Il.PRIMARY_300:h.Il.PRIMARY_700),S=null==N||null==j,Z=(0===x.width||0===x.height||S)&&null!=n,M=a.useCallback(()=>{null!=y.current&&v({width:y.current.offsetWidth,height:y.current.offsetHeight})},[]);return a.useEffect(()=>{if(null!=y.current){let e=new ResizeObserver((0,r.debounce)(M,50));return e.observe(y.current),()=>{e.disconnect()}}},[M]),a.useEffect(()=>{if(null==y.current)return;let e=y.current,n=e.getContext("2d");if(null==n)return;let{width:t,height:l}=e;if(0!==x.width&&0!==x.height&&null!=j&&j.length>0){let e=t/j.length,a=-(e*(m.nl.waveformBarWidth-1));n.clearRect(0,0,t,l),n.fillStyle=C.hex;for(let t=0;t<j.length;t++){let i=j[t]*l,s=t*e+a,r=l/2-i/2;n.fillRect(s,r,e-a,i)}}},[C,x,w,j]),(0,l.jsxs)("div",{className:s()(g.container,i),children:[(0,l.jsx)("canvas",{className:g.waveformCanvas,ref:y,width:4*x.width,height:4*x.height}),Z&&(0,l.jsx)("div",{className:g.loading,children:(0,l.jsx)(o.$jN,{type:o.RAz.SPINNING_CIRCLE})})]})})},293501:function(e,n,t){t.d(n,{NN:()=>m,b1:()=>c}),t(315314),t(309749),t(610138),t(216116),t(78328),t(815648),t(47120);var l=t(192379),a=t(772848),i=t(304809),s=t(586826),r=t(943351);let u=new Worker(new URL("/assets/"+t.u("14315"),t.b)),o=(0,i.N)();async function d(e){let n=await e.arrayBuffer();return(await o.decodeAudioData(n)).getChannelData(0)}function c(e){let[n,t]=l.useState(null),[a,i]=l.useState(null);return l.useEffect(()=>{if(null==e)return;let n=(0,r.hp)(e);n!==a&&(i(n),t(null),d(e).then(t))},[a,e]),n}let f={...r.nl};function m(e,n,t){let[i,o]=l.useState(null),[d,c]=l.useState(null),[m,h]=l.useState(1),{setMaxVolume:g}=(0,s.p)(),p=l.useCallback((e,n)=>{var l;c(null),(l=n.offsetWidth,new Promise(n=>{let i=(0,a.Z)(),s=e=>{let{data:{waveform:t,id:l,normalizedVolumeMultipler:a}}=e;i===l&&(n(t),h(a)),null==u||u.removeEventListener("message",s)};null==u||u.addEventListener("message",s),null==u||u.postMessage({id:i,options:t,config:f,width:l,rawBufferData:e})})).then(c)},[t]);return l.useEffect(()=>{if(null==e||null==n)return;let l=(0,r.V3)(e,t);i!==l&&(o(l),p(e,n))},[e,p,n,t,i]),l.useEffect(()=>{g(m)},[m,g]),d}},507419:function(e,n,t){t.d(n,{Z:()=>m}),t(47120);var l=t(200651),a=t(192379),i=t(481060),s=t(22382),r=t(747071),u=t(586826),o=t(174727),d=t(990792),c=t(388032),f=t(857229);let m=a.memo(function(e){let{sound:n,volume:t,disabled:m}=e,[h,g]=a.useState(!1),p=a.useRef(null),{file:x,audio:v,loadAudioFromFile:y}=(0,u.p)(),b=a.useMemo(()=>(0,s.Z)(n.soundId),[n]);return a.useEffect(()=>{null==p.current&&(p.current=(0,o.XG)(b,n.name).then(y))},[b,y,n.name]),(0,l.jsxs)("div",{className:f.previewContainer,children:[(0,l.jsx)(i.P3F,{onClick:m?void 0:function(){null!=v&&(v.paused?(v.volume=(0,r.Z)(t),v.currentTime=0,v.play(),g(!0),v.addEventListener("ended",()=>g(!1),{once:!0})):(v.pause(),g(!1)))},className:f.playButton,"aria-label":h?c.intl.string(c.t.hHBkuL):c.intl.string(c.t.RscU7O),children:h?(0,l.jsx)(i.wNq,{size:"xs",color:"currentColor",className:f.playIcon}):(0,l.jsx)(i.o1U,{size:"xs",color:"currentColor",className:f.playIcon})}),(0,l.jsx)("div",{className:f.waveformContainer,children:(0,l.jsx)(d.Z,{className:f.waveform,file:x,audio:v})})]})})},419202:function(e,n,t){function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,{Z:()=>i}),t(518263),t(970173),t(520712),t(268111),t(941497),t(32026),t(480839),t(744285),t(492257),t(873817),t(411104),t(47120),t(724458),t(242167),t(653041);class a{appendBytes(e){if(this._offset+e.length>this._buffer.length){let n=this._offset+e.length,t=new Uint8Array(Math.pow(2,Math.ceil(Math.log2(Math.max(2*this._buffer.length,n)))));t.set(this._buffer.subarray(0,this._offset)),this._buffer=t}this._buffer.set(e,this._offset),this._offset+=e.length}addPage(e){if(e.segments.length>255)throw Error("Too many segments: ".concat(e.segments.length," exceeds limit of ").concat(255));for(let[n,t]of e.segments.entries())if(t.length>255)throw Error("Segment at index ".concat(n," too large (length ").concat(t.length," exceeds ").concat(255,")"));let n=e.segments.reduce((e,n)=>e+n.length,0),t=27+e.segments.length+n;if(t>65307)throw Error("Page too large (size ".concat(t," exceeds ").concat(65307,")"));let l=this._offset,a=0;switch(e.pageType){case 1:a=1;break;case 2:a=2;break;case 4:a=4}this.appendBytes([79,103,103,83,0,a,255&e.granulePosition,e.granulePosition>>8&255,e.granulePosition>>16&255,e.granulePosition>>24&255,0,0,0,0,0,0,0,1,255&this._pageSequenceNumber,this._pageSequenceNumber>>8&255,this._pageSequenceNumber>>16&255,this._pageSequenceNumber>>24&255]);let i=this._offset;for(let n of(this.appendBytes([0,0,0,0,e.segments.length]),this.appendBytes(e.segments.map(e=>e.length)),e.segments))this.appendBytes(n);let r=this._buffer.subarray(l,this._offset).reduce((e,n)=>e<<8>>>0^s[e>>>24^n],0)>>>0;this._buffer.set([255&r,r>>8&255,r>>16&255,r>>24&255],i),this._pageSequenceNumber++}finalize(e){this.addPage({pageType:4,granulePosition:e,segments:[]});let n=this._buffer,t=this._offset;return this._buffer=new Uint8Array(4096),this._offset=0,this._pageSequenceNumber=0,n.subarray(0,t)}constructor(){l(this,"_buffer",new Uint8Array(4096)),l(this,"_pageSequenceNumber",0),l(this,"_offset",0)}}function i(e,n){let t=new Uint8Array([79,112,117,115,72,101,97,100,1,n.channelCount,0,0,255&n.inputSampleRate,n.inputSampleRate>>8&255,n.inputSampleRate>>16&255,n.inputSampleRate>>24&255,255&n.outputGain,n.outputGain>>8&255,n.channelMappingFamily]),l=new Uint8Array([79,112,117,115,84,97,103,115,0,0,0,0,0,0,0,0]),i=new a;i.addPage({pageType:2,granulePosition:0,segments:[t]});let s=0;for(let n of(i.addPage({pageType:0,granulePosition:s,segments:[l]}),e)){let e=function(e){let n=Math.floor(e.length/255),t=[];for(let l=0;l<=n;l++){let a=0===l?0:255*l,i=l===n?e.length:(l+1)*255;t.push(e.slice(a,i))}return t}(n.buffer);s+=n.numSamples,i.addPage({pageType:0,granulePosition:s,segments:e})}return i.finalize(s)}let s=function(){let e=new Uint32Array(256);for(let n=256;n>0;n--){let t=n<<24;for(let e=8;e>0;e--)t=0x80000000&t?0x4c11db7^t<<1:t<<1;e[n]=t}return e}()},758961:function(e,n,t){t.d(n,{default:()=>S}),t(47120),t(411104);var l=t(200651),a=t(192379),i=t(120356),s=t.n(i),r=t(512722),u=t.n(r),o=t(481060),d=t(479531),c=t(493773),f=t(349709),m=t(763610),h=t(626135),g=t(208049),p=t(671895),x=t(586826),v=t(812613),y=t(203437),b=t(710111),N=t(981631),j=t(388032),w=t(373016);let C=[{name:"audio",extensions:["mp3","wav","ogg","opus","x-wav","mp4"]}];function S(e){var n,t,i,r;let{guildId:S,sourceFile:Z,existingSound:M,onClose:k,transitionState:E,showGuildPicker:I=!1}=e,[P,_]=a.useState(null!==(t=null!==(n=null==Z?void 0:Z.name)&&void 0!==n?n:null==M?void 0:M.name)&&void 0!==t?t:""),[R,T]=a.useState(null!==(i=null==M?void 0:M.volume)&&void 0!==i?i:1),[F,D]=a.useState(null==M?void 0:M.emojiId),[z,O]=a.useState(null==M?void 0:M.emojiName),{file:A,loadAudioFromFile:L,maxVolume:B,setMaxVolume:U}=(0,x.p)(),[G,H]=a.useState(!1),[W,q]=a.useState(null),[V,Y]=a.useState(null),[J,X]=a.useState("ready"),[K,Q]=a.useState(S);async function $(e){try{await L(null!=e?e:null),X("ready"),q(null)}catch(e){ee(e)}}function ee(e){if(e instanceof d.Z)q(e);else if(e instanceof Error){let n={status:500,body:{message:e.message}};q(new d.Z(n))}else q(new d.Z(e))}a.useEffect(()=>{(null==Z?void 0:Z.file)!=null&&!async function(e){try{await L(e),X("ready"),q(null)}catch(e){ee(e)}}(Z.file)},[null==Z?void 0:Z.file,L]);let en=function(e){switch(e){case"encoding":return j.intl.string(j.t["4IMMdH"]);case"encoding-failed":return j.intl.string(j.t.Ka29xs);case"uploading":return j.intl.string(j.t.ndr58f)}return null}(J),et="uploading"===J||"encoding"===J,el=null!=M,ea=P.length>=2&&(el||null!=A)&&null!=K&&function(e){if(null==e)return!0;let n=(e.endMs-e.startMs)/1e3;return n>0&&n<=b.YW}(V),ei=a.useCallback(async(e,n)=>{X("encoding");try{let t=await (0,v.kV)(e,n);return X("ready"),t}catch(e){throw X("encoding-failed"),e}},[]),es=a.useCallback(async()=>{if(null==A)return;u()(null!=K,"Cannot submit soundboard sound with no guildId");let e=A;if(null!=V){let n=await ei(A,V);if(null==n)return;e=n}let n=(0,v.Zk)(e);X("uploading");try{await (0,v.bb)({readPromise:n,guildId:K,name:P,volume:R,emojiId:F,emojiName:z}),X("ready")}catch(e){throw new d.Z(e)}},[A,K,P,ei,V,R,F,z]),er=a.useCallback(async()=>{u()(null!=K,"Cannot submit soundboard sound with no guildId"),H(!0),q(null);try{el?await (0,g.$d)({guildId:K,soundId:M.soundId,name:P,volume:R,emojiId:F,emojiName:z}):await es(),k()}catch(e){ee(e)}finally{X("ready"),H(!1),T(1),U(1)}},[el,k,K,M,P,R,F,z,es,U]);(0,c.ZP)(()=>{L(null),h.default.track(N.rMx.OPEN_MODAL,{type:"Soundboard Upload Sound",guild_id:K})}),a.useEffect(()=>{T(Math.min(R,B))},[R,T,B]);let eu=(0,l.jsx)(f.Z,{guildId:K,emojiId:F,emojiName:z,setEmojiId:D,setEmojiName:O,error:null==W?void 0:W.getFirstFieldErrorMessage("emoji"),isRequiredField:!1});return(0,l.jsxs)(o.Y0X,{transitionState:E,children:[(0,l.jsx)(o.olH,{onClick:k,className:w.modalClose}),(0,l.jsx)(o.xBx,{className:w.headerContainer,separator:!1,children:(0,l.jsx)(o.X6q,{className:w.header,variant:"heading-xl/extrabold",children:el?j.intl.string(j.t.HmsZGR):j.intl.string(j.t["ioD/9P"])})}),(0,l.jsxs)(o.hzk,{className:w.__invalid_content,children:[null!=W&&!W.hasFieldErrors()&&(0,l.jsx)(o.kzN,{className:w.section,children:W.message}),I?(0,l.jsx)(o.xJW,{required:!0,className:w.section,title:j.intl.string(j.t.UYt7iY),children:(0,l.jsx)(y.Z,{value:K,onChange:Q})}):null,(el||null!=A)&&(0,l.jsx)(p.Z,{sound:M,volume:R,disabled:et,onChange:Y}),el||null!=Z?null:(0,l.jsx)(o.xJW,{required:!0,error:null==W?void 0:W.getFirstFieldErrorMessage("sound"),className:w.section,title:j.intl.string(j.t.sSHaGx),children:(0,l.jsx)(m.Z,{filename:null!==(r=null==A?void 0:A.name)&&void 0!==r?r:"",buttonText:j.intl.string(j.t.zpi3XF),placeholder:j.intl.string(j.t["x+YULy"]),onFileSelect:$,filters:C})}),(0,l.jsxs)("div",{className:w.multiInput,children:[(0,l.jsx)(o.xJW,{required:!0,error:null==W?void 0:W.getFirstFieldErrorMessage("name"),className:s()(w.section,w.halfInput),title:j.intl.string(j.t.NpJGaG),children:(0,l.jsx)(o.oil,{placeholder:j.intl.string(j.t.NpJGaG),value:P,onChange:_,maxLength:b.Ek})}),eu]}),(0,l.jsx)(o.xJW,{error:null==W?void 0:W.getFirstFieldErrorMessage("volume"),className:w.section,title:j.intl.string(j.t["3CJlb2"]),children:(0,l.jsx)(o.iRW,{initialValue:R,onValueChange:e=>T(e),minValue:0,maxValue:B})})]}),(0,l.jsxs)(o.mzw,{children:[(0,l.jsx)(o.zxk,{disabled:!ea,submitting:G,size:o.zxk.Sizes.SMALL,onClick:er,children:el?j.intl.string(j.t["bZY17+"]):j.intl.string(j.t.RGJbYG)}),(0,l.jsx)(o.zxk,{disabled:G,onClick:k,size:o.zxk.Sizes.SMALL,look:o.zxk.Looks.LINK,color:o.zxk.Colors.PRIMARY,children:j.intl.string(j.t.Khpixc)}),null!=en&&(0,l.jsx)("div",{className:w.soundStateHint,children:(0,l.jsx)(o.Text,{variant:"text-xs/normal",color:"text-muted",children:en})})]})]})}},203437:function(e,n,t){t.d(n,{Z:()=>C}),t(47120);var l=t(200651),a=t(192379),i=t(120356),s=t.n(i),r=t(442837),u=t(481060),o=t(565138),d=t(357156),c=t(430824),f=t(496675),m=t(771845),h=t(594174),g=t(267642),p=t(709054),x=t(208049),v=t(763296),y=t(710111),b=t(981631),N=t(388032),j=t(399262);function w(e){let{availableSlots:n,className:t}=e;return(0,l.jsxs)(u.Text,{className:s()(j.suffixNode,t),variant:"text-sm/medium",color:"text-primary",children:[(0,l.jsx)(u.gj8,{size:"md",color:"currentColor",className:j.speakerIcon}),N.intl.format(N.t["8Dyg1N"],{slots:n})]})}function C(e){let{value:n,className:t,onChange:i}=e,C=(0,r.cj)([m.ZP,f.Z,h.default,c.Z],()=>{let e={};for(let n of m.ZP.getFlattenedGuildIds()){let t=c.Z.getGuild(n);null!=t&&(0,d.Gw)(t,f.Z,h.default).canCreateExpressions&&(e[t.id]=t)}return e}),S=(0,r.cj)([v.Z],()=>{let e={};for(let[t,l]of p.default.entries(C)){var n;let a=(0,g.yw)(l,null!==(n=v.Z.getSoundsForGuild(t))&&void 0!==n?n:y.Hy,l.premiumTier);e[t]=a}return e},[C]);a.useEffect(()=>{(0,x.w)()},[]);let Z=a.useMemo(()=>Object.values(C).map(e=>{let{name:n,id:t}=e;return{label:n,value:t,disabled:S[t]<=0}}),[C,S]),M=a.useCallback(e=>null==e||""===e.value?null:(0,l.jsx)(o.Z,{className:s()(j.guildSelectOptionIcon,{[j.disabledOption]:e.disabled}),guild:C[e.value],size:o.Z.Sizes.SMOL,active:!0}),[C]),k=a.useCallback(e=>{let n=null==e?void 0:e.value;return null==n||""===n?null:(0,l.jsx)(w,{className:s()({[j.disabledOption]:null==e?void 0:e.disabled}),availableSlots:S[n]})},[S]),E=a.useCallback(e=>(0,l.jsx)("div",{className:s()({[j.disabledOption]:e.disabled}),children:e.label}),[]),I=a.useCallback(e=>{S[e]<=0||i(e)},[S,i]),P=(()=>{let e=S[null!=n?n:b.lds];return null==e||e>0?n:void 0})();return(0,l.jsx)(u.VcW,{className:t,onChange:I,value:P,multi:!1,options:Z,renderOptionPrefix:M,renderOptionSuffix:k,renderOptionLabel:E,placeholder:0===Z.length?N.intl.string(N.t.O3i2gY):N.intl.string(N.t.CunCMD)})}}}]);
//# sourceMappingURL=f6e0f9ce2110a2eb.js.map