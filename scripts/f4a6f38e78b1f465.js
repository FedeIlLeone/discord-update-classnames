"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["30556"],{294596:function(e){e.exports="/assets/f9951f6f63451f68.svg"},188003:function(e){e.exports="/assets/1243734d7e2a4654.png"},579055:function(e){e.exports="/assets/8068c1873bb18d03.svg"},733427:function(e,t,n){n.d(t,{Z:()=>o});var r=n(192379);let o=()=>{let e=r.useRef(!0);return r.useEffect(()=>()=>{e.current=!1},[]),r.useCallback(()=>e.current,[])}},169382:function(e,t,n){n.d(t,{l:()=>c}),n(610138),n(216116),n(78328),n(815648),n(47120);var r=n(192379),o=n(512969);function c(){let e=(0,o.TH)();return r.useMemo(()=>new URLSearchParams(e.search),[e.search])}},656649:function(e,t,n){n.d(t,{KJ:()=>d,UV:()=>u,vJ:()=>s});var r=n(200651);n(192379);var o=n(120356),c=n.n(o),i=n(726542),l=n(981631),a=n(490730);function s(e){return null!=e&&Object.values(l.ABu).includes(e)?e:null}function u(e){let{children:t,platformType:n}=e,o=i.Z.get(n);return(0,r.jsx)("div",{className:a.verifyConnectedAccount,children:(0,r.jsxs)("div",{children:[(0,r.jsx)(d,{platform:o}),t]})})}function d(e){let{platform:t,className:n}=e;return(0,r.jsxs)("div",{className:c()(a.logos,n),children:[(0,r.jsx)("div",{className:c()(a.logo,a.logoDiscord)}),(0,r.jsx)("div",{className:a.logosDivider}),(0,r.jsx)("div",{className:a.logo,style:{backgroundImage:'url("'.concat(t.icon.whiteSVG,'")')}})]})}},675207:function(e,t,n){n.r(t),n.d(t,{VerifyAccountDeekLink:()=>h,VerifyAccountLoading:()=>_,default:()=>S}),n(47120),n(757143),n(773603);var r=n(200651),o=n(192379),c=n(512969),i=n(873546),l=n(604039),a=n(481060),s=n(457330),u=n(733427),d=n(169382),f=n(726542),N=n(536285),p=n(591759),g=n(656649),v=n(981631),C=n(388032),m=n(636662);let O=null!=window.opener;function S(){var e,t;let n=(0,c.k6)(),a=(0,d.l)(),N=a.get("code"),C=a.get("oauth_verifier"),m=null!==(e=a.get("state"))&&void 0!==e?e:"",S=a.get("loading"),x=null!==(t=a.get("iss"))&&void 0!==t?t:void 0,{type:y}=(0,c.UO)(),j=(0,g.vJ)(y),[Z,A]=o.useState(!1),[T,w]=o.useState(!1),k=(0,u.Z)(),D=null==C?null!=N?N:"":C;o.useEffect(()=>{let e;if(null!=S)return;for(let t of a.keys())t.startsWith("openid.")&&(null==e&&(e={}),e[t]=a.get(t));let t=(0,g.vJ)(y);(async function(){if(null==t||!f.Z.isSupported(t))return;function r(e){let{status:r,body:o}=e;if(null!=t){if(null==o?void 0:o.redirect){window.location=o.redirect;return}if([200,204].includes(r)){n.replace(v.Z5c.CONNECTIONS_SUCCESS(t)),O&&window.close();return}(null==o?void 0:o.code)!=null&&a.append("error-code",o.code),n.replace("".concat(v.Z5c.CONNECTIONS_ERROR(t),"?").concat(a.toString()))}}if(await E({platformType:t,code:D,state:m,openidParams:e,iss:x,handleCallbackResponse:r}))return;let o=await R(t,m,D,e,x);if(0===o){A(!0);return}if(1===o){n.replace("".concat(v.Z5c.CONNECTIONS_ERROR(t),"?").concat(a.toString()));return}if(3===o){if(i.tq){w(!0);return}n.replace("".concat(v.Z5c.CONNECTIONS_ERROR(t),"?").concat(a.toString()));return}b({platformType:t,state:m,handleCallbackResponse:r,handleCallbackError:()=>{n.replace("".concat(v.Z5c.CONNECTIONS_ERROR(t),"?").concat(a.toString()))},openidParams:e,code:D,iss:x})})()},[D,n,S,y,a,m,x]),o.useEffect(()=>{let e;if(!Z)return;let t=0;async function r(){if(null==j)return;let{handoff_status:o,success_redirect:c}=(await s.Z.getHandoffStatus(j,m)).body;if(o===l.g.HANDOFF_SUCCESS)return null==p.Z.toURLSafe(c)?n.replace(v.Z5c.CONNECTIONS_SUCCESS(j)):(window.location=c,void 0);if(o===l.g.HANDOFF_ERROR||t>=10)return n.replace(v.Z5c.CONNECTIONS_ERROR(j));e=setTimeout(()=>{k()&&(t+=1,r())},1e3)}return r(),()=>{null!=e&&clearTimeout(e)}},[k,n,j,Z,m]);let F=o.useMemo(()=>{if(null!=j)return"discord://".concat(v.Z5c.CONNECTIONS(j),"/?").concat(a.toString())},[j,a]);return null!=j&&f.Z.isSupported(j)?T?(0,r.jsx)(h,{platformType:j,deeplink:F,onClick:()=>{w(!1),A(!0)}}):(0,r.jsx)(_,{platformType:j}):null}function _(e){let{platformType:t}=e,n=f.Z.get(t);return(0,r.jsxs)(g.UV,{platformType:t,children:[(0,r.jsx)("div",{className:m.message,children:C.intl.format(C.t.AOKOe3,{name:n.name})}),(0,r.jsx)("div",{className:m.buttonContainer,children:(0,r.jsx)(a.zxk,{className:m.btn,disabled:!0,children:(0,r.jsx)(a.$jN,{itemClassName:m.spinnerItem})})})]})}function h(e){let{deeplink:t,onClick:n,platformType:o}=e,c=f.Z.get(o);return(0,r.jsx)(g.UV,{platformType:o,children:(0,r.jsxs)("div",{className:m.buttonContainer,children:[(0,r.jsx)("div",{className:m.message,children:C.intl.format(C.t["6ig6i4"],{connectionName:c.name})}),(0,r.jsx)(a.P3F,{tag:"a",href:t,onClick:n,target:"_self",children:(0,r.jsx)(a.zxk,{className:m.btn,children:C.intl.string(C.t.flvacH)})})]})})}async function E(e){let{platformType:t,code:n,state:r,openidParams:o,iss:c,handleCallbackResponse:l}=e;if(i.tq||O)return!1;try{let e=await N.default.request(v.Etm.CONNECTIONS_CALLBACK,{code:n,openid_params:o,iss:c,state:r,providerType:t}).finally(()=>{N.default.disconnect()});return l(e),!0}catch(e){return!1}}async function R(e,t,n,r,o){try{return await s.Z.sessionHandoff(e,t,n,r,o),0}catch(e){var c,i;if((null==e?void 0:null===(c=e.body)||void 0===c?void 0:c.code)===10020)return 2;if((null==e?void 0:null===(i=e.body)||void 0===i?void 0:i.code)===40001)return 3;return 1}}async function b(e){let{platformType:t,state:n,handleCallbackResponse:r,handleCallbackError:o,openidParams:c,code:i,iss:l}=e;try{let e=await s.Z.callback(t,{code:i,openid_params:c,state:n,iss:l},!O);return r(e),!0}catch(e){return o(),!0}}},604039:function(e,t,n){n.d(t,{g:()=>o});var r,o=((r={})[r.HANDOFF_AUTHORIZED=0]="HANDOFF_AUTHORIZED",r[r.HANDOFF_ERROR=1]="HANDOFF_ERROR",r[r.HANDOFF_SUCCESS=2]="HANDOFF_SUCCESS",r)},490730:function(e,t,n){e.exports={verifyConnectedAccount:"verifyConnectedAccount_fb52a4",logos:"logos_fb52a4",logosDivider:"logosDivider_fb52a4",logo:"logo_fb52a4",logoDiscord:"logoDiscord_fb52a4"}},636662:function(e,t,n){e.exports={buttonContainer:"buttonContainer_eeed5f",message:"message_eeed5f",btn:"btn_eeed5f",spinnerItem:"spinnerItem_eeed5f"}}}]);
//# sourceMappingURL=f4a6f38e78b1f465.js.map