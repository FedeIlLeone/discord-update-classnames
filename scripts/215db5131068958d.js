"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["49508"],{260722:function(t,e,n){n.d(e,{Yw:()=>o,ZP:()=>_,fc:()=>E,qd:()=>d});var i=n(544891),r=n(570140),l=n(626135),a=n(292352),s=n(981631);async function o(t,e){await i.tn.patch({url:s.ANM.FAMILY_CENTER_LINKED_USERS,body:{linked_user_id:t,link_status:e},rejectWithError:!1}).then(t=>{let{body:e}=t;return r.Z.dispatch({type:"FAMILY_CENTER_REQUEST_LINK_UPDATE_SUCCESS",linkedUsers:e}),e})}async function E(t){await i.tn.del({url:s.ANM.FAMILY_CENTER_LINKED_USERS,body:{linked_user_id:t},rejectWithError:!1}).then(e=>{let{body:n}=e;return r.Z.dispatch({type:"FAMILY_CENTER_REQUEST_LINK_REMOVE_SUCCESS",linkedUsers:n,deletedUserId:t}),n})}async function d(){await i.tn.get({url:s.ANM.FAMILY_CENTER_LINK_CODE,rejectWithError:!1}).then(t=>{let{body:e}=t,n=e.link_code;return r.Z.dispatch({type:"FAMILY_CENTER_LINK_CODE_FETCH_SUCCESS",linkCode:n}),n})}let _={async initialPageLoad(){var t,e,n,l;r.Z.dispatch({type:"FAMILY_CENTER_FETCH_START"});let{body:a}=await i.tn.get({url:s.ANM.FAMILY_CENTER_TEEN_ACTIVITY_ME,rejectWithError:!1}),{teen_audit_log:o,linked_users:E,users:d}=a,_={teenId:null==o?void 0:o.teen_user_id,rangeStartId:null==o?void 0:o.range_start_id,totals:null!==(t=null==o?void 0:o.totals)&&void 0!==t?t:{},actions:null!==(e=null==o?void 0:o.actions)&&void 0!==e?e:[],users:null!==(n=null==o?void 0:o.users)&&void 0!==n?n:[],guilds:null!==(l=null==o?void 0:o.guilds)&&void 0!==l?l:[]};return r.Z.dispatch({type:"FAMILY_CENTER_INITIAL_LOAD",familyCenterTeenActivity:_,linkedUsers:E,users:d}),_},async fetchLinkedUsers(){let{body:t}=await i.tn.get({url:s.ANM.FAMILY_CENTER_LINKED_USERS,rejectWithError:!1}),e={linkedUsers:t.linked_users,users:t.users};return r.Z.dispatch({type:"FAMILY_CENTER_LINKED_USERS_FETCH_SUCCESS",...e}),e},async requestLink(t,e){let{body:n}=await i.tn.post({url:s.ANM.FAMILY_CENTER_LINKED_USERS,body:{recipient_id:t,code:e},rejectWithError:!1}),l={linkedUsers:n.linked_users,users:n.users};return r.Z.dispatch({type:"FAMILY_CENTER_REQUEST_LINK_SUCCESS",...l}),l},async fetchTeenActivity(t){r.Z.dispatch({type:"FAMILY_CENTER_FETCH_START"});let e=s.ANM.FAMILY_CENTER_TEEN_ACTIVITY(t),{body:n}=await i.tn.get({url:e,rejectWithError:!1}),l=n.teen_audit_log,a={teenId:l.teen_user_id,rangeStartId:l.range_start_id,totals:l.totals,actions:l.actions,users:l.users,guilds:l.guilds};return r.Z.dispatch({type:"FAMILY_CENTER_TEEN_ACTIVITY_FETCH_SUCCESS",familyCenterTeenActivity:a}),a},async fetchMoreTeenActivity(t,e,n,o){let{body:E}=await i.tn.get({url:s.ANM.FAMILY_CENTER_TEEN_ACTIVITY_MORE(t,e,n,o),rejectWithError:!1}),{teen_audit_log:d}=E,_={teenId:d.teen_user_id,rangeStartId:d.range_start_id,actions:d.actions,users:d.users,guilds:d.guilds};return l.default.track(s.rMx.FAMILY_CENTER_ACTION,{action:a.YC.LoadMore,selected_teen_id:t,action_display_type:e}),r.Z.dispatch({type:"FAMILY_CENTER_TEEN_ACTIVITY_MORE_FETCH_SUCCESS",familyCenterTeenActivity:_}),d},selectTab(t){r.Z.dispatch({type:"FAMILY_CENTER_HANDLE_TAB_SELECT",tab:t})}}},292352:function(t,e,n){n.d(e,{AG:()=>c,MY:()=>y,Mu:()=>D,Of:()=>T,QH:()=>M,TX:()=>m,Wz:()=>F,YC:()=>Y,_6:()=>U,_w:()=>A,dG:()=>f,f2:()=>g,i0:()=>S,iB:()=>N,ip:()=>C,ix:()=>R,ne:()=>p,tx:()=>h,vH:()=>L,zE:()=>I}),n(47120);var i,r,l,a,s,o,E,d=n(860911),_=n(70956),u=n(388032);let T=30*_.Z.Millis.SECOND,c=8,S=3,I=26,C=64,A=(t,e)=>"https://discord.com/feature/family-center/my-family/".concat(t,"/").concat(e),N=4,g=5*_.Z.Millis.MINUTE,L="https://www.youtube.com/watch?v=dQw4w9WgXcQ",R=(0,d.Ft)(Object.freeze({FAMILY_CENTER_SETTINGS:"/family-center/settings",FAMILY_CENTER_MY_FAMILY:"/family-center/my-family"}),[":","?","@"]);var p=((i={})[i.PENDING=1]="PENDING",i[i.ACTIVE=2]="ACTIVE",i[i.INACTIVE=3]="INACTIVE",i[i.DECLINED=4]="DECLINED",i[i.EXPIRED=5]="EXPIRED",i),y=((r={})[r.USER_ADD=1]="USER_ADD",r[r.GUILD_ADD=2]="GUILD_ADD",r[r.USER_INTERACTION=3]="USER_INTERACTION",r[r.GUILD_INTERACTION=4]="GUILD_INTERACTION",r[r.USER_CALLED=5]="USER_CALLED",r),f=((l={}).ACTIVITY="ACTIVITY",l.REQUESTS="REQUESTS",l.SETTINGS="SETTINGS",l),M=((a={})[a.ACTIVITY=0]="ACTIVITY",a[a.REQUESTS=1]="REQUESTS",a[a.SETTINGS=2]="SETTINGS",a),D=((s={}).SIDENAV="SIDENAV",s.SETTINGS="SETTINGS",s),U=((o={})[o.SIDENAV=0]="SIDENAV",o[o.SETTINGS=1]="SETTINGS",o),Y=((E={})[E.TabChange=0]="TabChange",E[E.ShowQRCodeModal=1]="ShowQRCodeModal",E[E.RevealQRCode=2]="RevealQRCode",E[E.ScanQRCodeButton=3]="ScanQRCodeButton",E[E.ScanQRCode=4]="ScanQRCode",E[E.LoadMore=5]="LoadMore",E[E.SelectTeen=6]="SelectTeen",E[E.HideQRCode=7]="HideQRCode",E);let h=new Map([[3,{tooltipHeader:()=>u.intl.string(u.t.kvTgWF),tooltipDescription:t=>t?u.intl.string(u.t.cY19ub):u.intl.string(u.t["K5r+sL"]),sectionHeader:t=>u.intl.formatToPlainString(u.t["4T3zWV"],{count:t}),sectionDescription:t=>t?u.intl.string(u.t.cY19ub):u.intl.string(u.t["K5r+sL"]),timestampFormatter:()=>({today:u.intl.string(u.t.fLBUx8),yesterday:u.intl.string(u.t.cHHgxM),days:u.t.qvKjp6})}],[5,{tooltipHeader:()=>u.intl.string(u.t.D7Sng4),tooltipDescription:t=>t?u.intl.string(u.t["w7j/Li"]):u.intl.string(u.t.SCIaWF),sectionHeader:t=>u.intl.formatToPlainString(u.t["0GE4Nj"],{count:t}),sectionDescription:t=>t?u.intl.string(u.t["w7j/Li"]):u.intl.string(u.t.SCIaWF),timestampFormatter:()=>({today:u.intl.string(u.t.IHd5cX),yesterday:u.intl.string(u.t.wOsfxs),days:u.t.oCk8c3})}],[1,{tooltipHeader:()=>u.intl.string(u.t.kIcKAg),tooltipDescription:t=>t?u.intl.string(u.t.HvsFJS):u.intl.string(u.t["1/QpPz"]),sectionHeader:t=>u.intl.formatToPlainString(u.t["TEvo+P"],{count:t}),sectionDescription:t=>t?u.intl.string(u.t.HvsFJS):u.intl.string(u.t["1/QpPz"]),timestampFormatter:()=>({today:u.intl.string(u.t.JUHIYW),yesterday:u.intl.string(u.t.GiswUV),days:u.t.fwQgEx})}],[2,{tooltipHeader:()=>u.intl.string(u.t["NulX9/"]),tooltipDescription:t=>t?u.intl.string(u.t.Lmz9Vl):u.intl.string(u.t.MTFxYW),sectionHeader:t=>u.intl.formatToPlainString(u.t["7feG7e"],{count:t}),sectionDescription:t=>t?u.intl.string(u.t.Lmz9Vl):u.intl.string(u.t.MTFxYW)}],[4,{tooltipHeader:()=>u.intl.string(u.t.CcrbCw),tooltipDescription:v,sectionHeader:t=>u.intl.formatToPlainString(u.t.rcPInZ,{count:t}),sectionDescription:v}]]);function v(t,e){return t?e?u.intl.string(u.t.c0NgBQ):u.intl.string(u.t.dcvNX1):e?u.intl.string(u.t.DLVyFx):u.intl.string(u.t["823ugY"])}let m=()=>({seconds:u.intl.string(u.t.CJdoeX),minutes:u.t.InzMn5,hours:u.t.ErkYCA,yesterday:u.intl.string(u.t.GvfssL),days:u.t.pWig19,date:u.t.MP3kho}),F=()=>({seconds:u.intl.string(u.t.BqsamZ),minutes:u.t.kX3wJi,hours:u.t.J18GbG,yesterday:u.intl.string(u.t.Ln9zMj),days:u.t.WRtyS0,date:u.t.Y3ZYtL})},735079:function(t,e,n){n.d(e,{J:()=>r});var i=n(601964);class r extends i.ZP{constructor(t){var e,n;super(t),n=void 0,(e="approximateMemberCount")in this?Object.defineProperty(this,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[e]=n,this.approximateMemberCount=t.approximate_member_count}}},914788:function(t,e,n){n.d(e,{Z:()=>z}),n(724458),n(47120),n(653041);var i,r,l,a,s=n(133080),o=n(412788),E=n(594174),d=n(709054),_=n(260722),u=n(735079),T=n(546791),c=n(292352);function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let I=null,C=null,A={},N=U(),g=Y(),L=null,R=(null===(r=window)||void 0===r?void 0:null===(i=r.location)||void 0===i?void 0:i.pathname)===c.ix.FAMILY_CENTER_MY_FAMILY?c.dG.REQUESTS:(null===(a=window)||void 0===a?void 0:null===(l=a.location)||void 0===l?void 0:l.pathname)===c.ix.FAMILY_CENTER_SETTINGS?c.dG.SETTINGS:c.dG.ACTIVITY,p=!1,y=!1,f=null,M=null,D={};function U(){return{[c.MY.USER_ADD]:{},[c.MY.GUILD_ADD]:{},[c.MY.USER_INTERACTION]:{},[c.MY.GUILD_INTERACTION]:{},[c.MY.USER_CALLED]:{}}}function Y(){return{[c.MY.USER_ADD]:0,[c.MY.GUILD_ADD]:0,[c.MY.USER_INTERACTION]:0,[c.MY.GUILD_INTERACTION]:0,[c.MY.USER_CALLED]:0}}function h(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return arguments.length>1&&arguments[1],A=t.length>0?t.reduce((t,e)=>({...t,[e.user_id]:e}),{}):{}}function v(t){void 0!==t&&(g=t)}function m(t,e){let n=e?N:U();return N=t.reduce((t,e)=>{let i=e.display_type;return void 0!==n[i]&&void 0===n[i][e.event_id]&&(t[i][e.event_id]=e),t},n)}function F(t){D=t.reduce((t,e)=>({...t,[e.id]:new u.J(e)}),D)}function O(){y=!0}function w(t){let{linkedUsers:e,familyCenterTeenActivity:n}=t,{actions:i,guilds:r,totals:l,teenId:a,rangeStartId:s}=n;I=a,C=s,m(i),v(l),F(r),h(e),y=!1,f=d.default.fromTimestamp(Date.now()),p=!0}function H(t){let{linkedUsers:e}=t;h(e)}function b(t){let{linkedUsers:e}=t;h(e)}function G(t){let{familyCenterTeenActivity:e}=t;if(void 0===e)return;let{actions:n,totals:i,guilds:r,teenId:l,rangeStartId:a}=e;I=l,C=a,m(n),v(i),F(r),y=!1,f=d.default.fromTimestamp(Date.now())}function k(t){let{familyCenterTeenActivity:e}=t,{actions:n,guilds:i}=e;m(n,!0),F(i)}function V(t){let{linkedUsers:e}=t;h(e)}function Q(t){let{linkedUsers:e}=t;h(e,!0)}function P(t){let{linkCode:e}=t;L=e}function Z(t){let{tab:e}=t;R=e}function j(t){let{user:e}=t;if(void 0===e.linked_users)return;let n=E.default.getUsers();e.linked_users.some(t=>{let{user_id:e}=t;return void 0===n[e]})&&e.linked_users.length>Object.keys(A).length?_.ZP.fetchLinkedUsers():h(e.linked_users)}function x(t){var e;let{countryCode:n}=t;null!=n&&(M=null!==(e=(0,s.Zz)(n))&&void 0!==e?e:null)}function K(){I=null,C=null,A={},N=U(),g=Y(),D={},y=!1,f=null}class W extends o.Z{initialize(){this.waitFor(E.default)}loadCache(){let t=this.readSnapshot(W.LATEST_SNAPSHOT_VERSION);null!=t&&(h(t.linkedUsers),F(t.guilds),m(t.teenActivity),g=t.teenActivityTotals.reduce((t,e)=>{let[n,i]=e.split(":"),r=(0,T.jV)(n);return void 0===r?t:{...t,[r]:parseInt(i,10)}},Y()))}takeSnapshot(){return{version:W.LATEST_SNAPSHOT_VERSION,data:{linkedUsers:Object.values(A),teenActivityTotals:Object.entries(g).map(t=>{let[e,n]=t;return"".concat(e,":").concat(n)}),teenActivity:function(){let t=[];return Object.entries(N).forEach(e=>{let[n,i]=e;t.push(...Object.values(i))}),t}(),guilds:Object.values(D)}}}getSelectedTeenId(){return I}getLinkedUsers(){return A}getLinkTimestamp(t){var e;let n=A[t];return null==n?null:null!==(e=n.updated_at)&&void 0!==e?e:n.created_at}getRangeStartTimestamp(){return null==C?null:d.default.extractTimestamp(C)}getActionsForDisplayType(t){return Object.values(N[t])}getTotalForDisplayType(t){return g[t]}getLinkCode(){return L}getGuild(t){return D[t]}getSelectedTab(){return R}getStartId(){return C}getIsInitialized(){return p}getUserCountry(){return M}isLoading(){return y}canRefetch(){return null===f||d.default.age(f)>c.Of}constructor(){super({CURRENT_USER_UPDATE:j,CACHE_LOADED_LAZY:()=>this.loadCache(),FAMILY_CENTER_INITIAL_LOAD:w,FAMILY_CENTER_FETCH_START:O,FAMILY_CENTER_LINKED_USERS_FETCH_SUCCESS:H,FAMILY_CENTER_TEEN_ACTIVITY_FETCH_SUCCESS:G,FAMILY_CENTER_TEEN_ACTIVITY_MORE_FETCH_SUCCESS:k,FAMILY_CENTER_REQUEST_LINK_SUCCESS:b,FAMILY_CENTER_REQUEST_LINK_UPDATE_SUCCESS:V,FAMILY_CENTER_REQUEST_LINK_REMOVE_SUCCESS:Q,FAMILY_CENTER_LINK_CODE_FETCH_SUCCESS:P,FAMILY_CENTER_HANDLE_TAB_SELECT:Z,SET_LOCATION_METADATA:x,LOGOUT:K})}}S(W,"displayName","FamilyCenterStore"),S(W,"LATEST_SNAPSHOT_VERSION",3);let z=new W},546791:function(t,e,n){n.d(e,{LI:()=>E,Qr:()=>o,f0:()=>u,iB:()=>_,jV:()=>T,lx:()=>d,t3:()=>s}),n(47120);var i=n(913527),r=n.n(i),l=n(292352),a=n(388032);let s=()=>({today:a.intl.string(a.t.VjIAQU),yesterday:a.intl.string(a.t["2a8xHR"]),days:a.t.Xt6oND}),o=t=>t?{today:a.intl.string(a.t["2AtcIi"]),yesterday:a.intl.string(a.t.stOECg),days:a.t.n8n5BQ}:{today:a.intl.string(a.t.g1ZX6u),yesterday:a.intl.string(a.t.s3qSVl),days:a.t.f1UJiI},E=(t,e,n)=>{let i=r()().diff(r()(t),"s"),l=e(),s=r()(t).format("LL");return i<86400?l.today:i<172800?l.yesterday:a.intl.formatToPlainString(l.days,{days:Math.min(Math.floor(i/86400),null!=n?n:999)})},d=(t,e)=>{let n=r()().diff(r()(t),"s"),i=e(),l=r()(t).format("LL");return n<60?i.seconds:n<3600?a.intl.formatToPlainString(i.minutes,{count:Math.floor(n/60)}):n<86400?a.intl.formatToPlainString(i.hours,{count:Math.floor(n/3600)}):n<172800?i.yesterday:n<604800?a.intl.formatToPlainString(i.days,{count:Math.floor(n/86400)}):a.intl.formatToPlainString(i.date,{date:l})},_=t=>t.display_type===l.MY.USER_ADD||t.display_type===l.MY.USER_INTERACTION||t.display_type===l.MY.USER_CALLED,u=t=>t.display_type===l.MY.GUILD_ADD||t.display_type===l.MY.GUILD_INTERACTION,T=t=>{for(let e of Object.values(l.MY))if(e.toString()===t)return e}},485664:function(t,e,n){n.d(e,{Q:()=>u,o:()=>_}),n(47120);var i=n(192379),r=n(399606),l=n(823162),a=n(706454),s=n(914788),o=n(880257);let E=new Set(["US"]),d=new Set(["en-US","es-ES"]),_=()=>{let t=(0,o.Z)(),e=(0,r.e7)([s.Z],()=>s.Z.getUserCountry()),n=(0,r.e7)([a.default],()=>a.default.locale);return i.useEffect(()=>{null==e&&(0,l.hi)()},[e]),!t&&null!=e&&E.has(e.alpha2)&&d.has(n)},u=()=>{let t=(0,o.Z)(),e=_();return!t&&!e}},880257:function(t,e,n){n.d(e,{Z:()=>l});var i=n(442837),r=n(594174);function l(){return(0,i.e7)([r.default],()=>{var t;return null===(t=r.default.getCurrentUser())||void 0===t?void 0:t.nsfwAllowed})}}}]);
//# sourceMappingURL=215db5131068958d.js.map