"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["5945"],{296991:function(e,n,l){l.d(n,{k:()=>T}),l(47120);var t=l(200651),a=l(192379),i=l(120356),r=l.n(i),o=l(97613),s=l.n(o),u=l(999153),c=l(584922),d=l(442837),x=l(481060),g=l(541716),p=l(752305),m=l(893718),_=l(592125),h=l(984933),C=l(540457),b=l(681460),f=l(592286),v=l(981631),I=l(388032),k=l(765622);let j="RULE";function N(e){let{rule:n,rulesChannel:l,index:i,onChange:o,onKeyDown:s,onClear:d,onRuleReorder:_,isDropHovered:h,focused:C,onFocus:b,previewEnabled:v,isDragEnabled:N}=e,T=a.useRef(null),R=a.useRef(null),[{textValue:E,richValue:S},y]=a.useState((0,p.eK)(n.value)),[,z,L]=(0,u.c)({type:j,item:{rule:n,index:i},end:(e,n)=>{null==e||n.didDrop()||_(e.rule,null,!0)}}),[,A]=(0,c.L)({accept:j,hover:(e,n)=>{var l;let{index:t}=e,a=null===(l=T.current)||void 0===l?void 0:l.getBoundingClientRect(),r=n.getClientOffset();if(null==a||null==r)return;let o=(a.bottom-a.top)/2,s=r.y-a.top;t<i&&s<o||t>i&&s>o||_(e.rule,i,!1)},drop:e=>{_(e.rule,i,!0)}});if(a.useLayoutEffect(()=>(z(R),L(A(T)),()=>{z(null),A(null)}),[z,A,L]),a.useEffect(()=>{""!==n.value&&""===E&&y((0,p.eK)(n.value))},[n.value,E]),null==l)return null;let B=""!==n.value?n.value:n.id;return(0,t.jsx)("div",{ref:T,className:r()(k.draggableInputContainer,{[k.dragging]:h}),"data-dnd-name":B,children:(0,t.jsxs)("div",{className:k.inputWrapper,children:[(0,t.jsx)(x.P3F,{onMouseDown:()=>b(i),children:(0,t.jsx)(m.Z,{innerClassName:k.rulesTextAreaInput,type:g.Ie.RULES_INPUT,textValue:E,richValue:S,channel:l,placeholder:I.intl.string(I.t["BRkD4+"]),focused:C,onChange:(e,n,l)=>{let t=n;t.length>f.fn&&(t=t.slice(0,f.fn)),n!==t&&(n=t,l=(0,p.JM)(t)),o(n),y({textValue:n,richValue:l})},onKeyDown:s,canMentionChannels:v,canMentionRoles:v,maxCharacterCount:f.fn,onSubmit:()=>Promise.resolve({shouldClear:!1,shouldRefocus:!0})})}),(0,t.jsx)(x.zxk,{className:k.clearButton,onClick:d,look:x.zxk.Looks.BLANK,size:x.zxk.Sizes.NONE,children:(0,t.jsx)(x.k$p,{size:"md",color:"currentColor",className:k.clearIcon})}),(0,t.jsx)("div",{ref:R,className:k.dragContainer,"data-dnd-name":B,children:N&&(0,t.jsx)(x.Vni,{size:"xs",color:"currentColor",className:k.dragIcon})})]})})}function T(e){let{rules:n,setRules:l,guild:i}=e,r=i.rulesChannelId,o=i.hasFeature(v.oNc.PREVIEW_ENABLED),u=(0,d.e7)([_.Z],()=>null!=r?_.Z.getChannel(r):null),c=(0,d.e7)([h.ZP],()=>h.ZP.getDefaultChannel(i.id)),[g,p]=a.useState(null),[m,j]=a.useState(null),T=a.useCallback(e=>{if(n.length!==f.X2){if(null!=e&&""===n[n.length-1].value){let t=[...n];t[n.length-1]={...t[n.length-1],value:e},l(t),j(t.length-1)}else l([...n,{id:s()(),value:null!=e?e:""}]),j(n.length)}},[n,l]),R=a.useCallback(()=>{T(void 0)},[T]),E=(e,t)=>{let a=[...n];a[t]={...a[t],value:e},l(a)},S=e=>{let t=[...n.slice(0,e),...n.slice(e+1)];l(0===t.length?[{id:s()(),value:""}]:t)},y=a.useCallback((e,t,a)=>{if(null==n)return;let i=n.indexOf(e);if(null!=t&&t!==i){let a=[...n];a.splice(i,1),a.splice(t,0,e),l(a)}a?null!==g&&p(null):t!==g&&p(t)},[g,n,l]),z=n.length===f.X2,L=a.useMemo(()=>{let e=z?I.intl.formatToPlainString(I.t.tU718P,{number:f.X2}):void 0;return[{text:I.intl.string(I.t.DXq2oa),onClick:()=>T(I.intl.string(I.t.XudkSk)),disabled:z,tooltipText:e},{text:I.intl.string(I.t.nSqTjI),onClick:()=>T(I.intl.string(I.t.np91jI)),disabled:z,tooltipText:e},{text:I.intl.string(I.t.AtRxsL),onClick:()=>T(I.intl.string(I.t.PNIDDA)),disabled:z,tooltipText:e},{text:I.intl.string(I.t["0K5NJi"]),onClick:()=>T(I.intl.string(I.t.HolIDw)),disabled:z,tooltipText:e}]},[T,z]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:k.rulesContainer,children:n.map((e,l)=>(0,t.jsx)(N,{rulesChannel:null!=u?u:c,rule:e,index:l,onChange:e=>E(e,l),onClear:()=>S(l),onRuleReorder:y,isDropHovered:l===g,focused:l===m,onFocus:j,previewEnabled:null==o||o,isDragEnabled:n.length>1},e.id))}),!z&&(0,t.jsx)(C.A,{text:I.intl.string(I.t.Cq5Jub),onClick:R}),(0,t.jsx)(x.X6q,{variant:"text-xs/bold",color:"text-muted",className:k.exampleRulesTitle,children:I.intl.string(I.t.XHWj8f)}),(0,t.jsx)(b.j,{pills:L,pillClassName:k.pill})]})}},681460:function(e,n,l){l.d(n,{j:()=>s});var t=l(200651);l(192379);var a=l(120356),i=l.n(a),r=l(481060),o=l(487032);function s(e){let{pills:n,pillClassName:l}=e;return(0,t.jsx)("div",{className:o.container,children:n.map(e=>(0,t.jsx)(r.ua7,{text:e.tooltipText,shouldShow:null!=e.tooltipText,children:n=>(0,t.jsx)(r.P3F,{...n,className:i()(o.pill,{[o.disabled]:e.disabled},l),onClick:e.onClick,children:(0,t.jsx)(r.Text,{tag:"span",variant:"text-sm/medium",color:"interactive-normal",children:e.text})})},e.text))})}},915509:function(e,n,l){l.d(n,{Z:()=>d}),l(47120);var t=l(200651),a=l(192379),i=l(120356),r=l.n(i),o=l(481060),s=l(313201),u=l(388032),c=l(307326);function d(e){let{errorText:n,title:l,description:i,transitionState:d,onCancel:x,onConfirm:g,children:p}=e,m=(0,s.Dt)(),[_,h]=a.useState(!1),C=a.useCallback(async()=>{h(!0);try{await g()}catch(e){throw e}finally{h(!1)}},[g]);return(0,t.jsxs)(o.Y0X,{className:c.modal,transitionState:d,"aria-labelledby":m,size:o.CgR.SMALL,children:[(0,t.jsxs)(o.hzk,{className:c.modalContent,children:[(0,t.jsx)(o.X6q,{variant:"heading-md/semibold",id:m,children:l}),null!=i&&""!==i?(0,t.jsx)(o.Text,{variant:"text-sm/normal",color:"header-secondary",className:c.description,children:i}):null,(0,t.jsx)("div",{className:c.body,children:p}),null!=n&&""!==n?(0,t.jsx)(o.Text,{className:c.errorText,variant:"text-xs/normal",color:"text-danger",children:n}):null]}),(0,t.jsxs)(o.mzw,{children:[(0,t.jsx)(o.zxk,{submitting:_,className:c.button,size:o.zxk.Sizes.SMALL,color:o.zxk.Colors.BRAND,onClick:C,children:u.intl.string(u.t.R3BPHx)}),(0,t.jsx)(o.zxk,{className:r()(c.cancelButton,c.button),size:o.zxk.Sizes.SMALL,color:o.zxk.Colors.PRIMARY,onClick:x,children:u.intl.string(u.t["ETE/oK"])})]})]})}},92451:function(e,n,l){l.d(n,{default:()=>p}),l(47120);var t=l(200651),a=l(192379),i=l(97613),r=l.n(i),o=l(410575),s=l(881052),u=l(246364),c=l(296991),d=l(915509),x=l(981631),g=l(388032);let p=function(e){let{field:n,onSave:l,onClose:i,guild:p}=e,[m,_]=a.useState((null==n?void 0:n.values)!=null?null==n?void 0:n.values.map(e=>({id:r()(),value:e})):[{id:r()(),value:""}]),[h,C]=a.useState(null),b=async()=>{null!=h&&C(null);let e=m.map(e=>e.value.trim()).filter(e=>""!==e);if(0===e.length){C(g.intl.string(g.t.TCHkcX));return}let n={field_type:u.QJ.TERMS,label:g.intl.string(g.t["9suSIC"]),values:e,required:!0};try{await l(n),i()}catch(e){C(new s.Hx(e).getAnyErrorMessage())}};return(0,t.jsx)(o.Z,{page:x.ZY5.GUILD_RULES_CREATE_MODAL,children:(0,t.jsx)(d.Z,{...e,errorText:h,title:g.intl.string(g.t["3pz9t7"]),onCancel:i,onConfirm:b,children:(0,t.jsx)(c.k,{guild:p,rules:m,setRules:_})})})}},765622:function(e,n,l){e.exports={dragging:"dragging_f7c056",draggableInputContainer:"draggableInputContainer_f7c056",inputWrapper:"inputWrapper_f7c056",clearButton:"clearButton_f7c056",rulesContainer:"rulesContainer_f7c056",rulesTextAreaInput:"rulesTextAreaInput_f7c056",clearIcon:"clearIcon_f7c056",dragContainer:"dragContainer_f7c056",dragIcon:"dragIcon_f7c056",exampleRulesTitle:"exampleRulesTitle_f7c056",pill:"pill_f7c056"}},487032:function(e,n,l){e.exports={container:"container__33d66",pill:"pill__33d66",disabled:"disabled__33d66"}},307326:function(e,n,l){e.exports={modal:"modal__0651b",description:"description__0651b",body:"body__0651b",modalContent:"modalContent__0651b",addItemContainer:"addItemContainer__0651b",addItemButton:"addItemButton__0651b",dragging:"dragging__0651b",draggableInputContainer:"draggableInputContainer__0651b",inputWrapper:"inputWrapper__0651b",clearButton:"clearButton__0651b",clearIcon:"clearIcon__0651b",dragContainer:"dragContainer__0651b",dragIcon:"dragIcon__0651b",divider:"divider__0651b",errorText:"errorText__0651b",spacedItem:"spacedItem__0651b",button:"button__0651b",cancelButton:"cancelButton__0651b",radioIconEmptyContainer:"radioIconEmptyContainer__0651b",radioIconEmpty:"radioIconEmpty__0651b"}}}]);
//# sourceMappingURL=7ebd443b06530165.js.map