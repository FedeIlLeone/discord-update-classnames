"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["54408"],{118215:function(e,i,n){n.d(i,{ZP:()=>c});var l,t,r,a=n(442837),s=n(570140);let u={},d=!1;class o extends(r=a.ZP.Store){isLoading(){return d}passesChecklist(e){var i;return!d&&(null===(i=u[e])||void 0===i?void 0:i.sufficient)}isPendingSuccess(e){let i=u[e];return null!=i&&!d&&i.healthScorePending&&i.safeEnvironment&&0===Object.keys(i.nsfwProperties).length&&i.size&&i.protected}getDiscoveryChecklist(e){return u[e]}}t="DiscoverGuildChecklistStore",(l="displayName")in o?Object.defineProperty(o,l,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[l]=t;let c=new o(s.Z,{DISCOVER_CHECKLIST_FETCH_START:function(e){d=!0},DISCOVER_CHECKLIST_FETCH_FAILURE:function(e){d=!1},DISCOVER_CHECKLIST_FETCH_SUCCESS:function(e){var i;let{checklist:n,guildId:l}=e;d=!1,u[l]={guildId:n.guild_id,safeEnvironment:n.safe_environment,healthy:n.healthy,healthScorePending:n.health_score_pending,nsfwProperties:n.nsfw_properties,size:n.size,protected:n.protected,sufficient:n.sufficient,sufficientWithoutGracePeriod:n.sufficient_without_grace_period,gracePeriodEndDate:null!=n.grace_period_end_date?new Date(n.grace_period_end_date):null,retentionHealthy:n.retention_healthy,engagementHealthy:n.engagement_healthy,minimumGuildSize:null!=n.minimum_size?n.minimum_size:1e3,healthScore:n.health_score,minimumGuildAge:null!==(i=n.minimum_age)&&void 0!==i?i:0,age:n.age}}})},166184:function(e,i,n){n.d(i,{Z:()=>A}),n(47120);var l=n(200651),t=n(192379),r=n(120356),a=n.n(r),s=n(780384),u=n(481060),d=n(410030),o=n(686546),c=n(372769),E=n(134432),I=n(768581),_=n(624138),f=n(388032),h=n(849566),S=n(129512),m=n(330065);let g=[16,16,14,14,12,10,8],A=function(e){var i,n;let{guild:r,disabled:A,small:v,loading:N=!1,description:T,memberCount:C,presenceCount:L,className:D}=e,R=(0,d.ZP)(),[p,P]=t.useState(!1);if(null==r||N)return(0,l.jsx)("div",{className:a()(D,h.card,h.cardPlaceholder,{[h.cardSmall]:v,[h.cardDisabled]:A})});let{name:y}=r,V=null!=r.discoverySplash&&/^data:/.test(r.discoverySplash)?r.discoverySplash:I.ZP.getGuildDiscoverySplashURL({id:r.id,splash:r.discoverySplash,size:240*(0,E.x_)()}),O=(0,s.wj)(R)?S:m,x=null!==(i=I.ZP.getGuildIconURL({id:r.id,icon:r.icon,size:40}))&&void 0!==i?i:void 0,j=null!=r.description?r.description:T,F=null!=C?C:null==r?void 0:r.memberCount,G=null!=L?L:null==r?void 0:r.presenceCount,b=null;if(null!=x)b=(0,l.jsx)("img",{src:x,alt:"",className:h.avatar});else{let e=(0,_.Zg)(r.name);b=(0,l.jsx)("div",{className:h.defaultIcon,children:(0,l.jsx)(u.Text,{className:h.acronym,style:{fontSize:null!==(n=g[e.length])&&void 0!==n?n:g[g.length-1]},variant:"text-sm/normal",children:e})})}return(0,l.jsxs)("div",{className:a()(D,h.card,{[h.cardSmall]:v,[h.cardDisabled]:A,[h.splashLoaded]:p}),children:[(0,l.jsxs)("div",{className:h.cardHeader,children:[(0,l.jsx)("div",{className:h.splash,children:(0,l.jsx)("img",{src:null!=V?V:O,alt:"",className:h.splashImage,onLoad:()=>P(!0)})}),(0,l.jsx)("div",{className:h.guildIcon,children:(0,l.jsx)(o.ZP,{mask:o.ZP.Masks.SQUIRCLE,width:48,height:48,children:(0,l.jsx)("div",{className:h.iconMask,children:(0,l.jsx)(o.ZP,{mask:o.ZP.Masks.SQUIRCLE,width:40,height:40,children:null!=b?b:null})})})})]}),(0,l.jsxs)("div",{className:h.guildInfo,children:[(0,l.jsxs)("div",{className:h.title,children:[(0,l.jsx)(c.Z,{className:h.verifiedIcon,guild:r,tooltipColor:u.ua7.Colors.PRIMARY}),(0,l.jsx)(u.Text,{className:h.guildName,variant:"text-md/normal",children:(0,l.jsx)("span",{children:y})})]}),(0,l.jsx)("div",{className:h.descriptionContainer,children:(0,l.jsx)(u.Text,{lineClamp:3,className:h.description,variant:"text-sm/normal",tag:"span",children:j})}),(0,l.jsxs)("div",{className:h.memberInfo,children:[null!=G&&(0,l.jsxs)("div",{className:h.memberCount,children:[(0,l.jsx)("div",{className:h.dotOnline}),(0,l.jsx)(u.Text,{variant:"text-xs/normal",children:v?f.intl.formatToPlainString(f.t.YMor7u,{count:G}):f.intl.formatToPlainString(f.t["LC+S+v"],{membersOnline:G})})]}),null!=F&&(0,l.jsxs)("div",{className:h.memberCount,children:[(0,l.jsx)("div",{className:h.dotOffline}),(0,l.jsx)(u.Text,{variant:"text-xs/normal",children:v?f.intl.formatToPlainString(f.t.YMor7u,{count:F}):f.intl.formatToPlainString(f.t.zRl6XV,{count:F})})]})]})]})]})}},658666:function(e,i,n){let l;n.d(i,{Z:()=>x}),n(47120);var t,r,a,s=n(392711),u=n.n(s),d=n(442837),o=n(570140),c=n(944163),E=n(246364),I=n(999382),_=n(118215),f=n(384632),h=n(386885),S=n(981631),m=n(388032);let g={verificationDirty:!1,guildDirty:!1};function A(){let e=I.Z.getGuild();if(null==e)return;let i=_.ZP.getDiscoveryChecklist(e.id);if(null!=i)return(0,h.V)(e,i)}function v(){var e;let i=I.Z.getGuildId();return null==i?null:null===(e=c.Z.get(i))||void 0===e?void 0:e.formFields}function N(){let e=v();if(null==e)return;let i=e.find(e=>(0,E.J)(e));return null==i?[{id:(0,s.uniqueId)(),value:""}]:i.values.map(e=>({id:(0,s.uniqueId)(),value:e}))}function T(){let e=v();if(null==e)return;let i=e.find(e=>(0,E.J)(e));if(0===e.length||1===e.length&&null!=i){let e={field_type:E.QJ.TEXT_INPUT,label:m.intl.string(m.t["83ZsRU"]),required:!0};return null!=i?[i,e]:[e]}return[...e]}function C(e){return e.hasFeature(S.oNc.DISCOVERABLE)?f.A.DISCOVERABLE:e.hasFeature(S.oNc.MEMBER_VERIFICATION_GATE_ENABLED)&&e.hasFeature(S.oNc.MEMBER_VERIFICATION_MANUAL_APPROVAL)?f.A.APPLY:f.A.INVITE}function L(e,i){let n=e.hasFeature(S.oNc.MEMBER_VERIFICATION_GATE_ENABLED)||e.hasFeature(S.oNc.CLAN);switch(i){case f.A.INVITE:return{joinType:f.A.INVITE,requireTerms:n,termRules:N()};case f.A.APPLY:return{joinType:f.A.APPLY,pendingVerificationFields:T()};case f.A.DISCOVERABLE:return{joinType:f.A.DISCOVERABLE,settingsView:A(),requireTerms:n,termRules:N()}}}function D(e,i){var n,l,t,r;let{requireTerms:a,termRules:s}=i;if(e.hasFeature(S.oNc.MEMBER_VERIFICATION_MANUAL_APPROVAL)||e.hasFeature(S.oNc.MEMBER_VERIFICATION_GATE_ENABLED)!==a)return!0;let d=null!==(l=v())&&void 0!==l?l:[];if(d.length>1)return!0;let o=null!==(t=null===(n=d.find(e=>(0,E.J)(e)))||void 0===n?void 0:n.values)&&void 0!==t?t:[],c=null!==(r=null==s?void 0:s.map(e=>e.value.trim()).filter(e=>""!==e))&&void 0!==r?r:[];return!u().isEqual(o,c)}function R(){let e=I.Z.getGuild();if(null==e||null==l){g={verificationDirty:!1,guildDirty:!1};return}let i=C(e)!==l.joinType;switch(l.joinType){case f.A.INVITE:g={verificationDirty:D(e,l),guildDirty:i};break;case f.A.APPLY:let n;let t=v(),{pendingVerificationFields:r}=l,a=!e.hasFeature(S.oNc.MEMBER_VERIFICATION_GATE_ENABLED)||!e.hasFeature(S.oNc.MEMBER_VERIFICATION_MANUAL_APPROVAL);n=null==t?null!=r:null!=r&&!u().isEqual(t,r),g={verificationDirty:a||n,guildDirty:i};break;case f.A.DISCOVERABLE:g={verificationDirty:D(e,l),guildDirty:i||I.Z.hasChanges()}}}function p(){if(null==I.Z.getGuildId()||null==l)return!1;l=l.joinType===f.A.APPLY?{...l,pendingVerificationFields:T()}:{...l,termRules:N()},R()}function P(e){let{section:i,subsection:n}=e;if(i!==S.pNK.ACCESS)return y();let t=I.Z.getGuild();if(null==t)return!1;let r=n===S.KsC.ACCESS_DISCOVERABLE&&t.hasFeature(S.oNc.COMMUNITY)?f.A.DISCOVERABLE:C(t);l=L(t,r),R()}function y(){l=void 0,g={verificationDirty:!1,guildDirty:!1}}function V(){if((null==l?void 0:l.joinType)!==f.A.DISCOVERABLE)return!1;l={...l,settingsView:A()},R()}class O extends(t=d.ZP.Store){initialize(){this.waitFor(I.Z,c.Z,_.ZP),this.syncWith([I.Z,c.Z],()=>{R()})}get pendingState(){return l}get dirtyState(){return g}showNotice(){return g.guildDirty||g.verificationDirty}}a="GuildSettingsJoinRulesStore",(r="displayName")in O?Object.defineProperty(O,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):O[r]=a;let x=new O(o.Z,{GUILD_SETTINGS_JOIN_RULES_INVITE_SET_PENDING_RULES:function(e){let{guildId:i,requireTerms:n,termRules:t}=e;if(i!==I.Z.getGuildId()||(null==l?void 0:l.joinType)!==f.A.INVITE&&(null==l?void 0:l.joinType)!==f.A.DISCOVERABLE)return!1;l={...l,requireTerms:n,termRules:t},R()},GUILD_SETTINGS_JOIN_RULES_APPLY_SET_PENDING_FORM_FIELDS:function(e){let{guildId:i,formFields:n}=e;if(i!==I.Z.getGuildId()||(null==l?void 0:l.joinType)!==f.A.APPLY)return!1;l={...l,pendingVerificationFields:n},R()},GUILD_SETTINGS_JOIN_RULES_SET_SELECTED_TYPE:function(e){let{guildId:i,joinType:n}=e,t=I.Z.getGuild();if(i!==(null==t?void 0:t.id))return!1;l=L(t,n),R()},MEMBER_VERIFICATION_FORM_UPDATE:p,MEMBER_VERIFICATION_FORM_FETCH_FAIL:p,GUILD_SETTINGS_INIT:P,GUILD_SETTINGS_SET_SECTION:P,GUILD_SETTINGS_CLOSE:y,DISCOVER_CHECKLIST_FETCH_SUCCESS:V,GUILD_UPDATE_DISCOVERY_METADATA_FROM_SERVER:V,GUILD_SETTINGS_SUBMIT_SUCCESS:V})},384632:function(e,i,n){n.d(i,{A:()=>t});var l,t=((l={}).INVITE="invite",l.APPLY="apply",l.DISCOVERABLE="discoverable",l)},386885:function(e,i,n){n.d(i,{U:()=>r,V:()=>a});var l,t=n(981631),r=((l={}).INELIGIBLE="ineligible",l.DISQUALIFIED="disqualified",l.ELIGIBLE_DISABLED="eligible_disabled",l.ELIGIBLE_ENABLED="eligible_enabled",l);function a(e,i){let n=e.hasFeature(t.oNc.VERIFIED),l=e.hasFeature(t.oNc.DISCOVERABLE);if(n)return l?"eligible_enabled":"eligible_disabled";if(l){let e=i.sufficientWithoutGracePeriod&&null!=i.gracePeriodEndDate&&i.gracePeriodEndDate>new Date;return i.sufficient||e?"eligible_enabled":"disqualified"}return i.sufficient?"eligible_disabled":"ineligible"}}}]);
//# sourceMappingURL=047c6bea46d9d9fd.js.map