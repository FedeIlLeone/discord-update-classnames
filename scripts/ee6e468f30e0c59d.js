"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["21367"],{561623:function(t,e,n){n.d(e,{default:()=>S}),n(47120),n(411104);var o=n(200651),r=n(192379),i=n(442837),l=n(780384),a=n(481060),s=n(366939),u=n(911969),c=n(410030),d=n(100527),_=n(906732),m=n(583046),f=n(963249),C=n(853872),p=n(509545),I=n(626135),h=n(74538),T=n(937615),N=n(212895),g=n(296848),x=n(374649),E=n(807163),b=n(798769),M=n(317269),y=n(474936),P=n(981631),v=n(388032),R=n(368718);let S=t=>{var e,n,S,k;let{daysLeft:U,premiumType:A,premiumSubscription:L,analyticsSource:Z,...j}=t,F=(0,c.ZP)(),[O,w]=r.useState(!1),{analyticsLocations:Y}=(0,_.ZP)(d.Z.PREMIUM_UNCANCEL_MODAL),X=(0,i.e7)([C.Z],()=>(null==L?void 0:L.paymentSourceId)!=null?C.Z.getPaymentSource(L.paymentSourceId):null,[L]),B=L.items[0].planId,H=(0,h.Wz)(y.GP[B].skuId),{priceOptions:z}=(0,m.Z)({activeSubscription:null,skuIDs:[H],paymentSourceId:null==L?void 0:L.paymentSourceId,isGift:!1}),[D]=(0,x.ED)({subscriptionId:L.id,items:[{planId:B,quantity:1}],renewal:!0,paymentSourceId:null==L?void 0:L.paymentSourceId,currency:z.currency,analyticsLocations:(0,_.ZP)(d.Z.PREMIUM_UNCANCEL_MODAL),analyticsLocation:d.Z.PREMIUM_UNCANCEL_MODAL}),G=(0,i.e7)([p.Z],()=>(0,g.oE)(B),[B]),W=(0,i.e7)([p.Z],()=>p.Z.isFetchingForSKU(H)),K=null==D?void 0:null===(k=D.invoiceItems)||void 0===k?void 0:null===(S=k.find(t=>t.subscriptionPlanId===B))||void 0===S?void 0:null===(n=S.discounts)||void 0===n?void 0:null===(e=n.find(t=>t.type===u.eW.SUBSCRIPTION_PLAN))||void 0===e?void 0:e.amount,Q=null!=G?(0,h.aS)(G.id,!1,!1,z):null,V=null!=Q&&null!=K?(0,T.T4)(Q.amount-(null!=K?K:0),Q.currency):null,{intervalType:q,intervalCount:J}=h.ZP.getInterval(B),$=A===y.p9.TIER_1,tt=null!=Q?(0,T.T4)(Q.amount,Q.currency):null;return r.useEffect(()=>{I.default.track(P.rMx.OPEN_MODAL,{type:"Premium Uncancel Winback",source:Z})},[Z]),(0,o.jsx)(a.Y0X,{...j,className:R.modal,children:O?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b.Z,{premiumType:A,onClose:j.onClose}),(0,o.jsx)(M.ZP,{planId:B,onClose:j.onClose,paymentSourceType:null==X?void 0:X.type})]}):(0,o.jsx)(E.Z,{premiumType:A,titleText:$?v.intl.formatToPlainString(v.t.Sngnzs,{daysLeft:U}):v.intl.formatToPlainString(v.t.tdvIlZ,{daysLeft:U}),subtitleText:$?v.intl.format(v.t["6Su2XV"],{}):v.intl.format(v.t["lE+P8f"],{}),footer:(0,o.jsxs)("div",{children:[null!==tt?(0,o.jsx)(a.Text,{variant:"text-sm/normal",children:function(t){switch(q){case y.rV.YEAR:return $?v.intl.format(v.t.O7JRzc,{price:t}):v.intl.format(v.t["0y5kAA"],{price:t});case y.rV.MONTH:if(null!=V)return v.intl.format(v.t["1/ucvr"],{discountPrice:V,defaultPrice:t});if($)return v.intl.format(v.t.rbwRlZ,{price:t});if(1===J)return v.intl.format(v.t.C9oRCw,{price:t});return v.intl.format(v.t.TmmTgo,{price:t,intervalCount:J});default:throw Error("Unknown interval type ".concat(q))}}(tt)}):(0,o.jsx)(a.$jN,{type:a.RAz.SPINNING_CIRCLE}),(0,o.jsxs)("div",{className:R.footer,children:[(0,o.jsx)(a.zxk,{disabled:W,onClick:()=>{if(null!=L){let t=(0,N.tD)(B,L.currency,null==X?void 0:X.id);null!=X&&X.id===L.paymentSourceId&&t?(s.O5(L,Y,P.Sbl.UNCANCEL_WINBACK_MODAL),w(!0)):(j.onClose(),(0,f.Z)({initialPlanId:B,analyticsLocations:Y,analyticsLocation:P.Sbl.UNCANCEL_WINBACK_MODAL}))}},children:v.intl.string(v.t["2+luBg"])}),(0,o.jsx)(a.zxk,{look:a.zxk.Looks.LINK,color:(0,l.wj)(F)?a.zxk.Colors.WHITE:a.zxk.Colors.PRIMARY,onClick:j.onClose,children:v.intl.string(v.t.XDpS4O)})]})]}),onClose:j.onClose})})}},317269:function(t,e,n){n.d(e,{TB:()=>E,VY:()=>b,ZP:()=>x}),n(47120),n(411104);var o=n(200651),r=n(192379),i=n(512722),l=n.n(i),a=n(442837),s=n(481060),u=n(16084),c=n(987209),d=n(179118),_=n(912788),m=n(509545),f=n(55563),C=n(74538),p=n(741245),I=n(474936),h=n(981631),T=n(388032),N=n(371594);function g(t){let e,{planId:n,startingPremiumSubscriptionPlanId:r,paymentSourceType:i}=t,[s,u]=(0,a.Wu)([m.Z],()=>[m.Z.get(r),m.Z.get(n)]);if(l()(null!=s&&null!=u,"Missing startingPlan or newPlan"),I.Y1.indexOf(r)<I.Y1.indexOf(n))switch(n){case I.Xh.PREMIUM_MONTH_TIER_1:e=T.intl.string(T.t.knvOV1),h.X7u.has(null!=i?i:h.HeQ.UNKNOWN)&&(e=T.intl.format(T.t.o6hBiY,{}));break;case I.Xh.PREMIUM_MONTH_TIER_2:e=T.intl.string(T.t.f8Dqur),h.X7u.has(null!=i?i:h.HeQ.UNKNOWN)&&(e=T.intl.format(T.t.A4THYm,{}));break;case I.Xh.PREMIUM_YEAR_TIER_1:e=T.intl.string(T.t.YZd5r6),h.X7u.has(null!=i?i:h.HeQ.UNKNOWN)&&(e=T.intl.format(T.t.MHAxpK,{}));break;case I.Xh.PREMIUM_YEAR_TIER_2:e=T.intl.formatToPlainString(T.t["M/Lknp"],{numFreeGuildSubscriptions:I.cb}),h.X7u.has(null!=i?i:h.HeQ.UNKNOWN)&&(e=T.intl.format(T.t.mULxLS,{numFreeGuildSubscriptions:I.cb}));break;case I.Xh.PREMIUM_3_MONTH_TIER_2:case I.Xh.PREMIUM_6_MONTH_TIER_2:e=T.intl.string(T.t.aaCoW1);break;case I.Xh.PREMIUM_MONTH_TIER_0:case I.Xh.PREMIUM_YEAR_TIER_0:e=T.intl.string(T.t["XEoQ7+"]);break;default:throw Error("Unexpected planId: ".concat(n))}else if(s.skuId===I.Si.TIER_2&&u.skuId===I.Si.TIER_1)e=T.intl.string(T.t.PNX4ND);else switch(u.skuId){case I.Si.TIER_0:e=T.intl.string(T.t["XEoQ7+"]);break;case I.Si.TIER_1:e=T.intl.string(T.t.nLI1Ki);break;case I.Si.TIER_2:e=1!==s.intervalCount?T.intl.string(T.t.qSZZVF):T.intl.string(T.t.RNjcNj);break;default:throw Error("Unexpected skuId: ".concat(u.skuId))}return(0,o.jsx)("div",{className:N.text,children:e})}function x(t){let e,n,{planId:i,enableNoPaymentTrial:c,startingPremiumSubscriptionPlanId:d,onClose:_,followupSKUInfo:x,isDowngrade:E,hideClose:b,postSuccessGuild:M,paymentSourceType:y}=t,{theme:P}=(0,s.TCT)(),v=(0,a.e7)([f.Z],()=>null!=x?f.Z.get(x.id):null);r.useEffect(()=>{if(null==x||null!=v)return;let{applicationId:t,id:e}=x;(0,u.$N)(t,e).catch(h.VqG)},[x,v]);let R=t=>t.skuId===I.Si.TIER_0?h.X7u.has(null!=y?y:h.HeQ.UNKNOWN)?T.intl.format(T.t.o6hBiY,{}):T.intl.string(T.t["AGf/yc"]):t.skuId===I.Si.TIER_1?h.X7u.has(null!=y?y:h.HeQ.UNKNOWN)?T.intl.format(T.t.o6hBiY,{}):T.intl.string(T.t.knvOV1):h.X7u.has(null!=y?y:h.HeQ.UNKNOWN)?T.intl.format(T.t.A4THYm,{}):c?T.intl.string(T.t["g52y/v"]):T.intl.string(T.t.aTUr3d);if(null!=v)e=(0,o.jsx)("div",{className:N.text,children:T.intl.format(T.t.tsQOs7,{skuName:v.name})});else if(null!=d)e=(0,o.jsx)(g,{planId:i,startingPremiumSubscriptionPlanId:d});else if(null!=M){let t=m.Z.get(i);l()(null!=t,"Missing plan"),e=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:N.text,children:R(t)}),(0,o.jsx)("div",{className:N.text,children:T.intl.format(T.t["6aZ0NT"],{guildName:M.name})})]})}else{let t=m.Z.get(i);l()(null!=t,"Missing plan"),e=(0,o.jsx)("div",{className:N.text,children:R(t)})}let S=C.ZP.getPremiumType(i);return l()(null!=S,"premium type should not be null in purchase confirmation"),n=null!=v?T.intl.formatToPlainString(T.t["1qGgm5"],{skuName:v.name}):E?T.intl.string(T.t.QJ9EyM):null!=M?T.intl.string(T.t.ta3cXV):T.intl.string(T.t.TkTvBw),(0,o.jsxs)("div",{className:N.confirmation,children:[(0,o.jsx)(p.C,{className:N.banner,theme:P,premiumType:S,type:h.X7u.has(null!=y?y:h.HeQ.UNKNOWN)?p.C.Types.PREMIUM_PAYMENT_STARTED:null!=d?p.C.Types.PREMIUM_UPDATED:p.C.Types.PREMIUM_ACTIVATED}),e,b?null:(0,o.jsx)(s.zxk,{onClick:_,children:n})]})}function E(t){let{planId:e,onClose:n}=t,{giftRecipient:r,selectedGiftStyle:i,hasSentMessage:s,giftMessageError:u,isSendingMessage:f}=(0,c.wD)(),C=(0,a.e7)([m.Z],()=>m.Z.get(e));l()(null!=C,"Missing plan");let p=(0,a.e7)([_.Z],()=>_.Z.getGiftCode(C.skuId));return(0,o.jsx)(d.Z,{giftCode:p,subscriptionPlan:C,onClose:n,selectedGiftStyle:i,hasSentMessage:s,giftRecipient:r,giftMessageError:u,isSendingMessage:f})}function b(){return(0,o.jsxs)("div",{className:N.redirectConfirmation,children:[(0,o.jsx)(s.X6q,{variant:"heading-xl/bold",children:T.intl.string(T.t.Xtf9wM)}),(0,o.jsxs)("div",{className:N.redirectBody,children:[(0,o.jsx)(s.Text,{variant:"text-md/normal",children:T.intl.string(T.t.bIVRSU)}),(0,o.jsx)("br",{}),(0,o.jsx)(s.Text,{variant:"text-md/normal",children:T.intl.string(T.t["0UJqOz"])})]})]})}},697438:function(t,e,n){t.exports={churnFooterContainer:"churnFooterContainer__64988",churnFooterGlow:"churnFooterGlow__64988",churnFooterTopBorder:"churnFooterTopBorder__64988",churnFooterContent:"churnFooterContent__64988",churnFooterContentBody:"churnFooterContentBody__64988",churnFooterIcon:"churnFooterIcon__64988",churnFooterContentBodyInner:"churnFooterContentBodyInner__64988",churnFooterCopy:"churnFooterCopy__64988",churnFooterCTAs:"churnFooterCTAs__64988",churnFooterClaimCTA:"churnFooterClaimCTA__64988",churnFooterClaimCTAInner:"churnFooterClaimCTAInner__64988",churnFooterClaimIcon:"churnFooterClaimIcon__64988",churnFooterClaimCopy:"churnFooterClaimCopy__64988"}},40992:function(t,e,n){t.exports={body:"body__89307",title:"title__89307",whatYouLoseItemContainer:"whatYouLoseItemContainer__89307",whatYouLoseItem:"whatYouLoseItem__89307",whatYouLoseItemLeftColumn:"whatYouLoseItemLeftColumn__89307",whatYouLoseItemLearnMore:"whatYouLoseItemLearnMore__89307",whatYouLoseItemRightColumn:"whatYouLoseItemRightColumn__89307",textSingleLineEllipsis:"textSingleLineEllipsis__89307",profileCard:"profileCard__89307",profileCardTier1:"profileCardTier1__89307 profileCard__89307",profileAvatar:"profileAvatar__89307",profileAvatarTier1:"profileAvatarTier1__89307",profileUserInfo:"profileUserInfo__89307",profileUserInfoTier1:"profileUserInfoTier1__89307",profileNameTag:"profileNameTag__89307",profileNameTagUsername:"profileNameTagUsername__89307",profilePremiumIcon:"profilePremiumIcon__89307",emojiStickersPersonalizedContainer:"emojiStickersPersonalizedContainer__89307",personalizedEmoji:"personalizedEmoji__89307",boostCardContainer:"boostCardContainer__89307",boostCard:"boostCard__89307",boostCardIcon:"boostCardIcon__89307",boostCardInfo:"boostCardInfo__89307",boostCardTitle:"boostCardTitle__89307",boostCardSubtitle:"boostCardSubtitle__89307",boostCardGem:"boostCardGem__89307",boostCardCount:"boostCardCount__89307",nonPersonalizedGraphic:"nonPersonalizedGraphic__89307",spinner:"spinner__89307"}},64430:function(t,e,n){t.exports={animationContainer:"animationContainer__884d1",container:"container__884d1",svgBorder:"svgBorder__884d1",svgCopy:"svgCopy__884d1",shine:"shine__884d1"}},368718:function(t,e,n){t.exports={modal:"modal_f5e7c0",footer:"footer_f5e7c0"}},371594:function(t,e,n){t.exports={confirmation:"confirmation__2db04",banner:"banner__2db04",text:"text__2db04",redirectConfirmation:"redirectConfirmation__2db04",redirectBody:"redirectBody__2db04"}}}]);
//# sourceMappingURL=ee6e468f30e0c59d.js.map