"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["81038"],{200305:function(e,i,l){l.d(i,{Y:()=>O,Z:()=>G}),l(47120);var t=l(200651),n=l(192379),r=l(120356),s=l.n(r),a=l(442837),o=l(481060),d=l(893776),u=l(809206),c=l(607070),m=l(600164),E=l(339085),h=l(565138),g=l(650774),f=l(271383),I=l(594174),v=l(626135),_=l(768581),N=l(944163),x=l(246364),S=l(983736),T=l(187565),A=l(990488),C=l(592286),j=l(981631),p=l(388032),L=l(739387),D=l(419851),y=l(296507),R=l(866402),F=l(246403);let P=e=>{let{headerId:i,email:l,password:n,setEmail:r,setPassword:s,emailError:a,passwordError:d}=e;return(0,t.jsxs)("div",{className:L.content,children:[(0,t.jsx)("div",{className:L.applicationIconContainer,children:(0,t.jsx)("img",{alt:p.intl.string(p.t.ewGfjo),src:D,className:L.applicationIcon})}),(0,t.jsx)(o.X6q,{id:i,variant:"heading-xl/semibold",className:L.header,children:p.intl.string(p.t.MhcDLy)}),(0,t.jsx)(o.Text,{variant:"text-sm/normal",color:"header-secondary",children:p.intl.string(p.t.SPlaR0)}),(0,t.jsx)("hr",{className:L.divider}),(0,t.jsx)(o.xJW,{title:p.intl.string(p.t.dI4d4e),className:L.formItem,children:(0,t.jsx)(o.oil,{value:l,error:a,onChange:r,autoFocus:!0})}),(0,t.jsx)(o.xJW,{title:p.intl.string(p.t["CIGa+/"]),className:L.formItem,children:(0,t.jsx)(o.oil,{type:"password",value:n,error:d,onChange:s})})]})},b=e=>{let{headerId:i,email:l}=e;return(0,t.jsxs)("div",{className:L.content,children:[(0,t.jsx)("img",{alt:p.intl.string(p.t.wNAbl5),src:F,className:L.applicationIcon}),(0,t.jsx)(o.X6q,{id:i,variant:"heading-xl/semibold",className:L.header,children:p.intl.format(p.t.v01XgI,{email:l})}),(0,t.jsx)(o.Text,{variant:"text-sm/normal",color:"header-secondary",children:p.intl.string(p.t["/Hw5aW"])}),(0,t.jsx)(o.zxk,{className:L.resendButton,size:o.zxk.Sizes.NONE,look:o.zxk.Looks.LINK,onClick:()=>d.Z.verifyResend(),children:p.intl.string(p.t["MLk/mJ"])})]})},O=e=>{var i;let{guildId:l,formState:n,updateFormState:r,isPreview:s=!1,disableVerification:o=!1}=e,d=(0,a.e7)([N.Z],()=>N.Z.get(l));if(null==d)return null;let u=null!==(i=null!=n?n:null==d?void 0:d.formFields)&&void 0!==i?i:[],c=s?A.W:A.r;return(0,t.jsx)(c,{guildId:l,formFields:u,updateFormFields:r,disableVerification:o})},V=()=>l.e("43841").then(l.t.bind(l,737848,19)).then(e=>{let{default:i}=e;return i}),M=e=>{let{headerId:i,guildId:l,formState:n,updateFormState:r,useReducedMotion:a,disableVerification:d,isPreview:u=!1}=e;return(0,t.jsxs)("div",{className:L.content,children:[(0,t.jsxs)("div",{className:L.animationAndSparklesContainer,children:[(0,t.jsx)("img",{alt:p.intl.string(p.t.VoB8OT),src:R,className:s()(L.sparkleIcon,L.sparkleBottom)}),(0,t.jsx)(o.Fmz,{importData:V,shouldAnimate:!a,className:L.animation}),(0,t.jsx)("img",{alt:p.intl.string(p.t.VoB8OT),src:y,className:s()(L.sparkleIcon,L.sparkleTop)})]}),(0,t.jsx)(o.X6q,{id:i,variant:"heading-xl/semibold",className:L.header,children:p.intl.string(p.t.DrEECw)}),(0,t.jsx)(o.Text,{variant:"text-sm/normal",color:"header-secondary",className:L.subheader,children:p.intl.string(p.t["7D3C5u"])}),(0,t.jsx)("hr",{className:L.divider}),(0,t.jsx)(O,{guildId:l,formState:n,updateFormState:r,isPreview:u,disableVerification:d})]})},G=e=>{var i,l;let{verificationForm:r,headerId:d,guildId:A,onClose:D,onComplete:y,isPreview:R=!1}=e,F=null==r?void 0:r.guild,O=(0,T.N0)(A,F,R),V=null==r?void 0:r.formFields.some(e=>e.field_type!==x.QJ.TERMS),G=(0,a.e7)([I.default],()=>I.default.getCurrentUser()),Z=null==G?void 0:G.verified,w=null==G?void 0:G.isPhoneVerified(),B=(0,a.e7)([E.ZP],()=>E.ZP.getGuildEmoji(A)),{storeMemberCount:k,storeOnlineCount:U}=(0,a.cj)([g.Z],()=>({storeMemberCount:g.Z.getMemberCount(A),storeOnlineCount:g.Z.getOnlineCount(A)})),[z,H]=n.useState(null!==(i=null==r?void 0:r.formFields)&&void 0!==i?i:[]),[q,J]=n.useState(!1),[Y,X]=n.useState(null),[K,W]=n.useState(""),[Q,$]=n.useState(""),[ee,ei]=n.useState(null),[el,et]=n.useState(null),en=null!==(l=null==O?void 0:O.hasFeature(j.oNc.CLAN))&&void 0!==l&&l,{emojisToRender:er,remainingEmojis:es,numGuildEmoji:ea}=n.useMemo(()=>{var e;let i=[...null!==(e=0===B.length?null==F?void 0:F.emojis:B)&&void 0!==e?e:[]].reverse(),l=0,t=i.length;return t>12&&null!=i&&(l=Math.min(t-(i=i.slice(0,11)).length,99)),{emojisToRender:i,remainingEmojis:l,numGuildEmoji:t}},[F,B]),eo=null!=k?k:null==F?void 0:F.approximate_member_count,ed=null!=U?U:null==F?void 0:F.approximate_presence_count,eu=null!=V&&V,{currentStep:ec,setCurrentStep:em}=(0,T.k3)(G,eu);(0,T.lk)(z),n.useEffect(()=>{null!=r&&H(r.formFields)},[r]),n.useEffect(()=>{null!=A&&v.default.track(j.rMx.OPEN_MODAL,{type:C.N4,guild_id:A})},[A]);let eE=n.useMemo(()=>{if(z.some(e=>!(0,S.OA)(e)))return!0;if(eu||(null==G?void 0:G.isStaff()))return!1;switch(null==O?void 0:O.verificationLevel){case j.sFg.VERY_HIGH:return!w;case j.sFg.LOW:case j.sFg.MEDIUM:case j.sFg.HIGH:return!Z&&!w;case j.sFg.NONE:default:return!1}},[z,O,eu,G,w,Z]),eh=(0,a.e7)([c.Z],()=>c.Z.useReducedMotion);if(null==O)return null;let eg=async()=>{J(!0),ei(null),et(null);try{await (0,u.S2)({email:K,password:Q}),J(!1),em(1)}catch(l){var e,i;ei(null==l?void 0:null===(e=l.body)||void 0===e?void 0:e.email),et(null==l?void 0:null===(i=l.body)||void 0===i?void 0:i.password)}finally{J(!1)}},ef=async()=>{J(!0),X(null);let e=null!=G?f.ZP.getMember(A,G.id):null;if(null!=e&&!e.isPending){null==D||D(!0);return}try{await (null==y?void 0:y({...null!=r?r:N.t,formFields:z})),null==D||D(!0)}catch(t){var i,l;let e=null==t?void 0:t.body;(null==e?void 0:null===(i=e.errors)||void 0===i?void 0:i.version)!=null||(null==e?void 0:null===(l=e.errors)||void 0===l?void 0:l.form_fields)!=null?X(p.intl.string(p.t.PD09Sk)):X(null==e?void 0:e.message)}finally{J(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(m.Z,{direction:m.Z.Direction.VERTICAL,justify:m.Z.Justify.BETWEEN,className:L.guildSidebar,shrink:0,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(h.Z,{guild:O,active:!0,className:s()(L.guildIcon,{[L.guildIconNoIcon]:null==O.icon})}),(0,t.jsx)(o.X6q,{variant:"heading-lg/semibold",className:L.guildName,children:null==O?void 0:O.name}),(0,t.jsx)(o.Text,{className:L.guildDescription,variant:"text-sm/normal",color:"header-secondary",children:null==r?void 0:r.description}),null!=er&&er.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("hr",{className:L.divider}),(0,t.jsx)(o.vwX,{children:p.intl.format(p.t.KHLg5e,{emojis:ea})}),(0,t.jsxs)("div",{className:L.emojisContainer,children:[er.map(e=>{let i=_.ZP.getEmojiURL({id:e.id,animated:!1,size:24});return(0,t.jsx)(o.ua7,{text:":".concat(e.name,":"),children:e=>(0,t.jsx)("img",{...e,width:24,height:24,src:i,className:L.emoji,alt:""})},e.id)}),null!=es&&es>0?(0,t.jsx)(o.X6q,{variant:"heading-deprecated-12/semibold",className:L.emoji,color:"header-secondary",children:"+".concat(es)}):null]})]}):null]}),(0,t.jsxs)("div",{children:[null!=ed&&(0,t.jsxs)(m.Z,{align:m.Z.Align.CENTER,className:L.onlineCount,children:[(0,t.jsx)("div",{className:L.dotOnline}),(0,t.jsx)(o.Text,{variant:"text-sm/normal",children:p.intl.format(p.t["Oj3M6+"],{membersOnline:ed})})]}),null!=eo&&(0,t.jsxs)(m.Z,{align:m.Z.Align.CENTER,children:[(0,t.jsx)("div",{className:L.dotMembers}),(0,t.jsx)(o.Text,{variant:"text-sm/normal",children:p.intl.format(p.t.LM4ufX,{members:eo})})]})]})]}),(0,t.jsxs)("div",{className:L.modal,children:[(0,t.jsx)(o.hzk,{className:L.modalContent,children:(0,t.jsx)(o.qBt,{className:s()(L.sequencer,{[L.centerContent]:2!==ec}),steps:[0,1,2],step:ec,children:(()=>{switch(ec){case 0:return(0,t.jsx)(P,{headerId:d,email:K,password:Q,setEmail:W,setPassword:$,emailError:ee,passwordError:el});case 1:return(0,t.jsx)(b,{headerId:d,email:K});case 2:return(0,t.jsx)(M,{headerId:d,guildId:A,formState:z,updateFormState:H,isPreview:R,useReducedMotion:eh,disableVerification:eu})}})()})}),(()=>{switch(ec){case 0:return(0,t.jsxs)(o.mzw,{className:L.footer,children:[(0,t.jsx)(o.zxk,{className:L.submitButton,type:"submit",submitting:q,onClick:eg,disabled:0===K.length||0===Q.length,children:p.intl.string(p.t.PDTjLC)}),(0,t.jsx)(o.Text,{variant:"text-xs/normal",color:"header-secondary",children:p.intl.string(p.t["9GPiR0"])})]});case 1:return null;case 2:return(0,t.jsxs)(o.mzw,{className:L.footer,children:[(0,t.jsx)(o.zxk,{className:L.submitButton,type:"submit",submitting:q,onClick:ef,color:o.zxk.Colors.GREEN,disabled:null==y||eE,children:p.intl.string(p.t.geKm7u)}),null!=Y&&(0,t.jsx)(o.Text,{variant:"text-xs/normal",color:"text-danger",children:Y}),null==Y&&V&&(0,t.jsxs)("div",{className:L.disclaimerFooter,children:[(0,t.jsx)(o.Text,{color:"header-secondary",variant:"text-xs/normal",children:p.intl.string(p.t["+fPCTU"])}),en&&(0,t.jsx)(o.Text,{color:"header-secondary",variant:"text-xs/normal",children:p.intl.string(p.t.FwXzw8)})]})]})}})()]})]})}},118215:function(e,i,l){l.d(i,{ZP:()=>c});var t,n,r,s=l(442837),a=l(570140);let o={},d=!1;class u extends(r=s.ZP.Store){isLoading(){return d}passesChecklist(e){var i;return!d&&(null===(i=o[e])||void 0===i?void 0:i.sufficient)}isPendingSuccess(e){let i=o[e];return null!=i&&!d&&i.healthScorePending&&i.safeEnvironment&&0===Object.keys(i.nsfwProperties).length&&i.size&&i.protected}getDiscoveryChecklist(e){return o[e]}}n="DiscoverGuildChecklistStore",(t="displayName")in u?Object.defineProperty(u,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):u[t]=n;let c=new u(a.Z,{DISCOVER_CHECKLIST_FETCH_START:function(e){d=!0},DISCOVER_CHECKLIST_FETCH_FAILURE:function(e){d=!1},DISCOVER_CHECKLIST_FETCH_SUCCESS:function(e){var i;let{checklist:l,guildId:t}=e;d=!1,o[t]={guildId:l.guild_id,safeEnvironment:l.safe_environment,healthy:l.healthy,healthScorePending:l.health_score_pending,nsfwProperties:l.nsfw_properties,size:l.size,protected:l.protected,sufficient:l.sufficient,sufficientWithoutGracePeriod:l.sufficient_without_grace_period,gracePeriodEndDate:null!=l.grace_period_end_date?new Date(l.grace_period_end_date):null,retentionHealthy:l.retention_healthy,engagementHealthy:l.engagement_healthy,minimumGuildSize:null!=l.minimum_size?l.minimum_size:1e3,healthScore:l.health_score,minimumGuildAge:null!==(i=l.minimum_age)&&void 0!==i?i:0,age:l.age}}})},658666:function(e,i,l){let t;l.d(i,{Z:()=>P}),l(47120);var n,r,s,a=l(392711),o=l.n(a),d=l(442837),u=l(570140),c=l(944163),m=l(246364),E=l(999382),h=l(118215),g=l(384632),f=l(386885),I=l(981631),v=l(388032);let _={verificationDirty:!1,guildDirty:!1};function N(){let e=E.Z.getGuild();if(null==e)return;let i=h.ZP.getDiscoveryChecklist(e.id);if(null!=i)return(0,f.V)(e,i)}function x(){var e;let i=E.Z.getGuildId();return null==i?null:null===(e=c.Z.get(i))||void 0===e?void 0:e.formFields}function S(){let e=x();if(null==e)return;let i=e.find(e=>(0,m.J)(e));return null==i?[{id:(0,a.uniqueId)(),value:""}]:i.values.map(e=>({id:(0,a.uniqueId)(),value:e}))}function T(){let e=x();if(null==e)return;let i=e.find(e=>(0,m.J)(e));if(0===e.length||1===e.length&&null!=i){let e={field_type:m.QJ.TEXT_INPUT,label:v.intl.string(v.t["83ZsRU"]),required:!0};return null!=i?[i,e]:[e]}return[...e]}function A(e){return e.hasFeature(I.oNc.DISCOVERABLE)?g.A.DISCOVERABLE:e.hasFeature(I.oNc.MEMBER_VERIFICATION_GATE_ENABLED)&&e.hasFeature(I.oNc.MEMBER_VERIFICATION_MANUAL_APPROVAL)?g.A.APPLY:g.A.INVITE}function C(e,i){let l=e.hasFeature(I.oNc.MEMBER_VERIFICATION_GATE_ENABLED)||e.hasFeature(I.oNc.CLAN);switch(i){case g.A.INVITE:return{joinType:g.A.INVITE,requireTerms:l,termRules:S()};case g.A.APPLY:return{joinType:g.A.APPLY,pendingVerificationFields:T()};case g.A.DISCOVERABLE:return{joinType:g.A.DISCOVERABLE,settingsView:N(),requireTerms:l,termRules:S()}}}function j(e,i){var l,t,n,r;let{requireTerms:s,termRules:a}=i;if(e.hasFeature(I.oNc.MEMBER_VERIFICATION_MANUAL_APPROVAL)||e.hasFeature(I.oNc.MEMBER_VERIFICATION_GATE_ENABLED)!==s)return!0;let d=null!==(t=x())&&void 0!==t?t:[];if(d.length>1)return!0;let u=null!==(n=null===(l=d.find(e=>(0,m.J)(e)))||void 0===l?void 0:l.values)&&void 0!==n?n:[],c=null!==(r=null==a?void 0:a.map(e=>e.value.trim()).filter(e=>""!==e))&&void 0!==r?r:[];return!o().isEqual(u,c)}function p(){let e=E.Z.getGuild();if(null==e||null==t){_={verificationDirty:!1,guildDirty:!1};return}let i=A(e)!==t.joinType;switch(t.joinType){case g.A.INVITE:_={verificationDirty:j(e,t),guildDirty:i};break;case g.A.APPLY:let l;let n=x(),{pendingVerificationFields:r}=t,s=!e.hasFeature(I.oNc.MEMBER_VERIFICATION_GATE_ENABLED)||!e.hasFeature(I.oNc.MEMBER_VERIFICATION_MANUAL_APPROVAL);l=null==n?null!=r:null!=r&&!o().isEqual(n,r),_={verificationDirty:s||l,guildDirty:i};break;case g.A.DISCOVERABLE:_={verificationDirty:j(e,t),guildDirty:i||E.Z.hasChanges()}}}function L(){if(null==E.Z.getGuildId()||null==t)return!1;t=t.joinType===g.A.APPLY?{...t,pendingVerificationFields:T()}:{...t,termRules:S()},p()}function D(e){let{section:i,subsection:l}=e;if(i!==I.pNK.ACCESS)return y();let n=E.Z.getGuild();if(null==n)return!1;let r=l===I.KsC.ACCESS_DISCOVERABLE&&n.hasFeature(I.oNc.COMMUNITY)?g.A.DISCOVERABLE:A(n);t=C(n,r),p()}function y(){t=void 0,_={verificationDirty:!1,guildDirty:!1}}function R(){if((null==t?void 0:t.joinType)!==g.A.DISCOVERABLE)return!1;t={...t,settingsView:N()},p()}class F extends(n=d.ZP.Store){initialize(){this.waitFor(E.Z,c.Z,h.ZP),this.syncWith([E.Z,c.Z],()=>{p()})}get pendingState(){return t}get dirtyState(){return _}showNotice(){return _.guildDirty||_.verificationDirty}}s="GuildSettingsJoinRulesStore",(r="displayName")in F?Object.defineProperty(F,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):F[r]=s;let P=new F(u.Z,{GUILD_SETTINGS_JOIN_RULES_INVITE_SET_PENDING_RULES:function(e){let{guildId:i,requireTerms:l,termRules:n}=e;if(i!==E.Z.getGuildId()||(null==t?void 0:t.joinType)!==g.A.INVITE&&(null==t?void 0:t.joinType)!==g.A.DISCOVERABLE)return!1;t={...t,requireTerms:l,termRules:n},p()},GUILD_SETTINGS_JOIN_RULES_APPLY_SET_PENDING_FORM_FIELDS:function(e){let{guildId:i,formFields:l}=e;if(i!==E.Z.getGuildId()||(null==t?void 0:t.joinType)!==g.A.APPLY)return!1;t={...t,pendingVerificationFields:l},p()},GUILD_SETTINGS_JOIN_RULES_SET_SELECTED_TYPE:function(e){let{guildId:i,joinType:l}=e,n=E.Z.getGuild();if(i!==(null==n?void 0:n.id))return!1;t=C(n,l),p()},MEMBER_VERIFICATION_FORM_UPDATE:L,MEMBER_VERIFICATION_FORM_FETCH_FAIL:L,GUILD_SETTINGS_INIT:D,GUILD_SETTINGS_SET_SECTION:D,GUILD_SETTINGS_CLOSE:y,DISCOVER_CHECKLIST_FETCH_SUCCESS:R,GUILD_UPDATE_DISCOVERY_METADATA_FROM_SERVER:R,GUILD_SETTINGS_SUBMIT_SUCCESS:R})},384632:function(e,i,l){l.d(i,{A:()=>n});var t,n=((t={}).INVITE="invite",t.APPLY="apply",t.DISCOVERABLE="discoverable",t)},386885:function(e,i,l){l.d(i,{U:()=>r,V:()=>s});var t,n=l(981631),r=((t={}).INELIGIBLE="ineligible",t.DISQUALIFIED="disqualified",t.ELIGIBLE_DISABLED="eligible_disabled",t.ELIGIBLE_ENABLED="eligible_enabled",t);function s(e,i){let l=e.hasFeature(n.oNc.VERIFIED),t=e.hasFeature(n.oNc.DISCOVERABLE);if(l)return t?"eligible_enabled":"eligible_disabled";if(t){let e=i.sufficientWithoutGracePeriod&&null!=i.gracePeriodEndDate&&i.gracePeriodEndDate>new Date;return i.sufficient||e?"eligible_enabled":"disqualified"}return i.sufficient?"eligible_disabled":"ineligible"}}}]);
//# sourceMappingURL=5455e5960de41554.js.map