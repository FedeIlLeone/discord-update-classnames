"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["53682"],{621054:function(e){e.exports="/assets/822cb9ca19556451.svg"},683958:function(e,t,n){n.d(t,{ApplicationCommandShareModal:()=>C}),n(47120);var l=n(200651),s=n(192379),i=n(481060),a=n(911969),r=n(835473),o=n(987509),u=n(72214),c=n(592125),d=n(430824),h=n(823379),m=n(213459),f=n(667204),b=n(739980),g=n(617266),p=n(333861),x=n(388032),_=n(125135),v=n(621054);let Z=[a.yU.CHAT],j=()=>{(0,i.Mr3)(p.s)};function y(e){let{sendLabel:t,canSend:n,isSending:a,onSend:r}=e,o=s.useCallback(()=>{r()},[r]);return(0,l.jsx)(i.mzw,{className:_.footerWithMessage,children:(0,l.jsx)("div",{className:_.footerButtons,children:(0,l.jsx)(i.zxk,{className:_.sendWithMessage,submitting:a,disabled:!n,onClick:o,children:t})})})}function C(e){var t;let{applicationId:n,channel:a,command:p,onClose:C,requireLaunchChannel:N,onShareResult:S,previewMessage:E,...L}=e,M=s.useMemo(()=>(0,o.dL)(a.id),[a]),[P,T]=s.useState(!1),{commands:w,loading:A}=(t={channel:a,type:"channel"},(0,m.v1)(t,{commandTypes:Z},{applicationId:n,allowFetch:!1,allowApplicationState:!0})),R=s.useRef(0),[D,k]=s.useState(N?[M]:[]),I=D.length,F=I>=5,[U,q]=s.useState(""),{results:z,updateSearchText:H}=(0,u.s)({selectedDestinations:D,originDestination:M,includeMissingDMs:!0}),W=s.useCallback(e=>{q(e),H(e)},[H]),O=s.useCallback(()=>{S(!1),C()},[S,C]),[G]=(0,r.Z)([n]),X=s.useCallback(()=>{q("")},[q]),B=s.useRef(null);s.useEffect(()=>{if(""===U){var e;null===(e=B.current)||void 0===e||e.focus()}},[U]);let V=s.useCallback(e=>{k(t=>{let n=t.findIndex(t=>{let{type:n,id:l}=t;return n===e.type&&l===e.id});if(-1===n)return F?t:(q(""),R.current+=1,[e,...t]);let l=[...t];return l.splice(n,1),R.current+=1,l})},[F]),[Y,J]=s.useMemo(()=>{if(A)return[null,!1];let e=w.find(e=>e.untranslatedName===p);return void 0!==e?[e,!1]:[null,!0]},[p,w,A]),Q=s.useCallback(async function(e){let{closeAfterSend:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===Y)return;T(!0);let n=(await Promise.all(e.map(o.qx))).filter(h.lm);t&&(S(!0),j()),n.forEach(async e=>{let t=c.Z.getChannel(e);if(null==t)return;let n=d.Z.getGuild(null==t?void 0:t.guild_id);null!=await (0,f.Z)({command:Y,optionValues:{},context:{channel:t,guild:n}})&&(0,i.showToast)((0,i.createToast)(x.intl.string(x.t["5WjJcn"]),i.ToastType.MESSAGE))}),S(!0),j()},[S,Y]),K=s.useCallback(()=>{Q(D,{closeAfterSend:!0})},[Q,D]);if(A)return(0,l.jsx)(i.Y0X,{className:_.modal,"aria-label":x.intl.string(x.t.fuFvw8),...L,children:(0,l.jsx)(i.$jN,{className:_.spinnerContainer})});J&&(i.Y0X,_.modal,x.intl.string(x.t.fuFvw8),i.hzk,x.intl.string(x.t.yAk8ZW));let $=z.length>0?(0,l.jsx)(g.F,{paddingBottom:16,paddingTop:16,rowData:z,handleToggleDestination:V,selectedDestinations:D,disableSelection:F,originDestination:M}):(0,l.jsxs)(i.hzk,{className:_.noResults,children:[(0,l.jsx)("img",{className:_.noResultsImg,src:v,alt:""}),(0,l.jsx)(i.Text,{variant:"text-md/normal",color:"text-muted",children:x.intl.string(x.t.V6nAfH)})]});return(0,l.jsxs)(i.Y0X,{className:_.modal,"aria-label":x.intl.string(x.t.fuFvw8),...L,children:[(0,l.jsxs)(i.xBx,{className:_.header,children:[(0,l.jsxs)("div",{className:_.titleLine,children:[(0,l.jsx)("div",{className:_.title,children:(0,l.jsxs)(i.y5t,{component:(0,l.jsxs)(i.X6q,{variant:"heading-lg/semibold",children:["Share from ",null==G?void 0:G.name,"?"]}),children:[F?(0,l.jsx)(i.Text,{variant:"text-sm/normal",color:"text-warning",children:x.intl.format(x.t["/KhyPT"],{count:5})}):null,(0,l.jsx)(i.X6q,{variant:"heading-sm/normal",color:"header-muted",children:x.intl.string(x.t["DF+q2t"])})]})}),(0,l.jsx)(i.olH,{className:_.closeButton,onClick:O})]}),void 0!==E?(0,l.jsx)(b.z,{previewMessage:E}):null,(0,l.jsx)(i.E1j,{className:_.search,ref:B,size:i.E1j.Sizes.MEDIUM,query:U,onChange:W,onClear:X,placeholder:x.intl.string(x.t["5h0QOD"]),"aria-label":x.intl.string(x.t["5h0QOD"]),autoFocus:!0})]}),$,(0,l.jsx)(y,{sendLabel:x.intl.string(x.t.TXNS7e),canSend:I>0,isSending:P,onSend:K})]})}},739980:function(e,t,n){n.d(t,{z:()=>c});var l=n(200651),s=n(192379),i=n(954654),a=n(937889),r=n(930282),o=n(524444),u=n(45086);function c(e){let{previewMessage:t}=e,{content:n}=(0,a.ZP)(t,{allowHeading:!0,allowLinks:!0}),c=t.attachments.map((e,t)=>{let n=(0,o.Yi)({src:e.url,containerClassName:u.previewImage,imageContainerClassName:u.previewImage,height:void 0!==e.height?e.height:225,width:void 0!==e.width?e.width:225,maxHeight:225,maxWidth:225,analyticsSource:"ApplicationCommandSharePreview"});return(0,l.jsx)(s.Fragment,{children:n},t)});return(0,l.jsxs)("div",{className:u.previewContainer,children:[(0,l.jsx)("div",{className:u.quote}),(0,l.jsxs)("div",{className:u.content,children:[(0,l.jsx)(r.ZP,{message:t,content:n}),c,t.components.length>0?(0,l.jsx)(i.ZP,{message:t,shouldDisableInteractiveComponents:!0}):null]})]})}},617266:function(e,t,n){n.d(t,{F:()=>q});var l=n(200651),s=n(192379),i=n(120356),a=n.n(i),r=n(913527),o=n.n(r),u=n(91192),c=n(442837),d=n(481060),h=n(700582),m=n(493773),f=n(724757),b=n(212819),g=n(933557),p=n(266076),x=n(810123),_=n(448486),v=n(987509),Z=n(131704),j=n(592125),y=n(430824),C=n(496675),N=n(158776),S=n(306680),E=n(699516),L=n(594174),M=n(55935),P=n(823379),T=n(51144),w=n(981631),A=n(490897),R=n(388032),D=n(125135);function k(e){let{destination:t,icon:n,label:i,subLabel:r,selected:o,disabled:c,onPressDestination:h,"aria-setsize":f,"aria-posinset":b}=e,g=(0,u.JA)(t.id),p=s.useRef(!1),x=s.useCallback(()=>{c||null==h||h(t)},[h,c,t]);return(0,m.ZP)(()=>()=>()=>{p.current&&(p.current=!1,null==h||h(t,{transitionToDestination:!1,closeAfterSend:!1}))}),(0,l.jsxs)(d.P3F,{className:a()(D.destinationRow,{[D.disabled]:c}),onClick:x,"aria-selected":o,"aria-setsize":f,"aria-posinset":b,...g,children:[(0,l.jsxs)("div",{className:D.identity,children:[(0,l.jsx)("div",{className:D.iconWrapper,children:n}),(0,l.jsxs)("div",{className:D.labels,children:[(0,l.jsx)(d.Text,{tag:"strong",className:D.label,variant:"text-md/semibold",lineClamp:1,children:i}),(0,l.jsx)(d.Text,{className:D.subLabel,variant:"text-xs/normal",color:"text-muted",children:r})]})]}),(0,l.jsx)(d.XZJ,{type:d.XZJ.Types.INVERTED,displayOnly:!0,size:24,value:o,className:D.checkbox})]})}function I(e){let{user:t,subLabel:n,...s}=e,i=T.ZP.useName(t),a=T.ZP.useUserTag(t,{decoration:"never"}),r=(0,c.e7)([E.Z],()=>E.Z.getNickname(t.id)),o=(0,c.e7)([N.Z],()=>N.Z.getStatus(t.id));return(0,l.jsx)(k,{...s,icon:(0,l.jsx)(h.Z,{"aria-hidden":!0,size:d.EFr.SIZE_32,user:t,status:o}),label:null!=r?r:i,subLabel:null!=n?n:a})}function F(e){let{channel:t,subLabel:n,...s}=e,i=(0,g.ZP)(t),a=(0,_._)(t);return(0,l.jsx)(k,{...s,icon:(0,l.jsx)(p.Z,{"aria-hidden":!0,size:d.EFr.SIZE_32,channel:t,experimentLocation:"application-command-modal"}),label:i,subLabel:null!=n?n:a})}function U(e){let{channel:t,subLabel:n,...s}=e,i=(0,c.e7)([y.Z],()=>y.Z.getGuild(null==t?void 0:t.guild_id)),a=(0,g.ZP)(t),r=(0,c.e7)([j.Z,L.default,E.Z],()=>{let e=j.Z.getChannel(t.parent_id);return null==e?null:(0,g.F6)(e,L.default,E.Z,!1)}),u=(0,c.e7)([S.ZP],()=>S.ZP.lastMessageTimestamp(t.id,A.W.CHANNEL)),h=null==i?void 0:i.name;if(t.isThread()||t.isForumPost()){let e=t.isForumPost()?d.Mmi:d.VL1;h=(0,l.jsxs)("div",{className:D.threadSubLabel,children:[(0,l.jsx)(e,{color:d.TVs.colors.TEXT_SECONDARY,className:D.subLabelIcon}),(0,l.jsx)(d.Text,{variant:"text-xs/medium",color:"text-secondary",lineClamp:1,children:r}),null!=u?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.Text,{className:D.subLabelSeparator,variant:"text-xs/medium",color:"text-secondary",children:"â€¢"}),(0,l.jsx)(d.Text,{variant:"text-xs/medium",color:"text-secondary",children:(0,M.Xf)(o()(u))})]}):null]})}return(0,l.jsx)(k,{...s,icon:(0,l.jsx)(x.Z,{size:x.E.SMALL_32,guild:i,channel:t}),label:a,subLabel:null!=n?n:h})}function q(e){let{rowData:t,selectedDestinations:n,handleToggleDestination:i,disableSelection:a,originDestination:r,...o}=e,c=s.useMemo(()=>[t.length],[t.length]),h=s.useCallback(()=>48,[]),m=s.useMemo(()=>{var e;return null!==(e=null==n?void 0:n.map(v.hC))&&void 0!==e?e:[]},[n]),g=s.useCallback(e=>{let{section:n,row:s}=e;if(n>0)return;let{type:o,record:u}=t[s];if(o===b.h8.HEADER)return;let c=o===b.h8.USER?{type:"user",id:u.id}:{type:"channel",id:u.id},d=(0,v.hC)(c),h=function(e,t){if(t instanceof Z.Sf&&(0,Z.Km)(t.type)){if(null!=t.rateLimitPerUser&&t.rateLimitPerUser>0&&!(C.Z.can(w.Plq.MANAGE_CHANNELS,t)||C.Z.can(w.Plq.MANAGE_MESSAGES,t)))return{label:R.intl.string(R.t.Icu3bW)};if(t.isThread()||t.isForumPost()||!C.Z.can(w.Plq.USE_APPLICATION_COMMANDS,t))return{label:R.intl.string(R.t.v8MLq6)};let n=(0,v.dL)(t.id);if(e.id===n.id)return{label:R.intl.string(R.t.mD4gqa)}}}(r,u),f=m.includes(d),g={key:d,destination:c,subLabel:null!=h?h.label:void 0,disabled:a&&!f||null!=h,selected:f,onPressDestination:i,"aria-posinset":s+1,"aria-setsize":t.length};return o===b.h8.USER?(0,l.jsx)(I,{user:u,...g}):o===b.h8.GROUP_DM?(0,l.jsx)(F,{channel:u,...g}):o===b.h8.TEXT_CHANNEL||o===b.h8.VOICE_CHANNEL?(0,l.jsx)(U,{channel:u,...g}):void(0,P.vE)(o)},[a,i,r,t,m]),p=s.useRef(null),x=(0,f.Z)("share-command-modal",p);return(0,l.jsx)(u.bG,{navigator:x,children:(0,l.jsx)(u.SJ,{children:e=>{let{ref:t,...n}=e;return(0,l.jsx)(d.YAO,{scrollerRef:e=>{var n;p.current=e,t.current=null!==(n=null==e?void 0:e.getScrollerNode())&&void 0!==n?n:null},...n,...o,sections:c,sectionHeight:0,renderRow:g,rowHeight:h})}})})}},448486:function(e,t,n){n.d(t,{_:()=>u});var l=n(192379),s=n(442837),i=n(594174),a=n(823379),r=n(51144),o=n(388032);function u(e){let t=(0,s.Wu)([i.default],()=>e.recipients.map(e=>i.default.getUser(e)).filter(a.lm).map(e=>r.ZP.getName(e)));return l.useMemo(()=>""===e.name?null:function(e){if(0===e.length)return null;if(1===e.length)return o.intl.formatToPlainString(o.t["J+Wpsr"],{first:e[0]});if(2===e.length)return o.intl.formatToPlainString(o.t.gwRP0d,{first:e[0],second:e[1]});if(3===e.length)return o.intl.formatToPlainString(o.t.QDB5en,{first:e[0],second:e[1],third:e[2]});let t=e.length-3;return o.intl.formatToPlainString(o.t.VYfueX,{first:e[0],second:e[1],third:e[2],count:t})}(t),[e,t])}},41837:function(e,t,n){n.d(t,{M:()=>s,o:()=>i});var l=n(212819);let s=Array.from([l.h8.USER,l.h8.TEXT_CHANNEL,l.h8.VOICE_CHANNEL,l.h8.GROUP_DM]);function i(e){return s.includes(e.type)}},987509:function(e,t,n){n.d(t,{ZP:()=>Z,dL:()=>f,hC:()=>b,hl:()=>g,qx:()=>p}),n(47120),n(653041);var l=n(392711),s=n(493683),i=n(212819),a=n(938078),r=n(823385),o=n(592125),u=n(496675),c=n(594174),d=n(823379),h=n(41837),m=n(981631);function f(e){let t=o.Z.getChannel(e);return(null==t?void 0:t.type)===m.d4z.DM?{type:"user",id:t.recipients[0]}:{type:"channel",id:e}}function b(e){return"".concat(e.type,"-").concat(e.id)}function g(e){if("channel"===e.type)return e.id;let t=o.Z.getDMFromUserId(e.id);if(null!=t)return t}async function p(e){let t=g(e);if(null!=t)return t;if("user"===e.type)try{return await s.Z.getOrEnsurePrivateChannel(e.id)}catch(e){return}}function x(e){if("user"!==e.type)return(0,a.Z)(e.id);{let t=c.default.getUser(e.id);return null!=t?{type:i.h8.USER,record:t,score:0}:null}}function _(e,t){let n;let l=new Set;if(null!=t)for(let e of t)l.add(e);let s=[];for(let t of e)if(null!=t){if(t.type===i.h8.HEADER)n=t;else{let{id:e}=t.record;l.has(e)||(l.add(e),null!=n&&(s.push(n),n=void 0),s.push(t))}}return s}function v(e,t){return e.filter(e=>(0,d.lm)(e)&&(e.type===i.h8.HEADER||(0,h.o)(e)&&(e.type===i.h8.USER?t||null!=o.Z.getDMChannelFromUserId(e.record.id):e.type===i.h8.GROUP_DM||e.record.type!==m.d4z.GUILD_FORUM&&e.record.type!==m.d4z.GUILD_MEDIA&&u.Z.can(m.Plq.VIEW_CHANNEL,e.record)&&u.Z.can(m.Plq.SEND_MESSAGES,e.record))))}function Z(e){let{results:t,hasQuery:n,queryMode:s,frequentChannels:i,targetDestination:o,selectedDestinations:u,pinnedDestinations:c,originDestination:d,includeMissingDMs:h}=e;if(n)return _(v(t,h));let m=null!=c&&c.length>0?c.map(e=>x(e)):[],f=r.Z.getChannelHistory(),b=f.length>0?f.map(e=>(0,a.Z)(e)):[],g=i.length>0?i.map(e=>(0,a.Z)(e.id)):[],p=v([...m,null!=o?x(o):null,...b,...g],h),Z=(null==u?void 0:u.find(e=>(0,l.isEqual)(e,d)))!=null,j=null==d||Z?[]:[d.id];return null!=s?_(p.filter(e=>e.type===s)):_(p,j).slice(0,15)}n(388032)},601565:function(e,t,n){n.d(t,{Z:()=>a}),n(47120);var l=n(192379),s=n(211266),i=n(212819);function a(e){let{searchOptions:t}=e,[n,a]=l.useState({results:[],query:""}),r=(0,s.Z)(()=>{let e=new i.ZP((e,t)=>{a({results:e,query:t})});return e.setLimit(20),e.search(""),e});return l.useEffect(()=>()=>r.destroy(),[r]),l.useEffect(()=>{null!=t&&t!==r.options&&r.setOptions(t)},[r,t]),{search:l.useCallback(e=>{var t;let{query:n,resultTypes:l}=e;(null==r.resultTypes||(t=r.resultTypes,!(l.length===t.size&&l.every(e=>t.has(e)))))&&(r.setResultTypes(l),r.setLimit(1===l.length?50:20)),r.search(""===n.trim()?"":n)},[r]),...n}}},72214:function(e,t,n){n.d(t,{s:()=>f}),n(47120);var l=n(192379),s=n(442837),i=n(38618),a=n(51596),r=n(516373),o=n(314897),u=n(580005),c=n(987509),d=n(601565),h=n(41837);function m(e){let{query:t,queryMode:n}=(0,a.F_)(e),l=h.M,s=null;return null!=n&&h.M.includes(n)&&(l=[n],s=n),{query:t,queryMode:s,resultTypes:l}}function f(e){let{targetDestination:t,selectedDestinations:n,originDestination:a,includeMissingDMs:h=!1}=e,f=(0,s.e7)([o.default],()=>o.default.getId()),b=l.useMemo(()=>({searchOptions:{blacklist:new Set(["user:".concat(f)]),frecencyBoosters:!0,userFilters:null}}),[f]),{search:g,query:p,results:x}=(0,d.Z)(b),[_,v]=l.useState(m("")),Z=l.useCallback(e=>v(m(e)),[v]),{queryMode:j}=_,[y,C]=l.useState(null!=n?n:[]),N=l.useRef(n);l.useEffect(()=>{N.current=n}),l.useLayoutEffect(()=>{var e;let{query:t,resultTypes:n}=_;g({query:t,resultTypes:n}),C(null!==(e=N.current)&&void 0!==e?e:[])},[g,_]),(0,r.D)();let S=(0,s.e7)([u.Z],()=>u.Z.getFrequentlyWithoutFetchingLatest()),E=(0,s.e7)([i.Z],()=>i.Z.isConnected()),L=""!==p;return{results:l.useMemo(()=>(0,c.ZP)({results:x,hasQuery:L,queryMode:j,targetDestination:t,frequentChannels:S,selectedDestinations:n,pinnedDestinations:y,originDestination:a,includeMissingDMs:h,isConnected:E}),[x,L,j,t,S,n,y,a,h,E]),updateSearchText:Z}}},125135:function(e,t,n){e.exports={modal:"modal__506b8",header:"header__506b8",search:"search__506b8",titleLine:"titleLine__506b8",title:"title__506b8",closeButton:"closeButton__506b8",footerWithMessage:"footerWithMessage__506b8",footerButtons:"footerButtons__506b8",destinationRow:"destinationRow__506b8",disabled:"disabled__506b8",identity:"identity__506b8",labels:"labels__506b8",label:"label__506b8",threadSubLabel:"threadSubLabel__506b8",subLabelIcon:"subLabelIcon__506b8",subLabelSeparator:"subLabelSeparator__506b8",iconWrapper:"iconWrapper__506b8",subLabel:"subLabel__506b8",checkbox:"checkbox__506b8",noResults:"noResults__506b8",noResultsImg:"noResultsImg__506b8",sendWithMessage:"sendWithMessage__506b8",spinnerContainer:"spinnerContainer__506b8"}},45086:function(e,t,n){e.exports={previewContainer:"previewContainer__9a244",quote:"quote__9a244",content:"content__9a244",previewImage:"previewImage__9a244"}}}]);
//# sourceMappingURL=02293500f8d6f612.js.map