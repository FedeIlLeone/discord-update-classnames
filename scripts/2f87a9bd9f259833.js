"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["74590"],{144452:function(e){e.exports="/assets/64a47ba893401c1c.svg"},22864:function(e,t,n){n.d(t,{Z:()=>u});var l=n(348327),a=n.n(l),s=n(392711),i=n.n(s),r=n(442837),o=n(566006),c=n(542578),d=n(981631);function u(e){var t,n;let{channelId:l,messageId:s,reaction:u}=e,m=(0,r.e7)([c.Z],()=>{let e=c.Z.getReactions(l,s,u.emoji,d.pTL,o.O.VOTE);return i().map(e,e=>e)},[l,s,u.emoji],a());return{reactors:m,hasMore:(null!==(n=null===(t=u.count_details)||void 0===t?void 0:t.vote)&&void 0!==n?n:0)>m.length}}},651081:function(e,t,n){n.d(t,{default:()=>R}),n(47120),n(653041),n(411104);var l=n(200651),a=n(192379),s=n(120356),i=n.n(s),r=n(442837),o=n(481060),c=n(129861),d=n(700582),u=n(493773),m=n(410030),v=n(111028),h=n(566006),_=n(222677),x=n(592125),j=n(594174),p=n(768581),f=n(176354),g=n(5192),C=n(91047),N=n(79390),T=n(918088),S=n(22864),w=n(981631),b=n(388032),M=n(949526),Z=n(144452);let k=h.O.VOTE;function P(){let e=(0,m.ZP)();return(0,l.jsxs)(o.ubH,{theme:e,children:[(0,l.jsx)(o.oxh,{darkSrc:Z,lightSrc:Z,width:106,height:100,style:{marginBottom:10}}),(0,l.jsx)(o.OZU,{note:b.intl.string(b.t.bwytdn),noteClassName:M.emptyText,className:M.emptyTitle,children:b.intl.string(b.t.vhQK3t)})]})}function y(e){var t;let{emoji:n,emojiSize:a,imageClassNames:s,textClassNames:i}=e,r=null==n.id?f.ZP.getURL(n.name):p.ZP.getEmojiURL({id:n.id,animated:null!==(t=n.animated)&&void 0!==t&&t,size:a});return null!=r&&""!==r?(0,l.jsx)("img",{className:s,src:r,alt:n.name}):(0,l.jsx)("span",{className:i,children:n.name})}function I(e){let{poll:t,reactionVoteCounts:n,selectedAnswerId:a,onSelectAnswer:s}=e;return(0,l.jsx)(o.njP,{look:"custom",orientation:"vertical","aria-label":b.intl.string(b.t["qbir+/"]),selectedItem:a,onItemSelect:s,children:t.answers.map(e=>{var t;let s=String(e.answer_id),r=null!==(t=n[s])&&void 0!==t?t:0,{emoji:c,text:d}=e.poll_media,u=b.intl.formatToPlainString(b.t.wqBc7O,{numVotes:r,option:d}),m=a===s;return(0,l.jsxs)(o.njP.Item,{id:s,className:i()({[M.voteDefault]:!m,[M.voteSelected]:m}),"aria-label":u,selectedItem:a,children:[null!=c?(0,l.jsx)(y,{emoji:c,emojiSize:16,imageClassNames:M.emoji,textClassNames:i()(M.emoji,M.emojiText),"aria-hidden":!0}):null,(0,l.jsx)(o.Text,{variant:"text-sm/semibold",color:"text-secondary",lineClamp:1,children:(0,l.jsx)(v.Z,{position:"left","aria-hidden":!0,children:d})}),(0,l.jsxs)(o.Text,{variant:"text-sm/semibold",color:"text-secondary",className:M.voteCount,children:["(",r.toLocaleString(),")"]})]},s)})})}function E(e){let{user:t,channel:n}=e,a=(0,r.e7)([j.default],()=>j.default.getUser(t.id),[t]),s=g.ZP.useName(n.guild_id,n.id,t);return(0,l.jsxs)("div",{className:M.voterDefault,onContextMenu:e=>(0,C.Pv)(e,t,n),children:[(0,l.jsx)("div",{className:M.voterAvatarContainer,children:(0,l.jsx)(d.Z,{user:null!=a?a:t,size:o.EFr.SIZE_24,"aria-hidden":!0})}),(0,l.jsxs)(o.Text,{tag:"span",variant:"text-md/normal",className:M.name,"aria-label":s,children:[(0,l.jsx)("span",{className:t.isPomelo()?"":M.nickname,children:s}),(0,l.jsx)(c.Z,{user:t,className:M.tagFaded,usernameClass:M.username,discriminatorClass:M.discriminator,forceUsername:!0})]})]})}function L(e){let{message:t,reaction:n,channel:s}=e,{reactors:i,hasMore:r}=(0,S.Z)({channelId:s.id,messageId:t.id,reaction:n}),c=a.useRef(null),d=a.useRef(null),[m,v]=a.useState(!1),h=a.useCallback(async()=>{let e=d.current;v(!0);let l=await _.U0({channelId:s.id,messageId:t.id,emoji:n.emoji,limit:w.pTL,after:e,type:k});d.current=l[l.length-1].id,v(!1)},[s.id,t.id,n.emoji]);(0,u.ZP)(()=>{h()});let x=a.useCallback(()=>{let{current:e}=c;if(null==e)return;let t=e.getScrollerState();t.scrollTop+t.offsetHeight>=t.scrollHeight-44&&r&&!m&&h()},[c,r,m,h]),j=a.useCallback((e,t)=>{if(1===e)return 0===t?44:0;if(0===e){if(0===t&&0===i.length)return 440;if(null!=i[t])return 44}return 0},[i]),p=a.useCallback(e=>{let{section:t,row:n}=e,a=i[n];return 1===t?0===n?(0,l.jsx)(o.$jN,{className:M.spinnerMore},"hasMore"):null:0===i.length&&m?(0,l.jsx)(o.$jN,{className:M.spinner},"loadingMore"):null!=a&&(0,l.jsx)(E,{channel:s,user:a},a.id)},[s,m,i]),f=a.useMemo(()=>{let e=[];return 0===i.length&&m?e.push(0):(e.push(i.length),r&&e.push(1)),e},[r,m,i.length]);return(0,l.jsx)("div",{className:M.votersListContainer,children:(0,l.jsx)(o.aVo,{className:M.voters,fade:!0,ref:c,sections:f,sectionHeight:0,rowHeight:j,renderRow:p,onScroll:r?x:void 0})})}function R(e){var t;let{message:n,initialAnswerId:s,onClose:i,transitionState:c}=e,d=(0,r.e7)([x.Z],()=>x.Z.getChannel(n.getChannelId())),[u,m]=a.useState(s),v=a.useMemo(()=>{if(null!=n.reactions)return(0,T.ef)(n.reactions,u)},[n.reactions,u]),h=a.useMemo(()=>(0,N.cZ)(n.reactions),[n.reactions]),_=a.useMemo(()=>(function(e){let t={};for(let a of e){var n,l;let e=null!==(l=null===(n=a.count_details)||void 0===n?void 0:n.vote)&&void 0!==l?l:0,s=a.emoji.id;null!=s&&(t[s]=e)}return t})(n.reactions),[n.reactions]),j=_[u],p=a.useMemo(()=>{var e;let t={};return null===(e=n.poll)||void 0===e||e.answers.forEach(e=>{var n;(null==e?void 0:e.answer_id)!=null&&(null===(n=e.poll_media)||void 0===n?void 0:n.text)!=null&&(t[e.answer_id]=e.poll_media.text)}),t},[null===(t=n.poll)||void 0===t?void 0:t.answers]),f=b.intl.formatToPlainString(b.t.wqBc7O,{numVotes:j,option:p[u]});if(null==d)throw Error("PollVotesModal.render: Message does not have a channelId");if(null==n.poll)throw Error("PollVotesModal.render: Message does not have a poll");return(0,l.jsxs)(o.Y0X,{"aria-label":b.intl.string(b.t.H0lNmp),transitionState:c,size:o.CgR.MEDIUM,children:[(0,l.jsxs)(o.xBx,{className:M.header,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(o.Text,{color:"header-primary",variant:"text-md/semibold",className:M.question,children:n.poll.question.text}),(0,l.jsx)(o.Text,{variant:"text-md/medium",color:"text-normal",children:b.intl.format(b.t.XRkuoa,{count:h.toLocaleString()})})]}),(0,l.jsx)(o.olH,{onClick:i,className:M.close})]}),(0,l.jsxs)("div",{className:M.content,children:[(0,l.jsx)(o.Ttm,{className:M.scroller,fade:!0,children:(0,l.jsx)(I,{poll:n.poll,selectedAnswerId:u,onSelectAnswer:m,reactionVoteCounts:_})}),(0,l.jsx)(o.njP.Panel,{id:u,"aria-label":f,className:M.panel,children:null!=v&&j>0?(0,l.jsx)(L,{message:n,reaction:v,channel:d}):(0,l.jsx)(P,{})})]})]})}},949526:function(e,t,n){e.exports={header:"header__01c8c",question:"question__01c8c",close:"close__01c8c",content:"content__01c8c",panel:"panel__01c8c",scroller:"scroller__01c8c",votersListContainer:"votersListContainer__01c8c",voters:"voters__01c8c",voteDefault:"voteDefault__01c8c",voteSelected:"voteSelected__01c8c",emoji:"emoji__01c8c",emojiText:"emojiText__01c8c",voteCount:"voteCount__01c8c",spinner:"spinner__01c8c",spinnerMore:"spinnerMore__01c8c",voter:"voter__01c8c",voterDefault:"voterDefault__01c8c voter__01c8c",voterAvatarContainer:"voterAvatarContainer__01c8c",name:"name__01c8c",nickname:"nickname__01c8c",username:"username__01c8c",tagFaded:"tagFaded__01c8c",discriminator:"discriminator__01c8c",emptyTitle:"emptyTitle__01c8c",emptyText:"emptyText__01c8c"}}}]);
//# sourceMappingURL=2f87a9bd9f259833.js.map