"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["83098"],{621054:function(e){e.exports="/assets/822cb9ca19556451.svg"},207003:function(e,t,l){l.d(t,{Q:()=>w});var n=l(200651),s=l(192379),r=l(120356),a=l.n(r),i=l(913527),u=l.n(i),o=l(91192),c=l(442837),d=l(481060),h=l(700582),f=l(724757),m=l(212819),p=l(933557),x=l(266076),g=l(810123),b=l(448486),_=l(987509),y=l(131704),E=l(592125),S=l(430824),Z=l(496675),N=l(158776),j=l(306680),v=l(699516),C=l(594174),L=l(55935),T=l(823379),R=l(51144),M=l(981631),P=l(490897),k=l(388032),I=l(36984);function D(e){let{destination:t,icon:l,label:r,subLabel:i,selected:u,disabled:c,onPressDestination:h,"aria-setsize":f,"aria-posinset":m}=e,p=(0,o.JA)(t.id),x=s.useCallback(()=>{c||null==h||h(t)},[h,c,t]);return(0,n.jsxs)(d.P3F,{className:a()(I.destinationRow,{[I.disabled]:c}),onClick:x,"aria-selected":u,"aria-setsize":f,"aria-posinset":m,...p,children:[(0,n.jsxs)("div",{className:I.identity,children:[(0,n.jsx)("div",{className:I.iconWrapper,children:l}),(0,n.jsxs)("div",{className:I.labels,children:[(0,n.jsx)(d.Text,{tag:"strong",className:I.label,variant:"text-md/semibold",lineClamp:1,children:r}),(0,n.jsx)(d.Text,{className:I.subLabel,variant:"text-xs/normal",color:"text-muted",children:i})]})]}),(0,n.jsx)(d.XZJ,{type:d.XZJ.Types.INVERTED,displayOnly:!0,size:24,value:u,className:I.checkbox})]})}function A(e){let{user:t,subLabel:l,...s}=e,r=R.ZP.useName(t),a=R.ZP.useUserTag(t,{decoration:"never"}),i=(0,c.e7)([v.Z],()=>v.Z.getNickname(t.id)),u=(0,c.e7)([N.Z],()=>N.Z.getStatus(t.id));return(0,n.jsx)(D,{...s,icon:(0,n.jsx)(h.Z,{"aria-hidden":!0,size:d.EFr.SIZE_32,user:t,status:u}),label:null!=i?i:r,subLabel:null!=l?l:a})}function U(e){let{channel:t,subLabel:l,...s}=e,r=(0,p.ZP)(t),a=(0,b._)(t);return(0,n.jsx)(D,{...s,icon:(0,n.jsx)(x.Z,{"aria-hidden":!0,size:d.EFr.SIZE_32,channel:t,experimentLocation:"application-command-modal"}),label:r,subLabel:null!=l?l:a})}function z(e){let{channel:t,subLabel:l,...s}=e,r=(0,c.e7)([S.Z],()=>S.Z.getGuild(null==t?void 0:t.guild_id)),a=(0,p.ZP)(t),i=(0,c.e7)([E.Z,C.default,v.Z],()=>{let e=E.Z.getChannel(t.parent_id);return null==e?null:(0,p.F6)(e,C.default,v.Z,!1)}),o=(0,c.e7)([j.ZP],()=>j.ZP.lastMessageTimestamp(t.id,P.W.CHANNEL)),h=null==r?void 0:r.name;if(t.isThread()||t.isForumPost()){let e=t.isForumPost()?d.Mmi:d.VL1;h=(0,n.jsxs)("div",{className:I.threadSubLabel,children:[(0,n.jsx)(e,{color:d.TVs.colors.TEXT_SECONDARY,className:I.subLabelIcon}),(0,n.jsx)(d.Text,{variant:"text-xs/medium",color:"text-secondary",lineClamp:1,children:i}),null!=o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Text,{className:I.subLabelSeparator,variant:"text-xs/medium",color:"text-secondary",children:"â€¢"}),(0,n.jsx)(d.Text,{variant:"text-xs/medium",color:"text-secondary",children:(0,L.Xf)(u()(o))})]}):null]})}return(0,n.jsx)(D,{...s,icon:(0,n.jsx)(g.Z,{size:g.E.SMALL_32,guild:r,channel:t}),label:a,subLabel:null!=l?l:h})}function w(e){let{rowData:t,selectedDestinations:l,handleToggleDestination:r,disableSelection:a,...i}=e,u=s.useMemo(()=>[t.length],[t.length]),c=s.useCallback(()=>48,[]),h=s.useMemo(()=>{var e;return null!==(e=null==l?void 0:l.map(_.hC))&&void 0!==e?e:[]},[l]),p=s.useCallback(e=>{let{section:l,row:s}=e;if(l>0)return;let{type:i,record:u}=t[s];if(i===m.h8.HEADER)return;let o=i===m.h8.USER?{type:"user",id:u.id}:{type:"channel",id:u.id},c=(0,_.hC)(o),d=function(e){if(e instanceof y.Sf&&(0,y.Km)(e.type)&&null!=e.rateLimitPerUser&&e.rateLimitPerUser>0&&!(Z.Z.can(M.Plq.MANAGE_CHANNELS,e)||Z.Z.can(M.Plq.MANAGE_MESSAGES,e)))return{label:k.intl.string(k.t.Icu3bW)}}(u),f=h.includes(c),p={key:c,destination:o,subLabel:null!=d?d.label:void 0,disabled:a&&!f||null!=d,selected:f,onPressDestination:r,"aria-posinset":s+1,"aria-setsize":t.length};return i===m.h8.USER?(0,n.jsx)(A,{user:u,...p}):i===m.h8.GROUP_DM?(0,n.jsx)(U,{channel:u,...p}):i===m.h8.TEXT_CHANNEL||i===m.h8.VOICE_CHANNEL?(0,n.jsx)(z,{channel:u,...p}):void(0,T.vE)(i)},[a,r,t,h]),x=s.useRef(null),g=(0,f.Z)("share-command-modal",x);return(0,n.jsx)(o.bG,{navigator:g,children:(0,n.jsx)(o.SJ,{children:e=>{let{ref:t,...l}=e;return(0,n.jsx)(d.YAO,{scrollerRef:e=>{var l;x.current=e,t.current=null!==(l=null==e?void 0:e.getScrollerNode())&&void 0!==l?l:null},...l,...i,sections:u,sectionHeight:0,renderRow:p,rowHeight:c})}})})}},137021:function(e,t,l){l.d(t,{default:()=>E}),l(47120);var n=l(200651),s=l(192379),r=l(442837),a=l(481060),i=l(904245),u=l(311819),o=l(835473),c=l(957730),d=l(987509),h=l(72214),f=l(592125),m=l(594174),p=l(572004),x=l(823379),g=l(207003),b=l(388032),_=l(36984),y=l(621054);function E(e){let{applicationId:t,onClose:l,transitionState:p,message:E,launchParams:Z,onShare:N,...j}=e,[v]=(0,o.Z)([t]),C=(0,r.e7)([m.default],()=>m.default.getCurrentUser()),[L,T]=s.useState(!1),[R,M]=s.useState(""),[P,k]=s.useState("");s.useEffect(()=>{let{referrerId:e,customId:l}=Z;k((0,u.H)({applicationId:t,referrerId:null!=e?e:null==C?void 0:C.id,customId:l}))},[t,C,Z,k]);let I=s.useRef(0),[D,A]=s.useState([]),U=D.length,z=U>=5;s.useEffect(()=>{if(""===R){var e;null===(e=H.current)||void 0===e||e.focus()}},[R]);let w=s.useCallback(()=>{M("")},[M]),H=s.useRef(null),{results:q,updateSearchText:F}=(0,h.s)({selectedDestinations:D,includeMissingDMs:!0}),O=s.useCallback(e=>{M(e),F(e)},[M,F]),B=s.useCallback(e=>{A(t=>{let l=t.findIndex(t=>{let{type:l,id:n}=t;return l===e.type&&n===e.id});if(-1===l)return z?t:(M(""),I.current+=1,[e,...t]);let n=[...t];return n.splice(l,1),I.current+=1,n})},[z]),W=s.useCallback(async e=>{if(null==v)return;let t="".concat(E,"\n").concat(P);T(!0),(await Promise.all(e.map(d.qx))).filter(x.lm).forEach(async e=>{let l=f.Z.getChannel(e);null!=l&&await i.Z.sendMessage(e,c.ZP.parse(l,t))}),(0,a.showToast)((0,a.createToast)(b.intl.formatToPlainString(b.t.jQULqK,{applicationName:v.name}),a.ToastType.SUCCESS)),N(!0),l()},[E,P,l,N,v]),G=q.length>0?(0,n.jsx)(g.Q,{paddingBottom:16,paddingTop:16,rowData:q,handleToggleDestination:B,selectedDestinations:D,disableSelection:z}):(0,n.jsxs)(a.hzk,{className:_.noResults,children:[(0,n.jsx)("img",{className:_.noResultsImg,src:y,alt:""}),(0,n.jsx)(a.Text,{variant:"text-md/normal",color:"text-muted",children:b.intl.string(b.t.V6nAfH)})]});return(0,n.jsxs)(a.Y0X,{transitionState:p,...j,className:_.modalRoot,children:[(0,n.jsxs)(a.xBx,{className:_.header,children:[(0,n.jsxs)("div",{className:_.titleLine,children:[(0,n.jsx)("div",{className:_.title,children:(0,n.jsx)(a.y5t,{component:(0,n.jsx)(a.X6q,{variant:"heading-lg/semibold",children:b.intl.string(b.t.r9qKo6)}),children:(0,n.jsx)(a.Text,{className:_.message,lineClamp:1,variant:"text-sm/medium",color:"text-secondary",children:E})})}),(0,n.jsx)(a.olH,{className:_.closeButton,onClick:l})]}),(0,n.jsx)(a.E1j,{ref:H,size:a.E1j.Sizes.MEDIUM,query:R,onChange:O,onClear:w,placeholder:b.intl.string(b.t["5h0QOD"]),"aria-label":b.intl.string(b.t["5h0QOD"]),autoFocus:!0})]}),G,(0,n.jsx)(a.mzw,{className:_.footer,children:(0,n.jsxs)("div",{className:_.copySendBar,children:[(0,n.jsx)(S,{link:P,onShare:N}),(0,n.jsx)(a.zxk,{className:_.sendWithMessage,onClick:()=>W(D),submitting:L,disabled:!(U>0),children:b.intl.string(b.t.TXNS7e)})]})})]})}function S(e){let{link:t,onShare:l}=e,[r,i]=s.useState(!1);return s.useEffect(()=>{let e;return r&&(e=setTimeout(()=>{i(!1)},1e3)),()=>{null!=e&&clearTimeout(e)}},[r]),(0,n.jsxs)(a.zxk,{look:a.zxk.Looks.LINK,color:a.zxk.Colors.LINK,onClick:function(){(0,p.JG)(t),l(!0),i(!0)},innerClassName:_.copyButton,children:[r?(0,n.jsx)(a.owK,{size:"md",color:"currentColor"}):(0,n.jsx)(a.TIy,{size:"xs",color:"currentColor"}),r?b.intl.string(b.t["t5VZ8/"]):b.intl.string(b.t.WqhZsr)]})}},448486:function(e,t,l){l.d(t,{_:()=>o});var n=l(192379),s=l(442837),r=l(594174),a=l(823379),i=l(51144),u=l(388032);function o(e){let t=(0,s.Wu)([r.default],()=>e.recipients.map(e=>r.default.getUser(e)).filter(a.lm).map(e=>i.ZP.getName(e)));return n.useMemo(()=>""===e.name?null:function(e){if(0===e.length)return null;if(1===e.length)return u.intl.formatToPlainString(u.t["J+Wpsr"],{first:e[0]});if(2===e.length)return u.intl.formatToPlainString(u.t.gwRP0d,{first:e[0],second:e[1]});if(3===e.length)return u.intl.formatToPlainString(u.t.QDB5en,{first:e[0],second:e[1],third:e[2]});let t=e.length-3;return u.intl.formatToPlainString(u.t.VYfueX,{first:e[0],second:e[1],third:e[2],count:t})}(t),[e,t])}},41837:function(e,t,l){l.d(t,{M:()=>s,o:()=>r});var n=l(212819);let s=Array.from([n.h8.USER,n.h8.TEXT_CHANNEL,n.h8.VOICE_CHANNEL,n.h8.GROUP_DM]);function r(e){return s.includes(e.type)}},987509:function(e,t,l){l.d(t,{ZP:()=>E,dL:()=>m,hC:()=>p,hl:()=>x,qx:()=>g}),l(47120),l(653041);var n=l(392711),s=l(493683),r=l(212819),a=l(938078),i=l(823385),u=l(592125),o=l(496675),c=l(594174),d=l(823379),h=l(41837),f=l(981631);function m(e){let t=u.Z.getChannel(e);return(null==t?void 0:t.type)===f.d4z.DM?{type:"user",id:t.recipients[0]}:{type:"channel",id:e}}function p(e){return"".concat(e.type,"-").concat(e.id)}function x(e){if("channel"===e.type)return e.id;let t=u.Z.getDMFromUserId(e.id);if(null!=t)return t}async function g(e){let t=x(e);if(null!=t)return t;if("user"===e.type)try{return await s.Z.getOrEnsurePrivateChannel(e.id)}catch(e){return}}function b(e){if("user"!==e.type)return(0,a.Z)(e.id);{let t=c.default.getUser(e.id);return null!=t?{type:r.h8.USER,record:t,score:0}:null}}function _(e,t){let l;let n=new Set;if(null!=t)for(let e of t)n.add(e);let s=[];for(let t of e)if(null!=t){if(t.type===r.h8.HEADER)l=t;else{let{id:e}=t.record;n.has(e)||(n.add(e),null!=l&&(s.push(l),l=void 0),s.push(t))}}return s}function y(e,t){return e.filter(e=>(0,d.lm)(e)&&(e.type===r.h8.HEADER||(0,h.o)(e)&&(e.type===r.h8.USER?t||null!=u.Z.getDMChannelFromUserId(e.record.id):e.type===r.h8.GROUP_DM||e.record.type!==f.d4z.GUILD_FORUM&&e.record.type!==f.d4z.GUILD_MEDIA&&o.Z.can(f.Plq.VIEW_CHANNEL,e.record)&&o.Z.can(f.Plq.SEND_MESSAGES,e.record))))}function E(e){let{results:t,hasQuery:l,queryMode:s,frequentChannels:r,targetDestination:u,selectedDestinations:o,pinnedDestinations:c,originDestination:d,includeMissingDMs:h}=e;if(l)return _(y(t,h));let f=null!=c&&c.length>0?c.map(e=>b(e)):[],m=i.Z.getChannelHistory(),p=m.length>0?m.map(e=>(0,a.Z)(e)):[],x=r.length>0?r.map(e=>(0,a.Z)(e.id)):[],g=y([...f,null!=u?b(u):null,...p,...x],h),E=(null==o?void 0:o.find(e=>(0,n.isEqual)(e,d)))!=null,S=null==d||E?[]:[d.id];return null!=s?_(g.filter(e=>e.type===s)):_(g,S).slice(0,15)}l(388032)},601565:function(e,t,l){l.d(t,{Z:()=>a}),l(47120);var n=l(192379),s=l(211266),r=l(212819);function a(e){let{searchOptions:t}=e,[l,a]=n.useState({results:[],query:""}),i=(0,s.Z)(()=>{let e=new r.ZP((e,t)=>{a({results:e,query:t})});return e.setLimit(20),e.search(""),e});return n.useEffect(()=>()=>i.destroy(),[i]),n.useEffect(()=>{null!=t&&t!==i.options&&i.setOptions(t)},[i,t]),{search:n.useCallback(e=>{var t;let{query:l,resultTypes:n}=e;(null==i.resultTypes||(t=i.resultTypes,!(n.length===t.size&&n.every(e=>t.has(e)))))&&(i.setResultTypes(n),i.setLimit(1===n.length?50:20)),i.search(""===l.trim()?"":l)},[i]),...l}}},72214:function(e,t,l){l.d(t,{s:()=>m}),l(47120);var n=l(192379),s=l(442837),r=l(38618),a=l(51596),i=l(516373),u=l(314897),o=l(580005),c=l(987509),d=l(601565),h=l(41837);function f(e){let{query:t,queryMode:l}=(0,a.F_)(e),n=h.M,s=null;return null!=l&&h.M.includes(l)&&(n=[l],s=l),{query:t,queryMode:s,resultTypes:n}}function m(e){let{targetDestination:t,selectedDestinations:l,originDestination:a,includeMissingDMs:h=!1}=e,m=(0,s.e7)([u.default],()=>u.default.getId()),p=n.useMemo(()=>({searchOptions:{blacklist:new Set(["user:".concat(m)]),frecencyBoosters:!0,userFilters:null}}),[m]),{search:x,query:g,results:b}=(0,d.Z)(p),[_,y]=n.useState(f("")),E=n.useCallback(e=>y(f(e)),[y]),{queryMode:S}=_,[Z,N]=n.useState(null!=l?l:[]),j=n.useRef(l);n.useEffect(()=>{j.current=l}),n.useLayoutEffect(()=>{var e;let{query:t,resultTypes:l}=_;x({query:t,resultTypes:l}),N(null!==(e=j.current)&&void 0!==e?e:[])},[x,_]),(0,i.D)();let v=(0,s.e7)([o.Z],()=>o.Z.getFrequentlyWithoutFetchingLatest()),C=(0,s.e7)([r.Z],()=>r.Z.isConnected()),L=""!==g;return{results:n.useMemo(()=>(0,c.ZP)({results:b,hasQuery:L,queryMode:S,targetDestination:t,frequentChannels:v,selectedDestinations:l,pinnedDestinations:Z,originDestination:a,includeMissingDMs:h,isConnected:C}),[b,L,S,t,v,l,Z,a,h,C]),updateSearchText:E}}},36984:function(e,t,l){e.exports={modalRoot:"modalRoot__85e39",header:"header__85e39",titleLine:"titleLine__85e39",title:"title__85e39",closeButton:"closeButton__85e39",message:"message__85e39",footer:"footer__85e39",copySendBar:"copySendBar__85e39",copyButton:"copyButton__85e39",destinationRow:"destinationRow__85e39",disabled:"disabled__85e39",identity:"identity__85e39",labels:"labels__85e39",label:"label__85e39",threadSubLabel:"threadSubLabel__85e39",subLabelIcon:"subLabelIcon__85e39",subLabelSeparator:"subLabelSeparator__85e39",iconWrapper:"iconWrapper__85e39",subLabel:"subLabel__85e39",checkbox:"checkbox__85e39",noResults:"noResults__85e39",noResultsImg:"noResultsImg__85e39",sendWithMessage:"sendWithMessage__85e39"}}}]);
//# sourceMappingURL=ab40a3c2ef170d59.js.map