"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["2668"],{24561:function(e){e.exports="/assets/cc9b98ec3d958835.svg"},92708:function(e){e.exports="/assets/052476bcce488519.svg"},703288:function(e,t,l){l.d(t,{Z:()=>r});var a=l(200651);l(192379);var n=l(481060),i=l(688465),s=l(388032);let r=()=>(0,a.jsx)(n.DY3,{text:s.intl.string(s.t["/fgfWl"]),children:(0,a.jsx)(i.Z,{})})},407316:function(e,t,l){l.d(t,{W:()=>s});var a=l(592125),n=l(496675),i=l(981631);function s(e){let t=a.Z.getChannel(e),l=null==t?void 0:t.isPrivate(),s=null==t?void 0:t.isForumChannel();return l||n.Z.can(i.Plq.ATTACH_FILES,t)&&n.Z.can(i.Plq.SEND_MESSAGES,t)&&!s}},10217:function(e,t,l){l.d(t,{Z:()=>M}),l(47120);var a=l(200651),n=l(192379),i=l(120356),s=l.n(i),r=l(913527),o=l.n(r),c=l(442837),d=l(846519),u=l(212605),m=l(481060),p=l(100527),x=l(906732),v=l(70097),h=l(237617),g=l(318374),C=l(717680),f=l(594174),j=l(962399),N=l(626135),k=l(823379),E=l(709054),Z=l(39604),b=l(572720),L=l(981631),y=l(388032),I=l(890202),T=l(25869);let M=function(e){var t,l,i;let{clip:r,exporting:o,actionsDisabled:u,isNew:v,onDelete:C,onEdit:j,onShare:Z}=e,b=(0,c.Wu)([f.default],()=>r.users.map(e=>f.default.getUser(e)).filter(k.lm)),{analyticsLocations:T}=(0,x.ZP)(p.Z.CLIPS_GALLERY_ITEM),[M,P]=n.useState(!1),z=n.useRef(null),w=(0,h.Z)(null!==(i=null===(t=r.editMetadata)||void 0===t?void 0:t.start)&&void 0!==i?i:0),R=n.useRef(new d.sW(500,()=>{var e;let t=z.current;null!=t&&t.paused&&(t.currentTime=w.current,null===(e=z.current)||void 0===e||e.play())})),A=n.useCallback(()=>{let e=z.current;null!=e&&(e.pause(),e.src="")},[]),H=n.useCallback(()=>{var e;P(!0),null===(e=R.current)||void 0===e||e.delay()},[]),V=n.useCallback(()=>{var e,t,l;P(!1);let a=z.current;null===(e=R.current)||void 0===e||e.cancel(),null!=a&&(a.pause(),a.currentTime=null!==(l=null===(t=r.editMetadata)||void 0===t?void 0:t.start)&&void 0!==l?l:0)},[null===(l=r.editMetadata)||void 0===l?void 0:l.start]),B=n.useCallback(e=>{var t,l;(null===(l=e.relatedTarget)||void 0===l?void 0:null===(t=l.parentElement)||void 0===t?void 0:t.parentElement)!==e.currentTarget.parentElement&&V()},[V]),F=new Date(E.default.extractTimestamp(r.id)),Y=F.toLocaleDateString(),O=F.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),G="".concat(Y," â€¢ ").concat(O);return(0,a.jsx)(x.Gt,{value:T,children:(0,a.jsxs)(m.kL8,{"aria-disabled":u,"aria-label":y.intl.string(y.t.bt75u7),onClick:u?void 0:()=>{j(r),N.default.track(L.rMx.CLIP_GALLERY_CARD_CLICKED)},className:s()(I.clipItem,{[I.disabled]:u}),onBlur:B,onFocus:H,onMouseOver:H,onMouseLeave:V,children:[(0,a.jsx)(S,{clip:r,isNew:v,videoRef:z}),(0,a.jsxs)("div",{className:I.clipFooter,children:[(0,a.jsx)(D,{clip:r,focused:M,onFocus:H}),(0,a.jsx)(m.Text,{className:I.clipMetadata,color:"text-normal",variant:"text-md/medium",children:r.applicationName}),(0,a.jsx)(m.Text,{className:I.clipMetadata,color:"text-normal",variant:"text-md/medium",children:G}),(0,a.jsxs)("div",{className:I.usersAndDelete,children:[(0,a.jsx)(g.Z,{maxUsers:4,users:b,onFocus:e=>{var t,l,a,n;let i=e.relatedTarget,s=null===(l=e.currentTarget.parentElement)||void 0===l?void 0:null===(t=l.parentElement)||void 0===t?void 0:t.parentElement;(null==i?void 0:i.parentElement)!==s&&(null==i?void 0:null===(n=i.parentElement)||void 0===n?void 0:null===(a=n.parentElement)||void 0===a?void 0:a.parentElement)!==s&&H()}}),M&&(0,a.jsx)(_,{clip:r,actionsDisabled:u,exporting:o,onBeforeDelete:A,onDelete:C,onEdit:j,onShare:Z,onBlur:e=>{var t;(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentElement)!==e.currentTarget.parentElement&&V()}})]})]})]})})};function S(e){let{clip:t,isNew:l,videoRef:i}=e,s=0===t.length,[r,c]=n.useMemo(()=>{let e=t.length,l=!1,a=null!=t.editMetadata?t.editMetadata.end-t.editMetadata.start:null;return null!=a&&1e3*a<t.length&&(e=1e3*a,l=!0),[l,o().duration(e)]},[t.length,t.editMetadata]),d="".concat(c.seconds()).padStart(2,"0");return(0,a.jsxs)("div",{className:I.clipThumbContainer,children:[(0,a.jsx)(P,{clip:t,videoRef:i}),(0,a.jsxs)("div",{className:I.clipBadges,children:[s&&(0,a.jsx)("div",{className:I.clipProcessingBadge,children:(0,a.jsx)(m.Text,{variant:"text-md/medium",color:"always-white",children:y.intl.string(y.t["2Fp7OD"])})}),!s&&l&&(0,a.jsxs)(m.Text,{className:I.clipNewBadge,variant:"eyebrow",color:"always-white",children:[(0,a.jsx)(m.T$Z,{size:"md",color:"currentColor",className:I.newIcon}),y.intl.string(y.t.y2b7CA).toUpperCase()]}),!s&&(0,a.jsxs)("div",{className:I.clipDurationBadge,children:[r?(0,a.jsx)(j.Z,{className:I.clipDurationEditIcon}):null,(0,a.jsx)(m.Text,{variant:"text-md/medium",color:"always-white",children:"".concat(c.minutes(),":").concat(d)})]})]})]})}function D(e){var t;let{clip:l,focused:i,onFocus:r}=e,[o,c]=n.useState(l.name),d=!l.name,[p,x]=n.useState(!1),[v,h]=n.useState(null!==(t=l.name)&&void 0!==t?t:""),[g,C]=n.useState(!1),f=async()=>{C(!0),await (0,Z.Tm)(l.id,{name:""===v?void 0:v}),C(!1),x(!1)};return(n.useEffect(()=>{if(o!==l.name){var e;c(l.name),h(null!==(e=l.name)&&void 0!==e?e:"")}},[l.name,o]),p)?(0,a.jsx)(m.oil,{inputClassName:s()(T["heading-lg/medium"],I.clipTitleInput),onClick:e=>e.stopPropagation(),value:v,autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&f()},disabled:g,onChange:h,onBlur:f}):(0,a.jsxs)(m.P3F,{className:I.clipTitleInputPlaceholder,onFocus:r,onClick:e=>{e.stopPropagation(),x(!0)},children:[d?(0,a.jsx)(m.X6q,{className:I.clipTitle,color:"text-muted",variant:"heading-lg/medium",children:y.intl.string(y.t["x+/nmJ"])}):(0,a.jsx)(m.X6q,{className:I.clipTitle,color:"text-normal",variant:"heading-lg/medium",children:l.name}),i&&(0,a.jsx)(m.vdY,{size:"custom","aria-label":y.intl.string(y.t.bt75u7),color:m.TVs.colors.TEXT_MUTED,height:u.Z.sm,width:u.Z.sm,className:I.clipTitleIcon})]})}function P(e){let{clip:t,videoRef:l}=e,n=(0,b.l)(t);return 0===t.length?(0,a.jsx)(m.$jN,{type:m.RAz.SPINNING_CIRCLE_SIMPLE,className:I.clipThumb}):null!=n?(0,a.jsx)(v.Z,{preload:"metadata",muted:!0,poster:t.thumbnail,src:n,loop:!0,className:I.clipThumb,ref:l}):(0,a.jsx)("img",{alt:"",src:t.thumbnail,className:I.clipThumb})}function _(e){let{clip:t,exporting:l,actionsDisabled:i,onBeforeDelete:s,onDelete:r,onEdit:o,onShare:c,onBlur:d}=e,u=(0,C.Z)(),p=n.useCallback(e=>{e.stopPropagation(),e.shiftKey?(s(),(0,Z.sS)(t.filepath)):r(t,s),N.default.track(L.rMx.CLIP_GALLERY_CARD_BUTTON_CLICKED,{type:"delete"})},[r,s,t]),x=n.useCallback(e=>{e.stopPropagation(),o(t),N.default.track(L.rMx.CLIP_GALLERY_CARD_BUTTON_CLICKED,{type:"edit"})},[o,t]),v=n.useCallback(e=>{e.stopPropagation(),c(t),N.default.track(L.rMx.CLIP_GALLERY_CARD_BUTTON_CLICKED,{type:"share"})},[c,t]);return(0,a.jsxs)("div",{className:I.buttonContainer,children:[null!=r&&(0,a.jsx)(m.ua7,{text:y.intl.string(y.t.oyYWHB),children:e=>(0,a.jsx)(m.zxk,{...e,disabled:i,color:u?m.zxk.Colors.RED:m.zxk.Colors.PRIMARY,onClick:p,className:I.button,size:m.zxk.Sizes.NONE,look:m.zxk.Looks.FILLED,children:(0,a.jsx)(m.XHJ,{size:"md",color:"currentColor",className:I.miniIcon})})}),(0,a.jsx)(m.ua7,{text:y.intl.string(y.t.bt75u7),children:e=>(0,a.jsx)(m.zxk,{...e,disabled:i,color:m.zxk.Colors.PRIMARY,onClick:x,className:I.button,size:m.zxk.Sizes.NONE,look:m.zxk.Looks.FILLED,children:(0,a.jsx)(j.Z,{className:I.miniIcon})})}),(0,a.jsx)(m.ua7,{text:y.intl.string(y.t.RDE0SU),children:e=>{let{onBlur:t,...n}=e;return(0,a.jsx)(m.zxk,{...n,disabled:i&&!l,submitting:l,color:m.zxk.Colors.BRAND,onBlur:e=>{d(e),null==t||t()},onClick:v,className:I.button,size:m.zxk.Sizes.NONE,look:m.zxk.Looks.FILLED,children:(0,a.jsx)(m.aAc,{size:"lg",color:"currentColor",className:I.miniIcon})})}})]})}},410426:function(e,t,l){l.d(t,{Z:()=>g});var a=l(200651),n=l(192379),i=l(120356),s=l.n(i),r=l(399606),o=l(481060),c=l(547972),d=l(556296),u=l(13140),m=l(435064),p=l(981631),x=l(332325),v=l(388032),h=l(45671);function g(e){let{isEmptyBecauseQuery:t,closePopout:l}=e,i=(0,r.e7)([d.ZP],()=>d.ZP.getKeybindForAction(p.kg4.SAVE_CLIP)),g=(0,r.e7)([m.Z],()=>m.Z.getSettings().clipsEnabled),C=t?h.noSearchResultsImage:h.noClipsImage,f=n.useCallback(()=>{l(),(0,c.Z)(x.Z.CLIPS)},[l]),j=(()=>{if(!g)return v.intl.format(v.t["3iveam"],{onClick:f});if(t)return v.intl.string(v.t["xrEs6+"]);if(null==i)return v.intl.format(v.t.jpKk7e,{onClick:f});{let e=u.BB(i.shortcut,!0);return v.intl.format(v.t["xY/8Ky"],{keybind:e,keybindHook:()=>(0,a.jsx)("span",{className:h.keybindHintKeys,children:(0,a.jsx)(o.M2$,{className:h.keybindShortcut,shortcut:e})})})}})();return(0,a.jsx)("div",{className:h.container,children:(0,a.jsxs)("div",{className:h.content,children:[(0,a.jsx)("div",{className:C}),(0,a.jsx)(o.Text,{variant:"text-md/medium",className:s()(h.noClipsText,{[h.noSearchResultsText]:t}),children:j})]})})}},207346:function(e,t,l){l.d(t,{Z:()=>d});var a=l(200651);l(192379);var n=l(481060),i=l(547972),s=l(703288),r=l(332325),o=l(388032),c=l(171952);function d(e){let{filterQuery:t,setFilterQuery:l,onClose:d,sortOrder:u,setSortOrder:m}=e;return(0,a.jsxs)(n.xBx,{className:c.root,separator:!1,children:[(0,a.jsx)(n.AlX,{size:"xs",color:"currentColor",className:c.icon}),(0,a.jsx)(n.X6q,{className:c.title,variant:"heading-xxl/bold",children:o.intl.string(o.t.z2jK6e)}),(0,a.jsx)("div",{className:c.betaTag,children:(0,a.jsx)(s.Z,{})}),(0,a.jsx)(n.E1j,{autoFocus:!0,size:n.E1j.Sizes.MEDIUM,placeholder:o.intl.string(o.t["5h0QOD"]),className:c.queryInput,query:t,onChange:l,onClear:()=>l("")}),(0,a.jsx)(n.PhF,{placeholder:o.intl.string(o.t["0XtAW1"]),className:c.sortInput,options:[{value:"descending",label:o.intl.string(o.t.SCsC5u)},{value:"ascending",label:o.intl.string(o.t.fdx7aG)}],isSelected:e=>e===u,select:m,serialize:e=>e}),(0,a.jsx)(n.zxk,{color:n.Ttl.TRANSPARENT,size:n.zxk.Sizes.NONE,className:c.settingsButton,look:n.zxk.Looks.FILLED,onClick:()=>{(0,i.Z)(r.Z.CLIPS),d()},children:(0,a.jsx)(n.ewm,{size:"md",color:"currentColor"})}),(0,a.jsx)(n.olH,{className:c.button,onClick:d})]})}},542055:function(e,t,l){l.d(t,{default:()=>b}),l(47120);var a=l(200651),n=l(192379),i=l(658722),s=l.n(i),r=l(392711),o=l.n(r),c=l(990547),d=l(442837),u=l(952265),m=l(481060),p=l(100527),x=l(906732),v=l(213609),h=l(709054),g=l(435064),C=l(39604),f=l(680056),j=l(10217),N=l(410426),k=l(207346),E=l(356659),Z=l(748496);function b(e){let{channelId:t,onClose:i,transitionState:r}=e,[b,L]=n.useState(""),[y,I]=n.useState("descending"),[T,M]=n.useState(!0),[S,D]=n.useState(null),P=n.useDeferredValue(b),_=(0,d.e7)([g.Z],()=>g.Z.getClips()),z=(0,d.e7)([g.Z],()=>g.Z.getPendingClips()),w=(0,d.e7)([g.Z],()=>g.Z.getSettings().storageLocation),R=(0,d.Wu)([g.Z],()=>g.Z.getNewClipIds()),{analyticsLocations:A}=(0,x.ZP)(p.Z.CLIPS_GALLERY),H=n.useMemo(()=>[...z,..._],[_,z]);(0,v.Z)({type:c.ImpressionTypes.MODAL,name:c.ImpressionNames.CLIP_GALLERY_VIEWED,properties:{number_of_clips_loaded:H.length}},{disableTrack:T},[H.length,T]),n.useEffect(()=>((0,C.eL)(),()=>{(0,C.eL)(),(0,C.zq)()}),[]);let V=n.useMemo(()=>o()(H).filter(e=>{if(""===P.trim())return!0;let t=P.toLowerCase();return null!=e.name&&""!==e.name&&s()(t,e.name.toLowerCase())||s()(t,e.applicationName.toLowerCase())}).sort((e,t)=>"ascending"===y?h.default.compare(e.id,t.id):"descending"===y?h.default.compare(t.id,e.id):0).chunk(3).value(),[H,P,y]);n.useEffect(()=>{!async function(){M(!0);try{await C.jv(w)}finally{M(!1)}}()},[w]);let B=n.useCallback(e=>{(0,m.ZDy)(async()=>{let{default:n}=await l.e("61526").then(l.bind(l,22989));return l=>(0,a.jsx)(n,{...l,channelId:t,clip:e})},{modalKey:E.Ut})},[t]),{onShareClick:F}=(0,f.Z)({channelId:t,setExporting:D}),Y=n.useCallback((e,t)=>{(0,m.ZDy)(async()=>{let{default:n}=await l.e("15915").then(l.bind(l,799677));return l=>(0,a.jsx)(n,{clip:e,...l,onBeforeDelete:t,onAfterDelete:()=>l.onClose()})})},[]),O=n.useCallback(e=>{let{row:t}=e,l=V[t];return(0,a.jsx)("div",{className:Z.clipsRow,children:l.map(e=>{let t=0===e.length;return(0,a.jsx)(j.Z,{actionsDisabled:null!=S||t,exporting:S===e.id,isNew:R.includes(e.id),onDelete:Y,onEdit:B,onShare:e=>F({clip:e,onShareComplete:()=>u.Mr(E.Qr)}),clip:e},e.id)})},"clips-gallery-".concat(t))},[V,R,S,F,Y,B]),G=T||0!==V.length?T?(0,a.jsx)("div",{className:Z.spinnerContainer,children:(0,a.jsx)(m.$jN,{})}):(0,a.jsx)(m.aVo,{className:Z.clipGrid,sections:[V.length],sectionHeight:0,rowHeight:328.25,renderRow:O}):(0,a.jsx)(N.Z,{isEmptyBecauseQuery:H.length>0,closePopout:i});return(0,a.jsx)(m.Y0X,{size:m.CgR.DYNAMIC,transitionState:r,className:Z.root,children:(0,a.jsxs)(x.Gt,{value:A,children:[(0,a.jsx)(k.Z,{onClose:i,filterQuery:b,setFilterQuery:L,sortOrder:y,setSortOrder:I}),G]})})}},937784:function(e,t,l){l.d(t,{e:()=>x});var a=l(200651);l(192379);var n=l(481060),i=l(592125),s=l(703558),r=l(626135),o=l(709054),c=l(127654),d=l(61994),u=l(39604),m=l(356659),p=l(981631);async function x(e,t){let{channelId:x,editMetadata:v,analyticsLocations:h}=t,g=i.Z.getChannel(x);if(null!=g)try{var C;let t=await (0,u.rO)(e,v),l=null!==(C=e.name)&&void 0!==C?C:(0,m.yl)(o.default.extractTimestamp(e.id)),a=(0,d.Z)(l);(0,c.d)([new File([t],"".concat(""!==a?a:"clip",".mp4"),{type:"video/mp4"})],g,s.d.ChannelMessage,{filesMetadata:[{clip:e}]}),r.default.track(p.rMx.CLIP_SHARED,{location_stack:h,guild_id:g.guild_id,channel_id:g.id,channel_type:g.type,application_id:e.applicationId,clip_id:e.id})}catch(e){throw m.jF.error(e),e}else(0,n.ZDy)(async()=>{let{default:t}=await l.e("99617").then(l.bind(l,502801));return l=>(0,a.jsx)(t,{...l,clip:e,editMetadata:v})})}},572720:function(e,t,l){l.d(t,{l:()=>i});var a=l(192379),n=l(579806);function i(e){return(0,a.useMemo)(()=>null==n.Z.clips.getClipProtocolURLFromPath?null:n.Z.clips.getClipProtocolURLFromPath(e.filepath),[e.filepath])}},680056:function(e,t,l){l.d(t,{Z:()=>r});var a=l(192379),n=l(906732),i=l(407316),s=l(937784);let r=e=>{let{channelId:t,setExporting:l}=e,{analyticsLocations:r}=(0,n.ZP)();return{onShareClick:a.useCallback(async e=>{let{clip:a,cropData:n,applicationAudioEnabled:o,voiceAudioEnabled:c,onShareComplete:d}=e;l(a.id);try{var u,m,p,x,v,h,g,C,f,j;let e=(0,i.W)(t);await (0,s.e)(a,{channelId:e?t:void 0,analyticsLocations:r,editMetadata:{start:null!==(h=null!==(v=null==n?void 0:n.start)&&void 0!==v?v:null===(u=a.editMetadata)||void 0===u?void 0:u.start)&&void 0!==h?h:0,end:null!==(C=null!==(g=null==n?void 0:n.end)&&void 0!==g?g:null===(m=a.editMetadata)||void 0===m?void 0:m.end)&&void 0!==C?C:a.length/1e3,applicationAudio:null===(f=null!=o?o:null===(p=a.editMetadata)||void 0===p?void 0:p.applicationAudio)||void 0===f||f,voiceAudio:null===(j=null!=c?c:null===(x=a.editMetadata)||void 0===x?void 0:x.voiceAudio)||void 0===j||j}})}catch(e){}finally{null==d||d(),l(null)}},[t,r,l])}}},962399:function(e,t,l){l.d(t,{Z:()=>i});var a=l(200651);l(192379);var n=l(325767);function i(e){let{width:t=24,height:l=24,color:i="currentColor",foreground:s,...r}=e;return(0,a.jsx)("svg",{...(0,n.Z)(r),width:t,height:l,viewBox:"0 0 18 20",children:(0,a.jsx)("path",{fill:i,className:s,fillRule:"evenodd",clipRule:"evenodd",d:"M8.17187 0H9.83854V0.833333H8.17187V0ZM8.17324 0.833419V1.75009H9.83991V0.833419H8.17324ZM8.17324 4.16662V5.41675H9.83991V4.16662H11.5066V5.83325H15.6719V14.1666H11.5066V15.8333H16.5052C16.9654 15.8333 17.3385 15.4602 17.3385 14.9999V4.99992C17.3385 4.53968 16.9654 4.16659 16.5052 4.16659H9.83991V3.58342H8.17324V4.16659H1.50521C1.04497 4.16659 0.671875 4.53968 0.671875 4.99992V14.9999C0.671875 15.4602 1.04497 15.8333 1.50521 15.8333H6.50658V14.1666H2.33854V5.83325H6.50658V4.16662H8.17324ZM8.17324 7.25008V9.08342H9.83991V7.25008H8.17324ZM8.17324 10.9167V12.7501H9.83991V10.9167H8.17324ZM8.17324 14.5834V16.4167H9.83991V14.5834H8.17324ZM9.83854 19.1668V20H8.17187V19.1667H8.17324V18.2501H9.83991V19.1668H9.83854Z"})})}}}]);
//# sourceMappingURL=6c57246d84fe6cb5.js.map