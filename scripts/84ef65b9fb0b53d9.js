"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["67110"],{438820:function(e,t,n){n.d(t,{Z:()=>l});var a,i,o,c=n(442837),d=n(570140);let s={canPlayWowMoment:!1,isFetchingWowMomentMedia:!1,wowMomentWumpusMediaUrl:null};class r extends(o=c.ZP.Store){getState(){return s}get canPlayWowMoment(){return s.canPlayWowMoment}get isFetchingWowMomentMedia(){return s.isFetchingWowMomentMedia}get wowMomentWumpusMedia(){return s.wowMomentWumpusMediaUrl}}i="PurchasedItemsFestivityStore",(a="displayName")in r?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i;let l=new r(d.Z,{LOGOUT:function(){s={canPlayWowMoment:!1,isFetchingWowMomentMedia:!1,wowMomentWumpusMediaUrl:null}},PURCHASED_ITEMS_FESTIVITY_SET_CAN_PLAY_WOW_MOMENT:function(e){let{value:t}=e;s.canPlayWowMoment=t},PURCHASED_ITEMS_FESTIVITY_IS_FETCHING_WOW_MOMENT_MEDIA:function(){s.isFetchingWowMomentMedia=!0},PURCHASED_ITEMS_FESTIVITY_FETCH_WOW_MOMENT_MEDIA_SUCCESS:function(e){let{wumpusMedia:t}=e;s.wowMomentWumpusMediaUrl=t,s.isFetchingWowMomentMedia=!1},PURCHASED_ITEMS_FESTIVITY_FETCH_WOW_MOMENT_MEDIA_FAILURE:function(){s.isFetchingWowMomentMedia=!1,s.canPlayWowMoment=!1}})},553300:function(e,t,n){n.d(t,{Z:()=>a});let a=(0,n(818083).B)({kind:"user",id:"2024-12_premium_wow_moment",label:"Premium Wow Moment",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enable the wow moment",config:{enabled:!0}}]})},949772:function(e,t,n){n.d(t,{Z:()=>a});let a=(0,n(818083).B)({kind:"user",id:"2024-12_premium_wow_moment_fetch_analytics",label:"Premium Wow Moment Fetch Analytics",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Enable the analytics",config:{enabled:!0}}]})},177741:function(e,t,n){let a;n.r(t),n.d(t,{WowMomentTypes:()=>O,default:()=>R}),n(315314),n(309749),n(610138),n(216116),n(78328),n(815648),n(47120);var i,o=n(200651),c=n(192379),d=n(120356),s=n.n(d),r=n(642128),l=n(442837),m=n(544891),u=n(481060),_=n(570140),M=n(607070),p=n(70097),w=n(626135),E=n(526167),f=n(585483),h=n(960048),W=n(138464),T=n(438820),I=n(553300),b=n(949772),S=n(981631),g=n(781256),P=n(426401),Z=n(926734),y=n(601046),C=n(421391),F=n(153911),U=n(588369),O=((i={}).WUMPUS_FLIGHT="wumpus_flight",i.GRADIENT_HIGHLIGHT="gradient_highlight",i);async function x(e,t){try{_.Z.dispatch({type:"PURCHASED_ITEMS_FESTIVITY_IS_FETCHING_WOW_MOMENT_MEDIA"});let n=1012,a=e?P.Z:Z.Z;window.matchMedia("(min-width: 1012px) and (max-width: 1980px)").matches||window.matchMedia("(min-height: 720px) and (max-height: 1408px)").matches?(n=1980,a=e?y.Z:C.Z):(window.matchMedia("(min-width: 1980px)").matches||window.matchMedia("(min-height: 1408px)").matches)&&(n=2880,a=e?F.Z:U.Z);let{enabled:i}=b.Z.getCurrentConfig({location:"PremiumSubscriptionWowMoment.prefetch"},{autoTrackExposure:!1});i&&w.default.track(S.rMx.PREMIUM_WOW_MOMENT_MEDIA_PREFETCH_TRIGGER,{client_width:n});let o=await m.tn.get({url:a,binary:!0,rejectWithError:!0}),c=window.URL.createObjectURL(o.body);t(c),_.Z.dispatch({type:"PURCHASED_ITEMS_FESTIVITY_FETCH_WOW_MOMENT_MEDIA_SUCCESS",wumpusMedia:c})}catch(e){h.Z.captureException(e),_.Z.dispatch({type:"PURCHASED_ITEMS_FESTIVITY_FETCH_WOW_MOMENT_MEDIA_FAILURE"})}}function H(){let e=(0,l.e7)([M.Z],()=>M.Z.useReducedMotion),[t,n]=c.useState(null),{isFetchingMedia:i,canPlayWowMoment:d}=(0,l.cj)([T.Z],()=>({isFetchingMedia:T.Z.isFetchingWowMomentMedia,canPlayWowMoment:T.Z.canPlayWowMoment})),[m,_]=c.useState(!1),h=(0,E.vu)(),I=(0,E.rO)(),b=h>52||-1===h||I,P=I?"video/mp4":"video/webm",Z=b&&!e&&d&&null===t&&!1===i;c.useEffect(()=>{Z&&x(I,n)},[Z,I,n]),c.useEffect(()=>{function t(){!e&&T.Z.canPlayWowMoment&&(_(!0),a=setTimeout(()=>{_(!1),C(!0),w.default.track(S.rMx.PREMIUM_WOW_MOMENT_VIEWED,{wow_moment_type:"gradient_highlight"}),(0,W.H)(!1)},2e3))}return f.S.subscribe(S.CkL.PREMIUM_SUBSCRIPTION_CREATED,t),()=>{f.S.unsubscribe(S.CkL.PREMIUM_SUBSCRIPTION_CREATED,t)}},[e,b]);let[y,C]=c.useState(!1),[F,U]=c.useState(!1),O=(0,u.q_F)({opacity:y?.2:0,config:{duration:100}}),H=(0,u.q_F)({x:F?"100%":"-100%",config:{duration:500}},F?"respect-motion-settings":"animate-never");c.useEffect(()=>{let e=-1;return y&&(e=window.setTimeout(()=>{U(!0)},1e3)),()=>{window.clearTimeout(e)}},[y]),c.useEffect(()=>{let e=-1;return F&&(e=window.setTimeout(()=>{U(!1),C(!1)},1e3)),()=>{window.clearTimeout(e)}},[F]);let R=m&&null!==t,v=R||y;return(0,o.jsxs)("div",{className:s()({[g.wrapper]:!v,[g.activeWrapper]:v}),children:[R&&(0,o.jsx)(p.Z,{autoPlay:!0,className:g.videoWrapper,onPlay:()=>{clearTimeout(a),w.default.track(S.rMx.PREMIUM_WOW_MOMENT_VIEWED,{wow_moment_type:"wumpus_flight"})},onEnded:()=>{_(!1),(0,W.H)(!1),window.URL.revokeObjectURL(t),n(null)},children:(0,o.jsx)("source",{src:t,type:P})}),(0,o.jsx)(r.animated.div,{className:g.gadientHighlight,style:O}),(0,o.jsx)(r.animated.div,{className:g.swipeWrapper,style:H,children:(0,o.jsxs)("svg",{className:g.swipe,viewBox:"0 0 848 1024",fill:"none",children:[(0,o.jsx)("path",{d:"M257.206 1024L0 0H341.333L598.539 1024H257.206Z",fill:"white"}),(0,o.jsx)("path",{d:"M847.975 1024H690.436L433.231 0H590.769L847.975 1024Z",fill:"white"})]})})]})}let R=function(){let{enabled:e}=I.Z.useExperiment({location:"PremiumSubscriptionWowMoment"});return e?(0,o.jsx)(H,{}):null}},781256:function(e,t,n){e.exports={activeWrapper:"activeWrapper__452c3",wrapper:"wrapper__452c3",videoWrapper:"videoWrapper__452c3",gadientHighlight:"gadientHighlight__452c3",swipeWrapper:"swipeWrapper__452c3",swipe:"swipe__452c3"}},426401:function(e,t,n){n.d(t,{Z:()=>a});let a="https://cdn.discordapp.com/assets/content/e39ebab3f9b41f134813b925a561b04796e76fc95428dac13692b7c0caa0d75a.mov"},926734:function(e,t,n){n.d(t,{Z:()=>a});let a="https://cdn.discordapp.com/assets/content/3d55c81c787244a8d86e0bb5ff52640995e99c19ef1d3afdd12f14951ffe28e3.webm"},601046:function(e,t,n){n.d(t,{Z:()=>a});let a="https://cdn.discordapp.com/assets/content/e0cf9a81d325a11abab3f39a1bf161e26306001ac526a2118693631e50639abb.mov"},421391:function(e,t,n){n.d(t,{Z:()=>a});let a="https://cdn.discordapp.com/assets/content/aed581761839cc398b543509b65890d458e0a4d6f258c5a47f8aa91368570a0a.webm"},153911:function(e,t,n){n.d(t,{Z:()=>a});let a="https://cdn.discordapp.com/assets/content/10901216895c8804bd02ded434192a914a117f0ee7c4f7e1b8ea25c7c297c9b1.mov"},588369:function(e,t,n){n.d(t,{Z:()=>a});let a="https://cdn.discordapp.com/assets/content/255e915caadab258cf5ad40cfa8f81ca17227502e691370f3aaf604816da0509.webm"}}]);
//# sourceMappingURL=84ef65b9fb0b53d9.js.map