"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["56236"],{951539:function(e,n,i){i.d(n,{ZP:()=>Z,so:()=>x,wg:()=>v}),i(47120);var t=i(442837),l=i(159300),a=i(427679),r=i(592125),o=i(984933),s=i(430824),c=i(496675),d=i(700785),u=i(924301),g=i(765305),h=i(981631);function v(e){let[n]=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[r.Z],{entityType:i,channelId:t}="entity_type"in e?{entityType:e.entity_type,channelId:e.channel_id}:e;if(i===g.WX.EXTERNAL)return!0;let l=n.getChannel(t);return null!=l&&d.Uu(h.Plq.VIEW_CHANNEL,l)}function x(e){let[n,i,t,d]=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[o.ZP,r.Z,s.Z,a.Z];if((0,u.Z2)(e))return!1;let{guild_id:h,channel_id:x}=e,Z=e.entity_type===g.WX.EXTERNAL?n.getDefaultChannel(e.guild_id):i.getChannel(x),m=t.getGuild(h),C=d.getStageInstanceByChannel(x);return!!(0,l.b)(c.Z,m,Z,C)&&null!=Z&&v(e,[i])}function Z(e){return(0,t.e7)([o.ZP,r.Z,s.Z,a.Z],()=>x(e,[o.ZP,r.Z,s.Z,a.Z]),[e])}},146768:function(e,n,i){i.d(n,{Z:()=>c});var t=i(442837),l=i(431328),a=i(501655),r=i(427679),o=i(592125),s=i(430824);function c(e){let{id:n,data:{guild:i,instance:c,speakers:d,participantCount:u},context:g}=e,h=(0,t.e7)([s.Z,o.Z],()=>{var e;return s.Z.getGuild(null===(e=o.Z.getChannel(n))||void 0===e?void 0:e.getGuildId())},[n]),v=(0,t.e7)([r.Z],()=>r.Z.getStageInstanceByChannel(n),[n]),x=(0,l.w8)(n,a.pV.SPEAKER),Z=(0,l.Rk)(n),m=null!=v?x:d,C=(null!=v?Z:u)-m.length;return{channelId:n,guild:null!=h?h:i,stage:null!=v?v:c,speakers:m,audienceCount:C,context:g}}},592126:function(e,n,i){i.d(n,{Z:()=>r});var t=i(442837),l=i(241155),a=i(430824);function r(e,n){return(0,t.cj)([a.Z,l.Z],()=>{let i=a.Z.getGuild(e),t=null!=i;return null==i&&null!=n&&(i=l.Z.getCachedGuildByEventId(n)),{isMember:t,guild:i}},[e,n])}},118998:function(e,n,i){i.d(n,{H:()=>t});let t=e=>{let{guildId:n,guildEventId:i}=e;return"https://discord.com/events/".concat(n,"/").concat(i)}},710679:function(e,n,i){i.d(n,{Z:()=>I});var t=i(200651);i(192379);var l=i(442837),a=i(724912),r=i(41776),o=i(501655),s=i(427679),c=i(592125),d=i(496675),u=i(19780),g=i(594174),h=i(15274),v=i(924301),x=i(951539),Z=i(146768),m=i(592126),C=i(236373),f=i(230900),p=i(854698),N=i(405613),j=i(460838),E=i(462179),k=i(981631);function I(e){var n;let{guildEvent:i,guildId:I,truncate:P,onActionTaken:T,className:_,isNew:y}=e,{id:G,guild_id:b,channel_id:S,creator_id:L,name:D,description:R,entity_type:w,image:M,recurrence_rule:U}=i,H=(0,p.DK)(i),A=(0,l.e7)([v.ZP],()=>v.ZP.isInterestedInEventRecurrence(G,H),[G,H]),z=(0,l.e7)([r.Z],()=>r.Z.isLurking(b),[b]),B=(0,l.e7)([s.Z],()=>s.Z.getStageInstanceByChannel(S),[S]),X=(0,l.e7)([c.Z],()=>c.Z.getChannel(S),[S]),J=(0,l.e7)([g.default],()=>g.default.getUser(L),[L]),{speakers:V}=(0,Z.Z)({id:S,data:{guild:null,instance:B,speakers:[],participantCount:0},context:{guildId:b,instance:B}}),q=(0,l.e7)([u.Z],()=>u.Z.getChannelId()),W=(0,v.xt)(i),O=q===S&&null!=q&&W,K=V.filter(e=>e.type===o.Ui.VOICE),F=K.length,Q=(0,l.e7)([d.Z],()=>d.Z.can(k.Plq.CONNECT,X),[X]),Y=(0,x.ZP)(i),{isMember:$,guild:ee}=(0,m.Z)(b,G),en=(0,E.Z)({guild:ee,channel:X,guildScheduledEvent:i,isActive:W,recurrenceId:H,onActionTaken:T}),ei=(0,a.Z)(I),et=z?void 0:e=>(0,h.bO)({eventId:G,parentGuildId:I,recurrenceId:e});return(0,t.jsx)(j.Z,{guild:ee,channel:X,creator:J,name:D,entityType:w,description:null!=R?R:void 0,location:null!==(n=(0,f.cS)(i))&&void 0!==n?n:void 0,imageSource:null!=M?(0,N.Z)(i):void 0,imageLocation:j.Q.THUMBNAIL,isActive:W,isUserLurking:z,isJoined:O,isMember:$,isHub:ei,speakers:K,canConnect:Q,speakerCount:F,rsvped:A,canInvite:Y,...en,className:_,onClick:et,truncate:P,isNew:y,guildEvent:i,recurrenceRule:(0,C.KV)(U),recurrenceId:H})}},460838:function(e,n,i){i.d(n,{Q:()=>_,Z:()=>b});var t,l=i(200651),a=i(192379),r=i(120356),o=i.n(r),s=i(442837),c=i(481060),d=i(447003),u=i(471445),g=i(565138),h=i(357156),v=i(496675),x=i(725436),Z=i(274311),m=i(854698),C=i(285784),f=i(95291),p=i(742593),N=i(810561),j=i(187443),E=i(131154),k=i(765305),I=i(981631),P=i(388032),T=i(820137),_=((t={})[t.BANNER=0]="BANNER",t[t.THUMBNAIL=1]="THUMBNAIL",t);function y(e){let{channel:n,onClick:i}=e,{canManageAllEvents:t}=(0,h.XJ)(n),r=(0,s.e7)([v.Z],()=>!n.isGuildVocal()||v.Z.can(I.Plq.CONNECT,n),[n]),g=a.useMemo(()=>(0,d.Z)(n),[n]),x=(0,u.KS)(n);return(0,l.jsx)(c.ua7,{text:P.intl.string(P.t.nHjY9P),shouldShow:!r&&null!=i,children:e=>(0,l.jsxs)(c.P3F,{...e,className:o()(T.inline,T.channelContainer,{[T.channelContainerEnabled]:r&&null!=i,[T.channelContainerDisabled]:!r&&null!=i}),onClick:i,children:[(0,l.jsx)(c.ua7,{text:P.intl.string(P.t["48WXaW"]),shouldShow:t&&g&&r&&null!=i,children:e=>null!=x?(0,l.jsx)(x,{...e,color:"currentColor",size:"custom",width:20,height:20,className:T.icon}):null}),(0,l.jsx)(c.Text,{variant:"text-sm/normal",color:"none",className:T.channelLocation,children:n.name})]})})}function G(e){let{guild:n,channel:i,onJoinClick:t,handleLocationClick:a,location:r,isExternal:s,isHub:d}=e;return d?null==n?(0,l.jsx)("div",{}):(0,l.jsxs)("div",{className:T.inline,children:[(0,l.jsx)(g.Z,{className:T.guildIcon,size:g.Z.Sizes.MINI,active:!0,guild:n}),(0,l.jsx)(c.Text,{variant:"text-sm/normal",color:"header-secondary",children:null==n?void 0:n.name})]}):null!=i?(0,l.jsx)(y,{channel:i,onClick:t}):(0,l.jsxs)(c.P3F,{className:T.inline,onClick:a,children:[(0,l.jsx)(c._tJ,{size:"custom",color:"currentColor",height:20,width:20,className:o()(T.channelContainer,T.icon)}),(0,l.jsx)(c.Text,{className:s?T.externalLocation:T.channelLocation,variant:"text-sm/normal",children:(0,x.m)(r,!0)})]})}function b(e){let{className:n,guild:i,channel:t,creator:a,name:r,entityType:s,description:d,imageLocation:u=0,imageSource:g,isActive:h,isUserLurking:v,isJoined:x=!1,isMember:I=!1,isHub:P=!1,speakers:_,speakerCount:y,rsvped:b,canInvite:S,location:L,truncate:D,onContextMenu:R,onJoinClick:w,onJoinGuildClick:M,onGoToGuildClick:U,onRsvpClick:H,onStartClick:A,onInviteClick:z,onEndClick:B,onClick:X,isNew:J,guildEvent:V,eventPreview:q,recurrenceRule:W,recurrenceId:O}=e,K=(0,Z.Q)(t,s),F=s===k.WX.EXTERNAL,Q=F?e=>e.stopPropagation():void 0,Y=[];if(null!=W&&null!=event){let e=(0,m.Ho)(W);Y=(0,m.PJ)(4,e,new Date(V.scheduled_start_time))}let $=Y.length>0;return(0,l.jsxs)(c.kL8,{"aria-label":r,onClick:()=>null==X?void 0:X(O),onContextMenu:R,className:o()(T.card,{[T.joined]:x,[T.lurking]:v},n),children:[(0,l.jsxs)("div",{className:o()(T.padding,{[T.isRecurring]:$}),children:[0===u&&(0,l.jsx)(f.Z,{source:g}),(0,l.jsx)(p.ZP,{creator:a,name:r,description:d,imageSource:1===u?g:null,truncate:D,guildId:null==i?void 0:i.id,isHub:P,isNew:J,guildEvent:V,eventPreview:q,recurrenceId:O}),h&&null!=i&&null!=_&&y>0&&(0,l.jsx)(E.Z,{guild:i,speakers:_,speakerCount:y,className:T.spacing}),(0,l.jsx)("hr",{className:T.divider}),(0,l.jsxs)("div",{className:o()(T.inline,T.footer),children:[(0,l.jsx)(G,{guild:i,channel:t,onJoinClick:w,handleLocationClick:Q,location:L,isExternal:F,isHub:P}),P?(0,l.jsx)(j.Z,{isActive:h,isUserLurking:v,isMember:I,rsvped:b,onRsvpClick:H,onJoinGuildClick:M,onGoToGuildClick:U,guildName:null==i?void 0:i.name,canInvite:S,isChannelPublic:K,onInviteClick:z}):(0,l.jsx)(C.ZP,{entityType:s,isJoined:x,isActive:h,isUserLurking:v,rsvped:b,canInvite:S,isChannelPublic:K,onContextMenu:R,onJoinClick:w,onRsvpClick:H,onStartClick:A,onInviteClick:z,onEndClick:B})]}),$&&(0,l.jsx)("hr",{className:T.divider})]}),$&&(0,l.jsx)(N.Z,{guildId:null==i?void 0:i.id,recurrenceRule:W,guildEventId:V.id,onRecurrenceClick:X})]})}},17671:function(e,n,i){i.d(n,{default:()=>S});var t=i(200651),l=i(192379),a=i(392711),r=i.n(a),o=i(442837),s=i(481060),c=i(45114),d=i(493773),u=i(313201),g=i(597),h=i(147754),v=i(984933),x=i(720202),Z=i(430824),m=i(306680),C=i(626135),f=i(823379);i(981888);var p=i(709054),N=i(897285),j=i(518756),E=i(554747),k=i(710679),I=i(74562),P=i(576749),T=i(765305),_=i(981631),y=i(490897),G=i(388032),b=i(576888);function S(e){let{transitionState:n,onClose:a,guildId:S}=e,L=(0,u.Dt)(),D=(0,o.e7)([Z.Z],()=>Z.Z.getGuild(S)),R=(0,j.Z)(null==D?void 0:D.id),w=(0,E.ZP)(S),M=l.useRef(m.ZP.ackMessageId(S,y.W.GUILD_EVENT)),U=(0,P.Z)();return l.useEffect(()=>{w.forEach(e=>N.Z.getGuildEventUserCounts(S,e.id,[])),N.Z.getGuildEventsForCurrentUser(S)},[w,S]),l.useEffect(()=>{let e=Z.Z.getGuild(S);if(!(null==e?void 0:e.hasFeature(_.oNc.HUB)))return;let{showHubEventsList:n}=h.Z.getCurrentConfig({guildId:S,location:"d3755f_1"});if(!n)return;let i=v.ZP.getDefaultChannel(S);null!=i&&g.c(i.id)},[S]),(0,d.ZP)(()=>{C.default.track(_.rMx.OPEN_MODAL,{type:T.zw,guild_id:S,guild_events_count:w.length})}),l.useEffect(()=>{r()(w).map(e=>e.creator_id).filter(f.lm).uniq().forEach(e=>{x.Z.requestMember(S,e)})},[S,w]),l.useEffect(()=>{null!=S&&(0,c.Ju)(S,y.W.GUILD_EVENT)},[S]),(0,t.jsxs)(s.Y0X,{size:s.CgR.MEDIUM,transitionState:n,"aria-labelledby":L,children:[(0,t.jsxs)(s.xBx,{className:b.header,children:[(0,t.jsx)(s.Que,{size:"md",color:"currentColor",className:b.icon}),(0,t.jsx)(s.X6q,{id:L,variant:"heading-md/semibold",children:w.length>0?G.intl.formatToPlainString(G.t.IBdqSk,{number:w.length}):G.intl.string(G.t.tlopTE)}),R&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:b.divider,children:"|"}),(0,t.jsx)(s.zxk,{size:s.zxk.Sizes.MIN,onClick:()=>{(0,s.ZDy)(async()=>{let{default:e}=await Promise.all([i.e("58023"),i.e("68073")]).then(i.bind(i,779250));return n=>(0,t.jsx)(e,{...n,guildId:S})},U)},innerClassName:b.button,children:G.intl.string(G.t["60lJ0N"])})]}),(0,t.jsx)(s.P3F,{onClick:a,className:b.iconButton,"aria-label":G.intl.string(G.t.cpT0Cg),children:(0,t.jsx)(s.Dio,{size:"md",color:"currentColor",className:b.icon})})]}),(0,t.jsx)(s.hzk,{className:b.content,children:w.length>0?w.map(e=>(0,t.jsx)(k.Z,{guildEvent:e,guildId:S,onActionTaken:a,isNew:null!=M.current&&p.default.compare(e.id,M.current)>0},e.id)):(0,t.jsx)(I.Z,{guildId:S,onClose:a})})]})}},74562:function(e,n,i){i.d(n,{Z:()=>v});var t=i(200651);i(192379);var l=i(442837),a=i(481060),r=i(434404),o=i(147754),s=i(939863),c=i(430824),d=i(496675),u=i(981631),g=i(388032),h=i(675222);function v(e){let{guildId:n,onClose:i}=e,{showHubEventsList:v}=o.Z.useExperiment({guildId:n,location:"6597ca_1"},{autoTrackExposure:!1}),x=(0,l.e7)([c.Z,d.Z],()=>{let e=c.Z.getGuild(n);return d.Z.can(u.Plq.MANAGE_ROLES,e)},[n]),Z=(0,l.e7)([c.Z],()=>{let e=c.Z.getGuild(n);return v&&(null==e?void 0:e.hasFeature(u.oNc.HUB))},[n,v]);return(0,t.jsxs)("div",{className:h.container,children:[(0,t.jsx)(s.Z,{children:(0,t.jsx)("div",{className:h.circle,children:(0,t.jsx)(a.Que,{size:"custom",color:"currentColor",height:40,width:40,className:h.icon})})}),(0,t.jsx)(a.X6q,{color:"header-primary",variant:"heading-xl/semibold",className:h.title,children:Z?g.intl.string(g.t.RhXVpa):g.intl.string(g.t["WgZ+3N"])}),(0,t.jsx)(a.Text,{color:"header-secondary",variant:"text-sm/normal",className:h.subtitle,children:Z?g.intl.string(g.t["6hktHB"]):g.intl.string(g.t["v/S/PD"])}),x&&(0,t.jsx)(a.Text,{color:"header-secondary",variant:"text-sm/normal",className:h.roleTip,children:g.intl.format(g.t["K+DH2t"],{onClick:()=>{r.Z.open(n,u.pNK.ROLES),i()}})})]})}},131154:function(e,n,i){i.d(n,{Z:()=>c});var t=i(200651);i(192379);var l=i(120356),a=i.n(l),r=i(481060),o=i(388032),s=i(947396);function c(e){let{guild:n,speakers:i,speakerCount:l,className:c}=e,d=i.slice(0,5),u=d.map(e=>{var i,l;return(0,t.jsxs)("div",{className:s.speakerContainer,children:[(0,t.jsx)(r.qEK,{src:null==e?void 0:null===(i=e.user)||void 0===i?void 0:i.getAvatarURL(n.id,20),size:r.EFr.SIZE_20,className:s.avatar,"aria-label":"".concat(null==e?void 0:e.userNick,"-avatar")}),(0,t.jsx)("div",{className:s.textInGridContainer,children:(0,t.jsx)(r.Text,{color:"header-secondary",variant:"text-sm/normal",className:s.textInGrid,children:null==e?void 0:e.userNick})})]},null==e?void 0:null===(l=e.user)||void 0===l?void 0:l.id)}),g=l-d.length;return(0,t.jsxs)("div",{className:a()(s.grid,c),children:[u,g>0&&(0,t.jsxs)("div",{className:s.speakerContainer,children:[(0,t.jsx)("div",{className:s.iconMicrophone,children:(0,t.jsx)(r.S6n,{size:"custom",color:"currentColor",height:12})}),(0,t.jsx)(r.Text,{color:"header-secondary",variant:"text-sm/normal",className:s.textInGrid,children:o.intl.format(o.t["185ggI"],{count:g})})]})]})}},462179:function(e,n,i){i.d(n,{Z:()=>_});var t=i(200651);i(192379);var l=i(442837),a=i(481060),r=i(239091),o=i(749210),s=i(305325),c=i(281956),d=i(357156),u=i(703656),g=i(922482),h=i(984933),v=i(430824),x=i(496675),Z=i(626135),m=i(572004),C=i(482241),f=i(951539),p=i(894017),N=i(274311),j=i(854698),E=i(118998),k=i(139712),I=i(765305),P=i(981631),T=i(388032);function _(e){let{guild:n,channel:_,guildScheduledEvent:y,isActive:G,recurrenceId:b,onActionTaken:S}=e,{scheduled_start_time:L,id:D,entity_type:R,guild_id:w}=y,{canManageGuildEvent:M}=(0,d.XJ)(null!=_?_:n),U=M(y),H=(0,f.ZP)(y),A=(0,N.T)(null==_?void 0:_.id,y.id),{withinStartWindow:z}=(0,j.ub)(L),B=(0,l.e7)([x.Z],()=>null==_||!_.isGuildVocal()||x.Z.can(P.Plq.CONNECT,_),[_]),X=(0,c.J)(w),J=(0,p.Z)(b,D);function V(e){e.stopPropagation(),(0,k.Z)(D,b,w)}async function q(e){e.stopPropagation(),await o.Z.joinGuild(w),v.Z.addConditionalChangeListener(()=>null==v.Z.getGuild(w)||(G||V(e),W(e),!1))}function W(e){e.stopPropagation();let n=h.ZP.getDefaultChannel(w);(0,a.pTH)(),(0,u.XU)(w,null==n?void 0:n.id)}return{onDeleteClick:U?function(e){e.stopPropagation(),U&&!G&&(0,a.h7j)(e=>(0,t.jsx)(a.ConfirmModal,{...e,header:T.intl.string(T.t.R5bpio),confirmText:T.intl.string(T.t.oyYWHB),cancelText:T.intl.string(T.t["ETE/oK"]),onConfirm:()=>C.Z.deleteGuildEvent(D,w),children:(0,t.jsx)(a.Text,{variant:"text-md/normal",children:T.intl.string(T.t.v2GWNT)})}))}:void 0,onContextMenu:function(e){e.stopPropagation(),null!=n&&(0,r.jW)(e,async()=>{let{default:e}=await Promise.all([i.e("99272"),i.e("10472")]).then(i.bind(i,215269));return i=>(0,t.jsx)(e,{guildEventId:D,recurrenceId:b,channel:_,guild:n,...i})})},onJoinClick:B||X?function(e){if(e.stopPropagation(),X){null==S||S(),(0,s.hk)(w);return}(null==_?void 0:_.isGuildStageVoice())?((0,g.Cq)(_),null==S||S()):(null==_?void 0:_.isGuildVoice())&&(C.Z.joinVoiceEvent(_.guild_id,_.id),null==S||S())}:void 0,onRsvpClick:V,onStartClick:U&&z&&!(null==J?void 0:J.is_canceled)?function(e){e.stopPropagation(),(0,a.ZDy)(async()=>{let{default:e}=await Promise.all([i.e("84722"),i.e("20469")]).then(i.bind(i,296864));return n=>(0,t.jsx)(e,{...n,event:y,onSuccess:S})})}:void 0,onInviteClick:function(e){if(e.stopPropagation(),null!=n){if(!H||!A){let e=(0,E.H)({guildId:w,guildEventId:D});(0,m.JG)(e),Z.default.track(P.rMx.GUILD_SCHEDULED_EVENT_LINK_COPIED,{guild_id:w,guild_scheduled_event_id:D});return}(0,a.ZDy)(async()=>{let{default:e}=await Promise.all([i.e("7654"),i.e("48184")]).then(i.bind(i,560114));return i=>(0,t.jsx)(e,{...i,guild:n,channel:_,guildScheduledEvent:y,source:P.t4x.GUILD_EVENTS})})}},onEndClick:U&&R===I.WX.EXTERNAL&&G?function(e){if(e.stopPropagation(),!U)return;let n=()=>{C.Z.endEvent(D,w),(0,a.pTH)()};(0,a.h7j)(e=>(0,t.jsx)(a.ConfirmModal,{...e,header:T.intl.string(T.t.qaYzPD),confirmText:T.intl.string(T.t.mjB9pa),cancelText:T.intl.string(T.t["ETE/oK"]),onConfirm:n,children:(0,t.jsx)(a.Text,{variant:"text-md/normal",children:T.intl.string(T.t.bnDQ7O)})}))}:void 0,onJoinGuildClick:q,onGoToGuildClick:W}}},981888:function(e,n,i){i.d(n,{Z:()=>a}),i(47120);var t=i(192379),l=i(881052);function a(e,n){let[i,a]=t.useState(!1),[r,o]=t.useState(null);return[async()=>{a(!0),o(null);try{let n=await e();return a(!1),o(null),n}catch(i){let e=new l.Hx(i);return null==n||n(e),o(e),a(!1),null}},{loading:i,error:r}]}}}]);
//# sourceMappingURL=b2e9c2e4be2dafa9.js.map