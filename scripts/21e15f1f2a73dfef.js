"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["32249"],{393903:function(e,t,n){n.d(t,{y:()=>s});var r=n(192379),l=n(237617),i=n(889711);function s(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=(0,r.useRef)(null),s=(0,r.useRef)(null),o=(0,l.Z)(()=>e(n.current));return(0,r.useLayoutEffect)(()=>{if(!t)return;null==s.current&&(s.current=(0,i.pP)(o.current));let e=n.current,r=s.current;null!=e&&null!=r&&(0,i.YP)(r,e)},[t,e,o]),(0,r.useEffect)(()=>{if(!t)return;let e=n.current,r=s.current;if(null!=e&&null!=r)return()=>{(0,i.UC)(r,e)}},[t]),n}},347382:function(e,t,n){n.d(t,{z:()=>l});let r=(0,n(818083).B)({id:"2025-02_quests_hls_video",kind:"user",label:"Quests Hls Video",defaultConfig:{enabled:!1},treatments:[{id:0,label:"disabled",config:{enabled:!1}},{id:1,label:"enabled",config:{enabled:!0}}]}),l=e=>r.useExperiment({location:e},{autoTrackExposure:!1}).enabled},208109:function(e,t,n){n.d(t,{e:()=>l});let r=(0,n(818083).B)({id:"2025-01_video_quests_end_card_cta_v2",kind:"user",label:"Video Quests End Card CTA V2",defaultConfig:{enabled:!1},treatments:[{id:0,label:"Control",config:{enabled:!1}},{id:1,label:"Enabled",config:{enabled:!0}}]}),l=e=>{let{location:t}=e;return r.getCurrentConfig({location:t},{autoTrackExposure:!0}).enabled}},881773:function(e,t,n){n.d(t,{Z:()=>A}),n(47120);var r=n(200651),l=n(192379),i=n(120356),s=n.n(i),o=n(642128),a=n(442837),u=n(692547),c=n(561779),d=n(481060),m=n(607070),v=n(540059),E=n(617136),p=n(184299),C=n(902749),f=n(957099),S=n(312729),g=n(223418),x=n(604162),_=n(981631),h=n(388032),T=n(152860);let D="-:--",N={[g.rq.PLAYING]:{icon:d.fpf,label:h.intl.string(h.t.ZcgDJS)},[g.rq.PAUSED]:{icon:d.o1U,label:h.intl.string(h.t.RscU7O)},[g.rq.ENDED]:{icon:d.Oe7,label:h.intl.string(h.t.hsvh0t)}};function I(e){let{current:t,duration:n}=e,l=null!=t?(0,x.yv)(t):D,i=null!=n?(0,x.yv)(n):D;return l=l.padStart(i.length,"0"),(0,r.jsxs)("div",{className:s()(T.durationTimeWrapper,T.controlsBarItem),children:[(0,r.jsx)(d.Text,{variant:"text-xs/normal",className:T.durationTimeDisplay,children:l}),(0,r.jsx)(d.Text,{variant:"text-xs/normal",className:T.durationTimeSeparator,children:"/"}),(0,r.jsx)(d.Text,{variant:"text-xs/normal",className:T.durationTimeDisplay,children:i})]})}let j=l.forwardRef(function(e,t){let{iconComponent:n,animationTime:l,visible:i,ariaLabel:a,active:c,disabled:m,tooltipLabel:v,tooltipDelayMs:E=1500,shortcut:p,onClick:C}=e,f=e=>(0,r.jsx)(d.P3F,{...e,onClick:!0===m?void 0:C,className:s()(T.videoControlsBtnCont,{[T.videoControlsBtnContDisabled]:m}),"aria-label":a,"aria-disabled":m,innerRef:t,children:(0,r.jsx)(o.animated.div,{className:s()(T.videoControlsBtnCont),style:{opacity:(0,o.to)([l.to({range:[0,1],output:[0,1]})],e=>"".concat(i?e:Math.pow(e,8)))},children:(0,r.jsx)(n,{color:!0!==m?u.Z.colors.WHITE:u.Z.colors.TEXT_MUTED,className:s()(T.controlsBarItem,{[T.controlsBarItemActive]:c,[T.videoControlsBtn]:!m})})})});if(null==v)return f();{let e=(0,r.jsxs)(r.Fragment,{children:[v,""!==(null!=p?p:"").trim()&&(0,r.jsx)(d.M2$,{shortcut:null!=p?p:"",className:T.videoControlsBtnTooltipKeyCombo})]});return(0,r.jsx)(d.ua7,{text:e,"aria-label":v,tooltipContentClassName:T.videoControlsBtnTooltip,delay:E,children:e=>f(e)})}});function A(e){var t,n;let{videoRef:i,quest:x,playerState:D,animSpring:A,visible:b,seekForwardEnabled:L,hideCaptionBtn:O,handlePlaybackBtnClick:R,handleTranscriptBtnClick:k,handleCaptionBtnClick:M,handleFullScreenBtnClick:P,handleSeekBackBtnClick:y,handleSeekForwardBtnClick:q,handleControlBarPendingInteraction:w}=e,F=(0,v.Q3)("ListSectionItem"),B=(0,p.km)(e=>e.volume),U=(0,p.km)(e=>e.setVolume),Z=(0,p.km)(e=>e.muted),V=(0,p.km)(e=>e.setMuted),Y=(0,p.km)(e=>e.transcriptEnabled),z=(0,p.km)(e=>e.captionEnabled),G=(0,p.km)(e=>e.fullScreenEnabled),H=(0,a.e7)([m.Z],()=>m.Z.useReducedMotion),K=(0,a.e7)([m.Z],()=>m.Z.keyboardModeEnabled),[Q,X]=l.useState(Z?0:B),[W,$]=l.useState(!1),[J,ee]=l.useState(!1),[{volumeAnimSpring:et},en]=(0,d.q_F)(()=>({from:{volumeAnimSpring:0},config:{tension:100,friction:3,clamp:!0}})),er=l.useRef(null),el=(0,E._F)(),ei=l.useCallback(e=>{null!=i.current&&(e!==i.current.volume&&(i.current.volume=e),e!==Q&&X(e))},[i,Q]),es=l.useCallback((e,t)=>{el({questId:e,event:_.rMx.QUEST_VIDEO_VOLUME_CHANGED,properties:{volume_threshold:t>0&&t<1?.5:t}})},[el]),eo=l.useCallback(()=>{null!=i.current&&(0===Q?(ei(B),V(!1),es(x.id,B)):(U(Q),ei(0),V(!0),es(x.id,0)))},[i,Q,ei,B,V,es,x.id,U]),ea=()=>{$(!0)},eu=()=>{$(!1)},ec=l.useCallback(e=>{switch(e.key){case g.Y1.PLAYBACK:R();break;case g.Y1.SPACE:K||(e.preventDefault(),R());break;case g.Y1.SEEK_BACK:y();break;case g.Y1.SEEK_FORWARD:q();break;case g.Y1.CAPTION:M();break;case g.Y1.FULLSCREEN:P();break;case g.Y1.MUTE:eo()}},[M,P,R,y,q,eo,K]);l.useEffect(()=>{null!=er.current&&er.current.focus()},[]),l.useEffect(()=>(en({volumeAnimSpring:J||W?1:0,immediate:H}),()=>{et.stop()}),[J,W,en,H,et]),l.useEffect(()=>(window.addEventListener("keydown",ec),()=>{window.removeEventListener("keydown",ec)}),[ec]);let ed=0===Q?d.OyP:Q<.5?d.X2j:d.gj8,{icon:em,label:ev}=N[D];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:T.videoControlsGroup,children:[(0,r.jsx)(j,{iconComponent:em,animationTime:A,visible:b,ariaLabel:ev,tooltipLabel:ev,shortcut:g.Y1.PLAYBACK,onClick:R,ref:er}),(0,r.jsx)(j,{iconComponent:f.d,animationTime:A,visible:b,onClick:y,ariaLabel:h.intl.string(h.t.r9s3Ul),tooltipLabel:h.intl.string(h.t.r9s3Ul),shortcut:g.Y1.SEEK_BACK}),(0,r.jsx)(j,{iconComponent:S.o,animationTime:A,visible:b,onClick:q,disabled:!L,ariaLabel:L?h.intl.string(h.t.zWDcND):h.intl.string(h.t.xXh3y8),tooltipLabel:L?h.intl.string(h.t.zWDcND):h.intl.string(h.t.xXh3y8),tooltipDelayMs:L?1500:0,shortcut:g.Y1.SEEK_FORWARD})]}),(0,r.jsxs)(o.animated.div,{className:s()(T.videoControlsGroup,T.videoControlsGroupMid),style:{opacity:(0,o.to)([A.to({range:[0,1],output:[0,1]})],e=>"".concat(b?e:Math.pow(e,8)))},children:[(0,r.jsxs)("div",{onMouseEnter:ea,onMouseLeave:eu,onFocus:ea,onBlur:eu,className:T.volumeControlGroup,children:[(0,r.jsx)(j,{iconComponent:ed,animationTime:A,visible:b,onClick:eo,ariaLabel:h.intl.string(h.t["eIl+AA"]),tooltipLabel:h.intl.string(h.t["eIl+AA"]),shortcut:g.Y1.MUTE}),(0,r.jsx)(o.animated.div,{className:T.volumeSlider,style:{opacity:(0,o.to)([et.to({range:[0,1],output:[0,1]})],e=>"".concat(b?e:Math.pow(e,8))),width:(0,o.to)([et.to({range:[0,1],output:[0,100]})],e=>"".concat(e,"px"))},children:(0,r.jsx)(c.i,{mini:!0,...F?{}:{barStyles:{height:"5px",top:"10px"},grabberStyles:{marginTop:"-5px",backgroundColor:u.Z.colors.WHITE.css,cursor:"pointer"},fillStyles:{backgroundColor:u.Z.colors.WHITE.css}},initialValue:Q,keyboardStep:.1,minValue:0,maxValue:1,onValueChange:e=>{ei(e),U(e),es(x.id,e),J&&(ee(!1),w(!1)),Z&&e>0&&V(!1)},asValueChanges:e=>{ei(e),J||(ee(!0),w(!0))},fillStyles:{backgroundColor:u.Z.colors.WHITE.css},orientation:"horizontal","aria-label":h.intl.string(h.t["eIl+AA"])})})]}),(0,r.jsx)(I,{current:null==i?void 0:null===(t=i.current)||void 0===t?void 0:t.currentTime,duration:null==i?void 0:null===(n=i.current)||void 0===n?void 0:n.duration})]}),(0,r.jsxs)("div",{className:s()(T.videoControlsGroup,T.videoControlsGroupEnd),children:[(0,r.jsx)(j,{iconComponent:d.hH0,animationTime:A,visible:b,onClick:k,active:Y&&D!==g.rq.ENDED,disabled:D===g.rq.ENDED,ariaLabel:h.intl.string(h.t.KCzjTk),tooltipLabel:h.intl.string(h.t.KCzjTk)}),!O&&(0,r.jsx)(j,{iconComponent:C.c,animationTime:A,visible:b,active:z,onClick:M,ariaLabel:h.intl.string(h.t.bDSZOz),tooltipLabel:h.intl.string(h.t.bDSZOz),shortcut:g.Y1.CAPTION}),(0,r.jsx)(j,{iconComponent:G?d.wvt:d.NpZ,animationTime:A,visible:b,onClick:P,ariaLabel:h.intl.string(h.t.vKZT5u),tooltipLabel:h.intl.string(h.t.vKZT5u),shortcut:g.Y1.FULLSCREEN})]})]})}},350312:function(e,t,n){n.d(t,{Z:()=>f}),n(47120);var r=n(200651),l=n(192379),i=n(120356),s=n.n(i),o=n(481060),a=n(497505),u=n(720293),c=n(602667),d=n(795265);function m(e){let{asset:t}=e;return null==t?null:(0,r.jsx)("img",{src:t.url,alt:"",className:d.endScreenImageBackground})}function v(e){let{quest:t,asset:n}=e;return null==n?null:(0,r.jsx)(c.A,{questOrQuests:t,questContent:a.jn.VIDEO_MODAL_END_CARD,children:e=>(0,r.jsx)("img",{ref:t=>{e.current=t},src:n.url,alt:"Video thumbnail",className:d.endScreenCard})})}function E(e){let{ctaBtnLabel:t,title:n,subtitle:l,onCTAClick:i}=e;return(0,r.jsxs)("div",{className:d.endScreenCtaContainer,children:[(0,r.jsx)(p,{title:n,subtitle:l}),(0,r.jsx)(C,{label:t,icon:o.d4D,onClick:i})]})}function p(e){let{title:t,subtitle:n}=e;return(0,r.jsxs)("div",{className:d.endScreenCtaTitleContainer,children:[(0,r.jsx)(o.X6q,{variant:"heading-md/semibold",className:d.endScreenCtaTitle,children:t}),(0,r.jsx)(o.X6q,{variant:"heading-sm/normal",className:d.endScreenCtaSubtitle,children:n})]})}function C(e){let{label:t,icon:n,onClick:i,className:a}=e,[u,c]=l.useState(!1),m=()=>{c(!0)},v=()=>{c(!1)};return(0,r.jsxs)(o.P3F,{className:s()(d.endScreenCtaBtn,d.accentOnHover,a),onMouseEnter:m,onMouseLeave:v,onFocus:m,onBlur:v,onClick:i,children:[(0,r.jsx)(o.X6q,{variant:"heading-md/semibold",className:d.endScreenCtaBtnTitle,children:t}),(0,r.jsx)(n,{size:"md",color:u?o.TVs.colors.WHITE:"#B5BAC1",className:d.endScreenIcon})]})}let f=function(e){let{quest:t,ctaBtnLabel:n,title:i,subtitle:s,onCTAClick:o}=e,a=l.useMemo(()=>(0,u.z)(u.i.VIDEO_PLAYER_THUMBNAIL,t),[t]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m,{asset:a}),(0,r.jsx)("div",{className:d.endScreenOverlay}),(0,r.jsxs)("div",{className:d.endScreenContainer,children:[(0,r.jsx)(v,{quest:t,asset:a}),(0,r.jsx)(E,{title:i,subtitle:s,ctaBtnLabel:n,onCTAClick:o})]})]})}},902749:function(e,t,n){n.d(t,{c:()=>o});var r=n(200651);n(192379);var l=n(692547),i=n(390507),s=n(325767);let o=e=>{var t,n;let{size:o="md",width:a,height:u,color:c=l.Z.colors.INTERACTIVE_NORMAL,colorClass:d="",...m}=e,v=(0,i.m)(o),E=null!==(t=null==v?void 0:v.width)&&void 0!==t?t:a,p=null!==(n=null==v?void 0:v.height)&&void 0!==n?n:u;return(0,r.jsx)("svg",{...(0,s.Z)(m),xmlns:"http://www.w3.org/2000/svg",width:E,height:p,fill:"none",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{fill:"string"==typeof c?c:c.css,fillRule:"evenodd",d:"M5 2C3.34315 2 2 3.34315 2 5V19C2 20.6569 3.34315 22 5 22H19C20.6569 22 22 20.6569 22 19V5C22 3.34315 20.6569 2 19 2H5ZM6.316 15.652C6.9 15.996 7.568 16.168 8.32 16.168C9.048 16.168 9.68 16.02 10.216 15.724C10.76 15.428 11.184 14.996 11.488 14.428L10.18 13.408C9.996 13.776 9.736 14.064 9.4 14.272C9.072 14.48 8.712 14.584 8.32 14.584C7.92 14.584 7.56 14.48 7.24 14.272C6.92 14.064 6.668 13.756 6.484 13.348C6.3 12.932 6.208 12.436 6.208 11.86C6.208 11.284 6.3 10.792 6.484 10.384C6.668 9.968 6.92 9.656 7.24 9.448C7.56 9.24 7.92 9.136 8.32 9.136C8.72 9.136 9.084 9.24 9.412 9.448C9.74 9.656 9.996 9.944 10.18 10.312L11.488 9.292C10.872 8.132 9.816 7.552 8.32 7.552C7.568 7.552 6.9 7.728 6.316 8.08C5.732 8.424 5.276 8.92 4.948 9.568C4.62 10.216 4.456 10.98 4.456 11.86C4.456 12.74 4.62 13.504 4.948 14.152C5.276 14.8 5.732 15.3 6.316 15.652ZM14.0269 15.652C14.6109 15.996 15.2789 16.168 16.0309 16.168C16.7589 16.168 17.3909 16.02 17.9269 15.724C18.4709 15.428 18.8949 14.996 19.1989 14.428L17.8909 13.408C17.7069 13.776 17.4469 14.064 17.1109 14.272C16.7829 14.48 16.4229 14.584 16.0309 14.584C15.6309 14.584 15.2709 14.48 14.9509 14.272C14.6309 14.064 14.3789 13.756 14.1949 13.348C14.0109 12.932 13.9189 12.436 13.9189 11.86C13.9189 11.284 14.0109 10.792 14.1949 10.384C14.3789 9.968 14.6309 9.656 14.9509 9.448C15.2709 9.24 15.6309 9.136 16.0309 9.136C16.4309 9.136 16.7949 9.24 17.1229 9.448C17.4509 9.656 17.7069 9.944 17.8909 10.312L19.1989 9.292C18.5829 8.132 17.5269 7.552 16.0309 7.552C15.2789 7.552 14.6109 7.728 14.0269 8.08C13.4429 8.424 12.9869 8.92 12.6589 9.568C12.3309 10.216 12.1669 10.98 12.1669 11.86C12.1669 12.74 12.3309 13.504 12.6589 14.152C12.9869 14.8 13.4429 15.3 14.0269 15.652Z",className:d})})}},957099:function(e,t,n){n.d(t,{d:()=>o});var r=n(200651);n(192379);var l=n(692547),i=n(390507),s=n(325767);let o=e=>{var t,n;let{size:o="md",width:a,height:u,color:c=l.Z.colors.INTERACTIVE_NORMAL,...d}=e,m=(0,i.m)(o),v=null!==(t=null==m?void 0:m.width)&&void 0!==t?t:a,E=null!==(n=null==m?void 0:m.height)&&void 0!==n?n:u;return(0,r.jsxs)("svg",{...(0,s.Z)(d),xmlns:"http://www.w3.org/2000/svg",width:v,height:E,fill:"none",viewBox:"0 0 32 32",children:[(0,r.jsx)("path",{d:"M169.545 229.312v7.919l14.838-10.253v46.348h7.669v-55.434h-6.169l-16.338 11.42ZM225.979 274.576c13.087 0 21.34-11.003 21.34-28.842 0-17.756-8.253-29.093-21.34-29.093-13.004 0-21.173 11.254-21.173 29.009 0 17.923 8.169 28.926 21.173 28.926Zm0-7.335c-8.419 0-13.004-8.336-13.004-21.591 0-13.087 4.585-21.673 13.004-21.673 8.503 0 13.171 8.669 13.171 21.757 0 13.171-4.668 21.507-13.171 21.507Z",style:{fill:"string"==typeof c?c:c.css,fillRule:"nonzero"},transform:"translate(-25.102 -30.774) scale(.19361)"}),(0,r.jsx)("path",{d:"M137.108 31.459a160.22 160.22 0 0 0-30.316-2.894c-88.439 0-160.24 71.801-160.24 160.241 0 88.439 71.801 160.24 160.24 160.24 88.499 0 160.241-71.742 160.241-160.24h-31.365c0 71.176-57.699 128.876-128.876 128.876-71.128 0-128.876-57.748-128.876-128.876 0-71.129 57.748-128.877 128.876-128.877 8.183 0 16.347.78 24.382 2.328l5.934-30.798Z",style:{fill:"string"==typeof c?c:c.css},transform:"matrix(-.0886 .03775 .03775 .0886 17.716 -4.317)"}),(0,r.jsx)("path",{d:"M144.616 190.007V96.608l197.822 69.184-197.822 69.185v-44.97Z",style:{fill:"string"==typeof c?c:c.css},transform:"matrix(-.0222 .01458 .04451 .06777 3.48 -8.53)"})]})}},312729:function(e,t,n){n.d(t,{o:()=>o});var r=n(200651);n(192379);var l=n(692547),i=n(390507),s=n(325767);let o=e=>{var t,n;let{size:o="md",width:a,height:u,color:c=l.Z.colors.INTERACTIVE_NORMAL,...d}=e,m=(0,i.m)(o),v=null!==(t=null==m?void 0:m.width)&&void 0!==t?t:a,E=null!==(n=null==m?void 0:m.height)&&void 0!==n?n:u;return(0,r.jsxs)("svg",{...(0,s.Z)(d),xmlns:"http://www.w3.org/2000/svg",width:v,height:E,fill:"none",viewBox:"0 0 32 32",children:[(0,r.jsx)("path",{d:"M169.545 229.312v7.919l14.838-10.253v46.348h7.669v-55.434h-6.169l-16.338 11.42ZM225.979 274.576c13.087 0 21.34-11.003 21.34-28.842 0-17.756-8.253-29.093-21.34-29.093-13.004 0-21.173 11.254-21.173 29.009 0 17.923 8.169 28.926 21.173 28.926Zm0-7.335c-8.419 0-13.004-8.336-13.004-21.591 0-13.087 4.585-21.673 13.004-21.673 8.503 0 13.171 8.669 13.171 21.757 0 13.171-4.668 21.507-13.171 21.507Z",style:{fill:"string"==typeof c?c:c.css,fillRule:"nonzero"},transform:"translate(-24.102 -30.774) scale(.19361)"}),(0,r.jsx)("path",{d:"M137.108 31.459a160.22 160.22 0 0 0-30.316-2.894c-88.439 0-160.24 71.801-160.24 160.241 0 88.439 71.801 160.24 160.24 160.24 88.499 0 160.241-71.742 160.241-160.24h-31.365c0 71.176-57.699 128.876-128.876 128.876-71.128 0-128.876-57.748-128.876-128.876 0-71.129 57.748-128.877 128.876-128.877 8.183 0 16.347.78 24.382 2.328l5.934-30.798Z",style:{fill:"string"==typeof c?c:c.css},transform:"matrix(.0886 .03775 -.03775 .0886 14.284 -4.317)"}),(0,r.jsx)("path",{d:"M144.616 190.007V96.608l197.822 69.184-197.822 69.185v-44.97Z",style:{fill:"string"==typeof c?c:c.css},transform:"matrix(.0222 .01458 -.04451 .06777 28.52 -8.53)"})]})}},536687:function(e,t,n){n.r(t),n.d(t,{default:()=>M}),n(47120);var r=n(200651),l=n(192379),i=n(120356),s=n.n(i),o=n(442837),a=n(780384),u=n(481060),c=n(607070),d=n(210887),m=n(617136),v=n(915750),E=n(113434),p=n(569984),C=n(497505),f=n(918701),S=n(475595),g=n(566078),x=n(164495),_=n(472144),h=n(602667),T=n(644646),D=n(880199),N=n(604162),I=n(747717),j=n(963123),A=n(281055),b=n(46140),L=n(981631),O=n(388032),R=n(152860);function k(e){var t,n,i,p;let h,{transitionState:A,onClose:k,quest:M,autoplay:P,videoSessionId:y,impressionRef:q,startTime:w}=e,F=(0,f.il)(M),B=(0,o.e7)([d.Z],()=>d.Z.getState().theme),U=(0,a.wj)(B)?L.BRd.DARK:L.BRd.LIGHT,Z=(0,o.e7)([c.Z],()=>c.Z.useReducedMotion),V=(0,v.aM)(),[Y,z]=l.useState(F.progressSeconds),[G,H]=l.useState(!1),{completedRatio:K,completedRatioDisplay:Q}=(0,E.I)(M),[X,W]=(0,N.G6)(O.intl.string(O.t.RDE0SU),O.intl.string(O.t["+5kSoa"]),1700);if((0,f.xN)(M.config)&&(null===(t=M.userStatus)||void 0===t?void 0:t.claimedAt)==null){let e=(0,f.LM)(M.config);h=(0,r.jsx)(D.Z,{orbQuantity:e})}else h=(null===(p=M.userStatus)||void 0===p?void 0:p.claimedAt)!=null?O.intl.string(O.t.vTgCW1):O.intl.string(O.t.cfY4PD);let $=l.useCallback(()=>{(0,f.f2)(M.id,{content:C.jn.VIDEO_MODAL,ctaContent:m.jZ.COPY_QUEST_URL,impressionId:V}),W()},[V,M.id,W]),J=l.useMemo(()=>g.r.build(M.config).defaultReward.messages.name,[M]),ee=O.intl.formatToPlainString(O.t["12IWPz"],{rewardName:J});return(0,r.jsx)(u.Y0X,{transitionState:A,size:u.CgR.DYNAMIC,className:R.modalRoot,children:(0,r.jsx)("div",{ref:e=>{q.current=e},className:R.modalBg,children:(0,r.jsx)("div",{className:R.modalBody,children:(0,r.jsxs)("div",{className:R.modalContent,children:[(0,r.jsxs)("div",{className:R.contentHeader,children:[(0,r.jsxs)(u.P3F,{className:R.contentHeaderGameInfo,onClick:()=>{(0,f.FE)(M,{content:C.jn.VIDEO_MODAL,ctaContent:m.jZ.OPEN_GAME_LINK,impressionId:V})},children:[(0,r.jsx)("img",{alt:M.config.messages.gameTitle,className:s()(R.contentHeaderLogotype,R.accentOnHover),src:(0,S.fh)(M,S.eC.LOGO_TYPE,U).url}),(0,r.jsx)(I.Z,{}),(0,r.jsxs)("div",{className:R.questHeading,children:[(0,r.jsx)(u.X6q,{variant:"heading-md/semibold",color:"header-primary",children:O.intl.format(O.t.EQa7oq,{questName:M.config.messages.questName})}),(0,r.jsx)(u.Text,{variant:"text-sm/medium",color:"header-secondary",children:M.config.messages.gameTitle})]})]}),(0,r.jsx)(u.ua7,{position:"left",text:ee,onTooltipShow:()=>{H(!0)},onTooltipHide:()=>{H(!1)},children:e=>(0,r.jsx)(u.P3F,{className:R.progressCont,...e,children:(0,r.jsx)(_.Z,{quest:M,size:48,percentComplete:K,percentCompleteText:G?Q:void 0,percentCompleteTextVariant:"text-sm/medium",children:(0,r.jsx)(T.Z,{className:R.questProgressRewardTile,quest:M,questContent:C.jn.VIDEO_MODAL,autoplay:!1,location:b.dr.VIDEO_MODAL})})})})]}),(0,r.jsx)(j.Z,{quest:M,videoSessionId:y,parentTransitionState:A,onOptimisticProgressUpdate:z,autoplay:P,startTime:w}),(0,r.jsxs)("div",{className:R.contentFooter,children:[(0,r.jsx)(u.zxk,{onClick:k,color:u.zxk.Colors.PRIMARY,size:u.zxk.Sizes.MEDIUM,className:R.footerBtn,children:O.intl.string(O.t.cpT0Cg)}),(0,r.jsxs)("div",{className:R.contentFooterButtonCont,children:[(0,r.jsx)(u.zxk,{color:u.zxk.Colors.PRIMARY,onClick:$,size:u.zxk.Sizes.NONE,className:s()(R.copyLinkBtn,R.footerBtn),children:X}),(0,r.jsx)(x.i0,{className:R.claimBtn,size:u.zxk.Sizes.MEDIUM,quest:M,useReducedMotion:Z,isExpanded:(null===(n=M.userStatus)||void 0===n?void 0:n.completedAt)!=null,disabled:(null===(i=M.userStatus)||void 0===i?void 0:i.completedAt)==null,ctaLabel:h,onClick:()=>{(0,f.xN)(M.config)&&k()}})]})]})]})})})})}function M(e){let{questId:t,overrideQuest:n,autoplay:l,startTime:i,...s}=e,a=(0,o.e7)([p.Z],()=>p.Z.getQuest(t)),u=null!=n?n:a;return null!=u?(0,r.jsx)(h.A,{questOrQuests:u,questContent:C.jn.VIDEO_MODAL,minViewTimeSeconds:A.zw,trackGuildAndChannelMetadata:!0,children:e=>(0,r.jsx)(k,{...s,startTime:i,impressionRef:e,quest:u,autoplay:l})}):null}},355243:function(e,t,n){n.d(t,{Z:()=>E}),n(47120);var r=n(200651),l=n(192379),i=n(120356),s=n.n(i),o=n(481060),a=n(393903),u=n(604162),c=n(420212),d=n(269954);function m(e,t,n){return n*(Math.max(e-t.left,0)/t.width)}function v(e,t,n){return n.left+e/t*n.width}function E(e){let{percent:t,animate:n,interactionEnabled:i,backgroundColor:E,preloadedBuffers:p,duration:C,maxSeekableTime:f,onClick:S,onScrubBack:g,onScrubForward:x}=e,[_,h]=l.useState(null),[T,D]=l.useState(null),[N,I]=l.useState(null),[j,A]=l.useState(!1),b=l.useRef(null),L=e=>{b.current=e,h(e)};l.useEffect(()=>{null!=_&&(null==f?I(null):I(v(f,C,_)))},[_,f,C]);let O=(0,a.y)(()=>{null!=O.current&&L(O.current.getBoundingClientRect())});l.useLayoutEffect(()=>{null!=O.current&&L(O.current.getBoundingClientRect())},[O]),l.useEffect(()=>{let e=()=>{null!=O.current&&L(O.current.getBoundingClientRect())};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[O]);let R=e=>{D(e.clientX)},k=l.useCallback(e=>{let{key:t}=e;t===c.mR.ArrowLeft&&null!=g?(e.preventDefault(),e.stopPropagation(),g()):t===c.mR.ArrowRight&&null!=x&&(e.preventDefault(),e.stopPropagation(),x())},[g,x]),M=null!=T&&null!=_?m(T,_,C):0,P=(0,u.yv)(M),y=null!=_?_.right-v(t/100*C,C,_):null,q=null!=T&&null!=_?_.right-T:null,w=null!=N&&null!=_?_.right-N:null;return(0,r.jsxs)("div",{className:d.cont,ref:O,children:[(0,r.jsxs)(o.P3F,{className:s()(d.hitboxArea,{[d.interactionEnabled]:i}),ignoreKeyPress:!0,onClick:e=>{i&&null!=S&&S(m(e.clientX,e.currentTarget.getBoundingClientRect(),C))},onMouseEnter:e=>{i&&(null!=O.current&&L(O.current.getBoundingClientRect()),A(!0),R(e))},onMouseLeave:e=>{i&&(A(!1),D(null))},onMouseMove:e=>{i&&j&&R(e)},onKeyDown:k,tabIndex:i?void 0:-1,focusProps:{offset:{top:12,bottom:12}},children:[null==p?void 0:p.map(e=>(0,r.jsx)("div",{className:s()(d.buffer,{[d.bufferHovered]:j}),style:{width:"".concat(100*e.size,"%"),left:"".concat(100*e.start,"%")}},"".concat(e.start,":").concat(e.size))),!i&&null!=w&&w>0&&(0,r.jsx)("div",{className:d.seekableBar,style:{right:null!=w?"".concat(w,"px"):"auto",opacity:null!=w?1:0}}),(0,r.jsx)(o.Exd,{className:d.progress,percent:t,foregroundColor:"#FFFFFF",backgroundColor:null!=E?E:void 0,size:j?o.Exd.Sizes.XSMALL:o.Exd.Sizes.XXSMALL,animate:n}),j&&null!=P&&(0,r.jsx)(o.Text,{className:d.timeDisplay,variant:"text-xs/normal",style:{right:null!=q?"".concat(q-10,"px"):"auto",color:"#FFFFFF"},children:P}),j&&i&&null!=y&&(0,r.jsx)("div",{className:d.grabber,style:{right:"".concat(y-6,"px")}})]}),(0,r.jsx)("div",{className:d.progressGlow,style:{width:"".concat(t,"%")}})]})}},106743:function(e,t,n){n.d(t,{K:()=>u});var r=n(200651),l=n(192379),i=n(261833),s=n(481060),o=n(184299),a=n(152860);function u(e){var t;let{quest:n,onClose:u}=e,c=(0,o.km)(e=>e.transcript),d=(null==c?void 0:c.questId)===n.id&&(null==c?void 0:c.fetchStatus)===o.iF.SUCCESS&&null!==(t=c.text)&&void 0!==t?t:"",m=l.useMemo(()=>d.split("\n").map(e=>e.trim()).filter(e=>e.length>0),[d]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:a.transcriptHeader,children:[(0,r.jsx)(s.X6q,{variant:"heading-md/semibold",color:"currentColor",children:"Transcript"}),(0,r.jsx)(s.P3F,{onClick:u,className:a.transcriptBackBtn,children:(0,r.jsx)(i.D,{color:"currentColor"})})]}),(0,r.jsx)(s.tEY,{children:(0,r.jsx)(s.w0Z,{className:a.transcriptScroller,fade:!0,children:(0,r.jsx)("div",{className:a.transcriptBody,children:(null==c?void 0:c.fetchStatus)===o.iF.FETCHING?(0,r.jsx)("div",{className:a.transcriptBodySpinner,children:(0,r.jsx)(s.$jN,{type:s.$jN.Type.WANDERING_CUBES})}):(0,r.jsx)(s.X6q,{variant:"heading-md/normal",color:"text-muted",children:m.map((e,t)=>(0,r.jsx)("p",{children:e},t))})})})})]})}},223418:function(e,t,n){n.d(t,{CY:()=>u,Y1:()=>c,rq:()=>o,yE:()=>a});var r,l,i,s,o=((r={}).PLAYING="playing",r.PAUSED="paused",r.ENDED="ended",r),a=((l={}).PAUSE_BUTTON="PAUSE_BUTTON",l.LOST_FOCUS="LOST_FOCUS",l.MODAL_CLOSED="MODAL_CLOSED",l),u=((i={}).ERROR="ERROR",i.SOURCE_ERROR="SOURCE_ERROR",i.ABORT="ABORT",i.EMPTIED="EMPTIED",i.STALLED="STALLED",i.SUSPEND="SUSPEND",i),c=((s={}).PLAYBACK="k",s.SPACE=" ",s.SEEK_BACK="j",s.SEEK_FORWARD="l",s.CAPTION="c",s.FULLSCREEN="f",s.MUTE="m",s)},747717:function(e,t,n){n.d(t,{Z:()=>o});var r=n(200651);n(192379);var l=n(120356),i=n.n(l),s=n(152860);function o(e){let{className:t,color:n}=e;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2",height:"40",viewBox:"0 0 2 40",fill:"none",className:i()(s.verticalDivider,t),children:(0,r.jsx)("path",{d:"M1 0V40",stroke:n,strokeOpacity:"0.3",strokeWidth:"2"})})}},963123:function(e,t,n){n.d(t,{Z:()=>X}),n(47120),n(653041);var r=n(200651),l=n(192379),i=n(120356),s=n.n(i),o=n(941208),a=n(642128),u=n(232713),c=n(442837),d=n(780384),m=n(481060),v=n(493773),E=n(607070),p=n(70097),C=n(210887),f=n(866960),S=n(228488),g=n(617136),x=n(915750),_=n(272008),h=n(497505),T=n(918701),D=n(184299),N=n(347382),I=n(5881),j=n(208109),A=n(720293),b=n(602667),L=n(341907),O=n(881773),R=n(350312),k=n(355243),M=n(106743),P=n(223418),y=n(604162),q=n(747717),w=n(281055),F=n(920393),B=n(46140),U=n(981631),Z=n(217702),V=n(388032),Y=n(152860);let z=new Set([U.IyS.FIVE_G,U.IyS.FOUR_G,U.IyS.UNKNOWN]),G={tension:250,friction:5,clamp:!0};function H(){let e=(0,c.e7)([C.Z],()=>C.Z.getState().theme);return(0,r.jsx)("div",{className:Y.pauseText,style:{background:(0,d.wj)(e)?"rgba(0, 0, 0, 0.65)":"rgba(255, 255, 255, 0.65)"},children:(0,r.jsx)(m.Text,{variant:"text-sm/normal",color:"text-normal",children:V.intl.string(V.t.U7Xrb2)})})}function K(e){let{quest:t,shouldShow:n}=e,i=l.useMemo(()=>(0,A.z)(A.i.VIDEO_PLAYER_THUMBNAIL,t),[t]);return null==i?null:(0,r.jsx)(b.A,{questOrQuests:t,questContent:h.jn.VIDEO_MODAL_END_CARD,children:e=>(0,r.jsx)("img",{ref:t=>{e.current=t},src:i.url,alt:"Video thumbnail",className:s()(Y.stillFrameImageCard,{[Y.stillFrameImageCardHidden]:!n})})})}function Q(e){let{title:t,subtitle:n,icon:i,onClick:o,className:a}=e,[u,c]=l.useState(!1),d=()=>{c(!0)},v=()=>{c(!1)};return(0,r.jsx)(m.P3F,{className:s()(Y.endScreenPanel,Y.accentOnHover,a),onMouseEnter:d,onMouseLeave:v,onFocus:d,onBlur:v,onClick:o,children:(0,r.jsxs)("div",{className:Y.endScreenPanelInner,children:[(0,r.jsxs)("div",{className:Y.endScreenPanelTextCont,children:[(0,r.jsx)(m.X6q,{variant:"heading-md/semibold",className:Y.endScreenPanelTextTitle,children:t}),(0,r.jsx)(m.X6q,{variant:"heading-sm/normal",className:Y.endScreenPanelTextSubtitle,children:n})]}),(0,r.jsx)(q.Z,{color:"#747783"}),(0,r.jsx)(i,{size:"md",color:u?"#FFFFFF":"#B5BAC1",className:Y.endScreenIcon})]})})}function X(e){var t,n,i,d,C,b,q,X,W,$,J,ee,et,en,er,el,ei;let{quest:es,videoSessionId:eo,onOptimisticProgressUpdate:ea,autoplay:eu,parentTransitionState:ec,startTime:ed}=e,em=(0,x.aM)(),ev=(0,g._F)(),eE=(0,g.O5)(),ep=(0,D.km)(e=>e.transcriptEnabled),eC=(0,D.km)(e=>e.setTranscriptEnabled),ef=(0,D.km)(e=>e.captionEnabled),eS=(0,D.km)(e=>e.setCaptionEnabled),eg=(0,D.km)(e=>e.fullScreenEnabled),ex=(0,D.km)(e=>e.setFullScreenEnabled),{focused:e_,focusedChanged:eh}=(0,w.xU)(),{visible:eT,visibleChanged:eD,targetRef:eN}=(0,w.Yy)(),[eI,ej]=l.useState(!0===eu?P.rq.PLAYING:P.rq.PAUSED),[eA,eb]=l.useState(!1),eL=(0,T.il)(es),[eO,eR]=l.useState(eL.percentComplete),[ek,eM]=l.useState(!1),[eP,ey]=l.useState(!0),[eq,ew]=l.useState(!1),[eF,eB]=l.useState([]),[eU,eZ]=l.useState(f.Z.getEffectiveConnectionSpeed()),[eV,eY]=l.useState(0),[ez,eG]=l.useState(0),[eH,eK]=l.useState(!1),[eQ,eX]=l.useState(!1),eW=l.useRef(!1),e$=l.useRef(null),eJ=l.useRef(null),e0=(0,l.useRef)(-1),e1=(0,D.km)(e=>{var t;return null!==(t=e.videoProgress[es.id])&&void 0!==t?t:{timestampSec:0,duration:10}},u.X),e2=(0,D.km)(e=>e.setVideoProgress),e6=(0,D.km)(e=>e.muted),e4=(0,D.km)(e=>e.volume),e9=(0,c.e7)([E.Z],()=>E.Z.useReducedMotion),e7=(0,l.useRef)(null),e8=(0,l.useRef)(null),e3=l.useRef(!0),e5=(null===(t=es.userStatus)||void 0===t?void 0:t.completedAt)!=null,te=(0,D.km)(e=>e.transcript),[tt,tn]=l.useState(null),[tr,tl]=l.useState(!1),[ti,ts]=l.useState(!1),[to,ta]=l.useState(null),tu=e5?null!==(C=null===(n=e7.current)||void 0===n?void 0:n.duration)&&void 0!==C?C:0:Math.max(e1.maxTimestampSec,eL.progressSeconds),{videoAssetId:tc,videoAsset:td}=function(e,t,n){var r;let i=l.useRef(!1),s=l.useRef(null),a=(0,N.z)("VideoPanel"),u=null===(r=e.config.videoMetadata)||void 0===r?void 0:r.assets,c=l.useMemo(()=>null!=u?a&&o.ZP.isSupported()&&null!=u.videoPlayerVideoHls?A.i.VIDEO_PLAYER_VIDEO_HLS:z.has(n)||null==u.videoPlayerVideoLowRes?A.i.VIDEO_PLAYER_VIDEO:A.i.VIDEO_PLAYER_VIDEO_LOW_RES:null,[u,n,a]),d=l.useMemo(()=>null!=c?(0,A.z)(c,e):null,[e,c]);return l.useEffect(()=>{c===A.i.VIDEO_PLAYER_VIDEO_HLS&&null!=d&&null!=t.current&&!i.current&&(s.current=new o.ZP,s.current.loadSource(d.url),s.current.attachMedia(t.current),i.current=!0)},[d,c,t]),{videoAssetId:c,videoAsset:d,hlsRef:s}}(es,e7,eU),tm=l.useCallback(e=>{null!=e7.current&&ev({questId:es.id,event:U.rMx.QUEST_VIDEO_SEGMENT_WATCHED,properties:{...e,video_asset_id:tc,quest_completed:e5,video_duration_sec:e7.current.duration,video_progress:(0,L.formatVideoProgressRatio)(e.segment_end_sec,e7.current.duration),video_session_id:eo}})},[ev,es.id,tc,e5,eo]),{forceSendCurrentSegment:tv}=(0,F.Z)({videoRef:e7,isPlaying:eI===P.rq.PLAYING,isMetadataLoaded:tr,isInitialSeekComplete:ti,onAnalytics:tm,emitIntervalMs:4e3,minSegmentDurationMs:2e3}),tE=l.useCallback(e=>{if(ej(e),null!=e7.current)switch(e){case P.rq.PLAYING:e7.current.play(),ev({questId:es.id,event:U.rMx.QUEST_VIDEO_RESUMED,properties:{video_timestamp_seconds:e7.current.currentTime,pause_reason:tt,video_session_id:eo}}),tn(null);break;case P.rq.PAUSED:e7.current.pause(),tv();break;case P.rq.ENDED:eC(!1),tv()}},[ev,es.id,tt,eo,tv,eC]);(0,v.Ng)(()=>{e3.current&&(e3.current=!1,eZ(f.Z.getEffectiveConnectionSpeed()),e5&&e1.timestampSec>=e1.duration&&e2(es.id,0,e1.duration))}),l.useEffect(()=>{null!=e7.current&&null!=tt&&ev({questId:es.id,event:U.rMx.QUEST_VIDEO_PAUSED,properties:{video_timestamp_seconds:e7.current.currentTime,reason:tt,video_session_id:eo}})},[tt,es.id,ev,eo]),l.useEffect(()=>{eh&&null!=e7.current&&ev({questId:es.id,event:e_?U.rMx.QUEST_VIDEO_APP_FOCUSED:U.rMx.QUEST_VIDEO_APP_UNFOCUSED,properties:{video_timestamp_seconds:e7.current.currentTime,video_state:eI,video_session_id:eo}})},[e_,eh,eI,es.id,ev,eo]);let tp=l.useCallback(e=>{var t;e5||(null===(t=es.userStatus)||void 0===t?void 0:t.enrolledAt)==null||(0,T.FI)(es,e),null!=e7.current&&ev({questId:es.id,event:U.rMx.QUEST_VIDEO_PROGRESSED,properties:{progress:(0,L.formatVideoProgressRatio)(e7.current.currentTime,e7.current.duration),video_timestamp_seconds:e7.current.currentTime,video_session_id:eo}})},[e5,es,ev,eo]);l.useEffect(()=>{ec!==m.Dvm.HIDDEN&&ec!==m.Dvm.EXITING&&ec!==m.Dvm.EXITED&&(null==ec||!eD||eT||e5)&&(!eh||e_||e5)||null==e7.current||eI!==P.rq.PLAYING||(tE(P.rq.PAUSED),e5||tn(P.yE.LOST_FOCUS))},[ec,e_,eh,eT,eD,eI,e5,tE,tp]);let tC=()=>{eb(!0)},tf=()=>{eb(!1)},tS=eA||eI===P.rq.PAUSED||eI===P.rq.ENDED,tg=l.useCallback(()=>{var e;let t=(0,S.fn)(null===(e=e7.current)||void 0===e?void 0:e.parentNode,e7.current);null==t||(0,S.rB)(t)||(t.removeEventListener(S.NO,tg),ex(!1),ev({questId:es.id,event:U.rMx.QUEST_VIDEO_FULLSCREEN_EXITED,properties:{video_session_id:eo}}))},[es.id,ex,ev,eo]),tx=()=>{null!=e7.current&&(th(Math.max(e7.current.currentTime-10,0)),eI===P.rq.ENDED&&tE(P.rq.PAUSED),eE({questId:es.id,questContent:h.jn.VIDEO_MODAL,questContentCTA:g.jZ.SEEK_BACKWARD}))},t_=()=>{if(null==e7.current||!tq)return;let e=Math.min(e7.current.currentTime+10,tu);th(e),eI!==P.rq.ENDED&&e>=e7.current.duration&&tE(P.rq.ENDED),eE({questId:es.id,questContent:h.jn.VIDEO_MODAL,questContentCTA:g.jZ.SEEK_FORWARD})};l.useEffect(()=>{let e=e7.current;return()=>{let t=(0,S.fn)(null==e?void 0:e.parentNode,e);null!=t&&t.removeEventListener(S.NO,tg)}},[tg]);let th=l.useCallback(e=>{null!=e7.current&&(tv(),eM(!0),ts(!1),e7.current.currentTime=e,e2(es.id,e,e7.current.duration))},[e7,e2,es.id,tv]),tT=()=>{if(null!=e7.current)switch(eI){case P.rq.ENDED:th(0),tE(P.rq.PLAYING);break;case P.rq.PLAYING:tE(P.rq.PAUSED),tn(P.yE.PAUSE_BUTTON);break;default:tE(P.rq.PLAYING)}},tD=e=>{ta(e)},tN=e=>{ta(t=>(null==t?void 0:t.id)===e.id?null:t)},tI=l.useCallback(()=>{if(null==e7.current||0===e7.current.textTracks.length)return;let e=e7.current.textTracks[0];if(e.mode="hidden",null!=e.cues)for(let t=0;t<e.cues.length;t++){let n=e.cues[t];(0,y.JC)(n)&&(n.id="cue-".concat(t),n.onenter=()=>tD(n),n.onexit=()=>tN(n))}},[e7]);l.useEffect(()=>{if(null==e8.current)return;let e=e8.current;return e.addEventListener("load",tI),()=>{null!=e&&e.removeEventListener("load",tI)}},[e8,tI]);let tj=l.useCallback(e=>{try{var t,n;let r=null===(t=e7.current)||void 0===t?void 0:t.error,l=null===(n=e7.current)||void 0===n?void 0:n.networkState,i=null!=e7.current?(0,L.formatVideoProgressRatio)(e7.current.currentTime,e7.current.duration):void 0;ev({questId:es.id,event:U.rMx.QUEST_VIDEO_ERROR,properties:{video_progress:i,video_error_type:e,video_asset_id:tc,network_connection_speed:eU,video_session_id:eo,video_error_code:null==r?void 0:r.code,video_error_message:null==r?void 0:r.message,video_network_state:l}})}catch(e){}},[eU,es.id,ev,tc,eo]),tA=e=>{if(null!=e7.current&&eI===P.rq.PLAYING){if(eP&&ey(!1),eq){let e=null!=eJ.current?Date.now()-eJ.current:null;ev({questId:es.id,event:U.rMx.QUEST_VIDEO_BUFFERING_ENDED,properties:{video_asset_id:tc,network_connection_speed:eU,duration:e,buffer_index:e0.current,video_session_id:eo}}),ew(!1)}tE(P.rq.PLAYING)}};l.useEffect(()=>{if(!ek)return;let e=setTimeout(()=>{eM(!1)},1e3);return()=>clearTimeout(e)},[ek]);let[{controlBarAnimSpring:tb},tL]=(0,m.q_F)(()=>({from:{controlBarAnimSpring:0},config:G,onStart:()=>{eX(!1)},onRest:e=>{1===e.value&&eX(!0)}})),tO=(0,l.useRef)(null),[{captionHeightSpring:tR},tk]=(0,m.q_F)(()=>({from:{captionHeightSpring:0},config:G}));l.useEffect(()=>{var e,t;return tk({captionHeightSpring:ef&&null!=to&&null!==(t=null===(e=tO.current)||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0,immediate:e9}),()=>{tR.stop()}},[ef,tk,e9,to,tR]),l.useEffect(()=>(tL({controlBarAnimSpring:tS||eH?1:0,immediate:e9}),()=>{tb.stop()}),[tS,tL,e9,eH,tb]);let tM=eI===P.rq.ENDED,tP=l.useMemo(()=>(0,A.z)(A.i.VIDEO_PLAYER_THUMBNAIL,es),[es]),ty=l.useMemo(()=>(0,A.z)(A.i.VIDEO_PLAYER_CAPTION,es),[es]),tq=e5||e1.maxTimestampSec>=(null!==(b=null===(i=e7.current)||void 0===i?void 0:i.currentTime)&&void 0!==b?b:0)+1;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(m.P3F,{className:Y.videoCont,"data-fullscreen":eg,tabIndex:-1,onMouseEnter:tC,onMouseLeave:tf,onFocus:tC,onBlur:tf,children:(0,r.jsxs)("div",{className:Y.videoContInnerRelative,children:[tM&&((0,j.e)({location:B.dr.VIDEO_MODAL})?(0,r.jsx)(R.Z,{quest:es,title:null!==(J=null===(X=es.config.videoMetadata)||void 0===X?void 0:X.messages.videoEndCtaTitle)&&void 0!==J?J:V.intl.string(V.t.Ka526u),subtitle:null!==(ee=null===(W=es.config.videoMetadata)||void 0===W?void 0:W.messages.videoEndCtaSubtitle)&&void 0!==ee?ee:V.intl.string(V.t.tKMcAg),ctaBtnLabel:null!==(et=null===($=es.config.videoMetadata)||void 0===$?void 0:$.messages.videoEndCtaButtonLabel)&&void 0!==et?et:V.intl.string(V.t.iiTtpK),onCTAClick:()=>{eE({questId:es.id,questContent:h.jn.VIDEO_MODAL_END_CARD,questContentCTA:g.jZ.LEARN_MORE,impressionId:em}),(0,T.FE)(es,{content:h.jn.VIDEO_MODAL_END_CARD,ctaContent:g.jZ.LEARN_MORE})}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(K,{quest:es,shouldShow:tM}),(0,r.jsx)("div",{className:Y.videoContOverlay}),(0,r.jsx)(Q,{title:null!==(el=null===(en=es.config.videoMetadata)||void 0===en?void 0:en.messages.videoEndCtaTitle)&&void 0!==el?el:V.intl.string(V.t.iiTtpK),subtitle:null!==(ei=null===(er=es.config.videoMetadata)||void 0===er?void 0:er.messages.videoEndCtaSubtitle)&&void 0!==ei?ei:V.intl.string(V.t.mxaHf3),icon:m.d4D,className:Y.endScreenPanelRight,onClick:()=>{eE({questId:es.id,questContent:h.jn.VIDEO_MODAL,questContentCTA:g.jZ.LEARN_MORE}),(0,T.FE)(es,{content:h.jn.VIDEO_MODAL,ctaContent:g.jZ.LEARN_MORE,impressionId:em})}})]})),(0,r.jsxs)(p.Z,{ref:e=>{e7.current=e,eN.current=e},autoPlay:eu,playsInline:!0,mediaLayoutType:eg?Z.hV.STATIC:Z.hV.RESPONSIVE,className:s()({[Y.hidden]:tM,[Y.videoInner]:!0}),controls:!1,poster:null==tP?void 0:tP.url,disablePictureInPicture:!0,onTimeUpdate:e=>{null!=e7.current&&(e7.current.currentTime>=eV&&(eY(e7.current.currentTime+6+2*Math.random()),tp(e7.current.currentTime)),e7.current.currentTime>=ez&&(eG(e7.current.currentTime+1),(0,_.qm)(es.id,eL.taskType,e7.current.currentTime),ea(e7.current.currentTime)),e2(es.id,e7.current.currentTime,e7.current.duration),eR(e7.current.currentTime/e7.current.duration*100))},onEnded:e=>{null!=e7.current&&(tp(e7.current.duration+1),e2(es.id,e7.current.duration,e7.current.duration)),tE(P.rq.ENDED),ew(!1)},onLoadedData:e=>{if(eP){let e=null!=e$.current?Date.now()-e$.current:null;ev({questId:es.id,event:U.rMx.QUEST_VIDEO_LOADING_ENDED,properties:{video_asset_id:tc,network_connection_speed:eU,duration:e,video_session_id:eo}}),ey(!1)}},onLoadedMetadata:e=>{null!=e7.current&&(tl(!0),th(e5?e1.timestampSec:Math.max(e1.timestampSec,eL.progressSeconds)),e6?e7.current.volume=0:e7.current.volume=e4)},onLoadStart:()=>{e$.current=Date.now(),ev({questId:es.id,event:U.rMx.QUEST_VIDEO_LOADING_STARTED,properties:{video_asset_id:tc,network_connection_speed:eU,video_session_id:eo,is_hls_supported:o.ZP.isSupported()}})},onPlay:()=>{if(eW.current)return;let e=performance.now()-ed;(0,I.T)({quest:es}).info("⏰ Video FCP: ".concat(e,"ms")),ev({questId:es.id,event:U.rMx.QUEST_VIDEO_TIME_TO_FIRST_FRAME,properties:{duration_ms:e,video_session_id:eo,video_asset_id:tc}}),eW.current=!0},onWaiting:e=>{eJ.current=Date.now(),e0.current+=1,ev({questId:es.id,event:U.rMx.QUEST_VIDEO_BUFFERING_STARTED,properties:{video_asset_id:tc,network_connection_speed:eU,buffer_index:e0.current,video_session_id:eo}}),ew(!0)},onProgress:e=>{if(null==e7.current)return;let t=[];for(let e=0;e<e7.current.buffered.length;e++){let n=e7.current.buffered.start(e),r=e7.current.buffered.end(e);!(r-n<1)&&t.push({start:n/e7.current.duration,size:(r-n)/e7.current.duration})}eB(t)},onCanPlay:tA,onCanPlayThrough:tA,onSeeked:()=>{ts(!0)},onAbort:()=>tj(P.CY.ABORT),onError:()=>tj(P.CY.ERROR),onEmptied:()=>tj(P.CY.EMPTIED),onStalled:()=>tj(P.CY.STALLED),onSuspend:()=>tj(P.CY.SUSPEND),onClick:()=>{tT()},crossOrigin:"anonymous",children:[null!=ty&&(0,r.jsx)("track",{ref:e8,src:ty.url,label:"English",kind:"captions",srcLang:"en",default:!0}),null!=td&&tc!==A.i.VIDEO_PLAYER_VIDEO_HLS&&(0,r.jsx)("source",{onError:()=>tj(P.CY.SOURCE_ERROR),src:td.url,type:td.mimetype})]}),(eP||eq)&&eI===P.rq.PLAYING&&(0,r.jsx)(m.$jN,{type:m.$jN.Type.WANDERING_CUBES,className:Y.loadingSpinner}),eI===P.rq.PAUSED&&tt===P.yE.LOST_FOCUS&&(0,r.jsx)(H,{}),ep&&eI!==P.rq.ENDED&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.P3F,{onClick:()=>eC(!1),tabIndex:-1,children:(0,r.jsx)("div",{className:Y.transcriptOverlay})}),(0,r.jsx)(a.animated.div,{className:Y.transcriptCont,style:{marginBottom:(0,a.to)([tb,tR],(e,t)=>"".concat(50*e+t,"px"))},children:(0,r.jsx)(M.K,{quest:es,onClose:()=>{eC(!1),eE({questId:es.id,questContent:h.jn.VIDEO_MODAL,questContentCTA:g.jZ.TRANSCRIPT_DISABLE})}})})]}),(0,r.jsx)(a.animated.div,{className:Y.videoFooterContGradient,style:{opacity:(0,a.to)([tb.to({range:[0,1],output:[0,1]})],e=>"".concat(e))}}),(0,r.jsx)("div",{className:s()(Y.playPausePopCont,{[Y.play]:eI===P.rq.PLAYING,[Y.pause]:eI===P.rq.PAUSED}),children:eI===P.rq.PLAYING?(0,r.jsx)(m.o1U,{className:Y.playPausePopIcon}):(0,r.jsx)(m.fpf,{className:Y.playPausePopIcon})},eI),ef&&null!=to&&(0,r.jsx)(a.animated.div,{className:Y.captionContainer,ref:tO,style:{translateY:(0,a.to)([tb.to({range:[0,1],output:[0,-50]})],e=>"".concat(e,"px"))},children:(0,r.jsx)(m.Text,{variant:"text-lg/semibold",color:"always-white",className:Y.captionText,children:to.text})}),(0,r.jsxs)(a.animated.div,{className:Y.videoFooterCont,style:{paddingLeft:(0,a.to)([tb.to({range:[0,1],output:[0,25]})],e=>"".concat(e,"px")),paddingRight:(0,a.to)([tb.to({range:[0,1],output:[0,25]})],e=>"".concat(e,"px")),height:(0,a.to)([tb.to({range:[0,1],output:[0,50]})],e=>"".concat(e,"px"))},children:[(0,r.jsx)(k.Z,{percent:eO,animate:!0!==e3.current&&!ek,interactionEnabled:e5&&eQ,backgroundColor:tS?void 0:"rgba(0, 0, 0, 0.0)",preloadedBuffers:tS?eF:void 0,duration:null!==(q=null===(d=e7.current)||void 0===d?void 0:d.duration)&&void 0!==q?q:1,maxSeekableTime:tS&&eQ?tu:void 0,onClick:e=>{th(e),eI===P.rq.ENDED&&tE(P.rq.PLAYING)},onScrubBack:()=>{tx()},onScrubForward:()=>{t_()}}),(0,r.jsx)(a.animated.div,{className:Y.videoControlsCont,style:{paddingTop:(0,a.to)([tb.to({range:[0,1],output:[0,1]})],e=>"".concat(e*e*12,"px")),paddingBottom:(0,a.to)([tb.to({range:[0,1],output:[0,1]})],e=>"".concat(e*e*12,"px")),pointerEvents:(0,a.to)([tb.to({range:[0,1],output:[0,1]})],e=>e<.3?"none":"auto")},children:(0,r.jsx)(O.Z,{videoRef:e7,quest:es,playerState:eI,animSpring:tb,visible:tS,seekForwardEnabled:tq,hideCaptionBtn:null==ty,handlePlaybackBtnClick:tT,handleTranscriptBtnClick:()=>{ep||null!=te&&te.questId===es.id&&te.fetchStatus!==D.iF.NONE&&te.fetchStatus!==D.iF.FAILURE||(0,_.lL)(es),eC(!ep),eE({questId:es.id,questContent:h.jn.VIDEO_MODAL,questContentCTA:ep?g.jZ.TRANSCRIPT_DISABLE:g.jZ.TRANSCRIPT_ENABLE})},handleCaptionBtnClick:()=>{eS(!ef),eE({questId:es.id,questContent:h.jn.VIDEO_MODAL,questContentCTA:ef?g.jZ.CLOSED_CAPTIONING_DISABLE:g.jZ.CLOSED_CAPTIONING_ENABLE})},handleFullScreenBtnClick:()=>{var e;let t=!eg,n=(0,S.fn)(null===(e=e7.current)||void 0===e?void 0:e.parentNode,e7.current);t&&null!=n?((0,S.Dj)(n),n.addEventListener(S.NO,tg),ev({questId:es.id,event:U.rMx.QUEST_VIDEO_FULLSCREEN_ENTERED,properties:{video_session_id:eo}})):t||null==n||(n.removeEventListener(S.NO,tg),ev({questId:es.id,event:U.rMx.QUEST_VIDEO_FULLSCREEN_EXITED,properties:{video_session_id:eo}}),(0,S.Pr)(n)),ex(t)},handleSeekBackBtnClick:tx,handleSeekForwardBtnClick:t_,handleControlBarPendingInteraction:eK})})]})]})})})}},281055:function(e,t,n){n.d(t,{Yy:()=>u,xU:()=>c,zw:()=>a}),n(47120);var r=n(192379),l=n(442837),i=n(434650),s=n(110924),o=n(451478);let a=2;function u(){let[e,t]=r.useState(!1),n=e!==(0,s.Z)(e);return{visible:e,visibleChanged:n,targetRef:(0,i.O)(e=>t(e),.6)}}function c(){let e=(0,l.e7)([o.Z],()=>o.Z.isFocused()),t=e!==(0,s.Z)(e);return{focused:e,focusedChanged:t}}},920393:function(e,t,n){n.d(t,{Z:()=>l}),n(47120);var r=n(192379);function l(e){let{videoRef:t,isPlaying:n,isMetadataLoaded:l,isInitialSeekComplete:i,onAnalytics:s,emitIntervalMs:o,minSegmentDurationMs:a}=e,[u,c]=r.useState(null),d=(0,r.useRef)(null),m=(0,r.useRef)(Date.now()),v=(0,r.useRef)(!1),E=(0,r.useCallback)(e=>{!(e.segmentEndSec<e.segmentStartSec)&&s({start_time:e.startTime,end_time:e.endTime,duration:e.endTime-e.startTime,segment_start_sec:e.segmentStartSec,segment_end_sec:e.segmentEndSec,segment_duration_sec:e.segmentEndSec-e.segmentStartSec})},[s]),p=(0,r.useCallback)(()=>{if(null!=t.current&&l&&i){let e=Date.now(),n=t.current.currentTime;c({startTime:e,endTime:e,segmentStartSec:n,segmentEndSec:n}),v.current=!0}},[t,l,i]),C=(0,r.useCallback)(()=>{if(null==t.current||null==u)return;let e=Date.now();if(e-m.current<o)return;let n=t.current.currentTime;!(n-u.segmentStartSec<a/1e3)&&(E({...u,endTime:e,segmentEndSec:n}),c({startTime:e,endTime:e,segmentStartSec:n,segmentEndSec:n}),m.current=e)},[u,E,o,t,a]);return(0,r.useEffect)(()=>{l&&i||(c(null),v.current=!1)},[l,i]),(0,r.useEffect)(()=>{if(n&&l&&i)v.current||p(),d.current=window.setInterval(()=>{C()},200);else{if(null!=u&&null!=t.current){let e=Date.now(),n=t.current.currentTime;n-u.segmentStartSec>.2&&E({...u,endTime:e,segmentEndSec:n})}c(null),v.current=!1,null!=d.current&&(clearInterval(d.current),d.current=null)}return()=>{null!=d.current&&(clearInterval(d.current),d.current=null)}},[n,l,i,u,C,E,t,p]),{forceSendCurrentSegment:(0,r.useCallback)(()=>{if(null!=u&&null!=t.current){let e=Date.now(),n=t.current.currentTime;n-u.segmentStartSec>.2&&E({...u,endTime:e,segmentEndSec:n}),c(null),v.current=!1}},[u,E,t]),isInitialized:v.current}}},889711:function(e,t,n){function r(e){return new ResizeObserver(e)}function l(e,t){e.observe(t)}function i(e,t){e.unobserve(t)}n.d(t,{UC:()=>i,YP:()=>l,pP:()=>r})}}]);
//# sourceMappingURL=21e15f1f2a73dfef.js.map