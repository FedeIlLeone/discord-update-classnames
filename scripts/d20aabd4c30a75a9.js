"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["58120"],{691435:function(e){e.exports="/assets/fcbc6283c85dd170.svg"},660216:function(e,t,n){n.d(t,{Z:()=>s});var i=n(570140);let s={addKeybind(e){i.Z.dispatch({type:"KEYBINDS_ADD_KEYBIND",keybind:e})},setKeybind(e){i.Z.dispatch({type:"KEYBINDS_SET_KEYBIND",keybind:e})},deleteKeybind(e){i.Z.dispatch({type:"KEYBINDS_DELETE_KEYBIND",id:e})},enableAll(e){i.Z.dispatch({type:"KEYBINDS_ENABLE_ALL_KEYBINDS",enable:e})}}},825209:function(e,t,n){n.d(t,{Z:()=>_}),n(47120),n(653041);var i=n(200651),s=n(192379),r=n(921738),o=n.n(r),l=n(213005),a=n(455279),d=n(358085),c=n(998502),h=n(981631);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let p=d.isPlatformEmbedded&&null!=c.ZP.getDiscordUtils().inputCaptureRegisterElement;class b extends s.PureComponent{componentDidMount(){this._mounted=!0}componentWillUnmount(){this._mounted=!1,this.cleanUp()}componentDidUpdate(e){this.props.defaultValue!==e.defaultValue&&this.setState({codes:this.props.defaultValue})}cleanUp(){d.isPlatformEmbedded&&null!=this.gs&&(this.gs.destroy(),this.gs=null)}handleComboChange(e){let{mode:t}=this.state,{onChange:n}=this.props;t===a.c.RECORDING&&(null!=n&&n(e),this.setState({codes:e}))}render(){let e,t;let{codes:n,mode:s}=this.state,{disabled:r}=this.props;return p?(t=c.ZP.getDiscordUtils().inputCaptureRegisterElement,e=this.handleNativeChange):d.isPlatformEmbedded||(e=this.handleComboKeys),(0,i.jsx)(a.Z,{disabled:r,value:n,mode:s,onClick:this.toggleRecordMode,onChange:e,registerNativeRecorder:t,disableOnClickWhileRecording:p})}constructor(e){super(e),u(this,"_input",void 0),u(this,"gs",void 0),u(this,"_mounted",!1),u(this,"recordStart",()=>{d.isPlatformEmbedded&&!p&&(this.gs=new l.Z,this.gs.on("change",this.handleGSChange)),this.setState({mode:a.c.RECORDING})}),u(this,"recordEnd",()=>{this.cleanUp(),this.setState({mode:a.c.DEFAULT})}),u(this,"toggleRecordMode",()=>{this.state.mode===a.c.DEFAULT?this.recordStart():this.recordEnd()}),u(this,"handleComboKeys",(e,t,n)=>{if(n.preventDefault(),"keydown"===n.type){let e=t.map(e=>[h.MoX.KEYBOARD_KEY,o()(e),h.CgE.BROWSER]),{keyCode:i}=n;null==e.find(e=>{let[,t]=e;return i===t})&&e.push([h.MoX.KEYBOARD_KEY,i,h.CgE.BROWSER]),this.handleComboChange(e)}}),u(this,"handleGSChange",e=>{if(!1===this._mounted)return;let t=[...e.combo];this.handleComboChange(t)}),u(this,"handleNativeChange",e=>{e.length>0&&this.handleComboChange(e),this.recordEnd()});let{defaultValue:t}=e;this.state={codes:t,mode:a.c.DEFAULT}}}let _=b},213005:function(e,t,n){n.d(t,{Z:()=>c}),n(47120),n(653041);var i=n(836560),s=n(358085),r=n(998502),o=n(13140),l=n(981631);let a=[],d=(e,t,n)=>{let i=(0,s.isWindows)()?0:1;(e!==l.MoX.MOUSE_BUTTON||n!==i)&&a.forEach(i=>i._handleEvent(e,t,n))};class c extends i.EventEmitter{destroy(){this.removeAllListeners(),0===(a=a.filter(e=>e!==this)).length&&r.ZP.setOnInputEventCallback(null)}toString(){return(0,o.BB)(this.combo)}_handleEvent(e,t,n){0===t?this.combo=this.combo.filter(t=>{let[i,s]=t;return!(i===e&&s===n)}):(this.combo.push([e,n,(0,o.dU)()]),this.emit("change",this))}constructor(){var e,t;super(),t=[],(e="combo")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,a.push(this),1===a.length&&r.ZP.setOnInputEventCallback(d)}}},455279:function(e,t,n){n.d(t,{Z:()=>R,c:()=>f}),n(47120);var i,s=n(200651),r=n(192379),o=n(120356),l=n.n(o),a=n(879443),d=n.n(a),c=n(392711),h=n.n(c),u=n(481060),p=n(600164),b=n(13140),_=n(388032),m=n(509238);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=((i={}).DEFAULT="DEFAULT",i.RECORDING="RECORDING",i);let E={DEFAULT:m.__invalid_default,RECORDING:m.recording};class D extends r.PureComponent{componentWillUnmount(){null!=this._unregisterNativeRecorder&&this._unregisterNativeRecorder()}componentDidUpdate(e){let{mode:t}=this.props,{mode:n}=e;if(n===t)return;let{_inputRef:i}=this;if(null==i.current)return;let{activeElement:s}=document;"DEFAULT"===t&&i.current===s&&i.current.blur(),"RECORDING"===t&&i.current!==s&&i.current.focus()}render(){let e;let{mode:t,value:n,disabled:i}=this.props,r=(0,b.BB)(n,!0);e="RECORDING"===t?_.intl.string(_.t.bmOri4):0===n.length?_.intl.string(_.t.co3wt7):_.intl.string(_.t.idFMvL);let o="DEFAULT"===t&&n.length>0;return(0,s.jsx)(u.tEY,{focusTarget:this._inputRef,ringTarget:this._containerRef,children:(0,s.jsx)("div",{onClick:this.handleClick,onMouseDown:this.handleMouseDown,ref:this._containerRef,className:l()(m.recorderContainer,E[t],{[m.hasValue]:o,[m.containerDisabled]:i}),children:(0,s.jsxs)(p.Z,{className:m.recorderLayout,children:[(0,s.jsx)(p.Z.Child,{className:m.keybindInput,children:(0,s.jsx)("input",{id:this._inputId,placeholder:_.intl.string(_.t.nWRdnp),type:"text",ref:this.setInputRef,readOnly:!0,value:r,disabled:"RECORDING"!==this.props.mode||i})}),(0,s.jsx)(p.Z,{shrink:1,grow:0,style:{margin:0},children:(0,s.jsxs)(u.zxk,{className:m.addKeybindButton,disabled:i,onClick:e=>{e.stopPropagation(),e.preventDefault(),this.handleClick(e)},size:u.zxk.Sizes.MIN,color:u.Ttl.PRIMARY,children:[(0,s.jsx)("span",{className:m.text,children:e}),(0,s.jsx)("span",{className:m.editIcon})]})})]})})})}constructor(...e){super(...e),g(this,"_inputId",h().uniqueId("key-recorder-")),g(this,"_unregisterNativeRecorder",null),g(this,"_mousedownMode",null),g(this,"_inputRef",r.createRef()),g(this,"_containerRef",r.createRef()),g(this,"setInputRef",e=>{var t;let{registerNativeRecorder:n,onChange:i}=this.props;if(this._inputRef.current=e,null===(t=this._unregisterNativeRecorder)||void 0===t||t.call(this),null!=e){if(null!=n&&null!=i)try{this._unregisterNativeRecorder=n(e.id,i)}catch(e){this._unregisterNativeRecorder=null}else null!=i&&(new(d())(e).handleKey=i)}}),g(this,"handleClick",e=>{e.stopPropagation(),e.preventDefault();let{onClick:t,disableOnClickWhileRecording:n}=this.props;(!n||"RECORDING"!==this._mousedownMode)&&t()}),g(this,"handleMouseDown",()=>{this._mousedownMode=this.props.mode})}}let R=D},355453:function(e,t,n){n.d(t,{default:()=>m}),n(47120);var i=n(200651),s=n(192379),r=n(442837),o=n(481060),l=n(660216),a=n(825209),d=n(714338),c=n(556296),h=n(13140),u=n(710111),p=n(981631),b=n(388032),_=n(590367);function m(e){var t;let{transitionState:n,onClose:m}=e,g=(0,r.e7)([c.ZP],()=>c.ZP.getKeybindForAction(p.kg4.SOUNDBOARD_HOLD)),[f,E]=s.useState(null!==(t=null==g?void 0:g.shortcut)&&void 0!==t?t:[]);return s.useEffect(()=>(d.Z.disable(),()=>{d.Z.enable()}),[]),(0,i.jsxs)(o.Y0X,{transitionState:n,children:[(0,i.jsxs)(o.xBx,{separator:!1,children:[(0,i.jsx)(o.X6q,{className:_.header,variant:"heading-xl/semibold",children:b.intl.string(b.t["0Osu39"])}),(0,i.jsx)(o.olH,{className:_.closeButton,onClick:m})]}),(0,i.jsxs)(o.hzk,{className:_.content,children:[(0,i.jsx)(o.Wn,{className:_.warning,messageType:o.QYI.WARNING,children:b.intl.string(b.t["O2v/eH"])}),(0,i.jsx)(o.X6q,{className:_.formHeader,variant:"eyebrow",color:"header-secondary",children:b.intl.string(b.t.UUpADw)}),(0,i.jsx)(o.Text,{className:_.action,variant:"text-md/normal",children:b.intl.string(b.t["1xFbPz"])}),(0,i.jsx)(o.Text,{className:_.actionDescription,variant:"text-sm/normal",children:b.intl.string(b.t.laNlTk)}),(0,i.jsx)(o.X6q,{className:_.formHeader,variant:"eyebrow",color:"header-secondary",children:b.intl.string(b.t["1La4tL"])}),(0,i.jsx)(a.Z,{defaultValue:f,onChange:E}),(0,i.jsx)(o.eee,{className:_.resetButton,onClick:()=>E((0,h.Kd)(u.D_)),children:b.intl.string(b.t["s7+2ra"])})]}),(0,i.jsxs)(o.mzw,{children:[(0,i.jsx)(o.zxk,{onClick:function(){if(0===f.length)return null!=g&&l.Z.deleteKeybind(g.id),m();null==g?l.Z.addKeybind({action:p.kg4.SOUNDBOARD_HOLD,shortcut:f,enabled:!0,params:{}}):l.Z.setKeybind({...g,shortcut:f}),m()},children:b.intl.string(b.t.R3BPHx)}),(0,i.jsx)(o.zxk,{onClick:m,look:o.zxk.Looks.LINK,color:o.zxk.Colors.PRIMARY,children:b.intl.string(b.t["ETE/oK"])})]})]})}},509238:function(e,t,n){var i={recorderContainer:"recorderContainer__2636e "+n(873322).container,hasValue:"hasValue__2636e",addKeybindButton:"addKeybindButton__2636e "+n(873322).button,containerDisabled:"containerDisabled__2636e "+n(873322).disabled,recorderLayout:"recorderLayout__2636e "+n(873322).layout,recording:"recording__2636e",shadowPulse:"shadowPulse__2636e",keybindInput:"keybindInput__2636e "+n(873322).input,editIcon:"editIcon__2636e",text:"text__2636e"};e.exports=i},590367:function(e,t,n){e.exports={closeButton:"closeButton__915cb",content:"content__915cb",header:"header__915cb",warning:"warning__915cb",action:"action__915cb",formHeader:"formHeader__915cb",actionDescription:"actionDescription__915cb",resetButton:"resetButton__915cb"}},873322:function(e,t,n){e.exports={container:"container_f89b2c",layout:"layout_f89b2c",base:"base_f89b2c",input:"input_f89b2c base_f89b2c",button:"button_f89b2c",disabled:"disabled_f89b2c"}}}]);
//# sourceMappingURL=d20aabd4c30a75a9.js.map