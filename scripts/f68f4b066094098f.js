"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["85325"],{26230:function(e){e.exports="/assets/e61405de377a632d.svg"},935227:function(e){e.exports="/assets/d011b96a0131b4ba.svg"},479495:function(e,t,s){s.d(t,{Z:()=>A}),s(757143);var n,r=s(200651),i=s(192379),l=s(120356),a=s.n(l),o=s(593473),c=s(873546),d=s(442837),u=s(570140),h=s(893776),m=s(129293),p=s(254942),x=s(388905),g=s(17894),f=s(124860),j=s(108427),C=s(314897),v=s(585483),N=s(981631),E=s(388032),k=s(483938);function S(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}d.ZP.initialize();class T extends(n=i.PureComponent){componentDidMount(){(0,j.e)("reset_password")}renderPasswordReset(){let{password:e,error:t,hasCancel:n,working:i}=this.state,l=null!=t?t:this.renderError("password");return(0,r.jsxs)(x.ZP,{onSubmit:this.handleSubmit,tag:"form",children:[(0,r.jsx)("img",{alt:"",src:null==l?s(26230):s(935227),className:k.marginBottom20}),(0,r.jsx)(x.Dx,{children:E.intl.string(E.t["1LV6Ki"])}),(0,r.jsxs)(x.gO,{className:k.marginTop20,children:[(0,r.jsx)(x.II,{label:E.intl.string(E.t["8dM4FB"]),className:k.marginBottom20,name:"password",value:e,onChange:e=>this.setState({password:e}),error:l,type:"password"}),(0,r.jsx)(x.zx,{type:"submit",submitting:i,children:E.intl.string(E.t["FRep5+"])}),n?(0,r.jsx)(x.zx,{className:k.marginTop8,onClick:this.handleGoToLogin,submitting:i,color:x.zx.Colors.PRIMARY,children:E.intl.string(E.t["ETE/oK"])}):null]})]})}renderMFA(){let e={ticket:this.props.mfaTicket,methods:this.props.mfaMethods};return(0,r.jsx)(x.ZP,{style:{padding:0},children:(0,r.jsx)(f.Cd,{mfaFinish:e=>{let{mfaType:t,data:s}=e;return this.handleTokenSubmitMFAv2(t,s)},mfaChallenge:e,onEarlyClose:()=>{u.Z.dispatch({type:"LOGIN_RESET"})},width:480})})}renderSucceeded(){return(0,r.jsxs)(x.ZP,{children:[(0,r.jsx)("img",{alt:"",src:s(26230),className:a()(k.marginBottom20,c.tq?k.marginTop20:"")}),(0,r.jsx)(x.Dx,{className:k.marginBottom40,children:E.intl.string(E.t.WAUOoK)}),(0,r.jsx)(x.zx,{onClick:this.handleOpenApp,children:E.intl.string(E.t.uJWIj4)})]})}render(){return this.state.success?this.renderSucceeded():null!=this.props.mfaTicket&&""!==this.props.mfaTicket?this.renderMFA():this.renderPasswordReset()}constructor(e){var t;super(e),S(this,"handleSubmit",async e=>{let{location:t,onLoginSuccess:s,source:n,resetToken:r}=this.props,{password:i,error:l}=this.state;if(e.preventDefault(),0===i.length){this.setState({error:E.intl.string(E.t.R98xDw)}),v.S.dispatch(N.CkL.WAVE_EMPHASIZE);return}null!=l&&this.setState({error:null});let a=r;if(null!=t&&(a=(0,m.Z)(t)),null!=a){this.setState({working:!0});try{let{result:e,sms:t,webauthn:r,ticket:l,token:o,totp:c,backup:d}=await h.Z.resetPassword(a,i,n);e===h.c.MFA?u.Z.dispatch({type:"LOGIN_MFA_STEP",ticket:l,sms:t,webauthn:r,totp:c,backup:d}):null!=s?s(o):(u.Z.dispatch({type:"LOGIN_SUCCESS",token:o}),this.handlePasswordChangeSuccess())}catch(e){this.setState({apiErrors:(0,p.p)(e)})}this.setState({working:!1})}}),S(this,"handleTokenSubmitMFAv2",async(e,t)=>{let{location:s,mfaTicket:n,onLoginSuccess:r,resetToken:i,source:l}=this.props,{password:a}=this.state;if(0===a.length)return u.Z.dispatch({type:"LOGIN_RESET"}),Promise.reject();let o=i;if(null!=s&&(o=(0,m.Z)(s)),null==o)return u.Z.dispatch({type:"LOGIN_RESET"}),Promise.reject();this.setState({working:!0});try{let s=await h.Z.resetPasswordMFAv2({method:e,code:t,ticket:n,password:a,token:o,source:l});if(null!=r){r(s);return}u.Z.dispatch({type:"LOGIN_SUCCESS",token:s}),this.handlePasswordChangeSuccess()}finally{this.setState({working:!1})}}),S(this,"handlePasswordChangeSuccess",()=>{let{replaceWith:e}=this.props;if(c.Em||c.tq){this.setState({success:!0});return}e(N.Z5c.APP)}),S(this,"handleGoToLogin",()=>{let{transitionTo:e}=this.props;h.Z.loginReset(),e(N.Z5c.LOGIN)}),S(this,"handleOpenApp",()=>{(0,g.Z)("password_reset")}),S(this,"hasError",e=>null!=this.state.apiErrors[e]||null!=this.state.error),S(this,"renderError",e=>{let{apiErrors:t}=this.state;if(this.hasError(e)){let s=t[e];return Array.isArray(s)?s[0]:s}return null});let s=(null===(t=this.props.location)||void 0===t?void 0:t.search)!=null&&""!==this.props.location.search?(0,o.parse)(this.props.location.search):null;this.state={method:"",password:"",code:"",apiErrors:{},error:null,hasCancel:null!=s&&null!=s.from_login,working:!1,success:!1}}}S(T,"defaultProps",{transitionTo:e=>s.g.location.assign(e),replaceWith:e=>s.g.location.replace(e)});let A=function(e){let t=(0,d.cj)([C.default],()=>({mfaTicket:C.default.getMFATicket(),mfaMethods:C.default.getMFAMethods()}));return(0,r.jsx)(T,{...e,...t})}},129293:function(e,t,s){s.d(t,{Z:()=>r});var n=s(593473);function r(e){let t=null!=e.hash&&""!==e.hash?(0,n.parse)(e.hash):null;if((null==t?void 0:t.token)!=null)return t.token;let s=null!=e.search&&""!==e.search?(0,n.parse)(e.search):null;return(null==s?void 0:s.token)!=null?s.token:null}},379760:function(e,t,s){s.d(t,{Z:()=>u});var n=s(200651);s(192379);var r=s(481060),i=s(600164),l=s(7557),a=s(388905),o=s(388032),c=s(428581),d=s(483938);function u(e){let{title:t,subtitle:s,error:u,onSubmit:h,onCancel:m}=e;return(0,n.jsxs)(i.Z,{direction:i.Z.Direction.VERTICAL,children:[(0,n.jsx)(a.Dx,{className:d.marginBottom8,children:t}),(0,n.jsx)(a.DK,{className:c.subTitle,children:s}),(0,n.jsxs)("div",{children:[(0,n.jsx)(l.Z,{inputClassName:c.codeInput,onSubmit:h}),null!=u?(0,n.jsx)(r.Text,{className:c.error,variant:"text-sm/normal",children:u}):null]}),null!=m&&(0,n.jsx)(r.zxk,{className:c.button,onClick:m,color:r.zxk.Colors.PRIMARY,children:o.intl.string(o.t["ETE/oK"])})]})}},760213:function(e,t,s){s.d(t,{W:()=>S,Z:()=>A}),s(773603);var n,r=s(200651),i=s(192379),l=s(120356),a=s.n(l),o=s(442837),c=s(481060),d=s(893776),u=s(239091),h=s(598077),m=s(314897),p=s(246946),x=s(594174),g=s(626135),f=s(51144),j=s(480387),C=s(726745),v=s(251423),N=s(981631),E=s(388032),k=s(416906),S=((n={})[n.LOGIN_REQUIRED=0]="LOGIN_REQUIRED",n[n.SWITCHED=1]="SWITCHED",n[n.REMOVED=2]="REMOVED",n);function T(e){let{actionText:t,user:s,onAction:n}=e,{currentUser:i,hidePrivateData:l,isAuthenticated:v}=(0,o.cj)([x.default,p.Z,m.default],()=>({currentUser:x.default.getCurrentUser(),hidePrivateData:p.Z.hidePersonalInformation,isAuthenticated:m.default.isAuthenticated()})),S=new h.Z(s),T=v&&(null==i?void 0:i.id)===S.id,A=s.tokenStatus===C.q.INVALID,Z=l||S.isPomelo()?null:"#".concat(S.discriminator),w=null;return T?w=(0,r.jsx)(c.Text,{variant:"text-sm/semibold",className:k.hintText,color:"text-positive",children:E.intl.string(E.t.seV8ys)}):A&&(w=(0,r.jsx)(c.Text,{variant:"text-sm/semibold",className:k.hintText,color:"text-danger",children:E.intl.string(E.t.tYX2pq)})),(0,r.jsx)("div",{className:k.accountCard,children:(0,r.jsxs)("div",{className:k.userDetails,children:[(0,r.jsx)(c.qEK,{src:S.getAvatarURL(void 0,40),size:c.EFr.SIZE_40,"aria-label":s.username}),(0,r.jsxs)("div",{className:a()(k.usernameSection,{[k.hasActionMaxWidth]:!T}),children:[(0,r.jsxs)("div",{className:k.username,children:[(0,r.jsx)(c.Text,{variant:"text-md/semibold",color:"header-primary",className:k.textOverflow,children:f.ZP.getUserTag(S,{mode:"username",identifiable:l?"never":"always"})}),(0,r.jsx)(c.Text,{color:"header-secondary",variant:"text-sm/normal",children:Z})]}),w]}),(0,r.jsxs)("div",{className:k.userActions,children:[!T&&(0,r.jsx)(c.zxk,{onClick:function(){if(A){n(0,s.id);return}g.default.track(N.rMx.MULTI_ACCOUNT_SWITCH_ATTEMPT,{location:{section:N.jXE.MANAGE_ACCOUNTS_MODAL}}),j.yD(s.id),n(1,s.id)},color:c.zxk.Colors.PRIMARY,children:A?E.intl.string(E.t["DSN+h4"]):t}),(0,r.jsx)(c.zxk,{className:k.userActionMenu,onClick:function(e){(0,u.vq)(e,e=>{let{onSelect:t}=e;return(0,r.jsx)(c.v2r,{"aria-label":E.intl.string(E.t["41qiDQ"]),navId:"manage-multi-account",onClose:u.Zy,onSelect:t,children:(0,r.jsx)(c.sNh,{id:"remove-account",label:E.intl.string(E.t.lSLMaW),action:()=>{(function(){d.Z.logout(null,s.id).finally(()=>{j.Zd(s.id)});let e={};null!=i?e.section=N.jXE.MANAGE_ACCOUNTS_MODAL:e.page=N.Usc.LOGIN,g.default.track(N.rMx.MULTI_ACCOUNT_ACCOUNT_REMOVE,{location:e}),n(2,s.id)})(),null!=t&&t()},color:"danger"})})})},size:c.zxk.Sizes.ICON,look:c.zxk.Looks.BLANK,color:c.zxk.Colors.WHITE,"aria-label":E.intl.string(E.t.PdRCRk),children:(0,r.jsx)(c.xhG,{size:"md",color:"currentColor",className:k.overflowMenuIcon})})]})]})})}function A(e){let{actionText:t,onAction:s}=e,{isLoading:n,multiAccountUsers:l}=(0,v.L)();return(0,r.jsx)("div",{className:k.list,children:n?(0,r.jsx)(c.$jN,{}):l.map((e,n)=>(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(T,{user:e,actionText:t,onAction:s},e.id),l.length-1!==n&&(0,r.jsx)("div",{role:"separator",className:k.separator})]},e.id))})}},742458:function(e,t,s){s.d(t,{Nz:()=>r,o9:()=>a});var n,r=((n={}).PHONE="phone",n.EMAIL="email",n);let i=/^[-() \d]+$/,l=e=>e.startsWith("+");function a(e,t){return"phone"===e?!l(t):"email"!==e&&!(t.length<3)&&i.test(t)}},766650:function(e,t,s){s.d(t,{Z:()=>h}),s(47120);var n=s(200651),r=s(192379),i=s(120356),l=s.n(i),a=s(642128),o=s(481060),c=s(144114),d=s(317175),u=s(950274);function h(e){let{show:t,alpha2:s,countryCode:i}=e,h=r.useRef(null),[m,p]=r.useState(0),[x,g]=r.useState(!1);r.useEffect(()=>{function e(){var e,s;p(t&&null!==(s=null===(e=h.current)||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==s?s:0)}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t,s,i]);let f=(0,o.q_F)({width:"".concat(m,"px"),onStart:()=>{g(!0)},onRest:()=>{g(!1)}}),j=e=>{c.Z.setCountryCode(e)};return(0,n.jsx)(o.yRy,{position:"top",renderPopout:e=>(0,n.jsx)(d.Z,{className:u.popout,onClick:t=>{j(t),e.closePopout()}}),children:e=>(0,n.jsx)("div",{className:l()(u.outerContainer,{[u.hidden]:!(t||x)}),children:(0,n.jsx)(a.animated.div,{className:u.container,style:f,children:(0,n.jsxs)("div",{className:u.innerContainer,ref:h,children:[(0,n.jsxs)(o.P3F,{...e,className:u.countryCode,children:[s," ",i]}),(0,n.jsx)("div",{className:u.separator})]})})})})}},952802:function(e,t,s){s.d(t,{Z:()=>m}),s(47120);var n=s(200651),r=s(192379),i=s(120356),l=s.n(i),a=s(481060),o=s(313201),c=s(742458),d=s(766650),u=s(488981),h=s(223952);function m(e){let{alpha2:t,countryCode:s,forceMode:i,label:m,error:p,className:x,required:g,value:f,setRef:j,placeholder:C,autoFocus:v,maxLength:N,spellCheck:E,autoComplete:k,autoCapitalize:S,autoCorrect:T,onChange:A,inputClassName:Z}=e,w=(0,o.Dt)(),[I,M]=r.useState(!1),P=(0,c.o9)(i,f);return(0,n.jsx)(a.xJW,{title:m,error:p,className:x,required:g,tag:"label",htmlFor:w,children:(0,n.jsxs)("div",{className:l()(h.input,u.input,Z,{[h.error]:null!=p,[h.focused]:I}),children:[(0,n.jsx)(d.Z,{show:P,alpha2:t,countryCode:s}),(0,n.jsx)(a.oil,{id:w,name:"email",type:i===c.Nz.EMAIL?"email":"text",value:f,inputRef:j,placeholder:C,"aria-label":m,required:g,onChange:function(e){let t=(0,c.o9)(i,e)?s:"";A(e,t)},autoComplete:k,autoCapitalize:S,autoCorrect:T,autoFocus:v,maxLength:N,spellCheck:E,className:u.inputWrapper,inputClassName:u.inputField,onFocus:()=>M(!0),onBlur:()=>M(!1)})]})})}}}]);
//# sourceMappingURL=f68f4b066094098f.js.map