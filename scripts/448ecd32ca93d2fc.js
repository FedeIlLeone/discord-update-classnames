"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["7654"],{622577:function(e){e.exports="/assets/d6338712dc2e0dee.svg"},247272:function(e,t,n){n.d(t,{C:()=>a,x:()=>s}),n(47120);var l=n(570140),i=n(93127);function s(e){let{omitUserIds:t,guild:n,channel:s,applicationId:a,inviteTargetType:r}=e;return(0,i.W)().then(()=>{l.Z.dispatch({type:"LOAD_INVITE_SUGGESTIONS",omitUserIds:null!=t?t:new Set,guild:n,channel:s,applicationId:a,inviteTargetType:r})})}function a(e){l.Z.dispatch({type:"INVITE_SUGGESTIONS_SEARCH",query:e})}n(751771)},630810:function(e,t,n){n.d(t,{Z:()=>g,m:()=>c});var l,i=n(493683),s=n(904245),a=n(710845),r=n(592125),o=n(70956),d=n(651655);let u=1*o.Z.Millis.SECOND+10;var c=((l={})[l.GROUP_DM=0]="GROUP_DM",l[l.USER=1]="USER",l[l.CHANNEL=2]="CHANNEL",l);class h extends d.Z{_sendInvite(e,t,n,l,i){s.Z.sendInvite(e.id,t,n,l).then(()=>i(null,!0),()=>i(null,!1))}drain(e,t){let{location:n,suggested:l}=e;switch(e.type){case 0:case 2:this._sendInvite(e.channel,e.inviteKey,n,l,t);break;case 1:i.Z.ensurePrivateChannel(e.user.id).then(i=>{let s=r.Z.getChannel(i);null!=s&&this._sendInvite(s,e.inviteKey,n,l,t)},()=>t(null,!1))}}constructor(){super(new a.Z("InviteQueue"),u)}}let g=new h},956829:function(e,t,n){n.d(t,{h:()=>l});let l=(0,n(818083).B)({kind:"guild",id:"2023-04_community_endless_invites",label:"Community Endless Invites",defaultConfig:{defaultInvitesToNeverExpire:!1},treatments:[{id:1,label:"Causes invites to never expire (by default) in the Guild",config:{defaultInvitesToNeverExpire:!0}}]})},259473:function(e,t,n){n.d(t,{Z:()=>o});var l=n(399606),i=n(430824),s=n(971130),a=n(956829),r=n(981631);function o(e){let{guildId:t}=e,n=a.h.useExperiment({guildId:null!=t?t:r.lds,location:"6798be_2"}),o=(0,l.e7)([i.Z],()=>i.Z.getGuild(t));return null!=t&&function(e){var t;let{guild:n,experimentConfig:l}=e,{defaultInvitesToNeverExpire:i}=null!=l?l:a.h.getCurrentConfig({guildId:null!==(t=null==n?void 0:n.id)&&void 0!==t?t:r.lds,location:"6798be_1"});if((null==n?void 0:n.hasFeature(r.oNc.HUB))===!0||(null==n?void 0:n.hasFeature(r.oNc.COMMUNITY))===!0&&i)return s.ZP.INVITE_OPTIONS_FOREVER.value}({guild:o,experimentConfig:n})}},648159:function(e,t,n){n.d(t,{Z:()=>r});var l=n(192379),i=n(252618),s=n(358085),a=n(388032);function r(){return l.useEffect(()=>{s.isPlatformEmbedded||(0,i.EM)({messages:[a.intl.string(a.t.KIX3cn),a.intl.string(a.t["UbO+8v"]),a.intl.string(a.t.MbySu7)],interval:600,count:20,onlyWhenBlurred:!0})},[]),null}},227672:function(e,t,n){n.d(t,{o:()=>l});let l=(0,n(818083).B)({kind:"guild",id:"2023-02_guest_voice_invites",label:"Guest Voice Invites",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Allow creation of guest voice invites",config:{enabled:!0}}]})},277364:function(e,t,n){n.d(t,{R:()=>r});var l=n(442837),i=n(63568),s=n(496675),a=n(981631);function r(e){let t=(0,l.e7)([s.Z],()=>s.Z.can(a.Plq.KICK_MEMBERS,e),[e]),n=!!((0,i.jS)(null==e?void 0:e.id,"AdvancedInstantInvite")&&(null==e?void 0:e.hasFeature(a.oNc.MEMBER_VERIFICATION_MANUAL_APPROVAL))&&(null==e?void 0:e.hasFeature(a.oNc.MEMBER_VERIFICATION_GATE_ENABLED)));return{canCreateApplicationBypassInvites:n&&t,isManualApprovalGuild:n}}},560114:function(e,t,n){n.d(t,{default:()=>ec}),n(789020),n(47120);var l,i=n(200651),s=n(192379),a=n(120356),r=n.n(a),o=n(512722),d=n.n(o),u=n(392711),c=n.n(u),h=n(990547),g=n(533800),v=n(442837),m=n(902704),x=n(692547),I=n(481060),p=n(447543),S=n(247272),N=n(110924),E=n(100527),T=n(906732),C=n(835473),_=n(447003),f=n(471445),j=n(259473),Z=n(600164),y=n(687516),A=n(648159),w=n(227672),M=n(427679),P=n(199902),R=n(662594),b=n(592125),k=n(984933),U=n(341165),L=n(751771),B=n(496675),V=n(158776),O=n(944486),D=n(594174),F=n(938475),G=n(626135),z=n(630388),H=n(971130),q=n(264229),W=n(366980),K=n(277364),Y=n(585385),X=n(603236),J=n(462376),Q=n(245335),$=n(981631),ee=n(176505),et=n(388032),en=n(29742),el=n(483938),ei=n(139766),es=n(622577);function ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let{INVITE_OPTIONS_FOREVER:er,INVITE_OPTIONS_7_DAYS:eo,INVITE_OPTIONS_UNLIMITED:ed}=H.ZP;class eu extends(l=s.PureComponent){componentDidMount(){let{inviteChannel:e,code:t,guild:n,source:l,canCreateInvites:i,analyticsLocation:s,streamUserId:a,targetType:r,targetUserId:o,application:d,initialCounts:u,rows:c,showFriends:h,modalState:g,setModalState:v}=this.props,{maxAge:m,maxUses:x,temporary:I,flags:S}=g;if(i){let n=null==e?void 0:e.id;if(null==n)return;v({networkError:void 0}),p.Z.createInvite(n,{validate:null!=t?t:null,max_age:m,max_uses:x,target_user_id:o,target_type:r,target_application_id:null==d?void 0:d.id,temporary:I,flags:S},l).catch(e=>v({networkError:e}))}if(h&&G.default.track($.rMx.INVITE_SUGGESTION_OPENED,{location:l,num_suggestions:c.length,num_friends:u.numFriends,num_dms:u.numDms,num_group_dms:u.numGroupDms,guild_id:n.id,application_id:null==d?void 0:d.id}),null!=a){let e=P.Z.getStreamForUser(a,n.id),t=(0,y.L2)(e,V.Z);G.default.track($.rMx.OPEN_MODAL,{type:"Send Stream Invite",source:l,location:s,other_user_id:a,application_id:null!=t?t.id:null,application_name:null!=t?t.name:null,game_id:null!=t?t.id:null})}else(null==d?void 0:d.id)!=null||G.default.track($.rMx.OPEN_MODAL,{type:"Instant Invite Modal",source:l,location:s})}componentWillUnmount(){let{inviteChannel:e,modalState:t}=this.props;(0,z.yE)(t.flags,g.$.IS_GUEST_INVITE)&&null!=e&&p.Z.clearInviteFromStore(e.id)}getInviteKey(){let{code:e,vanityURLCode:t,guildScheduledEvent:n,modalState:l}=this.props,{showVanityURL:i}=l,s=i?t:null!=e?e:t;return null==s?s:(0,q.tV)({baseCode:s,guildScheduledEventId:null==n?void 0:n.id})}renderChannelWarning(){let{inviteChannel:e}=this.props;return(0,_.Z)(e)?(0,i.jsxs)("div",{className:en.warningContainer,children:[(0,i.jsx)(I.P4T,{size:"custom",className:en.warningIcon,color:x.Z.unsafe_rawColors.YELLOW_300.css,width:12}),(0,i.jsx)(I.Text,{variant:"text-xs/normal",color:"header-secondary",children:et.intl.string(et.t.x1SQZW)})]}):null}renderHeader(){let e;let{guild:t,showFriends:n,guildScheduledEvent:l,streamUserId:s,application:a,welcomeToServer:o,inviteChannel:d,modalState:u,handleDone:c}=this.props,{query:h}=u,g=null,v=null;if(e=o?null:null!=s?et.intl.string(et.t["6VQaqa"]):null!=a?et.intl.formatToPlainString(et.t.ZdK3dX,{applicationName:a.name}):null!=l?et.intl.string(et.t.JKV4FB):(null==d?void 0:d.isGuildStageVoice())?et.intl.string(et.t.zTrsHx):et.intl.format(et.t.NvVBJS,{name:t.toString()}),null!=d){let e=(0,f.KS)(d,t);null!=e&&(v=(0,i.jsxs)("div",{className:en.headerChannelContainer,children:[(0,i.jsx)(e,{className:en.channelIcon}),(0,i.jsx)(I.Text,{color:"interactive-normal",variant:"text-md/normal",children:d.name})]}))}return g=t.hasFeature($.oNc.HUB)?(0,i.jsxs)("div",{className:en.hubHeader,children:[(0,i.jsx)(I.X6q,{className:r()(en.hubInviteTitle,en.headerCloseButtonSpacing),id:this._headerId,variant:"heading-xl/semibold",color:"header-primary",children:et.intl.string(et.t.WhR38v)}),(0,i.jsx)(I.Text,{color:"header-secondary",variant:"text-md/normal",children:et.intl.string(et.t.Ed4BMj)}),n&&(0,i.jsx)(I.E1j,{query:h,className:en.hubFriendSearch,onChange:this.handleQueryChange,placeholder:et.intl.string(et.t.CmSHY2),"aria-label":et.intl.string(et.t.CmSHY2),autoFocus:!0,onClear:this.handleClearSearch})]}):n?(0,i.jsxs)("div",{className:en.header,children:[(0,i.jsx)("div",{className:en.__invalid_headerTopRow,children:(0,i.jsx)(I.vwX,{id:this._headerId,tag:"h2",className:r()(el.marginBottom4,en.headerCloseButtonSpacing,en.headerText),children:e})}),v,(0,i.jsx)(I.E1j,{query:h,className:en.searchBar,onChange:this.handleQueryChange,placeholder:et.intl.string(et.t.CmSHY2),autoFocus:!0,onClear:this.handleClearSearch}),(0,i.jsx)("div",{className:el.marginTop8,children:this.renderChannelWarning()})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I.vwX,{id:this._headerId,tag:"h2",className:r()(el.marginReset,en.headerCloseButtonSpacing,en.headerText),children:e}),v,this.renderChannelWarning()]}),(0,i.jsxs)(I.xBx,{separator:n,children:[(0,i.jsx)("div",{className:en.closeButton,children:(0,i.jsx)(I.olH,{onClick:c})}),(0,i.jsxs)("div",{className:en.headerContainer,children:[o&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{className:en.welcomeImage,src:es,alt:""}),(0,i.jsx)(I.X6q,{variant:"heading-lg/semibold",className:en.welcomeHeading,children:et.intl.string(et.t.DpoBNz)}),(0,i.jsx)(I.Text,{variant:"text-md/normal",color:"text-secondary",className:en.welcomeSubheading,children:et.intl.string(et.t["wJ/ouL"])})]}),null!=s?(0,i.jsx)(A.Z,{}):null,g]})]})}renderFriendsBody(){let{rows:e}=this.props,t=this.getInviteKey();return 0===e.length?(0,i.jsx)(I.hzk,{className:r()(en.inviteRowEmptyState),children:(0,i.jsx)(I.OZU,{children:et.intl.string(et.t.ojoWgY)})}):null==t?(0,i.jsx)(I.hzk,{className:r()(en.inviteRowEmptyState),children:(0,i.jsx)(I.OZU,{children:et.intl.string(et.t.hzPwGB)})}):(0,i.jsx)(I.YAO,{className:en.scroller,sections:[e.length],renderSection:this.renderSection,sectionHeight:0,renderRow:this.renderRow,rowHeight:this.getRowHeight,paddingBottom:16})}renderSection(){return null}renderBody(){var e;let{guild:t,showFriends:n,streamUserId:l,application:s}=this.props;if(n)return this.renderFriendsBody();let a=(0,W.Z)(null!==(e=this.getInviteKey())&&void 0!==e?e:""),r=D.default.getCurrentUser();d()(null!=r,"InstantInviteModal: user cannot be undefined");let o=t.isOwner(r)?et.intl.string(et.t.HFbByM):et.intl.string(et.t.ueBhAw);return null!=l?o=et.intl.string(et.t.CXpS1N):null!=s&&(o=et.intl.string(et.t.ueCrHB)),(0,i.jsx)(I.hzk,{className:en.noScroll,children:(0,i.jsxs)(Z.Z,{direction:Z.Z.Direction.VERTICAL,className:el.marginBottom20,children:[(0,i.jsx)(I.Text,{className:en.subText,variant:"text-sm/normal",children:o}),(0,i.jsx)(X.I,{...this.props,setInviteFlags:this.handleSetInviteFlags,copyValue:a})]})})}renderFooter(){var e;let{noInvitesAvailable:t,showFriends:n,guildScheduledEvent:l,streamUserId:s,application:a,inviteChannel:o,modalState:d}=this.props,{maxAge:u}=d,c=null,h=(0,W.Z)(null!==(e=this.getInviteKey())&&void 0!==e?e:"");if(n){let e=et.intl.string(et.t.MLkj7O);null!=s?e=et.intl.string(et.t["1b9nen"]):null!=a?e=et.intl.string(et.t.iI1gMj):null!=l?e=et.intl.string(et.t.KaWCyM):(null==o?void 0:o.isGuildStageVoice())&&(e=et.intl.string(et.t["2frWa2"])),c=(0,i.jsxs)(Z.Z,{direction:Z.Z.Direction.VERTICAL,className:en.content,children:[(0,i.jsx)(I.vwX,{tag:"h5",className:el.marginBottom8,children:e}),(0,i.jsx)(X.I,{...this.props,setInviteFlags:this.handleSetInviteFlags,copyValue:h})]})}else t||(c=(0,i.jsxs)(Z.Z,{justify:Z.Z.Justify.BETWEEN,className:el.marginTop20,children:[(0,i.jsx)(I.XZJ,{size:18,type:I.XZJ.Types.INVERTED,value:u===er.value,onChange:this.handleToggleMaxAge,children:(0,i.jsx)(I.Text,{variant:"text-sm/normal",children:et.intl.string(et.t.QKJru7)})}),(0,i.jsx)(I.ua7,{text:et.intl.string(et.t.Yx4IiI),children:e=>{let{onMouseEnter:t,onMouseLeave:n}=e;return(0,i.jsx)(I.P3F,{onClick:this.openSettings,onMouseEnter:t,onMouseLeave:n,className:ei.cursorPointer,children:(0,i.jsx)(I.ewm,{size:"sm",color:x.Z.unsafe_rawColors.PRIMARY_400.css})})}})]}));return null!=c?(0,i.jsx)(I.mzw,{className:r()({[en.noPadding]:!n,[en.footer]:n}),children:c}):null}getModalContent(){let{modalState:e,handleDone:t}=this.props,{currentPage:n}=e;switch(n){case Q.RV.MAIN:return(0,i.jsxs)(i.Fragment,{children:[this.renderHeader(),this.renderBody(),this.renderFooter()]});case Q.RV.SETTINGS:return(0,i.jsx)(Y.D,{...this.props,onSetInviteFlags:this.handleSetInviteFlags,headerId:this._headerId,onSelectMaxAge:this.handleSelectMaxAge,onSelectMaxUses:this.handleSelectMaxUses,onToggleTemporary:this.handleToggleTemporary,handleDone:t});default:return null}}render(){let{transitionState:e,inviteChannel:t,guild:n}=this.props;return(0,i.jsx)("div",{className:this.props.showFriends?en.wrapper:void 0,children:(0,i.jsx)(I.Y0X,{impression:{impressionName:h.ImpressionNames.GUILD_INVITE,impressionProperties:{invite_channel_id:null==t?void 0:t.id,invite_guild_id:n.id}},"aria-labelledby":this._headerId,transitionState:e,className:en.modal,children:this.getModalContent()})})}constructor(...e){super(...e),ea(this,"_scroller",null),ea(this,"_headerId",c().uniqueId()),ea(this,"openSettings",()=>{let{changePage:e}=this.props;e(Q.RV.SETTINGS)}),ea(this,"handleSelectMaxAge",e=>{let{modalState:t,setModalState:n}=this.props;n({maxAge:e,savedMaxAge:t.maxAge})}),ea(this,"handleSelectMaxUses",e=>{let{setModalState:t}=this.props;t({maxUses:e})}),ea(this,"handleToggleTemporary",e=>{let{setModalState:t}=this.props;t({temporary:e})}),ea(this,"handleSetInviteFlags",e=>{let{setModalState:t}=this.props;t({flags:e})}),ea(this,"handleQueryChange",e=>{var t;let{setModalState:n}=this.props;null===(t=this._scroller)||void 0===t||t.scrollTo({to:0}),(0,S.C)(e),n({query:e})}),ea(this,"handleClearSearch",()=>{this.handleQueryChange("")}),ea(this,"handleToggleMaxAge",()=>{let{modalState:e,setModalState:t}=this.props,{maxAge:n,savedMaxAge:l}=e;t({maxAge:l,savedMaxAge:n})}),ea(this,"getRowHeight",(e,t)=>{if(e>0)return 0;switch(this.props.rows[t].type){case H.bm.CHANNEL:case H.bm.GROUP_DM:case H.bm.DM:case H.bm.FRIEND:return J.k;default:return 0}}),ea(this,"renderRow",e=>{let{section:t,row:n}=e;if(t>0)return null;let{analyticsLocation:l}=this.props,s=this.getInviteKey(),a=this.props.rows[n],r="".concat(a.type,"-").concat(a.item.id);switch(a.type){case H.bm.GROUP_DM:case H.bm.CHANNEL:return(0,i.jsx)(J.d,{row:a,channel:a.item,inviteKey:s,location:l},r);case H.bm.DM:case H.bm.FRIEND:return(0,i.jsx)(J.d,{row:a,user:a.item,inviteKey:s,location:l},r);default:return null}})}}ea(eu,"defaultProps",{analyticsLocation:$.Sbl.GUILD_CREATE_INVITE_SUGGESTION,defaultMaxAge:eo.value});let ec=s.forwardRef(function(e,t){var n,l;let{channel:a,guild:r,source:o,guildScheduledEvent:d,streamUserId:u,applicationId:c,transitionState:h,onClose:x,welcomeToServer:I,page:f,analyticsLocation:Z}=e,{analyticsLocations:y}=(0,T.ZP)(E.Z.INSTANT_INVITE_MODAL),A=(0,v.e7)([O.Z,b.Z,k.ZP],()=>{if(null!=a)return a;let e=O.Z.getChannelId(),t=null==e||(0,ee.AB)(e)?void 0:b.Z.getChannel(e);return(null==t?void 0:t.isThread())&&(t=b.Z.getChannel(t.parent_id)),null!=t?t:k.ZP.getDefaultChannel(r.id,!0,$.Plq.CREATE_INSTANT_INVITE)},[a,r.id]),P=null;null!=u?P=Q.Iq.STREAM:null!=c&&(P=Q.Iq.EMBEDDED_APPLICATION);let V=null!=a?a.getGuildId():null!=r?r.id:null,D=(0,v.e7)([U.Z],()=>{let e=null!=A?A.id:null;return null==e?null:U.Z.getInvite(e,{targetType:P,targetUserId:u,targetApplicationId:c})},[A,P,u,c]),[G,H,q,W]=(0,v.Wu)([L.Z,F.ZP],()=>[L.Z.getInviteSuggestionRows(),L.Z.getTotalSuggestionsCount()>=1,L.Z.getInitialCounts(),null!=a&&null!=A?F.ZP.getVoiceStatesForChannel(A):null],[A,a]),Y=(0,v.e7)([R.ZP],()=>{let e=null!=A?A.id:null;return null!=V?R.ZP.getProps(V,e):void 0},[A,V],m.Z),X=(0,v.e7)([B.Z],()=>null!=A&&B.Z.can($.Plq.CREATE_INSTANT_INVITE,A),[A]),J=null===D||!X,[et]=s.useState(()=>{let e=new Set;return null!=u&&null!=W?W.forEach(t=>{let{user:n}=t;e.add(n.id)}):null!=V&&null!=Y&&P!==Q.Iq.EMBEDDED_APPLICATION&&Y.rows.forEach(t=>{t.type===R.so.MEMBER&&e.add(t.userId)}),e}),en=null==a?void 0:a.id,el=(0,v.e7)([M.Z],()=>M.Z.getStageInstanceByChannel(en),[en]);s.useEffect(()=>{(0,S.x)({omitUserIds:et,guild:r,channel:a,applicationId:c,inviteTargetType:P}).catch($.VqG)},[et,a,r,c,P]);let[ei]=(0,C.Z)(null!=c?[c]:[]),es=(0,j.Z)({guildId:V}),ea=null!=D?D.code:void 0,ec=null==D?void 0:D.maxAge,eh=null==D?void 0:D.maxUses,eg=null==D?void 0:D.temporary,ev=r.vanityURLCode,em=null!=ev&&ev.length>0,ex=!X&&!(null==A?void 0:A.isGuildVocal())&&em,eI=(null==A?void 0:A.type)===$.d4z.GUILD_VOICE,ep=null!==(n=null==D?void 0:D.flags)&&void 0!==n?n:0,eS=(0,_.Z)(A);X||(null==el?void 0:el.invite_code)==null||(ea=el.invite_code);let[eN,eE]=s.useState({query:"",maxAge:null!==(l=null!=ec?ec:es)&&void 0!==l?l:eo.value,savedMaxAge:ec===er.value?null!=es?es:eo.value:er.value,maxUses:null!=eh&&0!==eh?eh:ed.value,temporary:null!=eg&&eg,networkError:void 0,showVanityURL:ex,currentPage:null!=f?f:Q.RV.MAIN,lastPage:void 0,flags:ep}),eT=s.useCallback(e=>{eE(t=>({...t,...e}))},[]),eC=s.useCallback(e=>{eT({currentPage:e,lastPage:eN.currentPage})},[eN.currentPage,eT]),e_=eI&&!ex&&!J&&!eS,{enabled:ef}=w.o.useExperiment({guildId:null==r?void 0:r.id,location:"acc417_3"},{autoTrackExposure:e_}),{maxAge:ej,maxUses:eZ,temporary:ey,savedMaxAge:eA,flags:ew}=eN,eM=s.useCallback(()=>{let{currentPage:e,lastPage:t}=eN;e===Q.RV.SETTINGS&&null!=t?eC(t):x()},[eC,eN,x]),eP=s.useCallback(()=>{let e=null==A?void 0:A.id;0===eZ&&0===ej&&!ey&&ex?eT({networkError:void 0,showVanityURL:!0}):X&&null!=e&&(eT({networkError:void 0,showVanityURL:!1}),p.Z.createInvite(e,{max_age:ej,max_uses:eZ,target_type:P,target_user_id:u,target_application_id:null==ei?void 0:ei.id,temporary:ey,flags:ew},o).catch(e=>eT({networkError:e,showVanityURL:ex}))),ej!==er.value&&eA!==er.value&&eT({savedMaxAge:er.value})},[ex,X,A,o,null==ei?void 0:ei.id,P,u,ej,eZ,ey,eT,eA,ew]),eR=(0,N.Z)(A),eb=(0,N.Z)((0,z.yE)(ew,g.$.IS_APPLICATION_BYPASS)),ek=null!=eR&&eR!==A,eU=null!=eb&&eb!==(0,z.yE)(ew,g.$.IS_APPLICATION_BYPASS);s.useEffect(()=>{!ex&&(ek||eU)&&eP()},[eP,ek,eU,ex]);let{canCreateApplicationBypassInvites:eL,isManualApprovalGuild:eB}=(0,K.R)(r);return(0,i.jsx)(T.Gt,{value:y,children:(0,i.jsx)(eu,{ref:t,canCreateInvites:X,noInvitesAvailable:J,inviteChannel:A,guild:r,guildScheduledEvent:d,streamUserId:u,vanityURLCode:ev,targetType:P,targetUserId:u,application:ei,rows:G,showFriends:H,initialCounts:q,code:ea,source:o,welcomeToServer:I,analyticsLocations:y,analyticsLocation:Z,transitionState:h,onClose:x,canShowVanityURL:ex,isGuestInviteCreationToggleEnabled:ef&&e_,shouldHideTemporaryInviteToggle:ef&&e_||eB,modalState:eN,setModalState:eT,changePage:eC,onGenerateNewLink:eP,handleDone:eM,isApplicationBypassToggleEnabled:eL&&!J})})})},948851:function(e,t,n){n.d(t,{Z:()=>h});var l=n(200651);n(192379);var i=n(533800),s=n(481060),a=n(630388),r=n(971130),o=n(388032),d=n(438527);let u=r.ZP.getMaxAgeOptions,c=r.ZP.getMaxUsesOptions;function h(e){var t;let{shouldHideTemporaryInviteToggle:n,maxAge:r,maxUses:h,temporary:g,onGenerateNewLink:v,onToggleTemporary:m,onSelectMaxAge:x,onSelectMaxUses:I,isGuestInviteCreationToggleEnabled:p,inviteFlags:S,onSetInviteFlags:N}=e,E=u.find(e=>e.value===r),T=c.find(e=>e.value===h);return(0,l.jsx)("div",{className:d.settingsContent,children:(0,l.jsxs)("form",{onSubmit:v,className:d.settingsForm,children:[(0,l.jsx)(s.xJW,{title:o.intl.string(o.t["60qw29"]),children:(0,l.jsx)(s.q4e,{value:null!==(t=null==E?void 0:E.value)&&void 0!==t?t:u[0].value,options:u,onChange:x,maxVisibleItems:8})}),(0,l.jsx)(s.xJW,{title:o.intl.string(o.t.jDqWHR),children:(0,l.jsx)(s.q4e,{value:null==T?void 0:T.value,options:c,onChange:I})}),!n&&(0,l.jsx)(s.xJW,{children:(0,l.jsx)(s.j7V,{className:d.switch,value:g,onChange:e=>m(e),note:o.intl.string(o.t.UN5IRU),hideBorder:!0,children:(0,l.jsx)(s.Text,{variant:"text-sm/normal",children:o.intl.string(o.t["wE+9dn"])})})}),p&&(0,l.jsx)(s.xJW,{children:(0,l.jsx)(s.j7V,{className:d.switch,value:(0,a.yE)(S,i.$.IS_GUEST_INVITE),onChange:e=>N((0,a.mB)(S,i.$.IS_GUEST_INVITE,e)),note:o.intl.string(o.t["/FeTKy"]),hideBorder:!0,children:(0,l.jsx)(s.Text,{variant:"text-sm/normal",children:o.intl.string(o.t.siexRU)})})})]})})}},868728:function(e,t,n){n.d(t,{Z:()=>o});var l=n(200651),i=n(192379),s=n(780384),a=n(481060),r=n(388032);function o(e){let{onConfirm:t,onDismiss:n,theme:o}=e;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a.zxk,{onClick:t,children:r.intl.string(r.t.pz1lRE)}),(0,l.jsx)(a.zxk,{look:a.zxk.Looks.LINK,color:(0,s.ap)(o)?a.zxk.Colors.PRIMARY:a.zxk.Colors.WHITE,onClick:n,children:r.intl.string(r.t["ETE/oK"])})]})}},585385:function(e,t,n){n.d(t,{D:()=>g}),n(789020);var l=n(200651);n(192379);var i=n(120356),s=n.n(i),a=n(481060),r=n(410030),o=n(948851),d=n(868728),u=n(388032),c=n(29742),h=n(483938);let g=e=>{let{handleDone:t,headerId:n,modalState:i,shouldHideTemporaryInviteToggle:g,onGenerateNewLink:v,onToggleTemporary:m,onSelectMaxAge:x,onSelectMaxUses:I,isGuestInviteCreationToggleEnabled:p,onSetInviteFlags:S}=e,N=(0,r.ZP)(),{maxAge:E,maxUses:T,temporary:C,flags:_}=i;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a.xBx,{children:[(0,l.jsx)("div",{className:c.closeButton,children:(0,l.jsx)(a.olH,{onClick:t})}),(0,l.jsx)("div",{className:c.headerContainer,children:(0,l.jsx)(a.vwX,{id:n,tag:"h2",className:s()(h.marginReset,c.headerCloseButtonSpacing,c.headerText),children:u.intl.string(u.t.Atdlys)})})]}),(0,l.jsx)(o.Z,{shouldHideTemporaryInviteToggle:g,maxAge:E,maxUses:T,temporary:C,onToggleTemporary:m,onSelectMaxAge:x,onSelectMaxUses:I,onGenerateNewLink:v,isGuestInviteCreationToggleEnabled:p,onSetInviteFlags:S,inviteFlags:_}),(0,l.jsx)(a.mzw,{className:c.settingsFooter,children:(0,l.jsx)(d.Z,{theme:N,onConfirm:()=>{v(),t()},onDismiss:t})})]})}},603236:function(e,t,n){n.d(t,{I:()=>C,S:()=>T}),n(789020);var l=n(200651),i=n(192379),s=n(120356),a=n.n(s),r=n(533800),o=n(442837),d=n(481060),u=n(484614),c=n(914010),h=n(246946),g=n(626135),v=n(630388),m=n(971130),x=n(530436),I=n(245335),p=n(981631),S=n(388032),N=n(29742),E=n(483938);let T=o.ZP.connectStores([h.Z],()=>({hideValue:h.Z.hideInstantInvites}))(e=>{let{value:t,autoFocus:n,hideValue:i,onCopy:s,disabled:a}=e;return(0,l.jsx)(u.Z,{value:i?S.intl.string(S.t["6HzNgY"]):t,buttonColor:d.zxk.Colors.BRAND,onCopy:s,autoFocus:n,disabled:a})}),C=e=>{let{guild:t,noInvitesAvailable:n,showFriends:s,onClose:o,modalState:u,isApplicationBypassToggleEnabled:h,setInviteFlags:C,copyValue:_,changePage:f,inviteChannel:j,source:Z,code:y,guildScheduledEvent:A,disabled:w,application:M}=e,{maxAge:P,maxUses:R,networkError:b,showVanityURL:k,flags:U}=u,L=i.useCallback(()=>{g.default.track(p.rMx.COPY_INSTANT_INVITE,{server:c.Z.getGuildId(),channel:null==j?void 0:j.id,channel_type:null==j?void 0:j.type,location:Z,code:y,guild_scheduled_event_id:null==A?void 0:A.id,application_id:null==M?void 0:M.id})},[null==M?void 0:M.id,j,Z,y,A]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(T,{value:_,autoFocus:s,onCopy:L,disabled:w}),h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:N.divider}),(0,l.jsx)(d.j7V,{className:N.toggle,value:(0,v.yE)(U,r.$.IS_APPLICATION_BYPASS),onChange:e=>C((0,v.mB)(U,r.$.IS_APPLICATION_BYPASS,e)),disabled:w,hideBorder:!0,children:(0,l.jsxs)("div",{className:N.formText,children:[(0,l.jsx)(d.Text,{variant:"text-md/semibold",children:S.intl.string(S.t["1i1bUl"])}),(0,l.jsx)(d.ua7,{text:S.intl.string(S.t["jvd/LC"]),children:e=>(0,l.jsx)(d.d3s,{size:"xs",color:"currentColor",...e})})]})})]}),n||k?null:(0,l.jsxs)(d.Text,{variant:"text-xs/normal",className:a()(E.marginTop8,N.footerText),children:[(0,m.Vg)(P,R)," ",s?(0,l.jsx)(d.eee,{onClick:()=>f(I.RV.SETTINGS),children:S.intl.string(S.t.VNe8Pz)}):null]}),!n&&s&&k?(0,l.jsxs)(d.Text,{variant:"text-xs/normal",className:a()(E.marginTop8,N.footerText),children:[S.intl.string(S.t["0M2U9/"])," "]}):null,null!=b?(0,l.jsx)(x.W,{guild:t,error:b,onClose:o}):null]})}},530436:function(e,t,n){n.d(t,{W:()=>c});var l=n(200651),i=n(192379),s=n(481060),a=n(434404),r=n(496675),o=n(981631),d=n(388032),u=n(29742);function c(e){let{guild:t,error:n,onClose:c}=e,h=t.id,g=i.useCallback(()=>{c(),a.Z.open(h,o.pNK.INSTANT_INVITES)},[h,c]),v=i.useCallback(e=>(0,l.jsx)(s.P3F,{className:u.errorLink,onClick:g,children:(0,l.jsx)(s.Text,{variant:"text-xs/normal",color:"text-link",tag:"span",children:e})}),[g]),m=i.useCallback(e=>(0,l.jsx)(s.eee,{href:o.EYA.INVITES_HELP,target:"_blank",children:(0,l.jsx)(s.Text,{variant:"text-xs/normal",color:"text-link",tag:"span",children:e})}),[]),x=n.code!==o.evJ.TOO_MANY_INVITES?n.getAnyErrorMessage():r.Z.can(o.Plq.MANAGE_GUILD,t)?d.intl.format(d.t["H/RUY2"],{inviteListHook:v,inviteHelpHook:m}):d.intl.string(d.t["/FxH6O"]);return(0,l.jsx)(s.Text,{className:u.errorMessage,variant:"text-xs/normal",color:"text-danger",children:x})}},462376:function(e,t,n){n.d(t,{d:()=>T,k:()=>E}),n(47120);var l=n(200651),i=n(192379),s=n(780384),a=n(481060),r=n(630810),o=n(43267),d=n(933557),u=n(210887),c=n(430824),h=n(751771),g=n(699516),v=n(594174),m=n(768581),x=n(624138),I=n(51144),p=n(388032),S=n(29742);function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let E=44;class T extends i.Component{shouldComponentUpdate(e,t){return this.state.sending!==t.sending||this.state.invited!==t.invited||this.state.hovered!==t.hovered||this.props.user!==e.user||this.props.channel!==e.channel}renderUserOrChannel(){let e,t,n;let{user:i,channel:s}=this.props;if(null!=i)t=i.getAvatarURL(null==s?void 0:s.guild_id,32),n=I.ZP.getName(i);else if(null!=s&&(t=(0,o.x)(s),n=(0,d.F6)(s,v.default,g.Z),null==t&&null!=s.guild_id)){let n=c.Z.getGuild(s.guild_id);null!=n&&(null!=n.icon?t=m.ZP.getGuildIconURL({id:s.guild_id,icon:n.icon,size:32}):e=(0,x.Zg)(n.name))}return null==t||null==n?null!=e?(0,l.jsx)(a.Text,{variant:"text-md/medium",className:S.acronym,"aria-hidden":!0,children:e}):null:(0,l.jsx)(a.qEK,{src:t,"aria-label":n,size:a.EFr.SIZE_32,className:S.inviteRowAvatar})}render(){let e;let{user:t,channel:n}=this.props,{sending:i,invited:r,hovered:o}=this.state;return e=r?(0,l.jsx)(a.zxk,{look:a.zxk.Looks.LINK,size:a.zxk.Sizes.SMALL,disabled:!0,color:(0,s.wj)(u.Z.theme)?a.zxk.Colors.WHITE:a.zxk.Colors.BRAND,children:p.intl.string(p.t["dVT14+"])}):(0,l.jsx)(a.zxk,{color:a.zxk.Colors.GREEN,look:o?a.zxk.Looks.FILLED:a.zxk.Looks.OUTLINED,className:S.inviteRowButton,size:a.zxk.Sizes.SMALL,submitting:i,onClick:this.handleClickInvite,children:p.intl.string(p.t.jYnGPD)}),(0,l.jsxs)("div",{className:S.inviteRow,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[(0,l.jsxs)("div",{className:S.inviteRowInfo,children:[this.renderUserOrChannel(),(0,l.jsxs)("div",{className:S.inviteRowName,children:[I.ZP.getName(t),null!=n?(0,d.F6)(n,v.default,g.Z,!0):null]})]}),e]})}constructor(...e){super(...e),N(this,"state",{sending:!1,invited:!1,hovered:!1}),N(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),N(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),N(this,"getSuggestedProps",()=>{var e;let{row:t}=this.props;return null!==(e=null!=t?h.Z.getSelectedInviteMetadata(t):null)&&void 0!==e?e:null}),N(this,"handleClickInvite",()=>{let{user:e,channel:t,inviteKey:n,location:l}=this.props;null!=n&&(null!=t?(this.setState({sending:!0}),r.Z.enqueue({type:r.m.GROUP_DM,channel:t,inviteKey:n,location:l,suggested:this.getSuggestedProps()},e=>{this.setState({sending:!1,invited:e})})):null!=e&&(this.setState({sending:!0}),r.Z.enqueue({type:r.m.USER,user:e,inviteKey:n,location:l,suggested:this.getSuggestedProps()},e=>{this.setState({sending:!1,invited:e})})))})}}},751771:function(e,t,n){let l,i,s,a,r,o,d;n.d(t,{Z:()=>w}),n(47120);var u,c,h,g=n(442837),v=n(570140),m=n(823385),x=n(814443),I=n(823379),p=n(971130),S=n(592125),N=n(496675),E=n(699516),T=n(981631),C=n(245335);let _=new Set,f=[],j=new Map;function Z(e){let t=new Set,n=null==a||d===C.Iq.EMBEDDED_APPLICATION?void 0:a.id,l=(0,p.rh)(_,n);for(let e of(null==l||E.Z.isBlocked(l.id)||t.add(l.id),x.Z.getUserAffinitiesUserIds()))t.add(e);let i=new Set;return d===C.Iq.EMBEDDED_APPLICATION&&m.Z.getChannelHistory().map(e=>S.Z.getChannel(e)).filter(I.lm).filter(e=>e.type===T.d4z.GUILD_TEXT).filter(e=>N.Z.can(T.Plq.SEND_MESSAGES,e)).slice(0,3).forEach(e=>i.add(e.id)),(0,p.an)({query:e,omitUserIds:_,suggestedUserIds:t,maxRowsWithoutQuery:100,omitGuildId:n,suggestedChannelIds:i,inviteTargetType:d})}function y(e){f=e,j=new Map,e.forEach((e,t)=>{j.set(e,{index:t})})}class A extends(u=g.ZP.Store){initialize(){this.waitFor(E.Z,x.Z)}getInviteSuggestionRows(){return f}getTotalSuggestionsCount(){return i}getInitialCounts(){return l}getSelectedInviteMetadata(e){let t=j.get(e),n=x.Z.getUserAffinitiesUserIds();return null!=t?{rowNum:t.index,isAffinitySuggestion:e.isSuggested,numTotal:f.length,numAffinityConnections:n.size,isFiltered:s}:null}}h="InviteSuggestionsStore",(c="displayName")in A?Object.defineProperty(A,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):A[c]=h;let w=new A(v.Z,{LOAD_INVITE_SUGGESTIONS:function(e){let{omitUserIds:t,guild:n,channel:u,applicationId:c,inviteTargetType:h}=e;a=null!=u?n:null,r=u,o=c,d=h,_=new Set([...t,...E.Z.getBlockedOrIgnoredIDs(),...(0,p.Sz)({channel:r,applicationId:o,inviteTargetType:h})]),s=!1;let{rows:g,counts:v}=Z("");y(g),l=v,i=f.length},INVITE_SUGGESTIONS_SEARCH:function(e){let{query:t}=e;s=""!==t;let{rows:n}=Z(t);y(n)}})}}]);
//# sourceMappingURL=448ecd32ca93d2fc.js.map