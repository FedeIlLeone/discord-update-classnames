"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["37709"],{806223:function(e,t,n){n.d(t,{Z:()=>l});let l=(0,n(818083).B)({kind:"user",id:"2023-01_guild_onboarding_includes_rules",label:"Guild Onboarding includes rules experience",defaultConfig:{includeRules:!1},treatments:[{id:1,label:"Last page of onboarding is rules",config:{includeRules:!0}}]})},968644:function(e,t,n){n.d(t,{Z:()=>m,p:()=>x});var l=n(442837),r=n(933557),i=n(592125),o=n(430824),s=n(699516),a=n(594174),d=n(823379),c=n(388032);function u(e,t,n){return 0===e.length?"":c.intl.format(n?c.t.cJZxWV:c.t.Kj5GIS,{count:e.length,extraCount:Math.max(e.length-2,0),role1:e[0],role2:e[1],itemHook:t})}function m(e){let{guild:t,prompt:n,selectedRoleIds:m,selectedChannelIds:x,itemHook:h}=e,p=(0,l.e7)([o.Z],()=>null!=t?o.Z.getRoles(t.id):void 0),f=(0,l.Wu)([i.Z,a.default,s.Z],()=>Array.from(x).map(e=>i.Z.getChannel(e)).filter(d.lm).map(e=>(0,r.F6)(e,a.default,s.Z,!0))),g=Array.from(m).map(e=>{var t;return null===(t=(null!=p?p:{})[e])||void 0===t?void 0:t.name}).filter(d.lm).map(e=>"@".concat(e)),v=(null==n?void 0:n.singleSelect)?"":c.intl.string(c.t.JshhEh),_="";if(0===f.length&&g.length>0)v=u(g,h);else if(f.length>0)v=0===f.length?"":c.intl.format(c.t.Rj841d,{count:f.length,extraCount:Math.max(f.length-2,0),channel1:f[0],channel2:f[1],itemHook:h}),g.length>0&&(_=u(g,h,!0));return{helpText:v,helpTextAdditional:_}}function x(e){let{guild:t,prompt:n,selectedRoleIds:u,selectedChannelIds:m,itemHook:x}=e,h=(0,l.e7)([o.Z],()=>null!=t?o.Z.getRoles(t.id):void 0),p=(0,l.Wu)([i.Z,a.default,s.Z],()=>Array.from(m).map(e=>i.Z.getChannel(e)).filter(d.lm).map(e=>(0,r.F6)(e,a.default,s.Z,!0))),f=Array.from(u).map(e=>{var t;return null===(t=(null!=h?h:{})[e])||void 0===t?void 0:t.name}).filter(d.lm).map(e=>"@".concat(e)),g=(null==n?void 0:n.singleSelect)?"":c.intl.string(c.t.JshhEh);return 0===p.length&&f.length>0?g=c.intl.format(c.t.vdtNYW,{count:f.length,extraCount:Math.max(f.length-2,0),role1:f[0],role2:f[1],itemHook:x}):p.length>0&&0===f.length?g=c.intl.format(c.t.ZKywGR,{count:p.length,extraCount:Math.max(p.length-2,0),channel1:p[0],channel2:p[1],itemHook:x}):p.length>0&&f.length>0&&(g=c.intl.format(c.t.WewRHB,{channelCount:p.length,extraChannelCount:Math.max(p.length-2,0),channel1:p[0],channel2:p[1],itemHook:x,roleCount:f.length,extraRoleCount:Math.max(f.length-2,0),role1:f[0],role2:f[1]})),{helpText:g,helpTextAdditional:""}}},599263:function(e,t,n){n.r(t),n.d(t,{default:()=>w}),n(47120);var l=n(200651),r=n(192379),i=n(120356),o=n.n(i),s=n(642128),a=n(442837),d=n(481060),c=n(749210),u=n(830064),m=n(393238),x=n(877604),h=n(998730),p=n(480608),f=n(160404),g=n(703656),v=n(430824),_=n(768581),j=n(302221),C=n(549817),N=n(45966),b=n(819553),k=n(548473),Z=n(15320),I=n(973051),E=n(981631),T=n(388032),D=n(130748);function w(e){let{guildId:t}=e,{ref:n,width:i,height:w}=(0,m.Z)(),R=(0,a.Wu)([N.Z],()=>N.Z.getOnboardingPromptsForOnboarding(t)),P=(0,a.e7)([N.Z],()=>N.Z.getEnabled(t)),M=r.useCallback((e,n,l)=>{C.Z.selectOption(t,e,n,l)},[t]),O=r.useCallback(()=>{C.Z.completeOnboarding(t,R)},[t,R]),B=(0,a.e7)([v.Z],()=>v.Z.getGuild(t)),y=r.useMemo(()=>null==B?null:_.ZP.getGuildSplashURL({id:B.id,splash:B.splash}),[B]),A=(0,h.N)(y),S=(0,a.e7)([b.ZP],()=>b.ZP.getCurrentOnboardingStep(t)),[z,L]=r.useState(null!=y?null:"cover"),F=r.useCallback(e=>{L(S),C.Z.setUserOnboardingStep(t,e)},[t,S]),G=(0,a.e7)([f.Z],()=>f.Z.isFullServerPreview(t)),U=(0,a.e7)([b.ZP],()=>b.ZP.getOnboardingStatus(t)),q=null!=R&&R.length>0,H=r.useCallback(()=>{(0,b.kp)(U)&&P&&q?F(0):O()},[U,P,q,F,O]);r.useEffect(()=>{if(!b.ZP.shouldShowOnboarding(t))return c.Z.escapeToDefaultChannel(t);(0,p.E)(t)},[t]);let W=(0,d.Yzy)(S,{config:s.config.default,from:{scale:.8,opacity:0},enter:{scale:1,opacity:1}},"cover"!==z&&null!==z?"animate-never":"respect-motion-settings"),V=b.ZP.shouldShowOnboarding(t),X=null==B;if(r.useEffect(()=>{if(!V||X){let e=setTimeout(()=>{(0,g.uL)(E.Z5c.CHANNEL(t))},1e3);return()=>clearTimeout(e)}},[V,X,t]),!b.ZP.shouldShowOnboarding(t)||null==B)return null;let Y=()=>{switch(S){case"cover":return(0,l.jsx)(k.ZP,{guild:B,onboardingStatus:b.uX.READY,onStart:H,disableTracking:G});case"rules":return(0,l.jsx)(I.Z,{setCurrentStep:F,previousPromptIndex:R.length-1,guild:B,prompts:R,completeOnboarding:O,disableTracking:G});case null:return null;default:return(0,l.jsx)(Z.Z,{guild:B,prompts:R,step:S,selectOption:M,completeOnboarding:O,setCurrentStep:F,disableTracking:G})}};return(0,l.jsxs)("div",{className:D.main,ref:n,children:[null!=y?(0,l.jsx)(x.Z,{className:o()(D.artwork),src:y,width:i,height:w,imageClassName:D.cover}):(0,l.jsx)(u.Z,{className:D.artwork,preserveAspectRatio:"xMinYMin slice"}),null!=A&&(0,l.jsx)("div",{className:D.gradient,style:{background:"linear-gradient(180deg, ".concat((0,j.aD)(A,.16)," 0%, ").concat((0,j.aD)(A,1)," 100%)")}}),(0,l.jsx)("div",{className:D.gradient}),W((e,t,n)=>{let{key:r}=n;return(0,l.jsx)(s.animated.div,{style:e,children:Y()},r)}),"cover"===S&&(0,l.jsx)("div",{className:D.bottomCenterContent,children:(0,l.jsx)(d.X6q,{variant:"heading-sm/normal",color:"header-secondary",children:T.intl.format(T.t.kI6UoK,{privacyLink:E.EYA.PRIVACY})})})]})}},15320:function(e,t,n){n.d(t,{Z:()=>T});var l=n(200651),r=n(192379),i=n(399606),o=n(481060),s=n(367907),a=n(863249),d=n(944163),c=n(14263),u=n(768762),m=n(626135),x=n(823379),h=n(806223),p=n(45966),f=n(637853),g=n(968644),v=n(104265),_=n(588632),j=n(290511),C=n(981631),N=n(388032),b=n(260294);function k(e,t){return(0,l.jsx)("span",{className:b.helpTextItem,children:e},t)}function Z(e){return null!=e&&h.Z.getCurrentConfig({location:"ba216b_1"},{autoTrackExposure:!0}).includeRules}function I(e){let{headerId:t,guild:n,step:r,lastPrompt:s,questionCount:a,currentPrompt:d,selectOption:m,gotoPrevPrompt:x,gotoNextPrompt:h,completeOnboarding:v}=e,j=(0,i.Wu)([p.Z],()=>p.Z.getOnboardingResponsesForPrompt(n.id,d.id)),C=0===j.length&&(null==d?void 0:d.required),Z=null==d?void 0:d.options.filter(e=>j.includes(e.id)),I=(0,f.L6)(Z),E=(0,f.dX)(Z),T=0===j.length,{helpText:D,helpTextAdditional:w}=(0,g.Z)({guild:n,prompt:d,selectedRoleIds:I,selectedChannelIds:E,itemHook:k}),R=(0,c.Z)(n.id,1e3),P=d.options.map(e=>({value:e.id,...e})),M=d.options.filter(e=>j.includes(e.id)).map(e=>e.id);return(0,l.jsx)("div",{className:b.prompt,children:(0,l.jsxs)("div",{className:b.promptContent,children:[(0,l.jsxs)(o.zJl,{className:b.scrollerContent,children:[(0,l.jsxs)("div",{className:b.questionHeader,children:[(0,l.jsx)(o.Text,{variant:"text-sm/medium",color:"text-muted",children:N.intl.format(N.t.isV0NT,{currentQuestion:r+1,questionCount:a})}),d.required?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Text,{variant:"text-xs/normal",className:b.headerSeparator,children:"\xb7"}),(0,l.jsx)(o.Text,{variant:"text-sm/medium",color:"text-brand",children:N.intl.string(N.t.Ur8Vrq)})]}):null]}),(0,l.jsx)(o.X6q,{className:b.title,variant:"heading-xl/semibold",color:"header-primary",id:t,children:d.title}),(0,l.jsx)(_.Z,{options:P,value:M,onChange:e=>{let t=e.find(e=>!j.includes(e.id)),n=e.map(e=>e.id);if(null!=t)m(d.id,t.id,!0);else{let e=j.filter(e=>!n.includes(e));d.options.filter(t=>e.includes(t.id)).forEach(e=>{m(d.id,e.id,!1)})}},memberCounts:R})]}),(0,l.jsxs)("div",{className:b.navButtons,children:[(0,l.jsx)("div",{className:b.leftButtons,children:r>0&&(0,l.jsxs)(o.zxk,{className:b.button,innerClassName:b.buttonInner,onClick:()=>x(j.length),size:o.zxk.Sizes.MEDIUM,look:o.zxk.Looks.OUTLINED,grow:!1,color:o.zxk.Colors.PRIMARY,children:[(0,l.jsx)(u.Z,{className:b.arrow,direction:u.Z.Directions.LEFT}),N.intl.string(N.t["13/7kZ"])]})}),(0,l.jsxs)("div",{className:b.rightButtons,children:[(0,l.jsxs)(o.Text,{className:b.helpText,variant:"text-xs/normal",color:"text-muted",children:[D," ",w]}),(0,l.jsx)(o.ua7,{text:C?N.intl.string(N.t.dA1dSU):null,children:e=>{let{onMouseEnter:t,onMouseLeave:n}=e;return(0,l.jsx)(o.zxk,{className:b.button,innerClassName:b.buttonInner,onMouseEnter:t,onMouseLeave:n,onClick:()=>s?v():h(j.length),disabled:C,size:o.zxk.Sizes.MEDIUM,look:o.zxk.Looks.FILLED,grow:!1,color:T?o.zxk.Colors.PRIMARY:o.zxk.Colors.BRAND,children:s?(0,l.jsxs)(l.Fragment,{children:[N.intl.string(N.t["8SuVoK"]),(0,l.jsx)("span",{className:b.finishEmoji,role:"img","aria-hidden":!0,children:"\uD83C\uDF89"})]}):(0,l.jsxs)(l.Fragment,{children:[T?N.intl.string(N.t["5WxrcX"]):N.intl.string(N.t.PDTjLC),(0,l.jsx)(u.Z,{className:b.arrow,direction:u.Z.Directions.RIGHT})]})})}})]})]})]})})}function E(e){let{headerId:t,guild:n,step:r,lastPrompt:s,questionCount:a,currentPrompt:d,selectOption:c,gotoPrevPrompt:m,gotoNextPrompt:x,completeOnboarding:h}=e,_=(0,i.Wu)([p.Z],()=>p.Z.getOnboardingResponsesForPrompt(n.id,d.id)),j=0===_.length&&(null==d?void 0:d.required),C=null==d?void 0:d.options.filter(e=>_.includes(e.id)),Z=(0,f.L6)(C),I=(0,f.dX)(C),E=0===_.length,{helpText:T,helpTextAdditional:D}=(0,g.Z)({guild:n,prompt:d,selectedRoleIds:Z,selectedChannelIds:I,itemHook:k});return(0,l.jsx)("div",{className:b.prompt,children:(0,l.jsxs)("div",{className:b.promptContent,children:[(0,l.jsxs)(o.zJl,{className:b.scrollerContent,children:[(0,l.jsxs)("div",{className:b.questionHeader,children:[(0,l.jsx)(o.Text,{variant:"text-sm/medium",color:"text-muted",children:N.intl.format(N.t.isV0NT,{currentQuestion:r+1,questionCount:a})}),d.required?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Text,{variant:"text-xs/normal",className:b.headerSeparator,children:"\xb7"}),(0,l.jsx)(o.Text,{variant:"text-sm/medium",color:"text-brand",children:N.intl.string(N.t.Ur8Vrq)})]}):null]}),(0,l.jsx)(o.X6q,{className:b.title,variant:"heading-xl/semibold",color:"header-primary",id:t,children:d.title}),(0,l.jsx)("div",{className:b.promptOptions,children:d.options.map(e=>(0,l.jsx)(v.Z,{guildId:n.id,option:e,onSelect:t=>c(d.id,e.id,null!=t&&t),selected:_.includes(e.id)},e.id))})]}),(0,l.jsxs)("div",{className:b.navButtons,children:[(0,l.jsx)("div",{className:b.leftButtons,children:r>0&&(0,l.jsxs)(o.zxk,{className:b.button,innerClassName:b.buttonInner,onClick:()=>m(_.length),size:o.zxk.Sizes.MEDIUM,look:o.zxk.Looks.OUTLINED,grow:!1,color:o.zxk.Colors.PRIMARY,children:[(0,l.jsx)(u.Z,{className:b.arrow,direction:u.Z.Directions.LEFT}),N.intl.string(N.t["13/7kZ"])]})}),(0,l.jsxs)("div",{className:b.rightButtons,children:[(0,l.jsxs)(o.Text,{className:b.helpText,variant:"text-xs/normal",color:"text-muted",children:[T," ",D]}),(0,l.jsx)(o.ua7,{text:j?N.intl.string(N.t.dA1dSU):null,children:e=>{let{onMouseEnter:t,onMouseLeave:n}=e;return(0,l.jsx)(o.zxk,{className:b.button,innerClassName:b.buttonInner,onMouseEnter:t,onMouseLeave:n,onClick:()=>s?h():x(_.length),disabled:j,size:o.zxk.Sizes.MEDIUM,look:o.zxk.Looks.FILLED,grow:!1,color:E?o.zxk.Colors.PRIMARY:o.zxk.Colors.BRAND,children:s?(0,l.jsxs)(l.Fragment,{children:[N.intl.string(N.t["8SuVoK"]),(0,l.jsx)("span",{className:b.finishEmoji,role:"img","aria-hidden":!0,children:"\uD83C\uDF89"})]}):(0,l.jsxs)(l.Fragment,{children:[E?N.intl.string(N.t["5WxrcX"]):N.intl.string(N.t.PDTjLC),(0,l.jsx)(u.Z,{className:b.arrow,direction:u.Z.Directions.RIGHT})]})})}})]})]})]})})}function T(e){let{guild:t,prompts:n,step:o,selectOption:c,completeOnboarding:u,setCurrentStep:h,headerId:p,disableTracking:f}=e,g=(0,i.e7)([d.Z],()=>d.Z.getRulesPrompt(t.id));r.useEffect(()=>{t.hasFeature(C.oNc.MEMBER_VERIFICATION_GATE_ENABLED)&&a.ZP.fetchVerificationForm(t.id)},[t]);let v=n[o],_=o+1>=n.length&&!Z(g),N=n[0].required;r.useEffect(()=>{!f&&m.default.track(C.rMx.GUILD_ONBOARDING_STEP_VIEWED,{...(0,s.hH)(t.id),step:0,required:N})},[t.id,N,f]);let b=e=>{!f&&(m.default.track(C.rMx.GUILD_ONBOARDING_STEP_COMPLETED,{...(0,s.hH)(t.id),step:o,options_selected:e,skipped:0===e,back:!1,in_onboarding:!0,is_final_step:!1}),o<n.length-1&&m.default.track(C.rMx.GUILD_ONBOARDING_STEP_VIEWED,{...(0,s.hH)(t.id),step:o,required:n[o+1].required})),o+1<n.length?h(o+1):Z(g)&&h("rules")},k=e=>{!f&&(m.default.track(C.rMx.GUILD_ONBOARDING_STEP_COMPLETED,{...(0,s.hH)(t.id),step:o,skipped:!1,back:!0,options_selected:e,in_onboarding:!0,is_final_step:!1}),o>0&&m.default.track(C.rMx.GUILD_ONBOARDING_STEP_VIEWED,{...(0,s.hH)(t.id),step:o-1,required:n[o-1].required})),h(Math.max(0,o-1))};if(null==v)return null;switch(v.type){case j.FN.MULTIPLE_CHOICE:return(0,l.jsx)(E,{guild:t,headerId:p,step:o,questionCount:n.length,currentPrompt:v,lastPrompt:_,selectOption:c,gotoPrevPrompt:k,gotoNextPrompt:b,completeOnboarding:u});case j.FN.DROPDOWN:return(0,l.jsx)(I,{guild:t,headerId:p,step:o,questionCount:n.length,currentPrompt:v,lastPrompt:_,selectOption:c,gotoPrevPrompt:k,gotoNextPrompt:b,completeOnboarding:u});default:(0,x.vE)(v.type)}}},104265:function(e,t,n){n.d(t,{Z:()=>v}),n(47120);var l=n(200651),r=n(192379),i=n(120356),o=n.n(i),s=n(642128),a=n(399606),d=n(692547),c=n(780384),u=n(481060),m=n(596454),x=n(410030),h=n(339085),p=n(14263),f=n(388032),g=n(136466);function v(e){let{guildId:t,option:n,selected:i,onSelect:v,hideMemberCount:_,canBeNew:j}=e,C=(0,c.wj)((0,x.ZP)()),[N,b]=r.useState(!1),k=N&&!_,Z=r.useRef(null),{reducedMotion:I}=r.useContext(u.Sfi),E=(0,a.e7)([h.ZP],()=>{var e,t,l,r;return(null===(e=n.emoji)||void 0===e?void 0:e.id)!=null&&null!==(r=null===(t=h.ZP.getCustomEmojiById(null===(l=n.emoji)||void 0===l?void 0:l.id))||void 0===t?void 0:t.animated)&&void 0!==r&&r}),T=(0,p.Z)(t,1e3),D=null==T||null==n.roleIds?0:Math.max(...n.roleIds.map(e=>T[e])),w=j&&!i&&n.isUnseen,R=(0,u.q_F)({transform:i||I.enabled?"scale(1)":"scale(0.7)",opacity:i?1:0,config:{duration:150}},"animate-always"),P=(0,u.dQu)(d.Z.colors.BACKGROUND_MODIFIER_ACCENT),M=(0,u.dQu)(d.Z.unsafe_rawColors.BRAND_500),O=(0,u.q_F)({from:{color:M.spring()},color:P.spring({opacity:C?.5:.25}),config:{duration:300},delay:500},"animate-always"),B=(0,u.Yzy)(k,{from:{transform:I.enabled?"translateX(0)":"translateX(8px)",opacity:0},enter:{transform:"translateX(0)",opacity:1},leave:{opacity:0},trail:400,config:{duration:150}},"animate-always"),[y,A]=r.useState(!1);r.useEffect(()=>{if(k)return Z.current=setTimeout(()=>{b(!1),Z.current=null},3e3),()=>{null!=Z.current&&clearTimeout(Z.current)}},[k]);let S=o()(g.optionButtonWrapper,{[g.selected]:i,[g.pressed]:y}),z=w?{borderColor:O.color}:{};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.animated.div,{style:z,className:S,children:(0,l.jsxs)(u.P3F,{className:o()(g.optionButton),onClick:()=>{b(!i),v(!i)},onMouseDown:()=>A(!0),onMouseUp:()=>A(!1),children:[null!=n.emoji&&(null!=n.emoji.id||null!=n.emoji.name)?(0,l.jsx)(m.Z,{animated:n.emoji.animated||E,className:g.buttonEmoji,emojiId:n.emoji.id,emojiName:n.emoji.name}):null,(0,l.jsxs)("div",{className:g.buttonText,children:[(0,l.jsx)(u.Text,{variant:"text-md/medium",color:"header-primary",children:n.title}),n.description.length>0?(0,l.jsx)(u.Text,{variant:"text-xs/normal",color:"header-secondary",children:n.description}):null]}),(0,l.jsx)(s.animated.div,{className:g.checkIcon,style:R,children:(0,l.jsx)(u.dz2,{size:"custom",width:10,height:10,color:d.Z.unsafe_rawColors.WHITE_500.css})}),B((e,t)=>D>0&&t&&(0,l.jsx)(s.animated.div,{className:g.memberCount,style:e,children:(0,l.jsx)(u.Text,{variant:"text-xs/normal",color:"always-white",children:f.intl.format(f.t.EgKsZG,{memberCount:D})})})),w&&(0,l.jsx)(u.IGR,{color:d.Z.unsafe_rawColors.BRAND_260.css,text:f.intl.string(f.t.y2b7CA),className:g.newBadge})]})})})}},588632:function(e,t,n){n.d(t,{Z:()=>u}),n(47120),n(653041);var l=n(200651),r=n(192379),i=n(692547),o=n(481060),s=n(596454),a=n(388032),d=n(28194);function c(e){return null!=e&&(null!=e.id||null!=e.name)}function u(e){let{options:t,value:n,onChange:u,canBeNew:m,memberCounts:x}=e,h=r.useMemo(()=>{let e=new Map;return t.forEach(t=>{e.set(t.id,t)}),e},[t]),p=r.useMemo(()=>{let e=[];return t.forEach(t=>{e.push({value:t.id,label:t.title,key:t.id})}),e},[t]),f=r.useCallback(e=>{var t,n,r,i;if(null==e)return;let o=h.get(e.value);if(null!=o&&c(o.emoji))return(0,l.jsx)(s.Z,{emojiId:null===(t=o.emoji)||void 0===t?void 0:t.id,emojiName:null===(n=o.emoji)||void 0===n?void 0:n.name,animated:null!==(i=null===(r=o.emoji)||void 0===r?void 0:r.animated)&&void 0!==i&&i})},[h]),g=r.useCallback((e,t)=>{if(null==e||t.inPill)return;let n=h.get(e.value);if(null==n||!c(n.emoji))return;let r=null==x||null==n.roleIds?0:Math.max(...n.roleIds.map(e=>x[e])),s=null!=x&&r>0;return(0,l.jsxs)("div",{className:d.suffix,children:[m&&n.isUnseen&&(0,l.jsx)(o.IGR,{color:i.Z.unsafe_rawColors.BRAND_260.css,text:a.intl.string(a.t.y2b7CA),className:d.newBadge}),s&&(0,l.jsx)("div",{className:d.memberCount,"data-hover":!0,children:(0,l.jsx)(o.Text,{variant:"text-xs/normal",color:"always-white",children:a.intl.format(a.t.EgKsZG,{memberCount:r})})})]})},[m,x,h]),v=r.useCallback(e=>{let t=[];e.forEach(e=>{let n=h.get(e);null!=n&&t.push(n)}),u(t)},[u,h]);return(0,l.jsx)(o.VcW,{multi:!0,options:p,onChange:v,value:n,closeOnSelect:!1,renderOptionSuffix:g,renderOptionPrefix:f})}},973051:function(e,t,n){n.d(t,{Z:()=>f}),n(47120);var l=n(200651),r=n(192379),i=n(399606),o=n(481060),s=n(367907),a=n(863249),d=n(944163),c=n(768762),u=n(454585),m=n(626135),x=n(981631),h=n(388032),p=n(260294);function f(e){var t;let{guild:n,prompts:f,completeOnboarding:g,setCurrentStep:v,disableTracking:_,previousPromptIndex:j}=e,C=r.useRef(null),N=(0,i.e7)([d.Z],()=>d.Z.getRulesPrompt(n.id)),[b,k]=r.useState(null!==(t=null==N?void 0:N.response)&&void 0!==t&&t),Z=(0,i.e7)([d.Z],()=>d.Z.get(n.id)),I=r.useRef(null),E=r.useRef(null),T=r.useCallback(async()=>{if(null!=Z&&null!=N){try{await a.ZP.submitVerificationForm(n.id,{...Z,formFields:[{...N,response:b}]})}catch{}g()}},[n.id,Z,N,b,g]);function D(e){let[t]=e;t.isIntersecting&&k(!0)}return(r.useEffect(()=>{let e=new IntersectionObserver(D,{root:I.current,rootMargin:"0px",threshold:0}),t=E.current;return null!=t&&null!=t.lastElementChild&&e.observe(t.lastElementChild),()=>{null!=t&&null!=t.lastElementChild&&e.unobserve(t.lastElementChild)}},[E,I]),null==N)?null:(0,l.jsx)("div",{className:p.prompt,children:(0,l.jsxs)("div",{className:p.promptContent,ref:I,children:[(0,l.jsxs)(o.h21,{className:p.scrollerContent,ref:C,children:[(0,l.jsx)(o.Text,{variant:"text-sm/medium",color:"text-muted",children:h.intl.string(h.t["b1JC+v"])}),(0,l.jsx)(o.X6q,{variant:"heading-xl/semibold",children:h.intl.string(h.t.prJqwc)}),(0,l.jsx)("div",{className:p.termsFieldBody,ref:E,children:N.values.map((e,t)=>(0,l.jsxs)("div",{className:p.termsRow,children:[(0,l.jsx)(o.Text,{variant:"text-sm/normal",color:"text-muted",children:"".concat(t+1,".")}),(0,l.jsx)(o.Text,{variant:"text-sm/normal",className:p.termsRowContent,children:u.Z.parseGuildVerificationFormRule(e,!0,{channelId:n.rulesChannelId})})]},"term-".concat(t)))})]}),(0,l.jsx)("div",{className:p.overlay}),(0,l.jsxs)("div",{className:p.navButtons,children:[(0,l.jsx)("div",{className:p.leftButtons,children:-1!==j&&(0,l.jsxs)(o.zxk,{innerClassName:p.buttonInner,onClick:()=>{!_&&(m.default.track(x.rMx.GUILD_ONBOARDING_STEP_COMPLETED,{...(0,s.hH)(n.id),step:-1,skipped:!1,back:!0,options_selected:0,in_onboarding:!0,is_final_step:!1}),j>=0&&m.default.track(x.rMx.GUILD_ONBOARDING_STEP_VIEWED,{...(0,s.hH)(n.id),step:j,required:f[j].required})),v(j)},size:o.zxk.Sizes.MEDIUM,look:o.zxk.Looks.OUTLINED,grow:!1,color:o.zxk.Colors.PRIMARY,children:[(0,l.jsx)(c.Z,{className:p.arrow,direction:c.Z.Directions.LEFT}),h.intl.string(h.t["13/7kZ"])]})}),(0,l.jsxs)("div",{className:p.rightButtons,children:[(0,l.jsx)(o.Text,{className:p.helpText,variant:"text-xs/normal",color:"text-muted",children:b?h.intl.string(h.t.arAe3N):h.intl.string(h.t.D0CVAQ)}),(0,l.jsxs)(o.zxk,{innerClassName:p.buttonInner,onClick:T,disabled:!b,size:o.zxk.Sizes.MEDIUM,look:o.zxk.Looks.FILLED,grow:!1,color:o.zxk.Colors.BRAND,children:[h.intl.string(h.t["8SuVoK"]),(0,l.jsx)("span",{className:p.finishEmoji,role:"img","aria-hidden":!0,children:"\uD83C\uDF89"})]})]})]})]})})}},45884:function(e,t,n){e.exports={coverContainer:"coverContainer__2f300",centerArt:"centerArt__2f300",mainIsland:"mainIsland__2f300",balloonDog:"balloonDog__2f300",leftArt:"leftArt__2f300",grillingIsland:"grillingIsland__2f300",rightArt:"rightArt__2f300",waffleIsland:"waffleIsland__2f300",float:"float__2f300",altFloat:"altFloat__2f300",centerContent:"centerContent__2f300",coverContent:"coverContent__2f300",coverTitle:"coverTitle__2f300"}},130748:function(e,t,n){e.exports={main:"main_c08b38",artwork:"artwork_c08b38",gradient:"gradient_c08b38",bottomCenterContent:"bottomCenterContent_c08b38",cover:"cover_c08b38"}},260294:function(e,t,n){e.exports={prompt:"prompt_fe70ca",promptContent:"promptContent_fe70ca",scrollerContent:"scrollerContent_fe70ca",questionHeader:"questionHeader_fe70ca",title:"title_fe70ca",headerSeparator:"headerSeparator_fe70ca",promptOptions:"promptOptions_fe70ca",helpText:"helpText_fe70ca",helpTextItem:"helpTextItem_fe70ca",navButtons:"navButtons_fe70ca",finishEmoji:"finishEmoji_fe70ca",termsFieldBody:"termsFieldBody_fe70ca",termsRow:"termsRow_fe70ca",termsRowContent:"termsRowContent_fe70ca",leftButtons:"leftButtons_fe70ca",rightButtons:"rightButtons_fe70ca",button:"button_fe70ca",buttonInner:"buttonInner_fe70ca",arrow:"arrow_fe70ca",overlay:"overlay_fe70ca"}},136466:function(e,t,n){e.exports={optionButtonWrapper:"optionButtonWrapper__270d7",selected:"selected__270d7",pressed:"pressed__270d7",optionButton:"optionButton__270d7",checkIcon:"checkIcon__270d7",memberCount:"memberCount__270d7",buttonEmoji:"buttonEmoji__270d7",buttonText:"buttonText__270d7",newBadge:"newBadge__270d7"}},28194:function(e,t,n){e.exports={suffix:"suffix__05934",newBadge:"newBadge__05934",memberCount:"memberCount__05934"}}}]);
//# sourceMappingURL=2996ff572b5dfb48.js.map