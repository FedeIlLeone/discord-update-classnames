(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["49131"],{286543:function(e){e.exports=function(e,t,n){if("function"!=typeof e)throw TypeError("Expected a function");return setTimeout(function(){e.apply(void 0,n)},t)}},196434:function(e,t,n){var i=n(286543),r=n(956656)(function(e,t){return i(e,1,t)});e.exports=r},504764:function(e){"use strict";e.exports="/assets/e8f208ce40f2814c.svg"},906739:function(e){"use strict";e.exports="/assets/d0f129a0c1627f7a.png"},965358:function(e){"use strict";e.exports="/assets/fddfcda2eca5c8d4.png"},420196:function(e){"use strict";e.exports="/assets/b58ce8ba4d6516a2.png"},433075:function(e){"use strict";e.exports="/assets/9ed42f4f17fd8793.png"},67158:function(e,t,n){"use strict";n.d(t,{Z:()=>m}),n(47120);var i=n(200651),r=n(192379),l=n(120356),a=n.n(l),s=n(232713),o=n(318766),c=n(28546),d=n(957825),u=n(513632);let m=r.memo(r.forwardRef(function(e,t){let{disabled:n,type:l,className:m,onClick:h}=e,[g,x]=(0,c.Iu)(e=>[e.activeView,e.activeViewType],s.X),f=r.useCallback(()=>{(0,c.j9)(l),null==h||h()},[l,h]);return n?null:(0,i.jsx)("div",{className:a()(d.CT,u.buttonContainer),ref:t,children:(0,i.jsx)(o.Z,{className:a()(u.emojiButton,m),onClick:f,active:(g===d.X1.GIF||g===d.X1.EMOJI||g===d.X1.STICKER)&&x===l,tabIndex:0,focusProps:{offset:{top:4,bottom:4,left:-4,right:-4}}})})}))},374794:function(e,t,n){"use strict";n.d(t,{Z:()=>o});var i=n(200651);n(192379);var r=n(120356),l=n.n(r),a=n(481060),s=n(53281);function o(e){let{children:t,className:n,innerClassName:r,onChange:o,"aria-label":c,"aria-describedby":d,filters:u,multiple:m=!1,disabled:h=!1,submitting:g=!1,...x}=e;return(0,i.jsx)(a.tEY,{within:!0,children:(0,i.jsxs)("div",{className:l()(n,(0,a.nYM)({...x,submitting:g,disabled:h})),"aria-disabled":h,children:[(0,i.jsx)("span",{"aria-hidden":!0,className:r,children:t}),(0,i.jsx)(s.Z,{tabIndex:0,onChange:o,filters:u,multiple:m,"aria-label":c,"aria-describedby":d,disabled:h})]})})}},681154:function(e,t,n){"use strict";n.d(t,{Gx:()=>o,Op:()=>c,T4:()=>s,V_:()=>a});var i=n(539573),r=n(388032);function l(e,t){return{type:e,message:null!=t?t:null}}function a(){return l(0,r.intl.string(r.t["71wuR0"]))}function s(){return l(0,r.intl.string(r.t["w/BT3N"]))}function o(e,t){return l(1,(0,i.$q)(e,null==t?void 0:t.id))}function c(e,t){var n;return null==e||0===e.type&&null!=t.content&&t.content.trim().length>0||2===e.type&&null!=t.tags&&t.tags.length>0?null:null!==(n=e.message)&&void 0!==n?n:null}},993259:function(e,t,n){"use strict";n.d(t,{E$:()=>o,KV:()=>s});var i=n(149765),r=n(605436),l=n(700785);let a=(e,t,n)=>{if(null==e.id)return!1;let r=l.I0({forceRoles:{[e.id]:e},context:n});return i.e$(r,t)};function s(e,t){return Object.values(t).sort(r.W).map(e=>(0,r.X0)(e))}function o(e,t,n,i){return Object.values(t).filter(e=>(0,r.GJ)(e)||a(e,i,n))}},90372:function(e,t,n){"use strict";n.d(t,{Z:()=>s});var i=n(192379),r=n(451478),l=n(830917),a=n(985518);let s={useForumChannelSeenManager:function(e){let{guildId:t,channelId:n}=e,s=i.useRef(null),o=(0,l.UU)(),c=!r.Z.isFocused(o);return i.useLayoutEffect(()=>(null==s.current&&(s.current=new a.ZP({guildId:t,channelId:n,isPaused:c,windowId:o}),s.current.initialize()),()=>{var e;null===(e=s.current)||void 0===e||e.terminate(),s.current=null}),[n,t,c,o]),s.current}}},259637:function(e,t,n){"use strict";n.d(t,{Z:()=>g});var i=n(200651);n(192379);var r=n(658722),l=n.n(r),a=n(442837),s=n(481060),o=n(596454),c=n(339085),d=n(456269),u=n(388032),m=n(586956);let h=e=>{let{tag:t}=e,{id:n,name:r,emojiId:l,emojiName:d}=t,u=(0,a.e7)([c.ZP],()=>null!=l?c.ZP.getUsableCustomEmojiById(l):null),h=null!=l||null!=d;return(0,i.jsx)(s.lo1,{value:n,children:(0,i.jsx)(s.lo1.Label,{children:(0,i.jsxs)("div",{className:m.row,children:[h?(0,i.jsx)(o.Z,{className:m.__invalid_emoji,emojiId:l,emojiName:d,animated:!!(null==u?void 0:u.animated)}):(0,i.jsx)(s.lO_,{size:"md",color:"currentColor",className:m.__invalid_emoji}),(0,i.jsx)(s.Text,{variant:"text-md/semibold",color:"header-secondary",children:r})]})})},n)};function g(e){let{parentChannel:t,appliedTags:n,maxTagsApplied:r,onSelectTag:a,onClose:o}=e,c=(0,d.Vm)(t),m=(e,t)=>t.filter(t=>l()(e.toLowerCase(),t.name.toLowerCase()));return(0,i.jsx)(s.DBG,{showScrollbar:!0,value:n,onChange:e=>{(!r||n.has(e))&&(a(e),o())},placeholder:u.intl.string(u.t.MbhGm5),"aria-label":u.intl.string(u.t.MbhGm5),children:e=>m(e,c).map(e=>(0,i.jsx)(h,{tag:e},e.id))})}},434878:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>eu}),n(47120);var i=n(200651),r=n(192379),l=n(120356),a=n.n(l),s=n(196434),o=n.n(s),c=n(232713),d=n(91192),u=n(924826),m=n(536895),h=n(313361),g=n(442837),x=n(704215),f=n(481060),p=n(561472),v=n(393238),C=n(607070),_=n(933557),b=n(243778),j=n(71619),N=n(898188),T=n(41776),I=n(256413),S=n(292853),w=n(359110),y=n(344185),E=n(235449),R=n(665906),P=n(488131),k=n(433355),Z=n(592125),M=n(703558),A=n(607744),L=n(117530),F=n(451478),O=n(459273),z=n(961675),D=n(883429),B=n(238349),H=n(109434),U=n(456269),V=n(90372),G=n(985518),q=n(228392),X=n(355589),W=n(542581),K=n(639184),J=n(404616),Y=n(470623),Q=n(749913),$=n(219664),ee=n(895932),et=n(479099),en=n(510060),ei=n(276357),er=n(81490),el=n(482062),ea=n(260503),es=n(981631),eo=n(124368),ec=n(388032),ed=n(72895);function eu(e){let{channel:t,guild:n,sidebarState:r}=e;return(0,i.jsx)(Y.oL,{channel:t,children:(0,i.jsx)(eC,{channel:t,guild:n,sidebarState:r})},t.id)}let em=new en.Me({minWidth:320,maxWidth:450,gap:16});function eh(e){return"forum-grid-header-section-".concat(e)}let eg=(e,t,n)=>0===e?0:(0,en.KW)(n);function ex(e){let{itemRole:t,coords:n,section:r}=e;return(0,i.jsx)("div",{className:a()(ed.card,ed.archivedDividerRow,ed.columnsSpan),style:n,"data-item-role":t,children:(0,i.jsx)("div",{className:ed.emptyMainCard,children:(0,i.jsx)(f.X6q,{variant:"eyebrow",className:ed.archivedDivider,id:eh(r),children:ec.intl.string(ec.t["3+LO19"])})})},"section-divider")}function ef(e){let{section:t,coords:n,key:r,isShowingSearchResult:l,hasActiveThreads:a}=e;return()=>2===t&&!l&&a?(0,i.jsx)(ex,{section:t,coords:null==n?void 0:{...n,position:"absolute"},itemRole:"section"},r):null}function ep(e,t){return"card-".concat(e,"-").concat(t)}function ev(e){if("string"==typeof e){let t=e.match(/card-{\d+}-({\d+})$/);return null==t?null:t[1]}return null}function eC(e){let{channel:t,sidebarState:n}=e,{editorHeight:l,editorAdditionRowHeight:s,listViewCardHeights:o,formOpen:u}=(0,Y.xH)(e=>{let{editorHeight:t,editorAdditionRowHeight:n,listViewCardHeights:i,formOpen:r,cardHeightVersion:l}=e;return{editorHeight:t,editorAdditionRowHeight:n,listViewCardHeights:i,formOpen:r,cardHeightVersion:l}},c.X),{activeThreadIds:m,archivedThreadIds:x,searchResults:v,canLoadMore:_,loadMore:b,activeThreadsLoading:j,archivedThreadsLoading:N,loading:R,isSearchLoading:A,layoutType:L}=function(e){let{sortOrder:t,tagFilter:n,layoutType:i}=(0,H.H)(e.id),r=(0,U.vP)({channel:e,sortOrder:t,tagFilter:n,shouldAutomaticallyAck:!0}),l=(0,g.e7)([y.Z,T.Z],()=>{let t=y.Z.hasLoaded(e.guild_id),n=T.Z.isLurking(e.guild_id);return!t&&!n}),{threadIds:a,canLoadMore:s,loadMore:o,loading:c}=(0,E.qQ)(e,t,n),{searchResults:d,isSearchLoading:u}=(0,U.XZ)({channelId:e.id});return(0,U.ES)(e,t,n),{activeThreadIds:r,archivedThreadIds:a,searchResults:d,canLoadMore:s,loadMore:o,loading:l||c||u,archivedThreadsLoading:c,activeThreadsLoading:l,isSearchLoading:u,layoutType:i}}(t),F=m.length>0,O=F||x.length>0,B=(0,I.Z)(t),{tagFilter:W}=(0,H.H)(t.id);(0,U.ku)(t,W,u);let K=(0,U.jR)(t),Q=(0,U.eZ)(t),ee=r.useRef(null),{observePostVisibilityAnalytics:et}=function(e){let{guildId:t,channelId:n,scrollerRef:i}=e;V.Z.useForumChannelSeenManager({guildId:t,channelId:n});let l=r.useRef(null),a=r.useCallback((e,t)=>{for(let n of t){let t=n.target.dataset.itemId;if(null==t)return;let i=Date.now();n.intersectionRatio>=.5?(0,G.rj)(e,t,i):(0,G.Ct)(e,t,i)}},[]);return r.useEffect(()=>{var e;let t=null===(e=i.current)||void 0===e?void 0:e.getScrollerNode();if(null!=t)return l.current=new IntersectionObserver(e=>a(n,e),{root:t,rootMargin:"0px 100000px 0px 100000px",threshold:.5}),()=>{var e;null===(e=l.current)||void 0===e||e.disconnect(),l.current=null}},[n,a,i]),{observePostVisibilityAnalytics:r.useCallback((e,t)=>{var i;if(null==e){(0,G.Ct)(n,t,Date.now());return}null===(i=l.current)||void 0===i||i.observe(e)},[n])}}({scrollerRef:ee,channelId:t.id,guildId:t.guild_id}),ei=L===h.X.GRID,eu=null!=v,ex=r.useRef(null),{containerRef:eC,containerWidth:eN}=(0,er.Z)();r.useEffect(()=>()=>{null!=t.id&&D.Z.clearForumSearch(t.id)},[t.id]);let{columns:eI}=r.useMemo(()=>ei?em.getRenderOptions(eN):en.eU,[ei,eN]),eS=r.useMemo(()=>R?Math.round((window.innerHeight-200)/118):0,[R]),ew=r.useMemo(()=>{let e=Math.ceil(window.innerHeight/(0,en.KW)(em.getWidth(eN)))*eI;return j?e:0},[eN,eI,j]),ey=r.useMemo(()=>{let e=Math.ceil(window.innerHeight/(0,en.KW)(em.getWidth(eN)))*eI;return N?e:0},[eN,eI,N]),eE=r.useMemo(()=>{let e=Math.ceil(window.innerHeight/(0,en.KW)(em.getWidth(eN)))*eI;return A&&eu?e:0},[eN,eI,A,eu]),eR=r.useMemo(()=>{if(ei)return!K&&eu?[1,0]:Q?eu?[1,v.length+eE,0]:[1,m.length+ew,x.length+ey]:[1,m.length+ew,0];return!K&&eu?[1,1]:Q?eu?[1,v.length,0,eS]:[1,m.length,x.length,eS]:[1,m.length,1]},[ei,eu,m.length,x.length,K,Q,eS,v,ew,ey,eE]),eP=r.useMemo(()=>!K&&eu?[[],[]]:Q?eu?[[],v,[],[]]:[[],m,x,[]]:[[],m,[]],[eu,K,Q,v,m,x]),ek=r.useCallback((e,n)=>{(0,q.B5)({guildId:t.guild_id,channelId:t.id,postId:e.id,location:{page:es.ZY5.GUILD_CHANNEL,section:es.jXE.FORUM_CHANNEL_POST}}),n?(0,w.ad)(e,{source:eo.on.BROWSER}):(ex.current=e.id,(0,P.ok)(e))},[t.guild_id,t.id,ex]),[eZ,eM]=r.useState(l+s-24),eA=r.useCallback((e,n,r)=>0===e?(0,i.jsx)(eT,{channel:t,isEmpty:!F,isSearchLoading:A,numResults:null==v?void 0:v.length,coords:n,onHeightChange:eM,children:!R&&(0,i.jsx)(X.Z,{channel:t,hasAnyThread:O},t.id)},"forum-channel-header"):2!==e||Q?1===e&&eu&&!K?(0,i.jsx)(eb,{channel:t,coords:n},"archive-or-search-result"):r():(0,i.jsx)(e_,{channel:t,coords:n},"archived-missing-reading-history-perm"),[eu,Q,v,K,t,F,A,R,O]),eL=(0,g.e7)([z.Z],()=>z.Z.hasHidden(t.id)),eF={editorHeight:l,isGridLayout:ei},eO=r.useRef(eF);r.useEffect(()=>{eO.current=eF}),r.useEffect(()=>{var e,t;let{editorHeight:n,isGridLayout:i}=eO.current,r=i?eV:ee,l=null===(e=r.current)||void 0===e?void 0:e.getScrollerState();null!=l&&!eL&&l.scrollTop>n&&(null===(t=r.current)||void 0===t||t.scrollTo({to:0}))},[eL]);let{updateListScrollerRef:ez,renderListSection:eD,renderListItem:eB,getListSectionHeight:eH,getListItemHeight:eU}=function(e){let{listRef:t,hasActiveThreads:n,threadIdsBySection:l,listViewCardHeights:s,editorHeight:o,editorAdditionRowHeight:c,renderSectionOrItem:d,goToThread:u,observePostVisibilityAnalytics:m,isShowingSearchResult:h}=e,g=r.useCallback(e=>n=>{var i;t.current=n,e.current=null!==(i=null==n?void 0:n.getScrollerNode())&&void 0!==i?i:null},[t]),x=r.useCallback(e=>ef({section:e.section,isShowingSearchResult:h,hasActiveThreads:n})(),[n,h]),p=r.useCallback(e=>d(e.section,void 0,()=>{if(3===e.section)return __OVERLAY__?null:(0,i.jsx)("div",{"data-item-role":"item",className:a()(ed.loadingCard,ed["loadingCard-".concat(e.row%3)])},"loading-".concat(e.row));let t=l[e.section][e.row];return(0,i.jsx)("li",{className:ed.card,"data-item-role":"item",children:(0,i.jsx)(f.y5t,{children:(0,i.jsx)(J.ZP,{className:ed.mainCard,threadId:t,goToThread:u,observePostVisibilityAnalytics:m})})},"".concat(e.section,"-").concat(t))}),[d,l,u,m]),v=r.useCallback((e,t)=>{if(0===e)return o+c;let n=s[l[e][t]];return null==n?104:n+8},[l,s,o,c]);return{updateListScrollerRef:g,renderListSection:x,renderListItem:p,getListSectionHeight:r.useCallback(e=>2===e&&n?40:0,[n]),getListItemHeight:v}}({listRef:ee,hasActiveThreads:F,threadIdsBySection:eP,listViewCardHeights:o,editorHeight:l,editorAdditionRowHeight:s,renderSectionOrItem:eA,goToThread:ek,observePostVisibilityAnalytics:et,isShowingSearchResult:eu}),eV=r.useRef(null),{updateMasonryListScrollerRef:eG,getItemKey:eq,renderGridSection:eX,renderGridItem:eW,getGridSectionHeight:eK,getSectionProps:eJ,handleGridFocus:eY}=function(e){let{masonryListScrollerRef:t,threadIdsBySection:n,goToThread:l,renderSectionOrItem:s,hasActiveThreads:o,isShowingSearchResult:c,canSearchForumPosts:d,canViewArchivedPosts:u,observePostVisibilityAnalytics:m,focusedThreadId:h,headerHeight:g}=e,x=r.useRef(null),f=r.useCallback(e=>{t.current=e,x.current=null==e?void 0:e.getScrollerNode()},[t]),p=r.useCallback((e,n)=>{let{current:i}=t;if(null==i)return;let r=document.querySelector(e);if(null==r)return;let l=i.getCoordsMap()[n],a=null!=l?l.height+20:200;i.scrollIntoViewNode({node:r,padding:a,callback(){requestAnimationFrame(()=>{var t;null===(t=document.querySelector(e))||void 0===t||t.focus({preventScroll:!0})})}}),h.current=ev(n)},[t,h]),v=r.useCallback(e=>{let t=ev(e);if(null==t)return;let n=Z.Z.getChannel(t);null!=n&&l(n,!0)},[l]),C=r.useCallback(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===n[e].length)return"section-".concat(e,"-").concat(t);{let i=n[e][t];return null==i?ep(e,t):ep(e,i)}},[n]),_=r.useCallback((e,t,n)=>s(e,t,ef({section:e,coords:t,key:n,isShowingSearchResult:c,hasActiveThreads:o})),[s,o,c]),b=r.useCallback(e=>0===e?{}:{role:"grid","aria-labelledby":"#".concat(eh(e))},[]);return{updateMasonryListScrollerRef:f,masonryListContainerRef:x,focusedThreadId:h,handleGridFocus:p,handleGridSelect:v,getItemKey:C,renderGridSection:_,renderGridItem:r.useCallback((e,t,r,s,o)=>{if(0===e)return null;let c=n[e][t];return null!=c?(0,i.jsx)($.Z,{id:"".concat(s),threadId:c,className:a()(ed.card,ed.mainCard),goToThread:l,observePostVisibilityAnalytics:m,coords:r,gridCoords:o.coordinates[s],gridSectionBoundaries:o.boundaries},s):__OVERLAY__?null:(0,i.jsx)("div",{style:{...r},"data-item-role":"item",className:a()(ed.loadingCard,ed["loadingCard-".concat(t%3)])},s)},[n,l,m]),getSectionProps:b,getGridSectionHeight:r.useCallback(e=>0===e?g-8-24:2===e?o||!u?40:0:1===e&&c&&!d?40:0,[g,c,d,o,u])}}({masonryListScrollerRef:eV,threadIdsBySection:eP,goToThread:ek,renderSectionOrItem:eA,hasActiveThreads:F,isShowingSearchResult:eu,canSearchForumPosts:K,canViewArchivedPosts:Q,observePostVisibilityAnalytics:et,focusedThreadId:ex,headerHeight:eZ});!function(e){let{masonryListScrollerRef:t,containerWidth:n,isGridLayout:i,threadIdsBySection:l,focusedThreadId:a,parentId:s}=e;r.useEffect(()=>{if(i){let e=setTimeout(()=>{if(null==t.current||null==a.current)return;let e=a.current;if("string"!=typeof e)return;if(null==k.ZP.getSidebarState(s)){a.current=null;return}let n=l.findIndex(t=>t.find(t=>t===e)),i=t.current.getCoordsMap(),r=i["__section__".concat(n)],o=i[ep(n,e)];null!=r&&null!=o&&t.current.scrollIntoViewRect({start:r.top+o.top-100,end:r.top+o.top+o.height+50})},500);return()=>clearTimeout(e)}},[s,n,i,l,a,t])}({masonryListScrollerRef:eV,containerWidth:eN,isGridLayout:ei,threadIdsBySection:eP,parentId:t.id,focusedThreadId:ex});let eQ=r.useCallback(()=>{var e,n;if(eu)return;let i=ei?null===(e=eV.current)||void 0===e?void 0:e.getScrollerState():null===(n=ee.current)||void 0===n?void 0:n.getScrollerState();if(null==i)return;(0,q.ab)({guildId:t.guild_id,channelId:t.id});let r=i.scrollTop+i.offsetHeight;i.scrollHeight-r<(ei?Math.max(200,(0,en.KW)(eN)):200)&&b()},[eu,ei,t.guild_id,t.id,eN,b]),e$=(0,g.e7)([C.Z],()=>C.Z.keyboardModeEnabled),e0=(0,el.ZP)({id:"forum-grid-view",isEnabled:ei&&e$,setFocus:eY}),e3=(0,ea.Z)({listRef:ee,padding:96,isEnabled:!ei&&e$,channel:t}),{ref:e1,...e6}=e0.containerProps,e9=k.ZP.getSidebarState(t.id),e8=null!=e9&&(0,k.D5)(e9),e2=(0,g.e7)([k.ZP],()=>k.ZP.getSection(t.id))===es.ULH.MEMBERS;return(0,i.jsx)("div",{className:ed.container,ref:eC,"data-member-list-open":e2,children:(0,i.jsx)(f.Wdt,{children:e=>(0,i.jsxs)(i.Fragment,{children:[u&&(0,i.jsx)(p.Z,{channel:t,draftType:M.d.FirstThreadMessage,className:ed.uploadArea,style:{right:e8&&(null==n?void 0:n.isThreadSidebarFloating)?n.threadSidebarWidth:0}}),(0,i.jsx)(ej,{channel:t}),(0,i.jsx)(f.nn4,{children:(0,i.jsx)(f.H,{children:ec.intl.string(ec.t.B2panJ)})}),B?(0,i.jsx)("div",{className:ed.optInNotice,children:(0,i.jsx)(S.Z,{channel:t})}):null,ei?(0,i.jsx)(el.KT,{navigator:e0,children:(0,i.jsx)(f.GMG,{ref:e=>{var t;e1.current=null!==(t=null==e?void 0:e.getScrollerNode())&&void 0!==t?t:null,eG(e)},itemGutter:16,padding:24,className:ed.grid,columns:eI,sections:eR,getItemKey:eq,getSectionHeight:eK,getItemHeight:eg,renderSection:eX,renderItem:eW,getSectionProps:eJ,onScroll:_?eQ:void 0,chunkSize:350,...e6,...e},L)}):(0,i.jsx)(d.bG,{navigator:e3,children:(0,i.jsx)(d.SJ,{children:t=>{let{ref:n,...r}=t;return(0,i.jsx)(f._2F,{ref:ez(n),className:ed.list,sections:eR,sectionHeight:eH,rowHeight:eU,renderRow:eB,renderSection:eD,chunkSize:150,onScroll:_?eQ:void 0,paddingBottom:24,...r,...e,innerRole:"list"},L)}})})]})})})}function e_(e){let{channel:t,coords:n}=e,r=(0,_.ZP)(t);return(0,i.jsx)("div",{className:a()(ed.missingReadHistoryPermission,ed.columnsSpan),style:n,children:(0,i.jsx)(f.Text,{color:"text-muted",variant:"text-md/normal",children:ec.intl.format(ec.t.TycmzM,{channelName:r})})})}function eb(e){let{channel:t,coords:n}=e,r=(0,_.ZP)(t);return(0,i.jsx)("div",{className:a()(ed.missingReadHistoryPermission,ed.columnsSpan),style:n,children:(0,i.jsx)(f.Text,{color:"text-muted",variant:"text-md/normal",children:ec.intl.format(ec.t.OWZJdX,{channelName:r})})})}function ej(e){let{channel:t}=e,n=r.useCallback(()=>{D.Z.resort(t.id)},[t]),l=(0,g.e7)([B.Z],()=>B.Z.getNewThreadCount());return 0===l?null:(0,i.jsx)(f.P3F,{className:ed.newPostsButton,onClick:n,children:(0,i.jsx)(f.Text,{color:"text-brand",variant:"text-md/medium",children:ec.intl.format(ec.t.ue1qfH,{count:l})})})}function eN(){return Promise.resolve()}function eT(e){var t,n,l;let{channel:s,isEmpty:p,isSearchLoading:_,numResults:T,children:I,coords:S,onHeightChange:w}=e,{name:y,formOpen:E,titleFocused:P,hasClickedForm:k,textAreaState:Z,onboardingExpanded:z,setEditorAdditionRowHeight:B}=(0,Y.xH)(e=>{let{name:t,formOpen:n,titleFocused:i,hasClickedForm:r,textAreaState:l,onboardingExpanded:a,setEditorAdditionRowHeight:s}=e;return{name:t,formOpen:n,titleFocused:i,hasClickedForm:r,textAreaState:l,onboardingExpanded:a,setEditorAdditionRowHeight:s}},c.X),{tagFilter:V,layoutType:G}=(0,H.H)(s.id),X=(0,Y.AF)(),J=(0,H.v)(),$=(0,g.e7)([A.Z],()=>A.Z.canChatInGuild(s.guild_id)),ee=(0,U.r_)(s),en=(0,R.cD)(s),[er,el]=r.useState(en),[,ea]=(0,j.AB)(null!==(l=s.getGuildId())&&void 0!==l?l:void 0),eo=$&&(en||er&&ea),eu=s.isMediaChannel();r.useEffect(()=>{en&&el(!0)},[en]);let{ref:em,height:eh}=(0,v.Z)();r.useEffect(()=>{null!=eh&&w(eh)},[w,eh]);let eg=r.useCallback(()=>{o()(()=>{null!=em.current&&X.getState().setEditorHeight(em.current.offsetHeight)})},[em,X]);r.useLayoutEffect(eg,[eg,p,eo,z]),(0,O.yp)({event:es.CkL.REMEASURE_TARGET,handler:eg});let ex=(0,g.e7)([L.Z],()=>L.Z.getUploads(s.id,M.d.FirstThreadMessage)),ef=(0,U.ql)(s),ep=r.useRef(null),ev=r.useRef(null),[eC,e_]=r.useState(0),{width:eb}=(0,g.e7)([F.Z],()=>F.Z.windowSize()),ej=null===(n=ep.current)||void 0===n?void 0:null===(t=n.getBoundingClientRect())||void 0===t?void 0:t.width,eT=r.useRef(null);r.useLayoutEffect(()=>{var e;let t=ev.current,n=null==t?void 0:null===(e=t.children)||void 0===e?void 0:e[0];if(null!=ep.current&&null!=n&&null!=n.children){let{left:e,top:t}=ep.current.getBoundingClientRect(),i=0;for(let r of n.children){let{right:n,top:l,height:a}=r.getBoundingClientRect();if(l-t>a)break;n-e>i&&(i=n-e)}e_(i)}},[s.availableTags,eb,ej,V]);let eS=y.length>0&&!E&&(_||null!=T),ew=!__OVERLAY__&&!k&&!E&&P&&(0===Z.textValue.trim().length||Z.textValue.trim()===ef)&&0===ex.length;r.useLayoutEffect(()=>{let e=eS||ew;if(!e)return B(0);null!=eT.current&&B(e?eT.current.clientHeight:0)},[B,eS,ew,eT]);let ey=e=>{(0,q.e7)({guildId:s.guild_id,channelId:s.id,tagId:e,filterTagIds:Array.from(V),added:!V.has(e),location:{page:es.ZY5.GUILD_CHANNEL,section:es.jXE.FORUM_CHANNEL_HEADER,object:es.qAy.CHANNEL_TAG}}),J.getState().toggleTagFilter(s.id,e)},eE=(0,u.ZP)({id:"".concat(s.id,"-tags-navigator"),isEnabled:!0,wrap:!0,scrollToStart:eN,scrollToEnd:eN,orientation:m.hy.HORIZONTAL}),{role:eR,onFocus:eP,...ek}=(0,d.JA)("forum-channel-header"),eZ=r.useRef(null),eM=function(){let e=r.useRef(!1),t=(0,g.e7)([C.Z],()=>C.Z.keyboardModeEnabled),n=r.useCallback(t=>{e.current=t.shiftKey},[e]);return r.useLayoutEffect(()=>(t?window.addEventListener("keydown",n):window.removeEventListener("keydown",n),()=>window.removeEventListener("keydown",n)),[t,n]),e}(),eA=r.useCallback(e=>{if(eP(),e.target===em.current&&!eM.current){var t;null===(t=eZ.current)||void 0===t||t.focus()}},[eP,em,eM]);return(0,i.jsx)("div",{className:a()(ed.card,ed.headerRow,ed.columnsSpan),ref:em,onFocus:eA,...ek,style:{...S,position:G===h.X.GRID?"absolute":"static",height:"auto"},children:(0,i.jsxs)(O.I3,{children:[null!=s.guild_id?(0,i.jsx)(N.Z,{className:a()(ed.newMemberBanner,{[ed.gridViewBanner]:G===h.X.GRID}),guildId:s.guild_id,channel:s}):null,(0,i.jsx)("div",{className:a()(ed.mainCard,ed.header,{[ed.headerWithMatchingPosts]:eS||ew}),children:(0,i.jsx)(Q.Z,{parentChannel:s,onChange:eg,isSearchLoading:_,canCreatePost:eo,inputRef:eZ})}),(eS||ew)&&(0,i.jsxs)("div",{className:ed.matchingPostsRow,ref:eT,children:[eS&&(0,i.jsxs)("div",{className:ed.matchingPosts,children:[(0,i.jsx)(f.X6q,{variant:"text-xs/normal",color:"text-normal",children:_?ec.intl.string(ec.t["/9i3qq"]):0===T?ec.intl.string(ec.t.DbgHxs):ec.intl.formatToPlainString(ec.t["tBz/8f"],{numPosts:T,query:y})}),!_&&(0,i.jsx)(f.P3F,{onClick:()=>{(0,q.zI)({guildId:s.guild_id,channelId:s.id}),D.Z.clearForumSearch(s.id),X.getState().setName("")},children:(0,i.jsx)(f.Text,{variant:"text-xs/semibold",color:"text-brand",className:ed.clear,children:ec.intl.string(ec.t.VkKicX)})})]}),(0,i.jsx)("div",{className:ed.tagsSpacer}),ew?eo?(0,i.jsxs)("div",{className:ed.startPostHelp,children:[(0,i.jsx)(f.M2$,{shortcut:"SHIFT",className:ed.keyboardShortcut}),(0,i.jsx)(f.Text,{variant:"text-xs/normal",color:"text-normal",children:"+"}),(0,i.jsx)(f.M2$,{shortcut:"ENTER",className:ed.keyboardShortcut}),(0,i.jsx)(f.Text,{variant:"text-xs/normal",color:"text-normal",children:ec.intl.string(ec.t.ZvJ0ys)})]}):(0,i.jsxs)("div",{className:ed.startPostHelp,children:[(0,i.jsx)(f.P4T,{size:"custom",color:"currentColor",height:14,width:14,className:ed.warnIcon}),(0,i.jsx)(f.Text,{variant:"text-xs/normal",color:"text-normal",children:ec.intl.string(ec.t.iyzwnJ)})]}):null]}),(0,i.jsx)(W.Z,{channel:s,onChange:eg}),(0,i.jsxs)("div",{className:ed.tagsContainer,ref:ep,children:[(0,i.jsx)(eI,{channel:s}),s.availableTags.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:ed.divider}),(0,i.jsx)("div",{className:ed.tagList,ref:ev,children:(0,i.jsx)(d.bG,{navigator:eE,children:(0,i.jsx)(d.SJ,{children:e=>{let{ref:t,...n}=e;return(0,i.jsx)("div",{className:ed.tagListInner,ref:t,...n,children:s.availableTags.map(e=>(0,i.jsx)(et.Z,{className:ed.tag,tag:e,onClick:()=>ey(e.id),selected:V.has(e.id)},e.id))})}})})}),(0,i.jsx)(f.yRy,{renderPopout:e=>{let{closePopout:t,setPopoutRef:n}=e;return(0,i.jsx)(ei.Z,{channel:s,closePopout:t,setPopoutRef:n})},position:"bottom",align:"right",children:(e,t)=>{let{isShown:n}=t;return(0,i.jsxs)(f.zxk,{...e,size:f.zxk.Sizes.MIN,color:f.zxk.Colors.CUSTOM,className:a()(ed.tagsButton,{[ed.tagsButtonWithCount]:V.size>0}),style:{left:eC},innerClassName:ed.tagsButtonInner,"aria-label":V.size>0?ec.intl.string(ec.t.IkpM1d):ec.intl.string(ec.t["9vKK/P"]),children:[V.size>0?(0,i.jsx)("div",{className:ed.countContainer,children:(0,i.jsx)(f.Text,{className:ed.countText,color:"none",variant:"text-xs/medium",children:V.size})}):ec.intl.string(ec.t.fZ8hzs),n?(0,i.jsx)(f.u04,{size:"custom",color:"currentColor",width:20}):(0,i.jsx)(f.CJ0,{size:"custom",color:"currentColor",width:20})]})}}),(0,i.jsxs)(f.zxk,{size:f.zxk.Sizes.MIN,color:f.zxk.Colors.CUSTOM,className:a()(ed.tagsButton,ed.tagsButtonPlaceholder),innerClassName:ed.tagsButtonInner,"aria-label":ec.intl.string(ec.t.IkpM1d),children:[V.size>0?(0,i.jsx)("div",{className:ed.countContainer,children:(0,i.jsx)(f.Text,{className:ed.countText,color:"none",variant:"text-xs/medium",children:V.size})}):null,(0,i.jsx)(f.u04,{size:"custom",color:"currentColor",width:24})]})]}):null]}),I,ee&&!eu&&(0,i.jsx)(b.ZP,{contentTypes:[x.z.FORUM_CHANNEL_HELPER_CARD],children:e=>{let{visibleContent:t,markAsDismissed:n}=e;return t===x.z.FORUM_CHANNEL_HELPER_CARD?(0,i.jsx)(K.Z,{onDismiss:n}):null}})]})},"create-form")}function eI(e){let{channel:t}=e,n=t.isMediaChannel();return(0,i.jsx)(f.yRy,{renderPopout:e=>{let{closePopout:n}=e;return(0,i.jsx)(ee.Z,{channel:t,closePopout:n})},position:"bottom",align:"left",children:(e,t)=>{let{isShown:r}=t;return(0,i.jsxs)(f.zxk,{...e,size:f.zxk.Sizes.MIN,color:f.zxk.Colors.CUSTOM,className:ed.sortDropdown,innerClassName:ed.sortDropdownInner,"aria-label":n?ec.intl.string(ec.t.JxU0ws):ec.intl.string(ec.t.xyYt8P),children:[(0,i.jsx)(f.uVW,{size:"xs",color:"currentColor"}),(0,i.jsx)(f.Text,{className:ed.sortDropdownText,variant:"text-sm/medium",color:"interactive-normal",children:n?ec.intl.string(ec.t.JxU0ws):ec.intl.string(ec.t.xyYt8P)}),r?(0,i.jsx)(f.u04,{size:"custom",color:"currentColor",width:20}):(0,i.jsx)(f.CJ0,{size:"custom",color:"currentColor",width:20})]})}})}},355589:function(e,t,n){"use strict";n.d(t,{Z:()=>eo}),n(653041),n(47120);var i=n(200651),r=n(192379),l=n(120356),a=n.n(l),s=n(913527),o=n.n(s),c=n(642128),d=n(232713),u=n(831209),m=n(149765),h=n(442837),g=n(481060),x=n(787014),f=n(412899),p=n(493773),v=n(447003),C=n(605436),_=n(621516),b=n(430824),j=n(186523),N=n(585483),T=n(70956),I=n(709054),S=n(961675),w=n(883429),y=n(993259),E=n(109434),R=n(456269),P=n(228392),k=n(432771),Z=n(538366),M=n(470623),A=n(710352),L=n(981631),F=n(388032),O=n(254978);function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let D={width:28,height:28},B={width:20,height:20,borderRadius:10},H=e=>{(0,P.e5)({onboardingCTA:e})};class U{addStep(e){++this.currentIndex,this.steps.push({index:this.currentIndex,...e}),e.isDone&&this.completedSteps++}getSteps(){return this.steps}isAllDone(){return this.steps.every(e=>e.isDone)}constructor(){z(this,"currentIndex",0),z(this,"steps",[]),z(this,"completedSteps",0)}}let V=e=>{let t=null!=e.topic&&e.topic.length>0;return{name:F.intl.string(F.t.UgJu1d),description:F.intl.string(F.t["3C6/Gx"]),clickHandler:()=>{H(A.ZI.GUIDELINES),x.ZP.open(e.id,void 0,L.ZfP.TOPIC)},isDone:t}},G=e=>{let t=null!=e.availableTags&&e.availableTags.length>0;return{name:F.intl.string(F.t.xiBFCg),description:F.intl.string(F.t.wCv4Oz),clickHandler:()=>{H(A.ZI.TAGS),x.ZP.open(e.id),(0,g.ZDy)(async()=>{let{default:t}=await n.e("21971").then(n.bind(n,201049));return n=>(0,i.jsx)(t,{...n,channelId:e.id,guildId:e.guild_id})})},isDone:t}},q=e=>{let t=null!=e.defaultReactionEmoji;return{name:F.intl.string(F.t.QlyC9v),description:F.intl.string(F.t["+50LJi"]),clickHandler:()=>{H(A.ZI.DEFAULT_REACTION),(0,g.ZDy)(async()=>{let{default:t}=await n.e("80404").then(n.bind(n,158586));return n=>(0,i.jsx)(t,{...n,channel:e})})},isDone:t}},X=(e,t,r)=>({name:F.intl.string(F.t["6A0O6+"]),description:t?F.intl.string(F.t["8hI5vr"]):F.intl.format(F.t.ysxcAw,{onClick:e=>{null!=r&&(e.preventDefault(),e.stopPropagation(),(0,P.qz)(),(0,g.ZDy)(async()=>{let{default:e}=await n.e("18417").then(n.bind(n,740696));return t=>(0,i.jsx)(e,{...t,guildId:r})}))}}),clickHandler:()=>{H(A.ZI.CREATE_POST),N.S.dispatch(L.CkL.FOCUS_COMPOSER_TITLE)},isDone:e}),W=(e,t)=>r.useCallback(()=>(t(!1),w.Z.hideAdminOnboarding(e,!0)),[e,t]),K=e=>{let t=I.default.extractTimestamp(e);return o()().isBefore(o()(t).add(o().duration(15,"days")))},J=(e,t,n)=>{r.useEffect(()=>{e||n(!t)},[e,n,t])},Y=(e,t,n,i)=>{let l=r.useRef(0);r.useEffect(()=>(n||!e||t?clearTimeout(l.current):l.current=setTimeout(()=>{i()},60*T.Z.Millis.SECOND),()=>clearTimeout(l.current)),[e,t,i,n])},Q=(e,t,n)=>{(0,p.ZP)(()=>{e&&t&&n()})},$=e=>{let{isAllDone:t,isVisible:n,canManageChannel:i,guildId:l,channel:a}=e,s=(0,h.e7)([b.Z],()=>null!=l?b.Z.getRoles(l):void 0),o=r.useCallback(()=>{N.S.dispatch(L.CkL.REMEASURE_TARGET)},[]);r.useEffect(()=>{o()},[o,t,n,i,s,a.id,a.permissionOverwrites])},ee=()=>{let[e,t]=r.useState(!0);return{transitions:(0,g.Yzy)(e,{keys:e=>e?"shown":"hidden",config:ei,from:{opacity:0},enter:{opacity:1},leave:{opacity:0},unique:!0}),setVisible:t}},et=e=>(0,g.Yzy)(e,{from:{maxHeight:0},enter:{maxHeight:500},leave:{maxHeight:0},config:{duration:200}}),en=e=>{let{guild:t,roles:n}=e;return(0,i.jsx)("div",{className:O.rolesList,"aria-label":F.intl.formatToPlainString(F.t.PCs0oq,{numRoles:n.length}),children:n.map(e=>(0,i.jsx)(f.UB,{role:e,canRemove:!1,onRemove:L.VqG,guildId:t.id,className:O.rolePill},e.id))})},ei={mass:1,tension:250,friction:18,clamp:!0},er=e=>{let{guild:t,channel:l,hasAnyThread:a,handleHide:s}=e,[o,c]=r.useState(!1),d=(0,k.c)(l.id),u=(0,h.e7)([S.Z],()=>S.Z.hasHidden(l.id)),x=function(e,t,l,a){let s=null==e?void 0:e.id,o=(0,h.e7)([b.Z],()=>null!=s?b.Z.getRoles(s):void 0);return r.useMemo(()=>{let r=new U,s=(null==t?void 0:t.isMediaChannel())===!0;return null==e||null==t||s||null==o||r.addStep(function(e,t,r,l){let a=(0,v.Z)(r)?m.$e(L.Plq.VIEW_CHANNEL,L.Plq.SEND_MESSAGES):L.Plq.SEND_MESSAGES,s=null!=e?(0,y.E$)(e,t,r,a).filter(t=>r.permissionOverwrites.hasOwnProperty(t.id)||(0,C.pM)(e.id,t.id)):[],o=s.length>0,c=s.some(t=>(0,C.pM)(e.id,t.id));return{name:F.intl.string(F.t["/Ax2go"]),description:F.intl.string(F.t.oMIexc),isDone:o&&c,shouldWarn:o&&!c,children:o?(0,i.jsx)(en,{guild:e,roles:s}):null,clickHandler:()=>{H(A.ZI.PERMISSIONS),(0,g.ZDy)(async()=>{let{default:t}=await n.e("78704").then(n.bind(n,560602));return l(!0),n=>(0,i.jsx)(t,{...n,channel:r,guild:e,permission:a,currentSelectedRoles:s})},{modalKey:"SEND_MESSAGE_ROLE_PERMISSION_FIX_MODAL_KEY",onCloseRequest:L.VqG,onCloseCallback:()=>l(!1)})}}}(e,o,t,a)),s||r.addStep(V(t)),r.addStep(G(t)),r.addStep(q(t)),r.addStep(X(l,s,null==e?void 0:e.id)),r},[t,e,o,l,a])}(t,l,a,c),f=x.isAllDone();return Y(f,d||u||!K(l.id),o,s),{onboardingSteps:x,isHidden:u,isDismissed:d,isAllDone:f}},el=()=>r.useCallback(e=>{var t;null===(t=e.clickHandler)||void 0===t||t.call(e)},[]),ea=e=>{let{handleHide:t}=e;return(0,i.jsx)(g.P3F,{onClick:t,className:O.closeButton,"aria-label":F.intl.string(F.t.WAI6xs),children:(0,i.jsx)(g.Dio,{size:"md",color:"currentColor",className:O.closeIcon})})},es=e=>{let{expanded:t,onClick:n}=e;return(0,i.jsx)(g.P3F,{onClick:n,className:O.closeButton,"aria-label":t?F.intl.string(F.t.iTcumZ):F.intl.string(F.t.dcl9MT),children:t?(0,i.jsx)(g.dOc,{size:"xs",color:"currentColor",className:O.closeIcon}):(0,i.jsx)(g.bJT,{size:"xs",color:"currentColor",className:O.closeIcon})})},eo=e=>{let{hasAnyThread:t,channel:n}=e,{onboardingExpanded:r}=(0,M.xH)(e=>{let{onboardingExpanded:t}=e;return{onboardingExpanded:t}},d.X),{tagFilter:l}=(0,E.H)(n.id),s=(0,h.e7)([b.Z],()=>b.Z.getGuild(n.getGuildId())),o=(0,R.r_)(n),{transitions:m,setVisible:x}=ee(),f=et(r),v=el(),C=W(n.id,x),{onboardingSteps:N,isDismissed:T,isHidden:I,isAllDone:S}=er({guild:s,channel:n,hasAnyThread:t,handleHide:C}),w=!I&&!T,y=(0,M.AF)(),P=n.isMediaChannel(),k=e=>y.getState().setOnboardingExpanded(e);return(Q(S,w,C),$({isAllDone:S,isVisible:w,canManageChannel:o,guildId:null==s?void 0:s.id,channel:n}),J(T,I,x),(0,p.ZP)(()=>{t&&w||k(!0)}),null==s)?null:w&&o?P?t?null:(0,i.jsx)(_.Z,{channel:n}):(0,i.jsx)(i.Fragment,{children:m((e,t)=>t?(0,i.jsx)(c.animated.div,{style:e,className:O.container,children:(0,i.jsxs)("div",{className:O.wrapper,children:[(0,i.jsx)("div",{className:O.headerRow,children:(0,i.jsxs)(g.y5t,{component:(0,i.jsx)(g.X6q,{variant:"heading-md/semibold",children:F.intl.string(F.t.LhlgY2)}),children:[(0,i.jsx)(g.X6q,{variant:"heading-md/medium",className:O.header,children:F.intl.format(F.t["9L+8b2"],{numCompleted:N.completedSteps.toString(),numSteps:N.steps.length.toString()})}),(0,i.jsxs)(g.Text,{variant:"text-xs/normal",className:O.visibilityInfo,children:[(0,i.jsx)(g.d3s,{size:"xxs",color:"currentColor",className:O.icon}),F.intl.string(F.t.znhX2d)]}),(0,i.jsx)(es,{expanded:r,onClick:()=>k(!r)}),(0,i.jsx)(ea,{handleHide:C})]})}),f((e,t)=>t?(0,i.jsx)(c.animated.div,{style:e,className:O.listContainer,children:(0,i.jsx)("ol",{className:O.checklist,children:N.getSteps().map(e=>(0,i.jsxs)(g.P3F,{tag:"li","aria-label":e.name,onClick:()=>v(e),className:a()(O.stepContainer,{[O.completed]:e.isDone}),children:[e.shouldWarn?(0,i.jsx)(g.P4T,{size:"custom",width:20,height:20,color:u.Z.STATUS_DANGER,className:O.stepStatus}):e.isDone?(0,i.jsx)(g.G2e,{color:u.Z.STATUS_POSITIVE_BACKGROUND,icon:g.dz2,style:B,className:O.stepStatus}):(0,i.jsx)(g.G2e,{disableColor:!0,icon:(0,g.GSL)(j.Z),style:D,className:a()(O.stepStatus,O.completed)}),(0,i.jsxs)("div",{className:O.step,children:[(0,i.jsx)(g.Text,{variant:"text-md/medium",color:e.isDone?"header-secondary":"header-primary",className:O.stepName,children:e.name}),(0,i.jsx)(g.Text,{variant:"text-sm/normal",color:"header-secondary",className:O.stepDescription,children:e.description}),e.children]}),(0,i.jsx)(g.Fbu,{size:"custom",color:"currentColor",width:12,className:O.stepStatus})]},"onboard-step-".concat(e.index)))})}):null)]})}):null)}):t?null:(0,i.jsx)(Z.Z,{channelName:n.name,guildId:n.guild_id,tagFilter:l,channel:n})}},538366:function(e,t,n){"use strict";n.d(t,{Z:()=>g});var i=n(200651),r=n(192379),l=n(481060),a=n(665906),s=n(499033),o=n(585483),c=n(456269),d=n(228392),u=n(981631),m=n(388032),h=n(574816);function g(e){let{channelName:t,guildId:g,tagFilter:x,channel:f}=e,p=(0,c.r_)(f),v=(0,a.cD)(f),C=f.isMediaChannel(),_=r.useCallback(()=>{(0,d.qz)(),(0,l.ZDy)(async()=>{let{default:e}=await n.e("18417").then(n.bind(n,740696));return t=>(0,i.jsx)(e,{...t,guildId:g})})},[g]),b=x.size>0,j=v||p,N=!b&&p&&!C,T=r.useCallback(()=>N?_():v?void o.S.dispatch(u.CkL.FOCUS_COMPOSER_TITLE):(0,u.VqG)(),[_,N,v]);return(0,i.jsxs)("div",{className:h.container,children:[(0,i.jsxs)("div",{className:h.iconContainer,children:[(0,i.jsx)("div",{className:h.icon,children:(0,i.jsx)(l.kBi,{size:"custom",color:"currentColor",width:30,height:30})}),(0,i.jsx)(s.Z,{className:h.stars})]}),(0,i.jsx)(l.X6q,{className:h.header,variant:"heading-md/semibold",children:b?m.intl.formatToPlainString(m.t.lvPci4,{numTags:x.size}):m.intl.string(m.t.PwTMGx)}),(0,i.jsx)(l.Text,{color:"header-secondary",variant:"text-sm/normal",children:b?m.intl.formatToPlainString(m.t.AAeye3,{numTags:x.size}):m.intl.formatToPlainString(m.t.YtsXFB,{channelName:t})}),j&&(0,i.jsxs)(l.zxk,{look:l.zxk.Looks.BLANK,size:l.zxk.Sizes.MIN,color:l.zxk.Colors.GREEN,onClick:T,className:h.cta,innerClassName:h.button,children:[N?m.intl.string(m.t.DgatTU):m.intl.string(m.t.wOKE8P),(0,i.jsx)(l.Fbu,{size:"custom",color:"currentColor",width:12})]})]})}},542581:function(e,t,n){"use strict";n.d(t,{Z:()=>v}),n(47120);var i=n(200651),r=n(192379),l=n(120356),a=n.n(l),s=n(642128),o=n(232713),c=n(481060),d=n(787014),u=n(454585),m=n(456269),h=n(470623),g=n(981631),x=n(388032),f=n(480265),p=n(663362);let v=r.memo(function(e){let{channel:t,onChange:l}=e,v=(0,h.AF)(),{guidelinesOpen:C}=(0,h.xH)(e=>{let{guidelinesOpen:t}=e;return{guidelinesOpen:t}},o.X),_=(0,m.r_)(t),[b,j]=r.useState(!1),N=r.useCallback(e=>{if(null==e)return;let t=e.clientHeight>=220;t!==b&&j(t)},[b]);r.useLayoutEffect(()=>{setTimeout(l,350)},[C,l]);let[T,I]=r.useState(!C),S=(0,c.q_F)({opacity:C?1:0,maxHeight:C?500:0,config:{duration:300},onRest:()=>I(!C)});return null!=t.topic&&t.topic.length>0?(0,i.jsx)(s.animated.div,{style:S,className:T?f.hiddenVisually:void 0,children:(0,i.jsxs)("div",{className:f.container,children:[(0,i.jsxs)("div",{className:f.headerContainer,children:[(0,i.jsxs)(c.X6q,{variant:"heading-lg/semibold",className:f.guidelinesHeader,children:[(0,i.jsx)(c.snC,{size:"custom",color:"currentColor",width:20,height:20}),x.intl.string(x.t["4d4T4u"]),_&&(0,i.jsx)(c.P3F,{onClick:()=>{d.ZP.open(t.id,void 0,g.ZfP.TOPIC)},tag:"span",className:f.clickable,children:(0,i.jsx)(c.vdY,{size:"xs",color:"currentColor"})})]}),(0,i.jsx)(c.P3F,{"aria-label":x.intl.string(x.t.cpT0Cg),className:f.clickable,onClick:()=>{v.getState().setGuidelinesOpen(!1)},children:(0,i.jsx)(c.Dio,{size:"xs",color:"currentColor"})})]}),(0,i.jsxs)("div",{className:f.descriptionContainer,children:[(0,i.jsx)(c.Text,{selectable:!0,variant:"text-sm/normal",color:"header-secondary",style:{maxHeight:220},className:a()(f.guidelines,p.markup),children:(0,i.jsx)("div",{ref:N,children:u.Z.parseForumPostGuidelines(t.topic,!0,{channelId:t.id,allowHeading:!0,allowList:!0})})}),b&&(0,i.jsxs)("div",{className:f.showMore,children:[(0,i.jsx)("div",{className:f.gradient}),(0,i.jsx)("div",{className:f.linkContainer,children:(0,i.jsx)(c.P3F,{className:f.showMoreLink,onClick:()=>{(0,c.ZDy)(async()=>{let{default:e}=await n.e("78712").then(n.bind(n,223164));return n=>(0,i.jsx)(e,{...n,channel:t})})},children:(0,i.jsxs)(c.Text,{variant:"text-sm/semibold",color:"text-brand",className:f.showMoreText,children:[x.intl.string(x.t.Vu7odH),(0,i.jsx)(c.bJT,{size:"xs",color:"currentColor",className:f.showMoreIcon})]})})})]})]})]})}):null})},639184:function(e,t,n){"use strict";n.d(t,{Z:()=>f});var i=n(200651);n(192379);var r=n(120356),l=n.n(r),a=n(481060),s=n(228392),o=n(404616),c=n(710352),d=n(921944),u=n(388032),m=n(72895),h=n(821253),g=n(432667),x=n(504764);function f(e){let{onDismiss:t}=e;return(0,i.jsxs)(a.P3F,{onClick:()=>{open(c.V8),(0,s.GX)({readGuideCta:!0})},className:l()(g.container,h.container,m.mainCard),children:[(0,i.jsxs)("div",{className:h.inline,children:[(0,i.jsxs)("div",{className:h.author,children:[(0,i.jsx)(a.gw7,{size:"custom",width:28,height:28,color:"currentColor",className:h.discordIcon}),(0,i.jsx)(a.Text,{variant:"text-sm/semibold",color:"header-primary",children:u.intl.string(u.t.uvGmCw)}),(0,i.jsxs)("div",{className:h.notice,children:[(0,i.jsx)(a.d3s,{size:"md",color:"currentColor",className:h.infoIcon}),(0,i.jsx)(a.Text,{variant:"text-sm/normal",color:"header-secondary",children:u.intl.string(u.t.t2GkVV)})]})]}),(0,i.jsx)(a.P3F,{onClick:e=>{e.stopPropagation(),t(d.L.DISMISS),(0,s.GX)({readGuideCta:!1})},children:(0,i.jsx)(a.Dio,{size:"xs",color:"currentColor",className:h.closeIcon})})]}),(0,i.jsx)("hr",{className:h.separator}),(0,i.jsxs)("div",{className:h.inline,children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(a.X6q,{className:l()(g.__invalid_channelName,h.title),variant:"heading-lg/semibold",color:"header-primary",children:u.intl.string(u.t.JtSpDw)}),(0,i.jsx)(a.Text,{variant:"text-sm/normal",color:"header-secondary",children:u.intl.string(u.t.Ajhp09)})]}),(0,i.jsx)("img",{src:x,alt:u.intl.string(u.t.gAlJzc),width:o.TJ,height:o.TJ})]})]})}},76451:function(e,t,n){"use strict";n.d(t,{Z:()=>E,_:()=>w}),n(47120);var i=n(200651),r=n(192379),l=n(512722),a=n.n(l),s=n(642128),o=n(442837),c=n(481060),d=n(53281),u=n(607070),m=n(541716),h=n(859235),g=n(898463),x=n(592125),f=n(703558),p=n(117530),v=n(585483),C=n(127654),_=n(228392),b=n(981631),j=n(763890);let N={scale:.95,opacity:0},T={scale:1,opacity:1},I={scale:1,opacity:1},S={tension:2400,friction:52};function w(e){let{channelId:t,onClick:n,onClose:l,onMouseEnter:s}=e,u=r.useRef(null),m=(0,o.e7)([x.Z],()=>x.Z.getChannel(t),[t]);return a()(null!=m,"Forum Channel is null"),(0,i.jsxs)(c.P3F,{className:j.uploadInput,onMouseEnter:s,onClick:()=>{(0,_.N3)({isMobile:!1}),null==n||n()},onKeyPress:e=>{if("Enter"===e.key){var t;null===(t=u.current)||void 0===t||t.activateUploadDialogue(),(0,_.N3)({isMobile:!1})}},children:[(0,i.jsx)(d.Z,{className:j.fileInput,ref:u,onChange:e=>{null==l||l(),(0,C.d)(e.currentTarget.files,m,f.d.FirstThreadMessage,{requireConfirm:!0}),v.S.dispatch(b.CkL.TEXTAREA_FOCUS),e.currentTarget.value=null},multiple:m.rateLimitPerUser<=0,tabIndex:-1,"aria-hidden":!0}),(0,i.jsx)(c.FmF,{size:"custom",color:"currentColor",width:28,height:28,className:j.uploadIcon})]})}function y(e){let{channelId:t,closePopout:n}=e,[l,a]=r.useState(!1),{reducedMotion:d}=r.useContext(c.Sfi),x=(0,c.q_F)({from:d.enabled?T:N,to:I,config:S},"animate-always"),f=(0,o.e7)([u.Z],()=>u.Z.keyboardModeEnabled),v=(0,o.e7)([p.Z],()=>p.Z.getUploads(t,m.Ie.CREATE_FORUM_POST.drafts.type));return(0,i.jsx)(s.animated.div,{className:j.popoutContainer,onMouseLeave:()=>{l||n()},style:x,children:(0,i.jsxs)(c.zJl,{orientation:"horizontal",className:j.popout,paddingFix:!1,fade:!0,children:[(0,i.jsx)(w,{channelId:t,onClick:()=>{a(!0)},onClose:()=>{a(!1),n()}}),(0,i.jsx)("div",{className:j.uploads,children:v.map(e=>(0,i.jsx)(g.Z,{channelId:t,draftType:m.Ie.CREATE_FORUM_POST.drafts.type,upload:e,keyboardModeEnabled:f,hideFileName:!0,size:h.q.SMALL},e.id))})]})})}function E(e){let{channelId:t}=e,[n,l]=r.useState(!1),a=(0,o.e7)([p.Z],()=>p.Z.getUploads(t,m.Ie.CREATE_FORUM_POST.drafts.type)),s=a.length,c=s>0;r.useEffect(()=>{n&&!c&&l(!1)},[n,c]);let d=()=>{c&&l(!0)};return(0,i.jsxs)("div",{className:j.container,children:[c?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.r,{upload:a[0],size:h.q.SMALL,onMouseEnter:d}),!n&&(0,i.jsx)("div",{className:j.badge,children:s})]}):(0,i.jsx)(w,{onMouseEnter:d,channelId:t}),n&&(0,i.jsx)(y,{channelId:t,closePopout:()=>{l(!1)}})]})}},749913:function(e,t,n){"use strict";n.d(t,{Z:()=>er}),n(47120),n(733860);var i=n(200651),r=n(192379),l=n(120356),a=n.n(l),s=n(512722),o=n.n(s),c=n(232713),d=n(924826),u=n(91192),m=n(536895),h=n(442837),g=n(481060),x=n(430742),f=n(166459),p=n(541716),v=n(67158),C=n(893718),_=n(472243),b=n(436660),j=n(284182),N=n(795639),T=n(957730),I=n(25015),S=n(252032),w=n(913663),y=n(268350),E=n(456077),R=n(488131),P=n(602034),k=n(23750),Z=n(703558),M=n(496675),A=n(300429),L=n(117530),F=n(594174),O=n(459273),z=n(838440),D=n(127654),B=n(681154),H=n(883429),U=n(945141),V=n(456269),G=n(228392),q=n(259637),X=n(76451),W=n(470623),K=n(479099),J=n(399894),Y=n(81490),Q=n(710352),$=n(981631),ee=n(176505),et=n(388032),en=n(523247);let ei=p.Ie.CREATE_FORUM_POST;function er(e){let{parentChannel:t,isSearchLoading:n,onChange:l,canCreatePost:s,inputRef:o}=e,{textAreaState:d,formOpen:u,previewing:m}=(0,W.xH)(e=>{let{textAreaState:t,formOpen:n,previewing:i}=e;return{textAreaState:t,formOpen:n,previewing:i}},c.X),[x,f]=r.useState(null),p=r.useContext(O.oo),v=r.useCallback(()=>{p.bumpDispatchPriority()},[p]),C=(0,h.e7)([M.Z],()=>M.Z.can($.Plq.ATTACH_FILES,t)),_=(0,h.Wu)([L.Z],()=>L.Z.getUploads(t.id,Z.d.FirstThreadMessage)),b=u&&C&&s,I=(null==t?void 0:t.isMediaChannel())===!0,S=function(e,t){let n=(0,W.AF)(),i=(0,V.ql)(e);return r.useCallback(()=>{let{formOpen:r,setFormOpenFromUserAction:l,name:a,textAreaState:s,hasClickedForm:o}=n.getState();!r&&(setTimeout(()=>{if(t.current instanceof g.lcI){var e,n,i,r;null===(n=t.current)||void 0===n||null===(e=n._textArea)||void 0===e||e.setSelectionRange(a.length,a.length),null===(r=t.current)||void 0===r||null===(i=r._textArea)||void 0===i||i.focus()}},0),(o&&a.length>0||s.textValue.trim().length>0&&s.textValue.trim()!==i||L.Z.getUploads(e.id,Z.d.FirstThreadMessage).length>0)&&l())},[n,e.id,i,t])}(t,o),E=function(e){let{formOpen:t}=(0,W.xH)(e=>{let{formOpen:t}=e;return{formOpen:t}},c.X),n=(0,W.AF)(),i=(0,P.r)({parentChannel:e});r.useEffect(()=>{let{setNameError:e,setMessageError:t}=n.getState();e(null),t(null)},[t,n]);let l=r.useCallback((t,i,r)=>{let{name:l,textAreaState:a}=n.getState();null==t&&(t=a.textValue),t=t.trim();let{content:s}=T.ZP.parse(e,t);if(t=s,null==i||0===i.length){var o;i=null===(o=w.Z.getStickerPreview(e.id,ei.drafts.type))||void 0===o?void 0:o.map(e=>e.id)}if((null==r||0===r.length)&&(r=L.Z.getUploads(e.id,Z.d.FirstThreadMessage)),null!=r&&r.length>0&&e.isMediaChannel()){let e=r.findIndex(e=>!0===e.isThumbnail);if(e>-1){let t=r[e];r.splice(e,1),r.unshift(t)}}let c=0===l.length,d=(null==t||0===t.length)&&(null==i||0===i.length)&&0===r.length;return{content:t,stickers:i,uploads:r,hasNameError:c,hasMessageError:d}},[e,n]);return r.useCallback(async(t,r,a)=>{let{setNameError:s,setMessageError:o,setSubmitting:c,resetFormState:d,formOpen:u,setFormOpen:m,setPreviewing:h,setFormOpenFromUserAction:g,setGuidelinesOpen:x}=n.getState(),f=U.Z.hasSeen(e.id);if(!u)return(0,G.P_)({guildId:e.guild_id,channelId:e.id}),f||n.getState().setGuidelinesOpen(!0),g(),{shouldClear:!1,shouldRefocus:!1};let{content:p,stickers:v,uploads:C,hasNameError:_,hasMessageError:b}=l(t,r,a);if(s(_?(0,B.V_)():null),o(b?(0,B.T4)():null),_||b)return{shouldClear:!1,shouldRefocus:!0};try{c(!0);let{valid:t}=await (0,z.v)({content:p,stickers:v,uploads:C,type:ei,channel:e});if(!t)return{shouldClear:!1,shouldRefocus:!0};let n=await i(p,v,C);return(0,R.ok)(n),H.Z.resort(e.id),(0,y.qB)(e.id,ei.drafts.type),d(),m(!1),h(!1),U.Z.markAsSeen(e.id),x(!1),{shouldClear:!0,shouldRefocus:!1}}catch(t){var j,N;return(null===(j=t.body)||void 0===j?void 0:j.code)===$.evJ.AUTOMOD_TITLE_BLOCKED?s((0,B.Gx)(t.body,e)):(null===(N=t.body)||void 0===N?void 0:N.code)===$.evJ.AUTOMOD_MESSAGE_BLOCKED&&o((0,B.Gx)(t.body,e)),{shouldClear:!1,shouldRefocus:!0}}finally{c(!1)}},[i,l,e,n])}(t);return r.useLayoutEffect(l,[u,d,_,l]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{"aria-label":s?et.intl.string(et.t.dq7mAQ):et.intl.string(et.t["5h0QOD"]),className:a()(en.container,{[en.collapsed]:!u}),onClick:!u&&s?S:void 0,children:(0,i.jsxs)("form",{onMouseDown:v,onFocus:v,onSubmit:e=>{e.preventDefault(),s&&E()},children:[(0,i.jsxs)("div",{className:en.formContainer,children:[(0,i.jsx)(el,{parentChannel:t,isSearchLoading:n,inputRef:o}),(0,i.jsxs)("div",{className:m?en.previewForm:en.form,children:[(0,i.jsx)(ea,{editorRef:x,parentChannel:t,isSearchLoading:n,inputRef:o,canCreatePost:s}),u&&(0,i.jsx)(ec,{editorRef:x,setEditorRef:f,parentChannel:t,submit:E,disabled:!s}),m&&(0,i.jsx)(ed,{})]}),b&&(I?(0,i.jsx)(N._,{parentChannel:t}):(0,i.jsx)(X.Z,{channelId:t.id}))]}),(0,i.jsxs)("div",{className:en.form,children:[b&&I&&(0,i.jsx)(j.Z,{parentChannel:t}),u&&(0,i.jsx)(em,{className:en.horizontalPadding,parentChannel:t,canCreatePost:s})]})]})})})}let el=r.memo(function(e){let{parentChannel:t,isSearchLoading:n,inputRef:l}=e,{formOpen:a,name:s,textAreaState:o,hasClickedForm:d,submitting:u}=(0,W.xH)(e=>{let{formOpen:t,nameError:n,name:i,previewing:r,textAreaState:l,hasClickedForm:a,submitting:s}=e;return{formOpen:t,nameError:n,name:i,textAreaState:l,previewing:r,hasClickedForm:a,submitting:s}},c.X),m=(0,W.AF)(),h=(0,V.ql)(t),p=r.useCallback(()=>{var e;m.getState().resetFormState(),x.Z.clearDraft(t.id,Z.d.ThreadSettings),x.Z.clearDraft(t.id,Z.d.FirstThreadMessage),f.Z.clearAll(t.id,Z.d.FirstThreadMessage),m.getState().setFormOpen(!1),m.getState().setBodyFocused(!1),m.getState().setTitleFocused(!1),m.getState().setHasClickedForm(!1),m.getState().setPreviewing(!1),null===(e=l.current)||void 0===e||e.blur(),(0,G.Oq)({guildId:t.guild_id,channelId:t.id})},[m,t.id,t.guild_id,l]),v=r.useMemo(()=>n&&!a?(0,i.jsx)(ef,{}):n||a||0!==o.textValue.trim().length&&o.textValue.trim()!==h?!a&&(s.trim().length>0||o.textValue.trim().length>0&&o.textValue.trim()!==h||L.Z.getUploads(t.id,Z.d.FirstThreadMessage).length>0)&&d?(0,i.jsx)(g.vdY,{size:"md",color:"currentColor",className:en.pencilIcon}):u?(0,i.jsx)(g.k$p,{size:"md",color:"currentColor",className:en.closeIconDisabled}):(0,i.jsx)(g.ua7,{text:et.intl.string(et.t["98EPQE"]),children:e=>(0,i.jsx)(g.P3F,{...e,onClick:p,children:(0,i.jsx)(g.k$p,{size:"md",color:"currentColor",className:en.closeIcon})})}):(0,i.jsx)(g._Ve,{size:"md",color:"currentColor",className:en.searchIcon}),[n,a,d,s,o.textValue,p,t.id,h,u]);return(0,i.jsx)("div",{className:en.prefixElement,children:v})}),ea=r.memo(function(e){let{parentChannel:t,inputRef:n,canCreatePost:l,editorRef:a}=e,{formOpen:s,nameError:d,name:u,textAreaState:m,previewing:x}=(0,W.xH)(e=>{let{formOpen:t,nameError:n,name:i,previewing:r,textAreaState:l,hasClickedForm:a,submitting:s}=e;return{formOpen:t,nameError:n,name:i,textAreaState:l,previewing:r,hasClickedForm:a,submitting:s}},c.X),f=(0,W.AF)(),p=null!=t.topic&&0!==t.topic.length,v=U.Z.hasSeen(t.id),C=(0,V.ql)(t),_=(0,h.e7)([F.default],()=>F.default.getCurrentUser());o()(null!=_,"current user cannot be null"),(0,O.yp)({event:$.CkL.FOCUS_COMPOSER_TITLE,handler:()=>{var e;let t=n.current instanceof g.lcI?null===(e=n.current)||void 0===e?void 0:e._textArea:n.current;null==t||t.focus(),f.getState().setTitleFocused(!0),f.getState().setFormOpen(!0),f.getState().setHasClickedForm(!0)}});let b=r.useCallback(e=>{let n=e.clipboardData.files[0];null!=n&&n.type.startsWith("image/")&&(e.preventDefault(),(0,D.d)([n],t,Z.d.FirstThreadMessage),f.getState().setFormOpenFromUserAction())},[t,f]),j=(0,B.Op)(d,{content:u});return(0,i.jsxs)("div",{className:en.titleContainer,onPaste:b,children:[s&&x?(0,i.jsx)(g.X6q,{variant:"heading-md/semibold",className:en.title,children:u}):(0,i.jsx)(g.Kx8,{value:u,placeholder:l?s||m.textValue.length>0&&m.textValue.trim()!==C?et.intl.string(et.t.lU4dDQ):et.intl.string(et.t.CjmivL):et.intl.string(et.t["5h0QOD"]),flex:!0,autosize:s,rows:1,showCharacterCount:!1,showRemainingCharacterCount:!1,maxLength:$.HN8,onChange:e=>{let n=(0,E.Z)(e,!1);f.getState().setName(n);let i=0===n.trim().length,r=0===m.textValue.trim().length,l=m.textValue.trim()===C;i&&(r||l)&&f.getState().setHasClickedForm(!1),s||H.Z.updateForumSearchQuery(t.id,n)},onFocus:()=>{f.getState().setTitleFocused(!0),f.getState().setBodyFocused(!1)},onBlur:()=>{f.getState().setTitleFocused(!1);let e=(0,E.Z)(u,!0);e===u||(f.getState().setName(e),s||H.Z.updateForumSearchQuery(t.id,e))},onKeyDown:e=>{var i,r;"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),s&&u.length>0?null==a||a.focus():l&&e.shiftKey&&((0,G.nH)({guildId:t.guild_id,channelId:t.id}),p&&!v&&f.getState().setGuidelinesOpen(!0),f.getState().setFormOpenFromUserAction(),u.trim().length>0&&(f.getState().setBodyFocused(!0),null==a||a.focus())));let o=n.current instanceof g.lcI?null===(i=n.current)||void 0===i?void 0:i._textArea:n.current;if("Home"===e.key||"End"===e.key){if(null==o)return;if(e.preventDefault(),e.stopPropagation(),"Home"===e.key)o.setSelectionRange(0,0);else{let e=u.length;o.setSelectionRange(e,e)}}"Escape"!==e.key||f.getState().submitting||(null===(r=n.current)||void 0===r||r.blur(),f.getState().setFormOpen(!1),f.getState().setTitleFocused(!1),f.getState().setBodyFocused(!1),f.getState().setPreviewing(!1))},error:j,className:en.title,inputRef:n}),s?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(es,{parentChannel:t}),(0,i.jsx)(eh,{parentChannel:t,canCreatePost:l})]})]})});function es(e){let{parentChannel:t}=e,{guidelinesOpen:n}=(0,W.xH)(e=>{let{guidelinesOpen:t}=e;return{guidelinesOpen:t}},c.X),r=(0,W.AF)(),l=null!=t.topic&&0!==t.topic.length,s=()=>{r.getState().setGuidelinesOpen(!n)};return l?(0,i.jsx)(g.ua7,{text:et.intl.string(et.t["4d4T4u"]),children:e=>(0,i.jsx)(g.P3F,{...e,onClick:s,className:a()(en.forumPostFormButton,{[en.forumPostFormButtonActive]:n}),children:(0,i.jsx)(g.snC,{size:"md",color:"currentColor",...e})})}):null}let eo=r.memo(function(e){let{parentChannel:t,textValue:n}=e,r=new k.ZP({channelId:t.id,content:n}),{content:l}=(0,I.Z)(r,{hideSimpleEmbedContent:!0,isInteracting:!1,formatInline:!1,allowList:!0,allowHeading:!0,previewLinkTarget:!0,allowLinks:!0}),s=(0,S.Z)({message:r,channel:t},l,!1);return(0,i.jsx)("div",{className:a()(en.channelTextAreaInner,en.previewTextArea),children:s})}),ec=r.memo(function(e){let{parentChannel:t,submit:n,disabled:l=!1,editorRef:s,setEditorRef:d}=e,u=(0,h.e7)([F.default],()=>F.default.getCurrentUser());o()(null!=u,"current user cannot be null");let{messageError:m,previewing:x,textAreaState:f,bodyFocused:p,formOpen:v}=(0,W.xH)(e=>{let{messageError:t,textAreaState:n,previewing:i,bodyFocused:r,formOpen:l}=e;return{messageError:t,textAreaState:n,previewing:i,bodyFocused:r,formOpen:l}},c.X),_=(0,W.AF)();r.useEffect(()=>()=>(0,G.Vn)({guildId:t.guild_id,channelId:t.id}),[t.guild_id,t.id]);let j=r.useCallback(()=>{_.getState().setBodyFocused(!0)},[_]),N=r.useCallback(()=>{_.getState().setBodyFocused(!1)},[_]),T=r.useCallback((e,t,n)=>{let{setTextAreaState:i}=_.getState();i({textValue:t,richValue:n})},[_]),I=r.useCallback(e=>{let{value:t,uploads:i,stickers:r}=e;return n(t,r,i)},[n]);(0,O.yp)({event:$.CkL.TEXTAREA_FOCUS,handler:j}),(0,O.yp)({event:$.CkL.TEXTAREA_BLUR,handler:N});let S=(0,B.Op)(m,{content:f.textValue});return(0,i.jsx)("div",{className:en.bodyContainer,children:(0,i.jsxs)("div",{className:en.contentContainer,children:[x?(0,i.jsx)(eo,{parentChannel:t,textValue:f.textValue}):(0,i.jsx)("div",{onClick:j,children:(0,i.jsx)(C.Z,{type:ei,setEditorRef:d,channel:t,placeholder:et.intl.string(et.t["8IPnv7"]),textValue:f.textValue,richValue:f.richValue,focused:p,className:en.channelTextArea,innerClassName:a()(en.channelTextAreaInner,{[en.channelTextAreaInnerError]:null!=S}),onChange:T,onSubmit:I,promptToUpload:D.d,disabled:l,onKeyDown:e=>{if(("ArrowUp"===e.key||"ArrowDown"===e.key)&&e.stopPropagation(),"Home"===e.key||"End"===e.key){if(null==s)return;e.preventDefault(),e.stopPropagation();let t=s.getSlateEditor();if(null==t)return;"Home"===e.key?b.Q.resetSelectionToStart(t):b.Q.resetSelectionToEnd(t)}v&&"Escape"===e.key&&!_.getState().submitting&&(null==s||s.blur(),_.getState().setFormOpen(!1),_.getState().setTitleFocused(!1),_.getState().setBodyFocused(!1),_.getState().setPreviewing(!1))},autoCompletePosition:"bottom"})}),(0,i.jsx)(g.pdY,{error:S})]})})});function ed(){return(0,i.jsx)("div",{className:en.previewModeIndicator,children:(0,i.jsx)(g.Text,{variant:"text-sm/normal",color:"interactive-normal",children:et.intl.string(et.t["WE/cYm"])})})}function eu(){let{previewing:e}=(0,W.xH)(e=>{let{previewing:t}=e;return{previewing:t}},c.X),t=(0,W.AF)(),n=r.useCallback(()=>{t.getState().setPreviewing(!e),(0,G.nE)()},[e,t]);return(0,i.jsx)(g.ua7,{text:e?et.intl.string(et.t.ojM1xM):et.intl.string(et.t.SKNnqq),children:t=>(0,i.jsx)(g.P3F,{...t,onClick:n,className:a()(en.forumPostFormButton,{[en.forumPostFormButtonActive]:e}),children:e?(0,i.jsx)(g.kZF,{size:"md",color:"currentColor",...t}):(0,i.jsx)(g.tEF,{size:"md",color:"currentColor",...t})})})}let em=r.memo(function(e){let{parentChannel:t,canCreatePost:n,className:l}=e,{textAreaState:a,appliedTags:s,name:o}=(0,W.xH)(e=>{let{textAreaState:t,appliedTags:n,name:i}=e;return{textAreaState:t,appliedTags:n,name:i}},c.X),{rateLimitPerUser:d}=t,u=d>0,m=(0,h.e7)([A.Z],()=>A.Z.getSlowmodeCooldownGuess(t.id,A.S.CreateThread)),x=(0,h.e7)([M.Z],()=>M.Z.can($.Plq.MANAGE_THREADS,t)||M.Z.can($.Plq.MANAGE_CHANNELS,t)),f=t.hasFlag(ee.zZ.REQUIRE_TAG)&&0===s.size&&o.length>0&&a.textValue.length>0,p=(0,W.AF)(),C=r.useCallback(()=>{p.getState().setBodyFocused(!1)},[p]),b=r.useMemo(()=>""!==o.trim()&&""!==a.textValue.trim(),[o,a.textValue]);return r.useEffect(()=>{b||p.getState().setPreviewing(!1)},[b,p]),(0,i.jsxs)("div",{className:l,children:[(0,i.jsx)(ex,{parentChannel:t}),(0,i.jsx)("div",{className:en.tagsDivider}),(0,i.jsxs)("div",{className:en.controlsContainer,children:[(0,i.jsxs)("div",{className:en.controls,children:[(0,i.jsxs)("div",{className:en.wrappedControls,children:[(0,i.jsx)(_.Z,{type:ei,textValue:a.textValue,className:en.characterCount}),u&&(0,i.jsx)(J.Z,{rateLimitPerUser:d,slowmodeCooldownGuess:m,isBypassSlowmode:x,leadingIcon:!0})]}),(0,i.jsx)(es,{parentChannel:t}),b&&(0,i.jsx)(eu,{}),(0,i.jsx)(eh,{parentChannel:t,disableIfInvalid:!0,canCreatePost:n,disabled:u&&!x&&m>0})]}),(0,i.jsx)(v.Z,{type:ei,className:en.expressionPicker,onClick:C},"expression")]}),f&&(0,i.jsx)(g.Text,{variant:"text-sm/normal",color:"text-danger",className:en.requiredError,children:et.intl.string(et.t.xPfNQk)})]})});function eh(e){let{parentChannel:t,canCreatePost:n,disabled:r,disableIfInvalid:l=!1}=e,{submitting:a,textAreaState:s,name:o,appliedTags:d,formOpen:u}=(0,W.xH)(e=>{let{submitting:t,textAreaState:n,name:i,appliedTags:r,formOpen:l}=e;return{submitting:t,textAreaState:n,name:i,appliedTags:r,formOpen:l}},c.X),m=t.hasFlag(ee.zZ.REQUIRE_TAG)&&0===d.size&&o.length>0&&s.textValue.length>0,x=(0,h.Wu)([L.Z],()=>L.Z.getUploads(t.id,Z.d.FirstThreadMessage)),f=s.textValue.trim().length>0||x.length>0,p=!m&&f&&o.trim().length>0;if(__OVERLAY__)return null;let v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.jsxs)(g.zxk,{...e,size:g.zxk.Sizes.SMALL,className:en.submitButton,innerClassName:en.submitButtonInner,type:"submit",submitting:a,disabled:l&&!p||r||!n,children:[(0,i.jsx)(g.kBi,{size:"xs",color:"currentColor",className:en.submitIcon}),(0,i.jsx)(g.Text,{variant:"text-md/semibold",color:"none",children:u?et.intl.string(et.t.pIuQIy):et.intl.string(et.t.TyAuoa)})]})};return n?v():(0,i.jsx)(g.ua7,{text:et.intl.string(et.t.iyzwnJ),children:e=>v(e)})}function eg(){return Promise.resolve()}function ex(e){let{parentChannel:t}=e,{appliedTags:n,toggleAppliedTag:l,setPopoutOpen:s}=(0,W.xH)(e=>{let{appliedTags:t,toggleAppliedTag:n,setPopoutOpen:i}=e;return{appliedTags:t,toggleAppliedTag:n,setPopoutOpen:i}},c.X),o=n.size>=Q.Cn,h=(0,d.ZP)({id:"".concat(t.id,"-post-form-tags-navigator"),isEnabled:!0,wrap:!0,scrollToStart:eg,scrollToEnd:eg,orientation:m.hy.HORIZONTAL}),{containerRef:x,containerWidth:f}=(0,Y.Z)(),p=r.useRef(null),[v,C]=r.useState(!0),_=(0,V.Vm)(t),[b,j]=r.useState(0);return(r.useLayoutEffect(()=>{var e;let t=p.current,n=null==t?void 0:null===(e=t.children)||void 0===e?void 0:e[0],i=null==t||null==n||n.clientHeight>t.clientHeight;if(i!==v&&C(i),i&&null!=x.current&&null!=n&&null!=n.children){let{left:e,top:t}=x.current.getBoundingClientRect(),i=0;for(let r of n.children){let{right:n,top:l,height:a}=r.getBoundingClientRect();if(l-t>a)break;n-e>i&&(i=n-e)}j(i)}},[_,v,x,f]),0===_.length)?null:(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:en.tagsContainer,ref:x,children:[(0,i.jsx)(g.lO_,{size:"xs",color:"currentColor",className:en.tagsIcon}),(0,i.jsx)("div",{className:en.tagList,ref:p,children:(0,i.jsx)(u.bG,{navigator:h,children:(0,i.jsx)(u.SJ,{children:e=>{let{ref:t,...r}=e;return(0,i.jsx)("div",{className:en.tagListInner,ref:t,...r,children:_.map(e=>(0,i.jsx)(K.Z,{ariaLabel:et.intl.formatToPlainString(et.t.FSZVIS,{tagName:e.name}),tag:e,onClick:o&&!n.has(e.id)?void 0:()=>l(e.id),disabled:!n.has(e.id)&&n.size>=Q.Cn,selected:n.has(e.id),size:K.Z.Sizes.SMALL},e.id))})}})})}),v&&(0,i.jsx)(g.yRy,{onRequestOpen:()=>s(!0),onRequestClose:()=>s(!1),renderPopout:e=>{let{closePopout:r}=e;return(0,i.jsx)(q.Z,{parentChannel:t,appliedTags:n,maxTagsApplied:o,onSelectTag:l,onClose:r})},position:"bottom",align:"center",children:e=>(0,i.jsxs)(g.zxk,{...e,size:g.zxk.Sizes.TINY,className:en.tagsButton,innerClassName:en.tagsButtonInner,style:{left:b},look:g.zxk.Looks.LINK,"aria-label":et.intl.string(et.t.N5vP9P),children:[et.intl.string(et.t.IkpM1d),(0,i.jsx)(g.CJ0,{size:"custom",color:"currentColor",width:16})]})}),(0,i.jsxs)(g.zxk,{size:g.zxk.Sizes.TINY,className:a()(en.tagsButton,en.tagsButtonPlaceholder),innerClassName:en.tagsButtonInner,look:g.zxk.Looks.LINK,"aria-label":et.intl.string(et.t.N5vP9P),children:[et.intl.string(et.t.IkpM1d),(0,i.jsx)(g.CJ0,{size:"custom",color:"currentColor",width:16})]})]})})}function ef(e){let{style:t,className:n}=e;return(0,i.jsx)("div",{className:n,style:t,children:(0,i.jsx)("div",{className:en.loader})})}},219664:function(e,t,n){"use strict";n.d(t,{Z:()=>z}),n(47120);var i=n(200651),r=n(192379),l=n(120356),a=n.n(l),s=n(683860),o=n(442837),c=n(692547),d=n(481060),u=n(738619),m=n(824578),h=n(841762),g=n(25610),x=n(406432),f=n(169525),p=n(255269),v=n(930282),C=n(524444),_=n(695346),b=n(433355),j=n(592125),N=n(496675),T=n(456269),I=n(109590),S=n(368844),w=n(73315),y=n(404616),E=n(510060),R=n(983200),P=n(196255),k=n(858543),Z=n(482062),M=n(883728),A=n(710352),L=n(981631),F=n(388032),O=n(479686);let z=r.memo(function(e){let{id:t,threadId:n,goToThread:r,overrideMedia:l,className:a,coords:s,gridCoords:c,gridSectionBoundaries:d,observePostVisibilityAnalytics:u}=e,m=(0,o.e7)([j.Z],()=>j.Z.getChannel(n));return null==m?null:(0,i.jsx)(D,{id:t,channel:m,goToThread:r,overrideMedia:l,className:a,coords:s,gridCoords:c,observePostVisibilityAnalytics:u,gridSectionBoundaries:d})});function D(e){let{id:t,channel:n,goToThread:l,overrideMedia:u,className:m,coords:h,gridCoords:g,gridSectionBoundaries:x,observePostVisibilityAnalytics:f}=e,v=(0,o.e7)([j.Z],()=>j.Z.getChannel(n.parent_id)),C=n.id,w=r.useRef(null),R=(0,o.e7)([b.ZP],()=>b.ZP.getCurrentSidebarChannelId(n.parent_id)===n.id),{firstMessage:z,loaded:D}=(0,I.cl)(n),{firstMedia:H}=(0,T.mX)({firstMessage:z,formatInline:!1,noStyleAndInteraction:!1}),{messageCountText:U}=(0,T.nP)(n),{isNew:G,hasUnreads:X}=(0,T.J$)(n),W=r.useRef(null),{handleLeftClick:K,handleRightClick:J}=(0,M.Z)({facepileRef:W,goToThread:l,channel:n});r.useEffect(()=>{null==f||f(w.current,C)},[f,C]);let Y=(0,o.e7)([N.Z],()=>N.Z.can(L.Plq.MANAGE_MESSAGES,n)),Q=_.QK.useSetting(),$=_.cC.useSetting(),ee=(0,p.Z)($,Y),et=(0,S.aU)(z,v,!1),[en,ei]=(0,E.rI)(h.width-2*E.LT),er=(0,T.xw)(n,s.z.CREATION_DATE,A.R6.POSTED_DURATION_AGO),el=(0,y.NN)(n),ea=(null==z?void 0:z.blocked)||null==(null!=u?u:H),{onFocus:es,...eo}=(0,Z.nX)({id:t,row:g.row,column:g.column,section:g.section,boundaries:x}),ec=n.isMediaPost();return(0,i.jsxs)("li",{ref:w,onClick:K,onFocus:es,onContextMenu:J,className:a()(O.container,m,{[O.isOpen]:R}),style:{...h},children:[(0,i.jsx)(d.P3F,{onClick:K,focusProps:{ringTarget:w},onContextMenu:J,"aria-label":F.intl.formatToPlainString(F.t.pgYN6e,{title:n.name,count:U}),className:O.focusTarget,...eo}),(0,i.jsxs)("div",{className:O.header,children:[(0,i.jsxs)("div",{className:O.authorRow,children:[(0,i.jsxs)("div",{className:O.rowGroup,children:[(0,i.jsx)(P.Z,{channel:n,message:z}),(0,i.jsx)(d.Text,{variant:"text-xs/normal",color:"header-secondary",className:O.postCreationTimestamp,children:er})]}),G?(0,i.jsx)(d.IGR,{className:a()(O.newBadge),color:c.Z.unsafe_rawColors.BRAND_260.css,text:F.intl.string(F.t.y2b7CA)}):null]}),(0,i.jsx)(d.y5t,{children:(0,i.jsx)(d.X6q,{variant:"heading-md/extrabold",className:O.title,color:X?"header-primary":"text-muted",style:{width:"".concat(h.width-2*E.I8,"px")},children:el})})]}),(0,i.jsx)("div",{className:O.postBody,children:(0,i.jsx)(d.Rny,{children:ea?(0,i.jsx)(q,{channel:n,firstMessage:z,isFirstMessageLoaded:D,containerWidth:h.width,hasUnreads:X}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V,{mediaAttachments:et,globalSpoilerRenderSetting:ee,containerWidth:en,containerHeight:ec?9/16*en:ei,canAutoPlay:Q,shouldMaintainAspectRatio:ec}),(0,i.jsx)("div",{className:O.tagsRow,children:(0,i.jsx)(k.ZP,{channel:n,tagsClassName:O.tagPill})})]})})}),(0,i.jsx)("div",{className:O.footer,children:(0,i.jsx)(d.Rny,{children:(0,i.jsx)(B,{channel:n,firstMessage:z,facepileRef:W})})})]})}function B(e){let{channel:t,facepileRef:n,firstMessage:r}=e,l=(0,m.Q)(t.id),a=(null==r?void 0:r.reactions)!=null&&r.reactions.length>0;return(0,i.jsxs)("div",{className:O.forumPostControls,children:[(0,i.jsxs)("div",{className:O.controlsGroup,children:[(0,i.jsx)("div",{className:O.messageCountContainer,children:(0,i.jsx)(y.m9,{channel:t,iconSize:16,showReadState:!0})}),l.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:O.bullet,children:"•"}),(0,i.jsxs)("div",{className:O.typing,children:[(0,i.jsx)(y.og,{channel:t,userIds:l,facepileRef:n}),(0,i.jsx)("div",{className:O.dots,children:(0,i.jsx)(d.bbz,{themed:!0,dotRadius:2})}),(0,i.jsx)(u.Z,{channel:t,className:O.typingUsers,renderDots:!1})]})]}):null]}),(0,i.jsxs)("div",{className:O.controlsGroup,children:[a||null==r?null:(0,i.jsx)(y.kZ,{firstMessage:r,channel:t}),null==r?null:(0,i.jsx)(y.au,{firstMessage:r,channel:t})]})]})}let H=e=>e.preventDefault(),U=r.memo(function(e){return(0,i.jsx)(i.Fragment,{children:(0,C.Yi)({...e,analyticsSource:"ForumPostMediaPreviewImage"})})}),V=r.memo(function(e){let{mediaAttachments:t,globalSpoilerRenderSetting:n,containerWidth:l,containerHeight:s,canAutoPlay:o,shouldMaintainAspectRatio:c=!1}=e,{containsVideo:u,containsGif:m}=r.useMemo(()=>(0,S.cp)(t),[t]),p=r.useMemo(()=>t.slice(R.$x,R.GV),[t]),v=(0,R.tu)({numAttachments:p.length,containerWidth:l,containerHeight:s}),C=(0,R.S$)({imageContainerStyles:v,containerWidth:l,containerHeight:s}),_=(0,g.m)(),b=r.useMemo(()=>p.map((e,t)=>{var r;let[l,s]=(0,f.As)(e,!n,_),g=(0,f.MC)(s),p={...C[t],src:e.src,width:e.width,height:e.height,alt:null!=e.alt&&l?g:e.alt,onClick:H,shouldRenderAccessory:!m&&!u},b=(0,x.d$)(e.src)?"".concat(e.src,"?format=png"):e.src,j=o&&!l?e.src:b;return(0,i.jsxs)("div",{className:O.bodyMediaFrame,style:v[t],children:[c?(0,i.jsx)(h.Z,{...p,src:j,backgroundSrc:b,aspectRatio:p.maxWidth/p.maxHeight,alt:null!==(r=p.alt)&&void 0!==r?r:"",className:a()(O.mediaPostContainer,{[O.obscured]:l}),imageChildClassName:O.mediaPostThumbnail}):e.src.startsWith("data:")?(0,i.jsx)(d.Eep,{...p,className:O.mediaContainer,imageClassName:a()(O.thumbnailOverride,{[O.obscured]:l})}):(0,i.jsx)(U,{...p,autoPlay:o&&!l,containerClassName:O.mosaicMediaContainer,imageClassName:a()(O.imageCover,{[O.obscured]:l}),responsive:!0}),l&&(0,i.jsx)("div",{className:O.obscuredTagContainer,children:(0,i.jsx)(w.Z,{obscureReason:s,iconClassname:O.obscuredTag})})]},e.src)}),[o,m,u,n,v,C,p,c,_]);return(0,i.jsxs)("div",{className:O.bodyMedia,style:{width:l,height:s},children:[(0,i.jsx)(i.Fragment,{children:b}),(m||u)&&(0,i.jsxs)("div",{className:O.mediaIconsRow,children:[u&&(0,i.jsx)(d.o1U,{color:"currentColor",size:"custom",width:22,height:22,className:O.mediaIcon}),m&&(0,i.jsx)(d.OUq,{size:"custom",width:29,height:29,color:"currentColor",className:O.mediaIcon})]}),t.length>R.Vn&&(0,i.jsx)(G,{text:(t.length-R.Vn).toString(),icon:d.XBm,pillClassName:O.moreImagesPill,iconClassName:O.moreImagesPillIcon,textClassName:O.moreImagesPillText})]})});function G(e){let{text:t,icon:n,pillClassName:r,iconClassName:l,textClassName:a}=e;return(0,i.jsxs)("div",{className:r,children:[(0,i.jsx)(n,{className:l,color:"currentColor"}),(0,i.jsxs)(d.Text,{variant:"text-xs/medium",className:a,children:["+",t]})]})}function q(e){let{channel:t,firstMessage:n,isFirstMessageLoaded:l,containerWidth:s,hasUnreads:o}=e,[c,u]=(0,E.rI)(s-2*E.LT),{content:m}=(0,T.mX)({firstMessage:n,formatInline:!1,noStyleAndInteraction:!0}),{shouldRenderTagsRow:h}=(0,k.DM)({channel:t,isNew:!1}),g=r.useMemo(()=>({width:c,height:u}),[c,u]),x=o?O.textContentUnread:O.textContentRead;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:O.contentPreview,style:g,children:[(0,i.jsxs)("div",{className:O.content,children:[l&&null==n&&(0,i.jsx)(d.Text,{variant:"text-sm/normal",color:o?"header-secondary":"text-muted",children:F.intl.string(F.t.mE3KJC)}),l&&null!=n&&(0,i.jsx)(v.ZP,{message:n,content:m,className:x})]}),(0,i.jsx)("div",{className:a()(O.textContentFooter,{[O.noTags]:!h}),children:h?(0,i.jsx)(k.ZP,{channel:t,tagsClassName:O.tagPill,className:O.__invalid_row}):null})]})})}},895932:function(e,t,n){"use strict";n.d(t,{Z:()=>u});var i=n(200651);n(192379);var r=n(313361),l=n(683860),a=n(481060),s=n(109434),o=n(228392),c=n(388032),d=n(8332);function u(e){let{channel:t,closePopout:n}=e,{sortOrder:u,layoutType:m}=(0,s.H)(t.id),h=(0,s.v)(),g=t.isMediaChannel(),x=e=>{(0,o.KR)({guildId:t.guild_id,channelId:t.id,sortOrder:e}),h.getState().setSortOrder(t.id,e),n()},f=e=>{(0,o.Do)({guildId:t.guild_id,channelId:t.id,forumLayout:e}),h.getState().setLayoutType(t.id,e),n()};return(0,i.jsx)("div",{className:d.container,children:(0,i.jsxs)(a.v2r,{navId:"sort-and-view","aria-label":g?c.intl.string(c.t["kQN/bm"]):c.intl.string(c.t.DJzbkJ),hideScroller:!0,onClose:n,onSelect:n,children:[(0,i.jsxs)(a.kSQ,{label:c.intl.string(c.t.f8wNDg),children:[(0,i.jsx)(a.k5B,{id:"sort-by-recent-activity",group:"sort-by",label:c.intl.string(c.t.jOPmcH),action:()=>x(l.z.LATEST_ACTIVITY),checked:u===l.z.LATEST_ACTIVITY}),(0,i.jsx)(a.k5B,{id:"sort-by-date-posted",group:"sort-by",label:c.intl.string(c.t.UIltXV),action:()=>x(l.z.CREATION_DATE),checked:u===l.z.CREATION_DATE})]}),!t.isMediaChannel()&&(0,i.jsxs)(a.kSQ,{label:c.intl.string(c.t.mFMDSk),children:[(0,i.jsx)(a.k5B,{id:"view-as-list",group:"view-as",label:c.intl.string(c.t["NJFr+v"]),action:()=>f(r.X.LIST),checked:m===r.X.LIST}),(0,i.jsx)(a.k5B,{id:"view-as-grid",group:"view-as",label:c.intl.string(c.t.wKeggY),action:()=>f(r.X.GRID),checked:m===r.X.GRID})]}),(0,i.jsx)(a.kSQ,{children:(0,i.jsx)(a.sNh,{id:"reset-all",className:d.clearText,label:(0,i.jsx)(a.Text,{variant:"text-sm/medium",color:"none",children:c.intl.string(c.t["3b//lJ"])}),action:()=>{x(t.getDefaultSortOrder()),f(t.getDefaultLayout())}})})]})})}},510060:function(e,t,n){"use strict";n.d(t,{I8:()=>s,KW:()=>m,LT:()=>u,Me:()=>o,eU:()=>c,rI:()=>d});var i=n(512722),r=n.n(i);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let a=2/3,s=12;class o{getWidth(e){return this.getRenderOptions(e).columnWidth}getRenderOptions(e){if(e<=this.minWidth)return{columns:1,columnWidth:this.minWidth};let t=e/this.maxWidth,n=Math.max(Math.floor(t+(e/this.minWidth-t)/2),1),i=this.gap*(n-1);return{columns:n,columnWidth:(e-i)/n}}constructor({minWidth:e,maxWidth:t,gap:n}){l(this,"minWidth",void 0),l(this,"maxWidth",void 0),l(this,"gap",void 0),r()(e<t,"minWidth needs to be smaller than maxWidth"),this.minWidth=e,this.maxWidth=t,this.gap=n}}let c={columns:1,columnWidth:450},d=e=>{let t=e-2,n=Math.ceil(t*a);return[t,n]},u=12,m=e=>60+d(e-2*u)[1]+24+3*s},983200:function(e,t,n){"use strict";n.d(t,{$x:()=>a,GV:()=>s,S$:()=>g,Vn:()=>o,tu:()=>m});var i=n(192379),r=n(31775),l=n.n(r);let a=0,s=4,o=4,c="absolute",d=(e,t,n,i)=>{if(0===n)return[];if(1===n)return[{width:e,height:t,top:0,left:0,position:c}];if(2===n){let n=Math.ceil((e-i)/2);return[{top:0,left:0,position:c,width:n,height:t},{top:0,left:n+i,position:c,width:n,height:t}]}if(3===n){let n=Math.ceil((e-i)/2),r=Math.ceil((t-i)/2);return[{top:0,left:0,position:c,width:n,height:t},{top:0,left:n+i,position:c,width:n,height:r},{top:r+i,left:n+i,position:c,width:n,height:r}]}{let n=Math.ceil((e-i)/2),r=Math.ceil((t-i)/2);return[{top:0,left:0,position:c,width:n,height:r},{top:r+i,left:0,position:c,width:n,height:r},{top:0,left:n+i,position:c,width:n,height:r},{top:r+i,left:n+i,position:c,width:n,height:r}]}},u=new(l())({max:100});function m(e){let{numAttachments:t,containerWidth:n,containerHeight:r}=e;return i.useMemo(()=>(function(e){let{numAttachments:t,containerWidth:n,containerHeight:i}=e,r="".concat(t,"-").concat(n,"-").concat(i),l=u.get(r);if(null!=l)return l;{let e=d(n,i,t,4);return u.set(r,e),e}})({numAttachments:t,containerWidth:n,containerHeight:r}),[t,n,r])}function h(e){return e.map((t,n)=>({minWidth:2*e[n].width,minHeight:2*e[n].height,maxWidth:2*e[n].width,maxHeight:2*e[n].height}))}function g(e){let{imageContainerStyles:t,containerWidth:n,containerHeight:r}=e,l=i.useRef(h(t)),a=i.useRef(n),s=i.useRef(r),o=n>a.current+100,c=r>s.current+100;return(o||c)&&(l.current=h(t)),l.current}},399894:function(e,t,n){"use strict";n.d(t,{Z:()=>m});var i=n(200651);n(192379);var r=n(120356),l=n.n(r),a=n(913527),s=n.n(a),o=n(481060),c=n(70956),d=n(388032),u=n(178850);let m=e=>{let t,n,{rateLimitPerUser:r,slowmodeCooldownGuess:a,isBypassSlowmode:m,leadingIcon:h=!1}=e;if(r>=c.Z.Seconds.HOUR){let e=Math.floor(r/c.Z.Seconds.HOUR),t=Math.floor((r-e*c.Z.Seconds.HOUR)/c.Z.Seconds.MINUTE),i=r-e*c.Z.Seconds.HOUR-t*c.Z.Seconds.MINUTE;n=d.intl.formatToPlainString(d.t.oEwLe3,{hours:e,minutes:t,seconds:i})}else if(r>=60){let e=Math.floor(r/60);n=d.intl.formatToPlainString(d.t.DARKYm,{minutes:e,seconds:r-60*e})}else n=d.intl.formatToPlainString(d.t["9yE8GR"],{seconds:r});if(!m&&a>0){let e=s().duration(a);if(a>c.Z.Millis.HOUR){let n="".concat(e.minutes()).padStart(2,"0"),i="".concat(e.seconds()).padStart(2,"0");t="".concat(e.hours(),":").concat(n,":").concat(i)}else{let n="".concat(e.seconds()).padStart(2,"0");t="".concat(e.minutes(),":").concat(n)}}else t=m?d.intl.string(d.t.SSzXvb):d.intl.string(d.t.Icu3bW);let g=(0,i.jsx)(o.Text,{variant:"text-sm/normal",color:"text-muted",children:t}),x=(0,i.jsx)(o.ANZ,{size:"xs",color:"currentColor",className:l()(u.slowModeIcon,{[u.leadingIcon]:h})});return(0,i.jsx)(o.ua7,{text:n,children:e=>(0,i.jsx)("div",{className:u.cooldownWrapper,...e,children:h?(0,i.jsxs)(i.Fragment,{children:[x,g]}):(0,i.jsxs)(i.Fragment,{children:[g,x]})})})}},276357:function(e,t,n){"use strict";n.d(t,{Z:()=>v}),n(47120);var i=n(200651),r=n(192379),l=n(924826),a=n(91192),s=n(442837),o=n(481060),c=n(607070),d=n(109434),u=n(456269),m=n(228392),h=n(479099),g=n(981631),x=n(388032),f=n(586956);function p(){return Promise.resolve()}function v(e){let{channel:t,closePopout:n,setPopoutRef:v}=e,C=(0,u.Vm)(t),{tagFilter:_}=(0,d.H)(t.id),b=(0,d.v)(),j=(0,s.e7)([c.Z],()=>c.Z.keyboardModeEnabled),N=r.useCallback(e=>{(0,m.e7)({guildId:t.guild_id,channelId:t.id,tagId:e,filterTagIds:Array.from(_),added:!_.has(e),location:{page:g.ZY5.GUILD_CHANNEL,section:g.jXE.FORUM_CHANNEL_HEADER,object:g.qAy.CHANNEL_TAG}}),b.getState().toggleTagFilter(t.id,e)},[t,_,b]),T=r.useCallback(()=>{b.getState().setTagFilter(t.id,new Set),j||n()},[b,t.id,j,n]),I=(0,l.ZP)({id:"".concat(t.id,"-all-tags-dropdown-navigator"),isEnabled:!0,wrap:!0,scrollToStart:p,scrollToEnd:p}),S=r.useRef(null);return r.useEffect(()=>{requestAnimationFrame(()=>{if(null!=S.current){let e=S.current.querySelector(".".concat(f.tag));null!=e&&e.focus()}})},[]),(0,i.jsxs)(o.VqE,{ref:v,"aria-label":x.intl.string(x.t.TdqRTk),className:f.container,children:[(0,i.jsx)("div",{className:f.header,children:(0,i.jsxs)("div",{className:f.headerLeft,children:[(0,i.jsx)(o.X6q,{color:"interactive-normal",variant:"heading-md/semibold",className:f.headerText,children:x.intl.string(x.t.HPu3kp)}),(0,i.jsx)("div",{className:f.countContainer,children:(0,i.jsx)(o.Text,{className:f.countText,color:"none",variant:"text-xs/medium",tabularNumbers:!0,children:_.size})})]})}),(0,i.jsx)(a.bG,{navigator:I,children:(0,i.jsx)(a.SJ,{children:e=>{let{ref:t,...n}=e;return(0,i.jsx)("div",{ref:e=>{t.current=e,S.current=e},...n,className:f.tagContainer,children:C.map(e=>(0,i.jsx)(h.Z,{className:f.tag,tag:e,selected:_.has(e.id),onClick:()=>N(e.id)},e.id))})}})}),(0,i.jsx)("div",{className:f.separator}),(0,i.jsx)(o.zxk,{look:o.zxk.Looks.LINK,size:o.zxk.Sizes.MIN,color:o.zxk.Colors.CUSTOM,className:f.clear,"aria-label":x.intl.string(x.t["98EPQE"]),onClick:T,children:(0,i.jsx)(o.Text,{variant:"text-sm/medium",color:"text-link",children:x.intl.string(x.t["98EPQE"])})})]})}},81490:function(e,t,n){"use strict";n.d(t,{Z:()=>c}),n(47120);var i=n(192379),r=n(796075),l=n(481060);let a="undefined"==typeof ResizeObserver?r.d:ResizeObserver,s=new Map,o=new a(e=>{e.forEach(e=>{var t;let{target:n}=e;null===(t=s.get(n))||void 0===t||t(e)})}),c=()=>{let e=i.useRef(null),[t,n]=i.useState(400),r=i.useCallback(()=>{null!==e.current&&n(e.current.clientWidth)},[n,e]);return(0,l.znF)({ref:e,key:"forum-container",onUpdate:r,resizeObserver:o,listenerMap:s}),{containerRef:e,containerWidth:t}}},482062:function(e,t,n){"use strict";n.d(t,{KT:()=>v,ZP:()=>h,nX:()=>p}),n(47120);var i=n(200651),r=n(192379),l=n(25441),a=n(536895),s=n(260866);let o="data-grid-item-id",c="data-grid-section",d="data-grid-prev-section-boundary",u=new Set([a.R8.UP,a.R8.DOWN,a.R8.LEFT,a.R8.RIGHT]);function m(e){let{section:t,column:n,row:i}=e,r="[".concat(c,'="').concat(t,'"]'),l="[".concat("aria-colindex",'="').concat(n,'"]'),a="[".concat("aria-rowindex",'="').concat(i,'"]');return"".concat(r).concat(l).concat(a)}function h(e){let{id:t,isEnabled:n,setFocus:i}=e,c=r.useRef(null),h=r.useRef(!1),g=r.useRef(null),x=r.useRef(n);r.useLayoutEffect(()=>{x.current=n},[n]);let f=r.useCallback(e=>{var t;return(null!==(t=g.current)&&void 0!==t?t:document).querySelector(e)},[]),p=r.useCallback((e,t)=>{x.current&&i(e,t)},[i]),v=r.useCallback(e=>{if(x.current){var t;null===(t=document.querySelector(e))||void 0===t||t.focus()}},[]),C=r.useCallback(e=>{c.current=e;let n=(0,s.P1)(e,o),i=(0,s.x3)(e);p(n,i),(0,l.h)(t,i,!0)},[t,p]),[_,b]=r.useState(!1),j=r.useRef(_);r.useLayoutEffect(()=>{j.current=_},[_]),r.useLayoutEffect(()=>{let e=g.current;if(null!=e)return e.addEventListener("focusin",n),e.addEventListener("focusout",i),e.addEventListener("focus",r),e.addEventListener("scroll",l,{passive:!0}),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",i),e.removeEventListener("focus",r),e.removeEventListener("scroll",l)};function n(){b(!0)}function i(e){!e.currentTarget.contains(e.relatedTarget)&&(b(!1),requestAnimationFrame(()=>{let e=c.current;null!==e&&null==f((0,s.P1)(e,o))&&v((0,s.P1)(t,"data-grid-id"))}))}function r(){let e=g.current;if(j.current||null==e)return}function l(){h.current=!0}},[t,p,v,C,f]);let N=r.useCallback(e=>{var t,n;if(!x.current)return;let i=c.current,r=g.current;if(null==i)return;let l=(0,s.P1)(i,o),h=null==r?void 0:r.querySelector(l);if(null==h)return;let p=parseInt(null!==(t=h.getAttribute("data-grid-section"))&&void 0!==t?t:""),v=parseInt(h.getAttribute("aria-rowindex")),_=parseInt(h.getAttribute("aria-colindex"));switch(u.has(e.key)&&(e.stopPropagation(),e.preventDefault()),e.key){case a.R8.RIGHT:{let e=f(m({section:p,row:v,column:_+1}));if(null!=e){let t=e.getAttribute(o);null!=t&&C(t)}return}case a.R8.LEFT:{let e=f(m({section:p,row:v,column:_-1}));if(null!=e){let t=e.getAttribute(o);null!=t&&C(t)}return}case a.R8.DOWN:{let e=f(m({section:p,row:v+1,column:_}));if(null==e&&(e=f(m({section:p+1,row:0,column:_}))),null!=e){let t=e.getAttribute(o);null!=t&&C(t)}return}case a.R8.UP:{let e;if(0===v){let t=parseInt(h.getAttribute(d));null==(e=f(m({section:p-1,row:t,column:_})))&&(e=f(m({section:p-1,row:t-1,column:_})))}else e=f(m({section:p,row:v-1,column:_}));if(null!=e){let t=e.getAttribute(o);null!=t&&C(t)}return}case a.R8.SPACE:case a.R8.ENTER:{if(e.repeat)return;let t=c.current;if(null!=t){let i=f((0,s.P1)(t,o)),r=null!==(n=null==i?void 0:i.ownerDocument)&&void 0!==n?n:document,l=i===r.activeElement;null!=i&&l&&(e.preventDefault(),e.stopPropagation(),null==i||i.click())}}}},[f,C]),T=r.useCallback(e=>{let n=null!=e?(0,s.jb)(t,e):null;c.current=n},[t]);return r.useMemo(()=>({id:t,containerProps:{onKeyDown:N,ref:g},setFocus:T}),[t,N,T])}let g={id:"NO_LIST",onKeyDown(){},ref:r.createRef()},x=r.createContext({id:"NO_LIST",setFocus(){}}),f=r.createContext(g);function p(e){let{id:t,section:n,row:i,column:a,boundaries:u}=e,[m,h]=r.useState(0===i&&0===a?0:-1),{id:g,setFocus:f}=r.useContext(x),p=r.useCallback(()=>f(t),[t,f]);return r.useLayoutEffect(()=>(0,l.N)(g,e=>{h(e===t?0:-1)}),[t,g]),{[o]:(0,s.jb)(g,t),[c]:n,[d]:u[n],role:"gridcell","aria-rowindex":i,"aria-colindex":a,tabIndex:m,onFocus:p}}function v(e){let{children:t,navigator:n}=e,{id:l,setFocus:a,containerProps:{onKeyDown:s,ref:o}}=n,c=r.useMemo(()=>({id:l,setFocus:a}),[l,a]),d=r.useMemo(()=>({onKeyDown:s,ref:o,id:l}),[s,o,l]);return(0,i.jsx)(f.Provider,{value:d,children:(0,i.jsx)(x.Provider,{value:c,children:t})})}},260503:function(e,t,n){"use strict";n.d(t,{Z:()=>l});var i=n(192379),r=n(924826);function l(e){let{listRef:t,padding:n,channel:l,isEnabled:a}=e,s=i.useCallback(e=>{let i=t.current,r=document.querySelector(e);null!=r&&(null==i||i.scrollIntoViewNode({node:r,padding:n,callback:()=>{var t;null===(t=document.querySelector(e))||void 0===t||t.focus({preventScroll:!0})}}))},[n,t]),o=i.useCallback(()=>new Promise(e=>{let n=t.current;null==n||n.scrollToTop({callback:()=>requestAnimationFrame(e)})}),[t]),c=i.useCallback(()=>new Promise(e=>{let n=t.current;null==n||n.scrollToBottom({callback:()=>requestAnimationFrame(e)})}),[t]);return(0,r.ZP)({id:"forum-channel-list-".concat(l.id),isEnabled:a,scrollToStart:o,scrollToEnd:c,setFocus:s})}},337077:function(e,t,n){"use strict";n.d(t,{M:()=>c}),n(47120),n(653041);var i=n(192379),r=n(392711),l=n(990169),a=n(591759),s=n(158222),o=n(154135);function c(e,t,n){let c=i.useRef(new Map),[,d]=i.useState(null),[u,m]=i.useState(null),h=i.useMemo(()=>r.debounce((e,n)=>{if(null==n||e||0===t)return;let i=n.match(a.Z.URL_REGEX);if(null==i||0===i.length){c.current=new Map,m(null);return}m(r.uniq(i).slice(0,o.Yh))},1e3),[t,c,m]);i.useEffect(()=>{h(e,n)},[h,n,e]),i.useEffect(()=>{(async function(e,t){if(null==t)return;let n=e.current,i=new Set(n.keys()),r=t.filter(e=>!(null==i?void 0:i.has(e)));if(0!==r.length)try{var l,a,o;let t=await s.V6(r);e.current=(l=new Map(n),a=r,o=null==t?void 0:t.embeds,null==o||o.forEach(e=>{var t,n;let i=(t=a,n=e,t.find(e=>(null==n?void 0:n.url)!=null&&e.startsWith(n.url)));if(null==i)return;let r=l.get(i);null==r?l.set(i,[e]):r.push(e)}),l),d({})}catch(e){}})(c,u)},[u]);let g=(0,l.Z)(c),x=i.useMemo(()=>{let e=[];return null==u||u.forEach(t=>{let n=g.get(t);null!=n&&e.push(...n)}),e.length>0?e:null},[u,g]);return{embeds:e?null:x}}},621516:function(e,t,n){"use strict";n.d(t,{Z:()=>P});var i=n(200651),r=n(192379),l=n(120356),a=n.n(l),s=n(642128),o=n(442837),c=n(780384),d=n(481060),u=n(410030),m=n(607070),h=n(70097),g=n(961675),x=n(883429),f=n(432771),p=n(406074),v=n(434404),C=n(430824),_=n(63063),b=n(595433),j=n(981631),N=n(388032),T=n(846169),I=n(906739),S=n(965358),w=n(420196),y=n(433075);function E(e){let{handleHide:t}=e;return(0,i.jsx)(d.P3F,{onClick:t,className:T.closeButton,"aria-label":N.intl.string(N.t.WAI6xs),children:(0,i.jsx)(d.Dio,{size:"md",color:"currentColor",className:T.closeIcon})})}function R(e){let{username:t,title:n,videoSrc:r,messageCount:l,reaction:s,reactionCount:o,classname:c}=e;return(0,i.jsxs)("div",{className:a()(T.videoPreview,c),children:[(0,i.jsx)("div",{className:T.authorRow,children:(0,i.jsxs)("div",{className:T.rowGroup,children:[(0,i.jsx)(d.Text,{tag:"span",className:T.author,variant:"text-sm/semibold",children:t}),(0,i.jsx)(d.Text,{variant:"text-xs/normal",color:"header-secondary",className:T.postCreationTimestamp,children:N.intl.string(N.t.mA0IvL)})]})}),(0,i.jsx)(d.X6q,{variant:"heading-md/extrabold",className:T.title,color:"header-primary","aria-hidden":!0,children:n}),(0,i.jsx)(d.LZC,{size:10}),(0,i.jsx)(h.Z,{className:T.video,src:r,autoPlay:!0,loop:!0,muted:!0}),(0,i.jsx)(d.LZC,{size:10}),(0,i.jsx)("div",{className:T.footer,children:(0,i.jsxs)("div",{className:T.forumPostControls,children:[(0,i.jsxs)("div",{className:T.messageCountBox,children:[(0,i.jsx)("span",{className:T.messageCountIcon,children:(0,i.jsx)(d.kBi,{size:"xs",color:"currentColor"})}),(0,i.jsx)(d.Text,{variant:"text-xs/normal",color:"interactive-normal",children:l})]}),(0,i.jsxs)("div",{className:T.reactionBox,children:[(0,i.jsx)("span",{role:"img","aria-label":"",children:s}),(0,i.jsx)(d.Text,{variant:"text-xs/normal",color:"interactive-normal",children:o})]})]})})]})}let P=e=>{var t,n;let{channel:l}=e,h=(0,u.ZP)(),P=(0,c.wj)(h),k=(0,o.e7)([C.Z],()=>C.Z.getGuild(l.guild_id)),Z=(0,o.e7)([m.Z],()=>m.Z.useReducedMotion),M=(0,o.e7)([g.Z],()=>g.Z.hasHidden(l.id)),A=(0,p.C)({guildId:l.guild_id,channelId:l.id}),{transitions:L,setVisible:F}=(0,b.H)(),O=r.useCallback(()=>{F(!1),x.Z.hideAdminOnboarding(l.id,!0)},[l,F]);r.useEffect(()=>{(0,f.c)(l.id)||F(!M)},[l,F,M]);let z=r.useMemo(()=>[N.intl.string(N.t["8pEGAw"]),N.intl.string(N.t.jwfgDQ),N.intl.string(N.t.mPKs29),N.intl.string(N.t.StRbvL)],[]),D=r.useMemo(()=>[N.intl.string(N.t["m/b58P"]),N.intl.string(N.t.MuJSKy),N.intl.string(N.t["d/Wqvr"]),N.intl.string(N.t.GJklAw)],[]),B=()=>{v.Z.open(l.guild_id,j.pNK.ROLE_SUBSCRIPTIONS)},H=null!==(t=null==k?void 0:k.hasFeature(j.oNc.ROLE_SUBSCRIPTIONS_AVAILABLE_FOR_PURCHASE))&&void 0!==t&&t?N.intl.string(N.t.n0q7sL):N.intl.string(N.t.QoYdiY),U=null!==(n=(null==k?void 0:k.hasFeature(j.oNc.CREATOR_MONETIZABLE))||(null==k?void 0:k.hasFeature(j.oNc.CREATOR_MONETIZABLE_PROVISIONAL)))&&void 0!==n&&n,V=U?N.intl.string(N.t["G/7ciY"]):N.intl.string(N.t.IFOiio),G=U?N.intl.string(N.t.GjgQOz):N.intl.string(N.t.E7AO6u);return(0,i.jsx)(i.Fragment,{children:L((e,t)=>t?(0,i.jsxs)(s.animated.div,{style:e,className:T.container,children:[(0,i.jsxs)("div",{className:a()(T.__invalid_wrapper,T.headerRow),children:[(0,i.jsxs)(d.Text,{variant:"text-xs/normal",className:T.visibilityInfo,children:[(0,i.jsx)(d.d3s,{size:"xxs",color:"currentColor",className:T.icon}),N.intl.string(N.t.znhX2d)]}),(0,i.jsx)(E,{handleHide:O})]}),(0,i.jsxs)("div",{className:T.contentContainer,children:[(0,i.jsxs)("div",{className:a()(T.contentRow,U&&T.contentRowOne),children:[(0,i.jsx)("div",{className:a()(T.contentMediaContainer),children:(0,i.jsxs)("div",{className:T.contentVideoContainer,children:[(0,i.jsx)(R,{username:N.intl.string(N.t.AkORcn),videoSrc:"https://cdn.discordapp.com/assets/media_channel/admin_edu_discord_birthday.mp4",title:N.intl.string(N.t.yO6Fxs),messageCount:"34",reaction:"⚡️",reactionCount:"724",classname:T.backgroundVideo}),(0,i.jsx)(R,{username:N.intl.string(N.t.DPg3YG),videoSrc:"https://cdn.discordapp.com/assets/media_channel/admin_edu_wumpus_onboarding.mp4",title:N.intl.string(N.t.R5XnCw),messageCount:"34",reactionCount:"84",reaction:"\uD83D\uDC9E",classname:a()(T.backgroundVideo,T.secondaryVideo)}),(0,i.jsx)(R,{username:N.intl.string(N.t.KIele3),videoSrc:"https://cdn.discordapp.com/assets/media_channel/admin_edu_scientist_wumpus.mp4",title:N.intl.string(N.t.pt88VV),messageCount:"7,103",reaction:"⚡️",reactionCount:"724",classname:T.highlightVideo})]})}),(0,i.jsxs)("article",{className:T.contentTextContainer,children:[(0,i.jsx)(d.X6q,{variant:"heading-lg/semibold",color:"header-primary",children:V}),(0,i.jsx)(d.LZC,{size:8}),(0,i.jsx)(d.Text,{variant:"text-md/normal",color:"text-muted",children:G}),(0,i.jsx)(d.LZC,{size:16}),(0,i.jsxs)(d.P3F,{onClick:()=>open(_.Z.getCreatorSupportArticleURL(j.BhN.MEDIA_CHANNEL)),className:T.helpCenterLink,children:[(0,i.jsx)(d.Text,{variant:"text-sm/medium",color:"text-link",className:T.__invalid_helpCenterLinkText,children:N.intl.string(N.t.OahzBQ)}),(0,i.jsx)(d.rgF,{size:"xs",color:"currentColor",className:T.helpCenterLinkIcon})]}),(0,i.jsx)(d.LZC,{size:16}),(0,i.jsx)("div",{className:T.mediaChannelTagsContainer,children:z.map(e=>(0,i.jsx)(d.Text,{variant:"text-sm/medium",color:"text-normal",className:T.mediaChannelTag,children:e},e))})]})]}),U&&(0,i.jsxs)("div",{className:a()(T.contentRow,T.contentRowTwo),children:[(0,i.jsx)("div",{className:a()(T.contentMediaContainer),children:(0,i.jsxs)("div",{className:T.contentImageContainer,children:[(0,i.jsx)("img",{src:P?w:y,alt:"",className:a()(T.previewEmbedImage,T.secondaryImage)}),(0,i.jsx)("img",{src:P?I:S,alt:"",className:T.previewEmbedImage})]})}),(0,i.jsxs)("article",{className:T.contentTextContainer,children:[(0,i.jsxs)(d.Text,{variant:"text-xxs/bold",className:T.serverSubPill,children:[N.intl.string(N.t.NChGw8)," ",(0,i.jsx)("span",{role:"img","aria-label":"",children:"\uD83D\uDD25"})]}),(0,i.jsx)(d.LZC,{size:10}),(0,i.jsx)(d.X6q,{variant:"heading-lg/semibold",color:"header-primary",children:N.intl.string(N.t["N/TRra"])}),(0,i.jsx)(d.LZC,{size:8}),(0,i.jsx)(d.Text,{variant:"text-md/normal",color:"text-muted",children:N.intl.string(N.t.t3yWxM)}),(0,i.jsx)(d.LZC,{size:16}),(0,i.jsx)("div",{className:T.mediaChannelTagsContainer,children:D.map(e=>(0,i.jsx)(d.Text,{variant:"text-sm/medium",color:"text-normal",className:T.mediaChannelTag,children:e},e))}),(0,i.jsx)(d.LZC,{size:16}),0===A.length&&(0,i.jsx)(d.gtL,{size:d.zxk.Sizes.MEDIUM,pauseAnimation:Z,onClick:B,className:T.addChannelButton,color:d.zxk.Colors.CUSTOM,children:H})]})]})]})]}):null)})}},284182:function(e,t,n){"use strict";n.d(t,{Z:()=>h});var i=n(200651);n(192379);var r=n(399606),l=n(481060),a=n(541716),s=n(859235),o=n(898463),c=n(76451),d=n(117530),u=n(388032),m=n(479793);function h(e){let{parentChannel:t}=e,n=(0,r.Wu)([d.Z],()=>{let e=d.Z.getUploads(t.id,a.Ie.CREATE_FORUM_POST.drafts.type);return null==e?void 0:e.filter(e=>!0!==e.isThumbnail)});return(0,i.jsxs)("div",{className:m.container,children:[(0,i.jsx)(l.Text,{variant:"text-md/semibold",color:"text-muted",children:u.intl.string(u.t.omKGKi)}),(0,i.jsx)(l.Text,{variant:"text-sm/normal",color:"text-muted",children:u.intl.string(u.t.zUjLl5)}),(0,i.jsx)("div",{children:(0,i.jsx)(l.zJl,{className:m.uploadsContainer,orientation:"horizontal",paddingFix:!1,fade:!0,children:(0,i.jsxs)("div",{className:m.uploads,children:[n.map(e=>(0,i.jsx)(o.Z,{channelId:t.id,draftType:a.Ie.CREATE_FORUM_POST.drafts.type,upload:e,keyboardModeEnabled:!0,hideFileName:!0,size:s.q.SMALL},e.id)),(0,i.jsx)(c._,{channelId:t.id})]})})})]})}},795639:function(e,t,n){"use strict";n.d(t,{_:()=>E});var i=n(200651),r=n(192379),l=n(120356),a=n.n(l),s=n(512722),o=n.n(s),c=n(232713),d=n(399606),u=n(481060),m=n(166459),h=n(607070),g=n(541716),x=n(273031),f=n(859235),p=n(313201),v=n(70097),C=n(374794),_=n(470623),b=n(983200),j=n(127654),N=n(809639),T=n(388032),I=n(580267);let S=[{name:"Media Post Thumbnail",extensions:["jpg","jpeg","png","gif","webp"]}],w=(0,p.hQ)();function y(e){let{mediaAttachments:t,containerWidth:n,containerHeight:r}=e,l=(0,b.tu)({numAttachments:t.length,containerWidth:n,containerHeight:r});return(0,i.jsx)(i.Fragment,{children:t.map((e,t)=>{var n;return(0,i.jsx)("div",{style:l[t],children:!0===e.isVideo?(0,i.jsx)(v.Z,{src:e.src,className:I.thumbnail,"aria-hidden":!0}):(0,i.jsx)("img",{src:e.src,className:I.thumbnail,"aria-hidden":!0,alt:null!==(n=null==e?void 0:e.alt)&&void 0!==n?n:""})},e.src)})})}let E=e=>{var t;let{parentChannel:l}=e,{textAreaState:s}=(0,_.xH)(e=>{let{textAreaState:t}=e;return{textAreaState:t}},c.X),p=(0,d.e7)([h.Z],()=>h.Z.keyboardModeEnabled),v=(0,N.Z)(l,null===(t=s.textValue)||void 0===t?void 0:t.trim()),b=r.useMemo(()=>v.find(e=>e.isThumbnail),[v]),E=null!=v&&v.length>0,R=r.useMemo(()=>{let e=(null==v?void 0:v.length)>1?1.15:1;return{width:153*e,height:86*e}},[v]),P=r.useCallback(e=>{null!=b&&m.Z.remove(l.id,b.id,g.Ie.CREATE_FORUM_POST.drafts.type),(0,j.d)(e.currentTarget.files,l,g.Ie.CREATE_FORUM_POST.drafts.type,{requireConfirm:!0,isThumbnail:!0}),e.currentTarget.value=null},[l,b]),k=e=>{e.stopPropagation(),(null==b?void 0:b.upload)!=null&&(0,u.ZDy)(async()=>{let e=b.upload;o()(null!=e,"upload should not be null");let{default:t}=await Promise.resolve().then(n.bind(n,95152));return n=>(0,i.jsx)(t,{...n,upload:e,channelId:l.id,draftType:g.Ie.CREATE_FORUM_POST.drafts.type,onSubmit:t=>{let{name:n,description:i,spoiler:r}=t;m.Z.update(l.id,e.id,g.Ie.CREATE_FORUM_POST.drafts.type,{filename:n,description:i,spoiler:r})},disableSpoiler:!0})})},Z=(0,i.jsx)(C.Z,{color:u.Ttl.CUSTOM,className:a()(I.uploadFileInputContainer),innerClassName:I.uploadThumbnailContainer,onChange:P,multiple:!1,"aria-hidden":!0,filters:S,"aria-describedby":w,"aria-label":E?T.intl.string(T.t.MxJI3d):T.intl.string(T.t.CbiofX),children:E?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y,{mediaAttachments:v,containerWidth:R.width,containerHeight:R.height}),(0,i.jsxs)("div",{className:a()(I.changeThumbnailLabelContainer,{[I.changeThumbnailLabelOverflow]:(null==v?void 0:v.length)>2}),children:[(0,i.jsx)(u.Text,{variant:"text-xs/medium",color:"header-secondary",children:T.intl.string(T.t.MxJI3d)}),null==b&&(0,i.jsx)(u.vdY,{size:"xs",color:"currentColor",className:I.editIcon})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.FmF,{size:"custom",width:39,height:39,color:"currentColor",className:I.uploadIcon}),(0,i.jsx)(u.Text,{variant:"text-xs/normal",color:"text-muted",children:T.intl.string(T.t.CbiofX)})]})});return(0,i.jsx)("div",{className:I.thumbnailContainer,style:R,children:null!=b?(0,i.jsx)(f.Z,{actions:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.Z,{className:I.action,tooltip:T.intl.string(T.t.Y8ujqq),onClick:k,children:(0,i.jsx)(u.vdY,{size:"xs",color:"currentColor"})}),(0,i.jsx)(x.Z,{className:I.action,tooltip:T.intl.string(T.t.vN7REx),onClick:()=>m.Z.remove(l.id,b.id,g.Ie.CREATE_FORUM_POST.drafts.type),dangerous:!0,children:(0,i.jsx)(u.XHJ,{size:"md",color:"currentColor"})})]}),draftType:g.Ie.CREATE_FORUM_POST.drafts.type,id:b.id,channelId:l.id,handleEditModal:k,keyboardModeEnabled:p,size:f.q.SMALL,className:I.attachmentListItem,children:Z}):(0,i.jsx)(i.Fragment,{children:Z})})}},809639:function(e,t,n){"use strict";n.d(t,{Z:()=>c}),n(390547),n(47120),n(653041),n(315314),n(309749),n(610138),n(216116),n(78328),n(815648);var i=n(192379),r=n(399606),l=n(541716),a=n(117530),s=n(154135),o=n(337077);function c(e,t){var n,c;let{mediaAttachments:d,hasThumbnail:u}=function(e){let[t,n]=i.useState(null),o=(0,r.Wu)([a.Z],()=>{let t=a.Z.getUploads(e.id,l.Ie.CREATE_FORUM_POST.drafts.type),n=t.find(e=>e.isThumbnail);return null!=n?[n]:t.filter(e=>e.isVideo||e.isImage)}),c=i.useMemo(()=>o.some(e=>e.isThumbnail),[o]);return i.useEffect(()=>{let e=[];return n(o.slice(0,s.Yh).flatMap(t=>{var n;let i=null==t?void 0:null===(n=t.item)||void 0===n?void 0:n.file;if(null==i)return[];let r=URL.createObjectURL(i);return e.push(r),{id:t.id,src:r,spoiler:t.spoiler,alt:t.description,isThumbnail:t.isThumbnail,upload:!0===t.isThumbnail?t:void 0,isVideo:t.isVideo}})),()=>{n(null),e.forEach(e=>URL.revokeObjectURL(e))}},[o]),{mediaAttachments:t,hasThumbnail:c}}(e),m=Math.max(s.Yh-(null!==(n=null==d?void 0:d.length)&&void 0!==n?n:0),0),{embeds:h}=(0,o.M)(u,m,t),g=i.useMemo(()=>null==h?void 0:h.flatMap(e=>{let t=(0,s.Vh)(e);return null==t?[]:{id:t,src:t,spoiler:!1,alt:e.title}}),[h]),x=[...null!=d?d:[]];return!u&&m>0&&x.push(...null!==(c=null==g?void 0:g.slice(0,m))&&void 0!==c?c:[]),x}},595433:function(e,t,n){"use strict";n.d(t,{H:()=>l}),n(47120);var i=n(192379),r=n(481060);function l(){let[e,t]=i.useState(!0);return{transitions:(0,r.Yzy)(e,{keys:e=>e?"shown":"hidden",config:a,from:{opacity:0},enter:{opacity:1},leave:{opacity:0},unique:!0}),setVisible:t}}let a={mass:1,tension:250,friction:18,clamp:!0}},586956:function(e,t,n){"use strict";e.exports={container:"container__5808f",header:"header__5808f",headerLeft:"headerLeft__5808f",headerText:"headerText__5808f",countContainer:"countContainer__5808f",countText:"countText__5808f",tagContainer:"tagContainer__5808f",tag:"tag__5808f",clear:"clear__5808f",row:"row__5808f",separator:"separator__5808f"}},72895:function(e,t,n){"use strict";n.r(e.exports={container:"container_f369db",uploadArea:"uploadArea_f369db",label:"label_f369db",content:"content_f369db",grid:"grid_f369db",list:"list_f369db",noListContainer:"noListContainer_f369db",headerRow:"headerRow_f369db",card:"card_f369db",columnsSpan:"columnsSpan_f369db",emptyStateRow:"emptyStateRow_f369db",newMemberBanner:"newMemberBanner_f369db",gridViewBanner:"gridViewBanner_f369db",placeholder:"placeholder_f369db",mainCard:"mainCard_f369db",emptyMainCard:"emptyMainCard_f369db",outOfDate:"outOfDate_f369db",header:"header_f369db",matchingPostsRow:"matchingPostsRow_f369db",headerWithMatchingPosts:"headerWithMatchingPosts_f369db",noForm:"noForm_f369db",sortContainer:"sortContainer_f369db",sort:"sort_f369db",sortPopout:"sortPopout_f369db",archivedDividerRow:"archivedDividerRow_f369db",archivedDivider:"archivedDivider_f369db",newPostsButton:"newPostsButton_f369db",loadingCard:"loadingCard_f369db","loadingCard-0":"loadingCard-0_f369db","loadingCard-1":"loadingCard-1_f369db","loadingCard-2":"loadingCard-2_f369db",enterIcon:"enterIcon_f369db",warnIcon:"warnIcon_f369db",searchIcon:"searchIcon_f369db",missingReadHistoryPermission:"missingReadHistoryPermission_f369db",divider:"divider_f369db",tagsContainer:"tagsContainer_f369db",filterIcon:"filterIcon_f369db",tagList:"tagList_f369db",tagListInner:"tagListInner_f369db",tag:"tag_f369db",tagsButton:"tagsButton_f369db",tagsButtonInner:"tagsButtonInner_f369db",tagsButtonPlaceholder:"tagsButtonPlaceholder_f369db",tagsButtonWithCount:"tagsButtonWithCount_f369db",sortDropdown:"sortDropdown_f369db",sortDropdownInner:"sortDropdownInner_f369db",sortDropdownText:"sortDropdownText_f369db",clear:"clear_f369db",matchingPosts:"matchingPosts_f369db",startPostHelp:"startPostHelp_f369db",tagsSpacer:"tagsSpacer_f369db",keyboardShortcut:"keyboardShortcut_f369db",key:"key_f369db",countContainer:"countContainer_f369db",countText:"countText_f369db",optInNotice:"optInNotice_f369db"})},254978:function(e,t,n){"use strict";e.exports={container:"container_a68543",wrapper:"wrapper_a68543",headerRow:"headerRow_a68543",header:"header_a68543",visibilityInfo:"visibilityInfo_a68543",icon:"icon_a68543",closeButton:"closeButton_a68543",closeIcon:"closeIcon_a68543",stepContainer:"stepContainer_a68543",stepDescription:"stepDescription_a68543",completed:"completed_a68543",stepName:"stepName_a68543",checklist:"checklist_a68543",stepStatus:"stepStatus_a68543",step:"step_a68543",rolesList:"rolesList_a68543",rolePill:"rolePill_a68543",listContainer:"listContainer_a68543"}},574816:function(e,t,n){"use strict";e.exports={container:"container__93db4",iconContainer:"iconContainer__93db4",icon:"icon__93db4",stars:"stars__93db4",header:"header__93db4",cta:"cta__93db4",button:"button__93db4"}},480265:function(e,t,n){"use strict";e.exports={container:"container_ca49a1",guidelines:"guidelines_ca49a1",guidelinesHeader:"guidelinesHeader_ca49a1",headerContainer:"headerContainer_ca49a1",descriptionContainer:"descriptionContainer_ca49a1",showMore:"showMore_ca49a1",gradient:"gradient_ca49a1",linkContainer:"linkContainer_ca49a1",showMoreLink:"showMoreLink_ca49a1",showMoreText:"showMoreText_ca49a1",showMoreIcon:"showMoreIcon_ca49a1",clickable:"clickable_ca49a1",hiddenVisually:"hiddenVisually_ca49a1"}},821253:function(e,t,n){"use strict";e.exports={container:"container__56dee",author:"author__56dee",closeIcon:"closeIcon__56dee",inline:"inline__56dee",discordIcon:"discordIcon__56dee",title:"title__56dee",notice:"notice__56dee",infoIcon:"infoIcon__56dee",separator:"separator__56dee"}},763890:function(e,t,n){"use strict";e.exports={uploadInput:"uploadInput__94439",uploadIcon:"uploadIcon__94439",fileInput:"fileInput__94439",container:"container__94439",popoutContainer:"popoutContainer__94439",popout:"popout__94439",uploads:"uploads__94439",badge:"badge__94439"}},523247:function(e,t,n){"use strict";e.exports={container:"container_d9be46",formContainer:"formContainer_d9be46",horizontalPadding:"horizontalPadding_d9be46",form:"form_d9be46",previewForm:"previewForm_d9be46",prefixElement:"prefixElement_d9be46",titleContainer:"titleContainer_d9be46",title:"title_d9be46",collapsed:"collapsed_d9be46",bodyContainer:"bodyContainer_d9be46",contentContainer:"contentContainer_d9be46",channelTextArea:"channelTextArea_d9be46",channelTextAreaInner:"channelTextAreaInner_d9be46",previewTextArea:"previewTextArea_d9be46",channelTextAreaInnerError:"channelTextAreaInnerError_d9be46",controlsContainer:"controlsContainer_d9be46",controls:"controls_d9be46",wrappedControls:"wrappedControls_d9be46",requiredError:"requiredError_d9be46",characterCount:"characterCount_d9be46",expressionPicker:"expressionPicker_d9be46",submitButton:"submitButton_d9be46",submitButtonInner:"submitButtonInner_d9be46",submitIcon:"submitIcon_d9be46",tagsContainer:"tagsContainer_d9be46",tagsIcon:"tagsIcon_d9be46",tagList:"tagList_d9be46",tagListInner:"tagListInner_d9be46",tagsButton:"tagsButton_d9be46",tagsButtonInner:"tagsButtonInner_d9be46",tagsButtonPlaceholder:"tagsButtonPlaceholder_d9be46",tagsDivider:"tagsDivider_d9be46",closeIcon:"closeIcon_d9be46",closeIconDisabled:"closeIconDisabled_d9be46",searchIcon:"searchIcon_d9be46",pencilIcon:"pencilIcon_d9be46",loader:"loader_d9be46",loaderAnimation:"loaderAnimation_d9be46",forumPostFormButton:"forumPostFormButton_d9be46",forumPostFormButtonActive:"forumPostFormButtonActive_d9be46",previewModeIndicator:"previewModeIndicator_d9be46"}},479686:function(e,t,n){"use strict";e.exports={focusTarget:"focusTarget__9a337",obscuredTagContainer:"obscuredTagContainer__9a337",obscuredTag:"obscuredTag__9a337",thumbnailOverride:"thumbnailOverride__9a337",imageCover:"imageCover__9a337",obscured:"obscured__9a337",bullet:"bullet__9a337",typing:"typing__9a337",dots:"dots__9a337",typingUsers:"typingUsers__9a337",mediaIconsRow:"mediaIconsRow__9a337",mediaIcon:"mediaIcon__9a337",moreImagesPill:"moreImagesPill__9a337",moreImagesPillIcon:"moreImagesPillIcon__9a337",moreImagesPillText:"moreImagesPillText__9a337",container:"container__9a337",mosaicMediaContainer:"mosaicMediaContainer__9a337",isOpen:"isOpen__9a337",mediaContainer:"mediaContainer__9a337",bodyMedia:"bodyMedia__9a337",bodyMediaFrame:"bodyMediaFrame__9a337",postBody:"postBody__9a337",tagsRow:"tagsRow__9a337",header:"header__9a337",footer:"footer__9a337",title:"title__9a337",forumPostControls:"forumPostControls__9a337",controlsGroup:"controlsGroup__9a337",contentPreview:"contentPreview__9a337",content:"content__9a337",textContentFooter:"textContentFooter__9a337",noTags:"noTags__9a337",tagPill:"tagPill__9a337",authorRow:"authorRow__9a337",rowGroup:"rowGroup__9a337",postCreationTimestamp:"postCreationTimestamp__9a337",messageCountContainer:"messageCountContainer__9a337",newBadge:"newBadge__9a337",textContentUnread:"textContentUnread__9a337",textContentRead:"textContentRead__9a337",mediaPostContainer:"mediaPostContainer__9a337",mediaPostThumbnail:"mediaPostThumbnail__9a337"}},8332:function(e,t,n){"use strict";e.exports={container:"container_f8b2d2",clearText:"clearText_f8b2d2"}},178850:function(e,t,n){"use strict";e.exports={cooldownWrapper:"cooldownWrapper__7391f",slowModeIcon:"slowModeIcon__7391f",leadingIcon:"leadingIcon__7391f"}},846169:function(e,t,n){"use strict";e.exports={container:"container_c6ad88",headerRow:"headerRow_c6ad88",visibilityInfo:"visibilityInfo_c6ad88",icon:"icon_c6ad88",closeButton:"closeButton_c6ad88",closeIcon:"closeIcon_c6ad88",contentContainer:"contentContainer_c6ad88",contentRow:"contentRow_c6ad88",contentMediaContainer:"contentMediaContainer_c6ad88",contentRowOne:"contentRowOne_c6ad88",contentImageContainer:"contentImageContainer_c6ad88",previewEmbedImage:"previewEmbedImage_c6ad88",secondaryImage:"secondaryImage_c6ad88",serverSubPill:"serverSubPill_c6ad88",addChannelButton:"addChannelButton_c6ad88",contentRowTwo:"contentRowTwo_c6ad88",contentVideoContainer:"contentVideoContainer_c6ad88",contentTextContainer:"contentTextContainer_c6ad88",mediaChannelTagsContainer:"mediaChannelTagsContainer_c6ad88",mediaChannelTag:"mediaChannelTag_c6ad88",helpCenterLink:"helpCenterLink_c6ad88",helpCenterLinkIcon:"helpCenterLinkIcon_c6ad88",videoPreview:"videoPreview_c6ad88",authorRow:"authorRow_c6ad88",rowGroup:"rowGroup_c6ad88",author:"author_c6ad88",title:"title_c6ad88",postCreationTimestamp:"postCreationTimestamp_c6ad88",messageCountBox:"messageCountBox_c6ad88",messageCountIcon:"messageCountIcon_c6ad88",footer:"footer_c6ad88",forumPostControls:"forumPostControls_c6ad88",reactionBox:"reactionBox_c6ad88",video:"video_c6ad88",backgroundVideo:"backgroundVideo_c6ad88",secondaryVideo:"secondaryVideo_c6ad88",highlightVideo:"highlightVideo_c6ad88"}},479793:function(e,t,n){"use strict";e.exports={container:"container__16689",uploads:"uploads__16689",uploadsContainer:"uploadsContainer__16689"}},580267:function(e,t,n){"use strict";e.exports={thumbnailContainer:"thumbnailContainer__8bb30",uploadThumbnailContainer:"uploadThumbnailContainer__8bb30",uploadFileInputContainer:"uploadFileInputContainer__8bb30",changeThumbnailLabelContainer:"changeThumbnailLabelContainer__8bb30",editIcon:"editIcon__8bb30",uploadIcon:"uploadIcon__8bb30",thumbnail:"thumbnail__8bb30",attachmentListItem:"attachmentListItem__8bb30",action:"action__8bb30",changeThumbnailLabelOverflow:"changeThumbnailLabelOverflow__8bb30"}}}]);
//# sourceMappingURL=d9749c304967f207.js.map