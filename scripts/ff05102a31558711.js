"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["52030"],{48550:function(e,t,n){n.d(t,{P:()=>i});var l=n(388032);let i={get webauthn(){return l.intl.string(l.t.gTH4Dg)},get totp(){return l.intl.string(l.t.nXKmyc)},get sms(){return l.intl.string(l.t.ZbVwZW)},get password(){return l.intl.string(l.t["8F6hKS"])},get backup(){return l.intl.string(l.t.vhSRKS)}}},124860:function(e,t,n){n.d(t,{Cd:()=>m,YR:()=>x}),n(47120),n(411104);var l=n(200651),i=n(192379),s=n(481060),r=n(447097),o=n(873124),a=n(248902),d=n(160511),u=n(51693),c=n(973810),h=n(388032);function m(e){var t,n;let{mfaChallenge:h,mfaFinish:m,onEarlyClose:f,onClose:x,width:g=440}=e,[S,v]=i.useState(null!==(n=null===(t=h.methods[0])||void 0===t?void 0:t.type)&&void 0!==n?n:"select"),[p,j]=i.useState(S),b=async e=>{let{mfaType:t,data:n}=e;await m({mfaType:t,data:n,ticket:h.ticket}),null!=x&&x()},C={mfaChallenge:h,finish:b,setSlide:v,onClose:f};return(0,l.jsxs)(s.MyZ,{activeSlide:S,width:g,onSlideReady:j,children:[(0,l.jsx)(s.Mi4,{id:"select",children:(0,l.jsx)(a.Z,{...C})}),(0,l.jsx)(s.Mi4,{id:"webauthn",children:(0,l.jsx)(c.Z,{...C})}),(0,l.jsx)(s.Mi4,{id:"totp",children:(0,l.jsx)(u.Z,{...C,isSlideReady:"totp"===p})}),(0,l.jsx)(s.Mi4,{id:"sms",children:(0,l.jsx)(d.Z,{...C,isSlideReady:"sms"===p})}),(0,l.jsx)(s.Mi4,{id:"backup",children:(0,l.jsx)(r.Z,{...C,isSlideReady:"backup"===p})}),(0,l.jsx)(s.Mi4,{id:"password",children:(0,l.jsx)(o.Z,{...C,isSlideReady:"password"===p})})]})}function f(e){let{mfaChallenge:t,finish:n,transitionState:i,onClose:r}=e;return(0,l.jsx)(s.Y0X,{transitionState:i,size:s.CgR.SMALL,"aria-label":h.intl.string(h.t.saHocH),children:(0,l.jsx)(m,{mfaChallenge:t,mfaFinish:n,onClose:r,onEarlyClose:r})})}function x(e,t,n){(0,s.h7j)(n=>(0,l.jsx)(f,{finish:t,mfaChallenge:e,...n}),{onCloseCallback:()=>{n(Error(h.intl.string(h.t.N2yb9f)))}})}},507453:function(e,t,n){n.d(t,{Z:()=>a});var l=n(200651);n(192379);var i=n(481060),s=n(600164),r=n(388032),o=n(668216);let a={SlideContent:function(e){let{children:t,scrollbarType:n}=e;return(0,l.jsx)(i.hzk,{className:o.content,scrollbarType:n,children:t})},SlideError:function(e){let{error:t}=e;return null==t?null:(0,l.jsx)(i.Text,{className:o.error,variant:"text-sm/normal",color:"text-danger",children:t})},SlideFooter:function(e){let{mfaChallenge:t,setSlide:n,showConfirm:a=!1,...d}=e,u=t.methods.length>1;return u||a?(0,l.jsxs)(i.mzw,{className:o.footer,direction:a&&!u?s.Z.Direction.HORIZONTAL_REVERSE:s.Z.Direction.HORIZONTAL,children:[u&&(0,l.jsx)(i.zxk,{look:i.zxk.Looks.LINK,onClick:()=>n("select"),color:i.zxk.Colors.PRIMARY,children:r.intl.string(r.t.Tot4EB)}),a&&(0,l.jsx)(i.zxk,{type:"submit",...d,children:r.intl.string(r.t["cY+Ooa"])})]}):null},SlideHeader:function(e){let{subtitle:t,onClose:n}=e;return(0,l.jsxs)(i.xBx,{direction:s.Z.Direction.VERTICAL,className:o.header,separator:!1,children:[(0,l.jsx)(i.X6q,{variant:"heading-xl/semibold",children:r.intl.string(r.t.saHocH)}),null!=t&&(0,l.jsx)(i.Text,{color:"header-secondary",variant:"text-md/normal",className:o.subtitle,children:t}),(0,l.jsx)(i.olH,{className:o.closeButton,onClick:n})]})}}},447097:function(e,t,n){n.d(t,{Z:()=>d}),n(757143),n(47120),n(773603);var l=n(200651),i=n(192379),s=n(658550),r=n(481060),o=n(507453),a=n(388032);function d(e){let{mfaChallenge:t,finish:n,setSlide:d,onClose:u,isSlideReady:c}=e,[h,m]=i.useState(!1),[f,x]=i.useState(null),[g,S]=i.useState(""),v=i.useRef(null),p=a.intl.string(a.t["C/ZAw8"]),j=a.intl.string(a.t.fZSi1N),b=i.useCallback(e=>{S(e),x(null)},[S,x]);return i.useEffect(()=>{if(c){var e;null===(e=v.current)||void 0===e||e.focus()}},[c]),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m(!0),n({mfaType:"backup",data:g.replace(/-/g,"")}).catch(e=>{var t,n;x(null!==(n=null===(t=e.body)||void 0===t?void 0:t.message)&&void 0!==n?n:e.message)}).finally(()=>{m(!1)})},children:[(0,l.jsx)(o.Z.SlideHeader,{onClose:u}),(0,l.jsx)(o.Z.SlideContent,{children:(0,l.jsxs)(r.xJW,{title:p,children:[(0,l.jsx)(r.oil,{inputRef:v,onChange:b,placeholder:j,maxLength:s.tL,minLength:s.th,value:g,spellCheck:"false",disabled:h}),(0,l.jsx)(o.Z.SlideError,{error:f})]})}),(0,l.jsx)(o.Z.SlideFooter,{mfaChallenge:t,setSlide:d,showConfirm:!0,disabled:g.length<8,submitting:h})]})}},873124:function(e,t,n){n.d(t,{Z:()=>a}),n(47120),n(773603);var l=n(200651),i=n(192379),s=n(481060),r=n(507453),o=n(388032);function a(e){let{mfaChallenge:t,finish:n,setSlide:a,onClose:d,isSlideReady:u}=e,[c,h]=i.useState(!1),[m,f]=i.useState(null),[x,g]=i.useState(""),S=i.useRef(null);return i.useEffect(()=>{if(u){var e;null===(e=S.current)||void 0===e||e.focus()}},[u]),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),h(!0),n({mfaType:"password",data:x}).catch(e=>{var t,n;f(null!==(n=null===(t=e.body)||void 0===t?void 0:t.message)&&void 0!==n?n:e.message)}).finally(()=>{h(!1)})},children:[(0,l.jsx)(r.Z.SlideHeader,{onClose:d}),(0,l.jsx)(r.Z.SlideContent,{children:(0,l.jsxs)(s.xJW,{title:o.intl.string(o.t["CIGa+/"]),children:[(0,l.jsx)(s.oil,{inputRef:S,onChange:g,value:x,type:"password",autoComplete:"password",spellCheck:"false",disabled:c}),(0,l.jsx)(r.Z.SlideError,{error:m})]})}),(0,l.jsx)(r.Z.SlideFooter,{mfaChallenge:t,setSlide:a,showConfirm:!0,disabled:0===x.length,submitting:c})]})}},248902:function(e,t,n){n.d(t,{Z:()=>d});var l=n(200651);n(192379);var i=n(481060),s=n(507453),r=n(48550),o=n(388032),a=n(668216);function d(e){let{mfaChallenge:t,setSlide:n,onClose:d}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.Z.SlideHeader,{subtitle:o.intl.string(o.t["XQaT+/"]),onClose:d}),(0,l.jsx)(s.Z.SlideContent,{children:t.methods.map(e=>(0,l.jsxs)(i.P3F,{className:a.listItemContainer,onClick:()=>{n(e.type)},children:[(0,l.jsx)(i.Text,{className:a.listItemText,variant:"text-md/semibold",children:r.P[e.type]}),(0,l.jsx)(i.Fbu,{size:"custom",color:"currentColor",width:20,height:20,className:a.listItemArrow})]},e.type))})]})}},160511:function(e,t,n){n.d(t,{Z:()=>h}),n(47120),n(773603);var l=n(200651),i=n(192379),s=n(658550),r=n(544891),o=n(481060),a=n(507453),d=n(981631),u=n(388032),c=n(668216);function h(e){let{mfaChallenge:t,finish:n,setSlide:h,onClose:m,isSlideReady:f}=e,[x,g]=i.useState(!1),[S,v]=i.useState(null),[p,j]=i.useState(!1),[b,C]=i.useState(null),[y,Z]=i.useState(""),k=i.useRef(null);i.useEffect(()=>{g(!0),r.tn.post({url:d.ANM.LOGIN_SMS_SEND,body:{ticket:t.ticket},oldFormErrors:!0,rejectWithError:!1}).then(e=>{v(e.body.phone)}).catch(e=>{var t,n;C(null!==(n=null===(t=e.body)||void 0===t?void 0:t.message)&&void 0!==n?n:e.message)}).finally(()=>{g(!1)})},[t.ticket]),i.useEffect(()=>{if(f){var e;null===(e=k.current)||void 0===e||e.focus()}},[f]);let E=null==S?u.intl.string(u.t.LQdCQE):u.intl.formatToPlainString(u.t["8r6h7+"],{phoneNumber:S});return(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j(!0),n({mfaType:"sms",data:y}).catch(e=>{var t,n;C(null!==(n=e.message)&&void 0!==n?n:null===(t=e.body)||void 0===t?void 0:t.message)}).finally(()=>{j(!1)})},children:[(0,l.jsx)(a.Z.SlideHeader,{subtitle:E,onClose:m}),(0,l.jsx)(a.Z.SlideContent,{children:(0,l.jsxs)(o.xJW,{title:u.intl.string(u.t.HZPBOT),children:[(0,l.jsxs)("div",{className:c.smsInputContainer,children:[(0,l.jsx)(o.oil,{className:c.smsInput,inputRef:k,onChange:Z,placeholder:u.intl.string(u.t.tARzgo),maxLength:10,value:y,autoComplete:"one-time-code",spellCheck:"false",disabled:p}),(0,l.jsx)(o.zxk,{size:o.zxk.Sizes.MEDIUM,submitting:x,onClick:()=>{r.tn.post({url:d.ANM.LOGIN_SMS_SEND,body:{ticket:t.ticket},oldFormErrors:!0,rejectWithError:!1}).then(e=>{v(e.body.phone)}).catch(e=>{var t;C(e.message||(null===(t=e.body)||void 0===t?void 0:t.message))})},children:u.intl.string(u.t.ZF29Ly)})]}),(0,l.jsx)(a.Z.SlideError,{error:b})]})}),(0,l.jsx)(a.Z.SlideFooter,{mfaChallenge:t,setSlide:h,showConfirm:!0,disabled:y.length!==s.Gz,submitting:p})]})}},51693:function(e,t,n){n.d(t,{Z:()=>u}),n(47120),n(773603);var l=n(200651),i=n(192379),s=n(658550),r=n(481060),o=n(540059),a=n(507453),d=n(388032);function u(e){let{mfaChallenge:t,finish:n,setSlide:u,onClose:c,isSlideReady:h}=e,m=(0,o.Q3)("TotpSlide"),[f,x]=i.useState(!1),[g,S]=i.useState(null),[v,p]=i.useState(""),j=i.useRef(null);return i.useEffect(()=>{if(h){var e;null===(e=j.current)||void 0===e||e.focus()}},[h]),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x(!0),S(null),n({mfaType:"totp",data:v}).catch(e=>{var t,n;S(null!==(n=null===(t=e.body)||void 0===t?void 0:t.message)&&void 0!==n?n:e.message)}).finally(()=>{x(!1)})},children:[(0,l.jsx)(a.Z.SlideHeader,{onClose:c}),(0,l.jsx)(a.Z.SlideContent,{scrollbarType:m?"none":void 0,children:(0,l.jsxs)(r.xJW,{title:d.intl.string(d.t.HZPBOT),children:[(0,l.jsx)(r.oil,{inputRef:j,onChange:p,placeholder:d.intl.string(d.t.tARzgo),maxLength:s.gH,minLength:s.gH,value:v,autoComplete:"one-time-code",spellCheck:"false",disabled:f}),(0,l.jsx)(a.Z.SlideError,{error:g})]})}),(0,l.jsx)(a.Z.SlideFooter,{mfaChallenge:t,setSlide:u,showConfirm:!0,disabled:v.length!==s.gH,submitting:f})]})}},973810:function(e,t,n){n.d(t,{Z:()=>f}),n(47120);var l=n(200651),i=n(192379),s=n(849055),r=n(544891),o=n(481060),a=n(358085),d=n(960048),u=n(998502),c=n(507453),h=n(981631),m=n(388032);function f(e){let{mfaChallenge:t,finish:n,setSlide:f,onClose:x}=e,[g,S]=i.useState(!1),[v,p]=i.useState(null),{challenge:j}=t.methods.find(e=>"webauthn"===e.type),b=async()=>{S(!0),p(null);let e=a.isPlatformEmbedded&&u.ZP.supportsFeature(h.eRX.WEBAUTHN)?u.ZP.webAuthnAuthenticate(j):s.U2(JSON.parse(j)).then(e=>JSON.stringify(e)),t=async e=>{try{await n({mfaType:"webauthn",data:e})}catch(e){e instanceof r.Pd?p(m.intl.string(m.t.xSCvBQ)):p(e.message)}};try{let n=await e;await t(n)}catch(e){d.Z.captureException(e),p(m.intl.string(m.t.xSCvBQ))}finally{S(!1)}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Z.SlideHeader,{onClose:x}),(0,l.jsxs)(c.Z.SlideContent,{children:[(0,l.jsx)(o.zxk,{submitting:g,onClick:b,children:m.intl.string(m.t.Xr3Ekp)}),(0,l.jsx)(c.Z.SlideError,{error:v})]}),(0,l.jsx)(c.Z.SlideFooter,{mfaChallenge:t,setSlide:f})]})}},658550:function(e,t,n){n.d(t,{Gz:()=>o,P0:()=>d,gH:()=>r,tL:()=>s,th:()=>i}),n(411104);var l=n(544891);let i=8,s=11,r=6,o=6;async function a(e){let{ticket:t,mfaType:n,data:i}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;try{return(await l.tn.post({url:"/mfa/finish",body:{ticket:t,mfa_type:n,data:i},retries:s,rejectWithError:!1})).body}catch(e){var r;if(null===(r=e.body)||void 0===r?void 0:r.message)throw Error(e.body.message);throw e}}async function d(e,t){let{token:n}=await a(e);return new Promise((e,l)=>{t({"X-Discord-MFA-Authorization":n},t=>{var n,i;return(null===(n=t.body)||void 0===n?void 0:n.code)===60008||(null===(i=t.body)||void 0===i?void 0:i.code)===60003?(l(Error(t.body.message)),!0):(e(),!1)})})}}}]);
//# sourceMappingURL=ff05102a31558711.js.map