"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["93375"],{866830:function(e,t,n){n.d(t,{U5:()=>i,qR:()=>l});var r=n(273504);function l(e){let t=i();return Array.from(e.defaultActionTypes).map(e=>t[e])}function i(){return{[r.jj.BLOCK_MESSAGE]:{type:r.jj.BLOCK_MESSAGE,metadata:{customMessage:void 0}},[r.jj.FLAG_TO_CHANNEL]:{type:r.jj.FLAG_TO_CHANNEL,metadata:{channelId:void 0}},[r.jj.USER_COMMUNICATION_DISABLED]:{type:r.jj.USER_COMMUNICATION_DISABLED,metadata:{durationSeconds:60}},[r.jj.QUARANTINE_USER]:{type:r.jj.QUARANTINE_USER,metadata:{}}}}},460083:function(e,t,n){n.d(t,{d:()=>r});let r=(0,n(818083).B)({kind:"guild",id:"2022-12_mention_raid_limit",label:"Automod Mention Raid Limit",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Automod Mention Raid Limit",config:{enabled:!0}}]})},236413:function(e,t,n){n.d(t,{Ar:()=>v,DO:()=>d,Fn:()=>g,Jq:()=>A,QO:()=>j,Vb:()=>N,YN:()=>L,ZF:()=>M,ep:()=>_,km:()=>R,nC:()=>S,vo:()=>f}),n(47120),n(411104);var r=n(581364),l=n(314897),i=n(866830),a=n(539573),u=n(727072),o=n(85960),s=n(273504),E=n(388032);let c=(e,t)=>"".concat(e,"-").concat(t,"-new-rule"),d=e=>(null==e?void 0:e.triggerType)===s.fX.KEYWORD,f=e=>(null==e?void 0:e.triggerType)===s.fX.ML_SPAM,g=e=>(null==e?void 0:e.triggerType)===s.fX.DEFAULT_KEYWORD_LIST,S=e=>(null==e?void 0:e.triggerType)===s.fX.MENTION_SPAM,A=e=>(null==e?void 0:e.triggerType)===s.fX.USER_PROFILE;function _(e,t){let n=o.I6[t],r=(0,o.jp)(t,e),a={id:c(e,t),name:n.getDefaultRuleName(),guildId:e,eventType:n.eventType,triggerType:t,triggerMetadata:r,enabled:!0,creatorId:l.default.getId(),actions:(0,i.qR)(n),position:0,exemptChannels:new Set,exemptRoles:new Set};if(N(a))throw Error(E.intl.string(E.t["A/nX8P"]));let s=(0,u.mY)(e,t);return s>0&&(a.name+=" ".concat(s+1)),a}function R(e,t){if(e.length>t)throw Error(E.intl.formatToPlainString(E.t.mee4qa,{limit:t}));e.forEach(e=>{if(e.length>s.hu||e.length<s.Vk)throw new a.V6(E.intl.formatToPlainString(E.t.rbRvGR,{keyword:e,max:s.hu,min:s.Vk}))})}function j(e){if(d(e)){var t,n;let r=null!==(t=e.triggerMetadata.keywordFilter)&&void 0!==t?t:[],l=null!==(n=e.triggerMetadata.regexPatterns)&&void 0!==n?n:[];if(0===r.length&&0===l.length)throw Error(E.intl.string(E.t.kz2Av7));R(r,s.RH),function(e){if(e.length>s.VW)throw Error(E.intl.formatToPlainString(E.t.tDjhFx,{limit:s.VW}));e.forEach(e=>{if(e.length>s.aj||e.length<s.uE)throw new a.uS(E.intl.formatToPlainString(E.t["WR0m9/"],{regex:e,max:s.aj,min:s.uE}))})}(l)}if(0===e.actions.length)throw Error(E.intl.string(E.t["t+gj5e"]))}function N(e){var t;return(0,r.BH)(null!==(t=null==e?void 0:e.id)&&void 0!==t?t:"INVALID_SNOWFLAKE")}function L(e){switch(e){case s.q4.MESSAGE_SEND:return E.intl.string(E.t.NlQW4O);case s.q4.GUILD_MEMBER_JOIN_OR_UPDATE:return E.intl.string(E.t["Q+68IS"]);default:return E.intl.string(E.t.SP9BBw)}}function M(e){switch(e){case s.jj.BLOCK_MESSAGE:return E.intl.string(E.t.d1ab8v);case s.jj.FLAG_TO_CHANNEL:return E.intl.string(E.t["Y+Vmvb"]);case s.jj.USER_COMMUNICATION_DISABLED:return E.intl.string(E.t["6WPxY2"]);case s.jj.QUARANTINE_USER:return E.intl.string(E.t.NPO8eX);default:return E.intl.string(E.t.SP9BBw)}}function v(e){switch(e){case s.fX.KEYWORD:return E.intl.string(E.t.ffR2cH);case s.fX.ML_SPAM:return E.intl.string(E.t["puF/Oj"]);case s.fX.DEFAULT_KEYWORD_LIST:return E.intl.string(E.t.LnGhZm);case s.fX.MENTION_SPAM:return E.intl.string(E.t.pX7i6u);case s.fX.USER_PROFILE:return E.intl.string(E.t.q1L2v7);default:return E.intl.string(E.t.SP9BBw)}}},727072:function(e,t,n){n.d(t,{I2:()=>A,RD:()=>_,mY:()=>S,pH:()=>R}),n(653041),n(47120),n(724458);var r=n(192379),l=n(232713),i=n(65400),a=n(731965),u=n(881052),o=n(36459),s=n(866894),E=n(273504),c=n(981631);let d={},f=e=>{let t={[E.fX.KEYWORD]:[],[E.fX.ML_SPAM]:[],[E.fX.DEFAULT_KEYWORD_LIST]:[],[E.fX.MENTION_SPAM]:[],[E.fX.USER_PROFILE]:[],[E.fX.SERVER_POLICY]:[]};return e.forEach(e=>{var n;let{triggerType:r}=e;null===(n=t[r])||void 0===n||n.push(e)}),t},g=(0,i.F)((e,t)=>({rules:{},fetching:!1,error:null,updateRule:n=>{var r,l;let{guildId:i,id:u,triggerType:o}=n,{rules:E}=t(),c=null!==(r=E[i])&&void 0!==r?r:{},d=null!==(l=c[o])&&void 0!==l?l:[],f=d.some(e=>e.id===u),g=d.filter(e=>!(0,s.U)(e.id)||e.triggerType!==o),S=f?g.map(e=>e.id===u?n:e):[...g,n];(0,a.j)(()=>{e({rules:{...E,[i]:{...c,[o]:S}},error:null})})},removeRule:(n,r)=>{let{rules:l}=t(),i=l[r],u=Object.keys(i).reduce((e,t)=>{var r;let l=Number(t),a=null!==(r=i[l])&&void 0!==r?r:[];return e[l]=a.filter(e=>e.id!==n),e},i);(0,a.j)(()=>{e({rules:{...l,[r]:u},error:null})})},syncRules:async n=>{if(function(e){var t;let n=Date.now();return n-(null!==(t=d[e])&&void 0!==t?t:0)>2e4}(n)){d[n]=Date.now();try{let r=await (0,o.$Y)(n),l=f(r),i=t().rules;(0,a.j)(()=>{e({rules:{...i,[n]:l},error:null})})}catch(n){let t=new u.Hx(n);(0,a.j)(()=>{e({error:t})})}}}})),S=(e,t)=>{var n,r;return(null!==(r=null===(n=g.getState().rules[e])||void 0===n?void 0:n[t])&&void 0!==r?r:[]).length};function A(e){let[t,n]=r.useState(!1),[i,a]=g(e=>[e.syncRules,e.fetching],l.X);return[t,r.useCallback(async()=>{if(!a&&null!=e)try{n(!0),await i(e)}finally{n(!1)}},[e,a,i])]}function _(e){let[t,n]=A(e);return r.useEffect(()=>{(async()=>{await n()})()},[e,n]),[t,n]}function R(e){return g(t=>{var n;return{rulesByTriggerType:null!==(n=t.rules[null!=e?e:c.lds])&&void 0!==n?n:{},updateRule:t.updateRule,removeRule:t.removeRule}},l.X)}},85960:function(e,t,n){n.d(t,{I6:()=>c,V9:()=>S,Z6:()=>_,jp:()=>R,r5:()=>g,vT:()=>E,vh:()=>d,yU:()=>A}),n(47120),n(789020),n(411104),n(724458);var r,l,i=n(192379),a=n(467319),u=n(676317),o=n(273504),s=n(388032),E=((r={}).NEW="new",r.RECOMMENDED="recommended",r.BETA="beta",r.ALPHA="alpha",r);let c={[o.fX.SPAM_LINK]:{getDefaultRuleName:()=>s.intl.string(s.t.ffR2cH),type:o.fX.SPAM_LINK,eventType:o.q4.MESSAGE_SEND,perGuildMaxCount:0,availableActionTypes:new Set,flags:new Set,defaultActionTypes:new Set},[o.fX.KEYWORD]:{getDefaultRuleName:()=>s.intl.string(s.t.ffR2cH),type:o.fX.KEYWORD,eventType:o.q4.MESSAGE_SEND,perGuildMaxCount:6,availableActionTypes:new Set([o.jj.BLOCK_MESSAGE,o.jj.FLAG_TO_CHANNEL,o.jj.USER_COMMUNICATION_DISABLED]),flags:new Set,defaultActionTypes:new Set([o.jj.BLOCK_MESSAGE])},[o.fX.ML_SPAM]:{getDefaultRuleName:()=>s.intl.string(s.t["puF/Oj"]),type:o.fX.ML_SPAM,eventType:o.q4.MESSAGE_SEND,perGuildMaxCount:1,availableActionTypes:new Set([o.jj.BLOCK_MESSAGE,o.jj.FLAG_TO_CHANNEL]),flags:new Set([]),defaultActionTypes:new Set([o.jj.BLOCK_MESSAGE])},[o.fX.DEFAULT_KEYWORD_LIST]:{getDefaultRuleName:()=>s.intl.string(s.t.LnGhZm),type:o.fX.DEFAULT_KEYWORD_LIST,eventType:o.q4.MESSAGE_SEND,perGuildMaxCount:1,availableActionTypes:new Set([o.jj.BLOCK_MESSAGE,o.jj.FLAG_TO_CHANNEL]),flags:new Set([]),defaultActionTypes:new Set([o.jj.BLOCK_MESSAGE])},[o.fX.MENTION_SPAM]:{getDefaultRuleName:()=>s.intl.string(s.t.pX7i6u),type:o.fX.MENTION_SPAM,eventType:o.q4.MESSAGE_SEND,perGuildMaxCount:1,availableActionTypes:new Set([o.jj.BLOCK_MESSAGE,o.jj.FLAG_TO_CHANNEL,o.jj.USER_COMMUNICATION_DISABLED]),flags:new Set([]),defaultActionTypes:new Set([o.jj.BLOCK_MESSAGE])},[o.fX.USER_PROFILE]:{getDefaultRuleName:()=>s.intl.string(s.t.q1L2v7),type:o.fX.USER_PROFILE,eventType:o.q4.GUILD_MEMBER_JOIN_OR_UPDATE,perGuildMaxCount:1,availableActionTypes:new Set([o.jj.QUARANTINE_USER,o.jj.FLAG_TO_CHANNEL]),flags:new Set([]),defaultActionTypes:new Set([o.jj.QUARANTINE_USER])},[o.fX.SERVER_POLICY]:{getDefaultRuleName:()=>s.intl.string(s.t.ZQr92N),type:o.fX.SERVER_POLICY,eventType:o.q4.MESSAGE_SEND,perGuildMaxCount:1,availableActionTypes:new Set([o.jj.FLAG_TO_CHANNEL]),flags:new Set(["alpha"]),defaultActionTypes:new Set}};var d=((l={}).MEMBERS="members",l.CONTENT="content",l);let f={members:[c[o.fX.USER_PROFILE]],content:[c[o.fX.SERVER_POLICY],c[o.fX.MENTION_SPAM],c[o.fX.ML_SPAM],c[o.fX.DEFAULT_KEYWORD_LIST],c[o.fX.KEYWORD]]},g=(e,t)=>c[e].flags.has(t);function S(e){return Array.from(c[e].availableActionTypes)}function A(e,t){let{id:n,eventType:r,triggerType:l,actions:i}=e,a=c[l];if(t.filter(e=>n!==e.id&&e.triggerType===l).length>a.perGuildMaxCount)throw Error("You have exceeded the maximum number of rules of type ".concat(l));if(i.some(e=>!a.availableActionTypes.has(e.type)))throw Error("You have provided an action that is not available for this trigger type");if(r!==a.eventType)throw Error("You have provided an event type that is not available for this trigger type")}function _(e){let t=(0,u.oA)(e);return i.useMemo(()=>Object.keys(f).reduce((e,n)=>{let r=f[n].filter(e=>e.type!==o.fX.SERVER_POLICY&&(e.type!==o.fX.USER_PROFILE||!!t)&&e.perGuildMaxCount>0).map(e=>e.type);return e[n]=r,e},{members:[],content:[]}),[t])}function R(e,t){let n=(0,a.H)(t);switch(e){case o.fX.DEFAULT_KEYWORD_LIST:return{allowList:[],presets:[]};case o.fX.USER_PROFILE:case o.fX.KEYWORD:return{keywordFilter:[],regexPatterns:[],allowList:[]};case o.fX.MENTION_SPAM:return{mentionTotalLimit:o.Ic,mentionRaidProtectionEnabled:n};case o.fX.ML_SPAM:case o.fX.SERVER_POLICY:default:return}}},467319:function(e,t,n){n.d(t,{H:()=>l,a:()=>i});var r=n(460083);function l(e){let{enabled:t}=r.d.getCurrentConfig({guildId:e,location:"988d4e_3"});return t}function i(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{enabled:n}=r.d.useExperiment({guildId:e,location:"988d4e_4"},{autoTrackExposure:t});return n}},422303:function(e,t,n){n.d(t,{Ac:()=>a,Ze:()=>u,cb:()=>o,kU:()=>E,se:()=>s}),n(757143),n(47120),n(627494);let r=/[\t\n,]/g,l=/\s{2,}/g,i=/[*"']/g;function a(e){return e.split(r).map(e=>e.replace(l," ").trim()).filter(e=>e.length>0)}function u(e){return Array.from(new Set(e))}function o(e){return e.sort((e,t)=>{let n=e.replaceAll(i,""),r=t.replaceAll(i,"");return n.localeCompare(r)})}function s(e){return e.join(", ")}function E(e){return e.includes("\n")||e.includes(",")}},676317:function(e,t,n){n.d(t,{Nb:()=>s,oA:()=>c,pr:()=>E,ze:()=>o});var r=n(442837),l=n(430824),i=n(496675),a=n(981631);let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.Z,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.Z,r=t.getGuild(e);return null!=r&&n.can(a.Plq.MANAGE_GUILD,r)};function o(e){return null!=e&&u(e)}function s(e){return u(e)}function E(e){return(0,r.e7)([l.Z,i.Z],()=>u(e,l.Z,i.Z),[e])}function c(e){return(0,r.e7)([l.Z],()=>{let t=l.Z.getGuild(e);return(null==t?void 0:t.hasFeature(a.oNc.COMMUNITY))||!1},[e])}},866894:function(e,t,n){n.d(t,{U:()=>l}),n(47120);let r=new Set(["1030554520465440818"]);function l(e){return null!=e&&r.has(e)}},65912:function(e,t,n){n.d(t,{V:()=>L,w:()=>N});var r=n(392711),l=n.n(r),i=n(232713),a=n(65400),u=n(731965),o=n(881052),s=n(823379),E=n(539573),c=n(236413),d=n(85960),f=n(36459),g=n(422303),S=n(866894),A=n(981631),_=n(388032);let R=Object.freeze({editingRule:null,hasChanges:!1,isLoading:!1,errorMessage:null}),j=(0,a.F)((e,t)=>({editingRule:null,hasChanges:!1,setEditingRule:n=>{let r=t().editingRule,i=null!=n&&null!=r&&n.id===r.id,a=l().cloneDeep(n);null!=a&&(a={...a,actions:a.actions.filter(s.lm)}),(0,u.j)(()=>e({editingRule:a,hasChanges:i,errorMessage:null}))},createNewEditingRule:(t,n,r)=>{let l={...(0,c.ep)(t,n),...null!=r?r:{}};return(0,u.j)(()=>e({editingRule:l,hasChanges:!1})),l},isLoading:!1,errorMessage:null,cancelEditingRule:()=>{(0,u.j)(()=>e({...R}))},saveRule:async(t,n)=>{if(null==t)return(0,u.j)(()=>e({...R})),null;try{var r,l,i;(0,c.DO)(t)&&(t.triggerMetadata.keywordFilter=(0,g.cb)((0,g.Ze)(null!==(r=t.triggerMetadata.keywordFilter)&&void 0!==r?r:[])),t.triggerMetadata.allowList=(0,g.cb)((0,g.Ze)(null!==(l=t.triggerMetadata.allowList)&&void 0!==l?l:[]))),(0,c.Fn)(t)&&(t.triggerMetadata.allowList=(0,g.cb)((0,g.Ze)(null!==(i=t.triggerMetadata.allowList)&&void 0!==i?i:[]))),(0,d.yU)(t,n),(0,c.QO)(t)}catch(t){return t instanceof E.V6?(0,u.j)(()=>{e({errorMessage:_.intl.string(_.t["4Dxaur"]),isLoading:!1})}):t instanceof E.uS?(0,u.j)(()=>{e({errorMessage:_.intl.string(_.t.hDPEu7),isLoading:!1})}):(0,u.j)(()=>{e({errorMessage:t.message,isLoading:!1})}),null}try{(0,u.j)(()=>{e({isLoading:!0})});let n=null;return n=(0,c.Vb)(t)&&!(0,S.U)(t.id)?await (0,f.Je)(t):await (0,f.JK)(t),(0,u.j)(()=>e({...R})),n}catch(n){let t=new o.Hx(n);(0,u.j)(()=>{e({isLoading:!1,errorMessage:function(e){if(e.code===A.evJ.INVALID_FORM_BODY){var t,n;if((null===(n=e.errors)||void 0===n?void 0:null===(t=n.trigger_metadata)||void 0===t?void 0:t.regex_patterns)!=null)return _.intl.string(_.t.hDPEu7)}return e.getAnyErrorMessage()}(t)})})}return null},saveEditingRule:e=>{let{editingRule:n,saveRule:r}=t();return r(n,e)}}));function N(){return j(e=>({hasChanges:e.hasChanges,editingRule:e.editingRule,isLoading:e.isLoading,errorMessage:e.errorMessage,saveRule:e.saveRule,saveEditingRule:e.saveEditingRule,cancelEditingRule:e.cancelEditingRule}),i.X)}function L(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=j(e=>({hasChanges:e.hasChanges,editingRule:e.editingRule,setEditingRule:e.setEditingRule,createNewEditingRule:e.createNewEditingRule}),i.X);return null!=e&&t.setEditingRule(e),t}},556012:function(e,t,n){n.d(t,{c:()=>_});var r=n(481060),l=n(933557),i=n(592125),a=n(699516),u=n(594174),o=n(273504),s=n(590433),E=n(388032);let c=e=>e!==o.jj.QUARANTINE_USER,d=e=>{switch(e){case o.jj.BLOCK_MESSAGE:case o.jj.FLAG_TO_CHANNEL:case o.jj.USER_COMMUNICATION_DISABLED:case o.jj.QUARANTINE_USER:return!0;default:return!1}},f=e=>{switch(e){case o.jj.BLOCK_MESSAGE:return E.intl.string(E.t.d1ab8v);case o.jj.FLAG_TO_CHANNEL:return E.intl.string(E.t["Y+Vmvb"]);case o.jj.USER_COMMUNICATION_DISABLED:return E.intl.string(E.t.Xz2njI);case o.jj.QUARANTINE_USER:return E.intl.string(E.t.NPO8eX)}},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.fX.KEYWORD;switch(e){case o.jj.BLOCK_MESSAGE:switch(t){case o.fX.MENTION_SPAM:return E.intl.string(E.t["8hdId3"]);case o.fX.ML_SPAM:return E.intl.string(E.t.tLQYs7);default:return E.intl.string(E.t.xAAocn)}case o.jj.FLAG_TO_CHANNEL:return E.intl.string(E.t.BHAXfX);case o.jj.USER_COMMUNICATION_DISABLED:return E.intl.string(E.t["bNK+gI"]);case o.jj.QUARANTINE_USER:return E.intl.string(E.t["/7nL5e"])}},S=(e,t)=>{var n,r,c;switch(e){case o.jj.QUARANTINE_USER:case o.jj.BLOCK_MESSAGE:return null;case o.jj.FLAG_TO_CHANNEL:{let e=null==t?void 0:null===(n=t.metadata)||void 0===n?void 0:n.channelId;if(null==e)return null;let r=i.Z.getChannel(e);if(null==r)return null;let o=(0,l.F6)(r,u.default,a.Z);return E.intl.format(E.t.xQXnkJ,{channelName:o})}case o.jj.USER_COMMUNICATION_DISABLED:{let e=null!==(c=null==t?void 0:null===(r=t.metadata)||void 0===r?void 0:r.durationSeconds)&&void 0!==c?c:0,n=(0,s.L9)(e);if(null==n)return null;return E.intl.format(E.t.AFmbfX,{duration:n})}}},A=e=>{switch(e){case o.jj.BLOCK_MESSAGE:return r.k$p;case o.jj.FLAG_TO_CHANNEL:return r.VL1;case o.jj.USER_COMMUNICATION_DISABLED:return r.YlB;case o.jj.QUARANTINE_USER:return r.ics}};function _(e,t,n){var l,i,a,u;return d(e)?{headerText:null!==(l=f(e))&&void 0!==l?l:"",descriptionText:null!==(i=g(e,n))&&void 0!==i?i:"",helperText:null!==(a=S(e,t))&&void 0!==a?a:null,icon:null!==(u=A(e))&&void 0!==u?u:r.k$p,isEditable:c(e)}:null}},572456:function(e,t,n){n.d(t,{XN:()=>u,af:()=>o,gK:()=>a});var r=n(200651);n(192379);var l=n(481060);function i(e){return new Promise(t=>{(0,l.ZDy)(()=>e(()=>{t(!0)},e=>(t(!1),e())))})}let a=e=>i(async(t,l)=>{let{default:i}=await n.e("44462").then(n.bind(n,478472));return n=>(0,r.jsx)(i,{...n,ruleName:e,onConfirm:t,onClose:()=>l(n.onClose),onCancel:()=>l(n.onClose)})}),u=(e,t)=>i(async(l,i)=>{let{default:a}=await n.e("92575").then(n.bind(n,601787));return n=>(0,r.jsx)(a,{...n,ruleName:e,keyword:t,onConfirm:l,onClose:()=>i(n.onClose),onCancel:()=>i(n.onClose)})}),o=e=>t=>i(async(l,i)=>{let{default:a}=await n.e("83613").then(n.bind(n,449675)),u=()=>{t(),l()};return t=>(0,r.jsx)(a,{ruleName:e,...t,onConfirm:u,onClose:()=>i(t.onClose),onCancel:()=>i(t.onClose)})})}}]);
//# sourceMappingURL=670ecc2ee41f39a0.js.map