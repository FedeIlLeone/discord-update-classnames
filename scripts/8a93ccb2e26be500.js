"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["69838"],{567409:function(e,t,n){n.d(t,{Ns:()=>f}),n(47120);var i=n(192379),l=n(392711),r=n.n(l),o=n(876215),a=n(442837),s=n(146282),d=n(26033),u=n(897674),c=n(709054),h=n(206583);let _=new Set([o.s.PLAYED_GAME,o.s.LAUNCHED_ACTIVITY]),p=e=>_.has(e.content_type);function f(e){let{entries:t}=function(){let e=(0,u.Z)(h.YN.GAME_PROFILE_FEED),t=(0,u.Z)(h.YN.GLOBAL_FEED),n=i.useMemo(()=>r()(t).unionBy(e,e=>e.id).filter(p).orderBy(e=>c.default.extractTimestamp(e.id),"desc").uniqWith((e,t)=>e.author_id===t.author_id&&e.extra.application_id===t.extra.application_id).value(),[e,t]);return{requestId:(0,a.e7)([s.Z],()=>s.Z.getFeedRequestId(h.YN.GAME_PROFILE_FEED)),entries:n}}();return i.useMemo(()=>null==t?void 0:t.filter(t=>((0,d.dX)(t)||(0,d.Mq)(t))&&t.extra.application_id===e),[t,e])}},614554:function(e,t,n){n.d(t,{Z:()=>r});var i=n(314897),l=n(981631);function r(e){if(l.TPd.CALLABLE.has(e.type)){var t;return(null===(t=e.recipients)||void 0===t?void 0:t.length)===1?e.recipients[0]:null}return i.default.getId()}},681603:function(e,t,n){n.d(t,{Z:()=>C});var i=n(192379),l=n(149765),r=n(442837),o=n(367907),a=n(731429),s=n(188471),d=n(318885),u=n(592125),c=n(984933),h=n(271383),_=n(430824),p=n(496675),f=n(944486),m=n(914010),g=n(594174),v=n(237997),E=n(145597),x=n(981631);class I extends i.Component{componentDidUpdate(e){if(this.props.locked)return null;let{selectedGuild:t,selectedChannel:n,isMemberPending:i,hasPreviewEnabled:l,postableChannelCount:r}=this.props;if(null!=t&&(t!==e.selectedGuild||i&&!e.isMemberPending)&&((0,d.Q)(x.rMx.GUILD_VIEWED,{...i?{is_pending:i,preview_enabled:l}:{},postable_channels:r}),(0,s.a)(x.rMx.GUILD_VIEWED_CLICKSTREAM,{guildId:t})),null!=n&&n!==e.selectedChannel){let e=(0,a.K)(u.Z.getChannel(n),!0);(0,d.Q)(x.rMx.CHANNEL_OPENED,{...e,...(0,o.$H)(n)}),(0,s.a)(x.rMx.CHANNEL_OPENED_CLICKSTREAM,{channelId:n})}}render(){return null}}let C=r.ZP.connectStores([m.Z,f.Z,_.Z,g.default,v.Z,c.ZP,p.Z,h.ZP],()=>{var e,t,n;let i=m.Z.getGuildId(),r=f.Z.getChannelId(i),o=_.Z.getGuild(i),a=g.default.getCurrentUser(),s=null!==(t=c.ZP.getChannels(null==o?void 0:o.id)[c.sH])&&void 0!==t?t:[],d=s.length>0?s.filter(e=>{let{channel:t}=e;return p.Z.can(l.$e(x.Plq.SEND_MESSAGES,x.Plq.VIEW_CHANNEL),t)}).length:0,u=null!=a&&null!=i&&null!==(n=null===(e=h.ZP.getMember(i,a.id))||void 0===e?void 0:e.isPending)&&void 0!==n&&n;return{selectedGuild:i,selectedChannel:r,locked:v.Z.isLocked((0,E.QF)()),hasPreviewEnabled:null==o?void 0:o.features.has(x.oNc.PREVIEW_ENABLED),isMemberPending:u,postableChannelCount:d}})(I)},906037:function(e,t,n){n.d(t,{CR:()=>o,eM:()=>r,m3:()=>a});var i=n(570140),l=n(449224);function r(e){return!e.isPreviewingInGame&&!e.locked||e.pinned}function o(e,t,n){(e.locked!==t.locked||e.pinned!==t.pinned||n(e)!==n(t)||r(e)!==r(t))&&a(t,n(t))}function a(e,t){var n,o;let a=r(e),s=l.Z.getGame();i.Z.dispatch({type:"OVERLAY_WIDGET_CHANGED",gameName:null!==(n=null==s?void 0:s.name)&&void 0!==n?n:null,gameId:null!==(o=null==s?void 0:s.id)&&void 0!==o?o:null,widgetType:e.widget,visible:a&&t,locked:e.locked,pinned:e.pinned})}},603618:function(e,t,n){n.d(t,{ZP:()=>ee,lX:()=>$}),n(47120),n(724458),n(653041),n(789020);var i=n(200651),l=n(192379),r=n(512722),o=n.n(r),a=n(661869),s=n(876215),d=n(884439),u=n(442837),c=n(481060),h=n(278323),_=n(24124),p=n(493683),f=n(13245),m=n(99690),g=n(493773),v=n(549879),E=n(620662),x=n(835473),I=n(194082),C=n(297781),S=n(656709),Z=n(567409),y=n(225559),O=n(703656),N=n(93127),b=n(814443),T=n(428598),w=n(409057),A=n(199902),j=n(592125),k=n(293273),R=n(158776),L=n(699516),D=n(594174),P=n(801077),M=n(237997),z=n(630388),V=n(5192),W=n(709054),U=n(444295),F=n(388627),B=n(981631),G=n(388032),H=n(422163);function Y(e){let{entry:t,currentUserActivity:n,idx:r}=e,a=(0,u.e7)([D.default],()=>D.default.getUser(t.author_id)),[s,d]=l.useState("unsent"),[_,m]=l.useState(!1);l.useEffect(()=>{if("sent"===s){let e=setTimeout(()=>m(!0),2e3);return()=>clearTimeout(e)}},[s]);let g=null!=n&&(0,E.Z)(n,B.xjy.JOIN),x=async e=>{if(null!=a&&"unsent"===s){e.stopPropagation();try{if(d("sending"),g)await h.Z.sendActivityInviteUser({type:B.mFx.JOIN,userId:a.id,activity:n,location:B.Sbl.UNLOCKED_OVERLAY});else{var i;let e=await p.Z.getOrEnsurePrivateChannel(a.id),n=null!==(i=j.Z.getChannel(e))&&void 0!==i?i:null;o()(null!=n,"Send channel must be defined"),(0,O.uL)(B.Z5c.CHANNEL(n.guild_id,n.id)),(0,v.i)(B.IlC.OVERLAY),!0===t.extra.fake_inventory_item?await (0,S.k)({channel:n,content:G.intl.string(G.t.DwAcMz),whenReady:!0}):await (0,S.p)({channel:n,content:G.intl.string(G.t.DwAcMz),entry:t,whenReady:!0})}f.Z.track(B.rMx.OVERLAY_GAME_INVITE_SENT,{target_user_id:a.id,target_content_entry_id:t.id,target_index:r}),(0,U.Ws)(B.Odu.ACTIVITY,{type:U.Qu.INVITE,value:U.bk.INVITE_SENT,userId:a.id}),d("sent")}catch(e){d("unsent")}}},I=async()=>{var e;if(null==a)return;let t=await p.Z.getOrEnsurePrivateChannel(a.id),n=null!==(e=j.Z.getChannel(t))&&void 0!==e?e:null;o()(null!=n,"Send channel must be defined"),(0,O.uL)(B.Z5c.CHANNEL(n.guild_id,n.id)),(0,v.i)(B.IlC.OVERLAY),(0,U.Ws)(B.Odu.ACTIVITY,{type:U.Qu.REDIRECT,value:U.bk.CHAT,userId:a.id})},C=g?G.intl.string(G.t["3fRyS0"]):G.intl.string(G.t.y9eo7e),Z=g?(0,i.jsx)(c.ejJ,{color:"currentColor",size:"sm"}):(0,i.jsx)(c.Uuj,{color:"currentColor",size:"sm"});return(0,i.jsx)(c.ua7,{text:C,"aria-label":C,children:e=>(0,i.jsx)(c.zxk,{...e,submitting:"sending"===s,onClick:_?I:x,className:H.inviteButton,wrapperClassName:H.inviteButtonWrapper,innerClassName:H.inviteButtonInner,color:c.Ttl.TRANSPARENT,look:c.iLD.FILLED,size:c.PhG.ICON,grow:!1,children:"sent"===s?_?(0,i.jsx)(c.kBi,{color:"currentColor",size:"sm"}):(0,i.jsx)(c.kSu,{color:"currentColor",size:"sm"}):Z})})}function Q(e){var t;let{entry:n,currentUserActivity:r}=e,o=(0,u.e7)([D.default],()=>D.default.getUser(n.author_id)),a=null!==(t=null==r?void 0:r.application_id)&&void 0!==t?t:n.extra.application_id,s=(0,u.e7)([R.Z],()=>null!=o?R.Z.getApplicationActivity(o.id,a):null,[a,o]),[d,_]=l.useState("unsent");if(!(null!=s&&(0,E.Z)(s,B.xjy.JOIN)))return null;let p=async e=>{if(null!=o&&"unsent"===d){e.stopPropagation();try{_("sending"),await h.Z.sendActivityInviteUser({type:B.mFx.JOIN_REQUEST,userId:o.id,activity:s,location:B.Sbl.UNLOCKED_OVERLAY}),(0,U.Ws)(B.Odu.ACTIVITY,{type:U.Qu.INVITE,value:U.bk.JOIN_REQUEST_SENT,userId:o.id}),_("sent")}catch(e){_("unsent")}}},f=G.intl.string(G.t.OKsSCQ);return(0,i.jsx)(c.ua7,{text:f,"aria-label":f,children:e=>(0,i.jsx)(c.zxk,{...e,submitting:"sending"===d,onClick:p,className:H.inviteButton,wrapperClassName:H.inviteButtonWrapper,innerClassName:H.inviteButtonInner,color:c.Ttl.TRANSPARENT,look:c.iLD.FILLED,size:c.PhG.ICON,grow:!1,children:"sent"===d?(0,i.jsx)(c.kSu,{color:"currentColor",size:"sm"}):(0,i.jsx)(c.V9,{color:"currentColor",size:"sm"})})})}function K(e){let{entry:t,currentUserActivity:n,idx:l}=e,r=(0,u.e7)([D.default],()=>D.default.getUser(t.author_id)),o=(0,u.e7)([A.Z],()=>null!=r?A.Z.getAnyStreamForUser(r.id):null,[r]),{isMobileOnline:a,status:s}=(0,u.cj)([R.Z],()=>null==r?{isMobileOnline:void 0,status:void 0}:{isMobileOnline:R.Z.isMobileOnline(r.id),status:R.Z.getStatus(r.id)},[r]);return null==r?null:(0,i.jsxs)("div",{className:H.row,children:[(0,i.jsx)(m.Z,{className:H.avatar,user:r,isMobile:a,status:s}),(0,i.jsxs)("div",{className:H.details,children:[(0,i.jsxs)("div",{className:H.usernameWrapper,children:[(0,i.jsx)(c.Text,{className:H.username,variant:"text-md/medium",color:"header-primary",children:V.ZP.getName(void 0,void 0,r)}),null!=o&&(0,i.jsx)(I.ZP,{className:H.liveIndicator})]}),(0,i.jsx)(C.Gk,{location:C.Gt.OVERLAY,className:H.badgesContainer,children:[C.OV,C.wO,C.f,C.v1,C.pQ].map((e,n)=>(0,i.jsx)(e,{entry:t},"entry-".concat(n)))})]}),(0,i.jsx)(Q,{entry:t,currentUserActivity:n,idx:l}),(0,i.jsx)(Y,{entry:t,currentUserActivity:n,idx:l})]})}function X(e){let{entries:t,currentUserActivity:n}=e;return(0,i.jsx)(i.Fragment,{children:t.map((e,t)=>(0,i.jsx)(K,{idx:t,entry:e,currentUserActivity:n},t))})}function J(e,t){return t.reduce((t,n)=>{if(n.type!==B.GOo.USER)return t;let i=n.party.currentActivities;if(0===i.length)return t;for(let n of i)n.game.id===e&&null!=n.activity&&t.push(n);return t},[])}function q(e){let{gamingId:t,maxUserShowCount:n,userAffinityThresholdV1:i=35,userAffinityThresholdV2:r=.0029}=e,o=(0,Z.Ns)(t);(0,g.ZP)(()=>{(0,N.W)(),(0,N._)()});let c=(0,u.e7)([k.Z],()=>null==t?null:k.Z.getApplicationActivity(t),[t]),h=(0,u.Wu)([P.Z,L.Z,b.Z],()=>{if(null==t)return[];let e=P.Z.nowPlayingCards,n={v1:i,v2:r};return J(t,e).filter(e=>{var t;let i=e.activityUser.id,l=L.Z.isFriend(i);return!!function(e,t,n){let{v1:i}=n;return null==e?t:e>i||t}(null===(t=b.Z.getUserAffinity(i))||void 0===t?void 0:t.affinity,l,n)||function(e,t,n){let{v2:i}=n;if(null==e)return t;let{communicationProbability:l,dmProbability:r,serverMessageProbability:o,vcProbability:a}=e;switch(!0){case l>i:case r>i:case o>i:case a>i:return!0;default:return t}}(T.Z.getUserAffinity(i),l,n)})},[t,i,r]);return(0,g.ZP)(()=>(y.L(),()=>y.v())),{entries:l.useMemo(()=>{let e=o.filter(e=>!h.some(t=>t.activityUser.id===e.author_id)),t=[...h.map(e=>(function(e){var t,n,i,l,r,o,u;let c=null!==(r=null===(n=e.activity)||void 0===n?void 0:null===(t=n.timestamps)||void 0===t?void 0:t.start)&&void 0!==r?r:Date.now();return{id:W.default.fromTimestamp(c),author_id:e.activityUser.id,extra:{type:"played_game_extra",game_name:null!==(o=null===(i=e.activity)||void 0===i?void 0:i.name)&&void 0!==o?o:e.game.name,application_id:null!==(u=null===(l=e.activity)||void 0===l?void 0:l.application_id)&&void 0!==u?u:e.game.id,fake_inventory_item:!0},content_type:s.s.PLAYED_GAME,author_type:a.i.USER,participants:e.playingMembers.map(e=>e.id),traits:[{type:d.N.IS_LIVE,is_live:!0}]}})(e)),...e];return null!=n?t.slice(0,n):t},[o,h,n]),currentUserActivity:c}}function $(e){let t=q(e);return(0,i.jsx)(X,{...t})}function ee(e){let{locked:t}=e,n=(0,F.II)(),r=null==n?void 0:n.id,o=null==n?void 0:n.altId,a=(0,Z.Ns)(r),s=(0,u.e7)([D.default],()=>D.default.getCurrentUser()),h=null!=o?o:r,p=(0,u.e7)([k.Z],()=>null==h?null:k.Z.getApplicationActivity(h),[h]),f=(0,u.e7)([P.Z],()=>null!=h?J(h,P.Z.nowPlayingCards):[],[h]);(0,g.ZP)(()=>(y.L(),()=>y.v()));let m=null!=p&&(0,E.Z)(p,B.xjy.JOIN),v=(0,x.q)(null==p?void 0:p.application_id),I=null!=v&&(0,z.yE)(v.flags,B.udG.EMBEDDED),C=q({gamingId:h,userAffinityThresholdV1:17.5,userAffinityThresholdV2:.00145,maxUserShowCount:12}),S=C.entries;return l.useEffect(()=>{if(null==p||t)return;let e=new Set([...a.map(e=>e.author_id),...f.map(e=>e.activityUser.id)]),n=Array.from(e).filter(e=>null!=S.find(t=>{let{author_id:n}=t;return e===n})),i=Array.from(e).filter(e=>{let t=S.find(t=>{let{author_id:n}=t;return e===n});return null!=t&&t.traits.find(e=>{let{type:t}=e;return t===d.N.IS_LIVE})});(0,U.zi)(B.Odu.ACTIVITY,{locked:M.Z.isInstanceLocked(),shownUserIds:Array.from(n),liveUserIds:i,contentInventoryIds:a.map(e=>e.id)})},[a,f,t,p,S]),0===a.length&&null==p?null:(0,i.jsxs)("div",{className:H.container,children:[null!=p&&null!=s?(0,i.jsx)(w.Z,{className:H.activityCard,activity:p,user:s,currentUser:s,appContext:B.IlC.OVERLAY}):null,m&&!I?(0,i.jsx)(c.zxk,{className:H.inviteFriendsButton,onClick:()=>{(0,_.h7)(p,!1,B.IlC.POPOUT),(0,U.Ws)(B.Odu.ACTIVITY,{type:U.Qu.INVITE,value:U.bk.PANEL_OPENED})},size:c.PhG.SMALL,color:c.Ttl.PRIMARY,children:G.intl.string(G.t["6Qgren"])}):null,(0,i.jsx)(X,{...C})]})}},667142:function(e,t,n){n.d(t,{Df:()=>c,S_:()=>u,V5:()=>a,VX:()=>o,ZP:()=>h,ih:()=>s,xc:()=>d});var i=n(972959);let l={timeToLiveMs:5e3,reappearTimeMs:1e4},r=(0,i.H)(()=>l),o=1e4,a=2e4,s=500,d=1e3;function u(e){r.setState({timeToLiveMs:e})}function c(e){r.setState({reappearTimeMs:e})}let h=r},926086:function(e,t,n){n.d(t,{Z:()=>f}),n(47120),n(411104);var i=n(200651),l=n(192379),r=n(120356),o=n.n(r),a=n(348327),s=n.n(a),d=n(642128),u=n(481060),c=n(667142),h=n(333031),_=n(380917);let p={mass:1,tension:600,friction:60,clamp:!0};function f(e){let{locked:t,pinned:n}=e,[r,a]=l.useState(0),[f,m]=l.useState(0),[g,v]=l.useState(0),E=l.useRef(0),[x,I]=l.useState(0),{timeToLiveMs:C,reappearTimeMs:S}=c.ZP.useState(e=>({timeToLiveMs:e.timeToLiveMs,reappearTimeMs:e.reappearTimeMs}),s()),Z={timeToLiveMs:C,reappearTimeMs:S},y=l.useRef(Z);l.useEffect(()=>{y.current=Z}),l.useEffect(()=>(E.current=setInterval(()=>{let e=Date.now();m(e),v(t=>{if(0===t)return e;let n=e-t,i=y.current.timeToLiveMs,l=i+y.current.reappearTimeMs;return n>i?t+l:t})},100),()=>{clearInterval(E.current)}),[]);let O=()=>{a(Date.now()),I(e=>e+1)},N=r>0&&f-r<1e3,b=(0,u.Yzy)(g>0&&g<f&&f-g<C,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0},config:p}),[T,w]=l.useState(!1);if(l.useEffect(()=>{x>10&&w(!0)},[x]),T)throw Error("ClickZoneDebugWidget crashed, too many clicks");return t&&!n?null:(0,i.jsx)(i.Fragment,{children:b((e,t)=>t&&(0,i.jsx)(d.animated.div,{style:e,className:_.clickZoneDebugContainer,children:(0,i.jsx)(h.Z,{className:o()(_.clickZone,N&&_.clickBackground),children:(0,i.jsx)(u.P3F,{onClick:O,className:_.clickable,children:(0,i.jsxs)(u.Text,{variant:"text-md/semibold",color:"always-white",children:["Click Me (",x,")"]})})})}))})}},353038:function(e,t,n){n.d(t,{B:()=>g,Z:()=>y}),n(47120),n(411104);var i,l,r=n(200651),o=n(192379),a=n(120356),s=n.n(a),d=n(642128),u=n(902704),c=n(585483),h=n(434529),_=n(981631),p=n(355266);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let m=(e,t,n,i)=>Math.pow(e-n,2)+Math.pow(t-i,2);var g=((l={}).MOVE="MOVE",l.RESIZE_NORTH="RESIZE_NORTH",l.RESIZE_WEST="RESIZE_WEST",l.RESIZE_EAST="RESIZE_EAST",l.RESIZE_SOUTH="RESIZE_SOUTH",l.RESIZE_NORTH_WEST="RESIZE_NORTH_WEST",l.RESIZE_NORTH_EAST="RESIZE_NORTH_EAST",l.RESIZE_SOUTH_WEST="RESIZE_SOUTH_WEST",l.RESIZE_SOUTH_EAST="RESIZE_SOUTH_EAST",l);let v=new Set(["RESIZE_NORTH","RESIZE_WEST","RESIZE_EAST","RESIZE_SOUTH","RESIZE_NORTH_WEST","RESIZE_NORTH_EAST","RESIZE_SOUTH_WEST","RESIZE_SOUTH_EAST"]);function E(e,t,n){let{width:i,height:l}=e;return{width:"auto"===i?"auto":Math.max(t,i),height:"auto"===l?"auto":Math.max(n,l)}}function x(e){let{top:t,left:n,bottom:i,right:l}=e;return null==n&&null==l&&(n=0),null!=n&&null!=l&&(l=void 0),null==t&&null==i&&(t=0),null!=t&&null!=i&&(i=void 0),{top:t,left:n,bottom:i,right:l}}function I(e){return"auto"===e||null==e?"auto":"".concat(e,"px")}function C(e,t){let n=0,i=0;return{width:n="auto"===t.width?null!=e?e.clientWidth:0:t.width,height:"auto"===t.height?null!=e?e.clientHeight:0:t.height}}function S(e,t){let{top:n,left:i,bottom:l,right:r}=t;switch(e){case"RESIZE_EAST":case"RESIZE_NORTH_EAST":case"RESIZE_NORTH":return{bottom:l,left:i,right:void 0,top:void 0};case"RESIZE_WEST":case"RESIZE_NORTH_WEST":return{bottom:l,right:r,left:void 0,top:void 0};case"RESIZE_SOUTH_EAST":return{top:n,left:i,bottom:void 0,right:void 0};case"RESIZE_SOUTH":case"RESIZE_SOUTH_WEST":return{top:n,right:r,bottom:void 0,left:void 0};default:throw Error("getOrientedCoords: Invalid orientation: ".concat(e))}}function Z(e){let{computedSize:t}=e;return t}class y extends(i=o.Component){shouldComponentUpdate(e,t){return!(0,u.Z)(t,this.state)||!(0,u.Z)(e,this.props,["anchor","size","minSize","container"])||!(0,u.Z)(e.anchor,this.props.anchor)||!(0,u.Z)(e.size,this.props.size)||!(0,u.Z)(e.minSize,this.props.minSize)||!(0,u.Z)(e.container,this.props.container)}componentDidMount(){this.setDOMPositions(x(this.props.anchor)),this.setDOMSize(E(this.props.size,this.props.minSize.width,this.props.minSize.height)),c.S.subscribe(_.CkL.OVERLAY_V3_SHOW_WIDGETS,this.handleShowUI)}componentDidUpdate(e,t){null!=t.operation||((0,u.Z)(this.props.anchor,e.anchor)||this.setDOMPositions(x(this.props.anchor)),(0,u.Z)(this.props.size,e.size)||this.setDOMSize(E(this.props.size,this.props.minSize.width,this.props.minSize.height)))}componentWillUnmount(){this.handleOperationEnd(),c.S.unsubscribe(_.CkL.OVERLAY_V3_SHOW_WIDGETS,this.handleShowUI)}handleResizeMouseDown(e,t){let{clientX:n,clientY:i}=e;e.stopPropagation(),this.handleOperationStart(t,n,i)}handleDragMove(e,t){let{ref:{current:n},props:{id:i,container:{maxX:l,maxY:r,minX:o,minY:a},onDragStart:s,onDrag:d,snapOrientation:u=!0},dragState:{offsetX:c,offsetY:_},state:{operationStarted:p}}=this;if(null==n)return null;e=Math.max(Math.min(l,e),o),t=Math.max(Math.min(r,t),a);let{width:f,height:m}=C(n,this.size),g=t-_,v=e-c,E=(0,h.ou)((0,h.PY)({top:g,left:v,bottom:void 0,right:void 0},l,r,f,m)),x=u?(0,h.R)(E):S("RESIZE_SOUTH_EAST",E);this.setDOMPositions(x),this.setState({operationStarted:!0,anchorTopOverride:null!=x.top,anchorLeftOverride:null!=x.left},()=>{p||null==s||s(),null!=d&&d(i,"MOVE",this.anchor,this.size)})}handleResizeMove(e,t){let{props:{id:n,minSize:i,container:{maxX:l,maxY:r,minX:o,minY:a},onDragStart:s,onDrag:d,resizeValidation:c=Z},state:{operation:_,operationStarted:p}}=this,{startX:f,startY:m}=this.dragState,g=0,v=0;if(null==_)return;switch(e=Math.max(Math.min(l,e),o),t=Math.max(Math.min(r,t),a),_){case"RESIZE_EAST":case"RESIZE_SOUTH_EAST":case"RESIZE_NORTH_EAST":g-=f-e;break;case"RESIZE_WEST":case"RESIZE_SOUTH_WEST":case"RESIZE_NORTH_WEST":g+=f-e}switch(_){case"RESIZE_SOUTH":case"RESIZE_SOUTH_WEST":case"RESIZE_SOUTH_EAST":v-=m-t;break;case"RESIZE_NORTH":case"RESIZE_NORTH_WEST":case"RESIZE_NORTH_EAST":v+=m-t}let E=c({padding:8,borderWidth:2,operation:_,computedSize:{width:Math.max(this.dragState.offsetWidth+g,i.width),height:Math.max(this.dragState.offsetHeight+v,i.height)},originSize:{width:this.dragState.offsetWidth,height:this.dragState.offsetHeight},containerSpecs:this.props.container,orientedPosition:this.dragState.dragOrientedCoords}),x=(0,h.BL)((0,h.ou)((0,h.PY)(this.dragState.dragOrientedCoords,l,r,E.width,E.height)),this.dragState.dragOrientedCoords);this.setDOMSize(E,!0),(0,u.Z)(x,this.dragState.dragOrientedCoords)||(this.dragState.dragOrientedCoords=x,this.setDOMPositions(this.dragState.dragOrientedCoords)),p||(null!=s&&s(),this.setState({operationStarted:!0})),null!=d&&d(n,_,this.anchor,this.size)}setDOMPositions(e){let{top:t,left:n,bottom:i,right:l}=e,{current:r}=this.ref;this.anchor={top:t,left:n,bottom:i,right:l},null!=r&&(r.style.top=I(t),r.style.bottom=I(i),r.style.left=I(n),r.style.right=I(l))}setDOMSize(e){let{width:t,height:n}=e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{current:l}=this.ref;t="auto"!==this.size.width||i?t:"auto",n="auto"!==this.size.height||i?n:"auto",this.size={width:t,height:n},null!=l&&(l.style.width=I(t),l.style.height=I(n))}renderResizeHandles(){let{resizeY:e,resizeX:t,active:n}=this.props;return(0,r.jsxs)(r.Fragment,{children:[e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:s()(p.resizeNorth,{[p.resizeNSCursor]:n}),onMouseDown:e=>this.handleResizeMouseDown(e,"RESIZE_NORTH")}),(0,r.jsx)("div",{className:s()(p.resizeSouth,{[p.resizeNSCursor]:n}),onMouseDown:e=>this.handleResizeMouseDown(e,"RESIZE_SOUTH")})]}):null,t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:s()(p.resizeEast,{[p.resizeEWCursor]:n}),onMouseDown:e=>this.handleResizeMouseDown(e,"RESIZE_EAST")}),(0,r.jsx)("div",{className:s()(p.resizeWest,{[p.resizeEWCursor]:n}),onMouseDown:e=>this.handleResizeMouseDown(e,"RESIZE_WEST")})]}):null,t&&e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:s()(p.resizeNorthWest,{[p.resizeNWSECursor]:n}),onMouseDown:e=>this.handleResizeMouseDown(e,"RESIZE_NORTH_WEST")}),(0,r.jsx)("div",{className:s()(p.resizeNorthEast,{[p.resizeNESWCursor]:n}),onMouseDown:e=>this.handleResizeMouseDown(e,"RESIZE_NORTH_EAST")}),(0,r.jsx)("div",{className:s()(p.resizeSouthWest,{[p.resizeNESWCursor]:n}),onMouseDown:e=>this.handleResizeMouseDown(e,"RESIZE_SOUTH_WEST")}),(0,r.jsx)("div",{className:s()(p.resizeSouthEast,{[p.resizeNWSECursor]:n}),onMouseDown:e=>this.handleResizeMouseDown(e,"RESIZE_SOUTH_EAST")})]}):null]})}renderExtras(){let{props:{renderExtras:e,anchor:t},setLockExtras:n}=this,i=null==e?void 0:e(n);return null!=i?(0,r.jsx)("div",{className:s()({[p.extras]:!0,[p.extrasBottomOriented]:null!=t.bottom,[p.extrasRightOriented]:null!=t.right}),children:i}):null}getInlineStyles(){let{props:{hidden:e,style:t,minSize:n,padding:i=8,borderWidth:l=2,borderRadius:r=12},state:{operation:o}}=this;return{...t,minWidth:n.width,minHeight:n.height,borderWidth:l,padding:i,borderRadius:r+l+i,zIndex:null!=o?1e3:void 0,visibility:e?"hidden":void 0}}renderChildren(){let{props:{children:e,hidden:t,padding:n=8,borderWidth:i=2,locked:l},size:r,anchor:o,setLockExtras:a,state:{anchorTopOverride:s,anchorLeftOverride:d}}=this;return e({dragStart:this.handleOperationStart,dragOperation:this.state.operation,anchorTop:null!=s?s:null!=o.top,anchorLeft:null!=d?d:null!=o.left,size:r,padding:n,borderWidth:i,setLockExtras:a,locked:l,hidden:t})}render(){let{props:{onClick:e,id:t,locked:n,className:i},state:{operationStarted:l,lockExtras:o}}=this;return(0,r.jsxs)(d.animated.div,{ref:this.ref,style:this.getInlineStyles(),className:s()({[p.wrapper]:!0,[p.operation]:l,[p.unlocked]:!n,[p.lockExtras]:o},i),onMouseDown:this.handleMouseDown,onClick:null!=e?()=>e(t):void 0,children:[this.renderChildren(),this.renderResizeHandles(),this.renderExtras()]})}constructor(e){super(e),f(this,"anchor",void 0),f(this,"size",void 0),f(this,"ref",o.createRef()),f(this,"dragState",{startX:0,startY:0,offsetX:0,offsetY:0,offsetWidth:0,offsetHeight:0,dragOrientedCoords:{top:0,left:0}}),f(this,"state",{lockExtras:!0,operation:null,operationStarted:!1,anchorTopOverride:void 0,anchorLeftOverride:void 0}),f(this,"handleShowUI",e=>{let{show:t}=e;this.setLockExtras(t)}),f(this,"handleMouseDown",e=>{e.stopPropagation();let{dragAnywhere:t}=this.props,{current:n}=this.ref;null!=n&&e.button===_.AeJ.PRIMARY&&t&&this.handleOperationStart("MOVE",e.clientX,e.clientY)}),f(this,"handleMouseMove",e=>{e.preventDefault(),e.stopPropagation();let{clientX:t,clientY:n}=e,{dragState:{startX:i,startY:l},state:{operation:r,operationStarted:o}}=this;!(null==r||!o&&3>m(i,l,t,n))&&("MOVE"===r?this.handleDragMove(t,n):v.has(r)&&this.handleResizeMove(t,n))}),f(this,"handleOperationStart",(e,t,n)=>{let{ref:{current:i},props:{targetWindow:l,active:r,container:{maxX:o,maxY:a}}}=this;if(null==i||!r)return;let{width:s,height:d}=C(i,this.size),u=(0,h.PY)(this.anchor,o,a,s,d);if("MOVE"===e){let{x:e,y:i}=function(e){let{top:t,left:n}=e;return{x:n,y:t}}(u);this.dragState={...this.dragState,startX:t,startY:n,offsetX:t-e,offsetY:n-i}}else{let i=S(e,u);this.setDOMPositions(i),this.dragState={...this.dragState,startX:t,startY:n,offsetWidth:s,offsetHeight:d,dragOrientedCoords:i}}this.setState({operation:e,operationStarted:!1},()=>{l.addEventListener("mousemove",this.handleMouseMove),l.addEventListener("mouseup",this.handleOperationEnd)})}),f(this,"handleOperationEnd",()=>{let{operation:e,operationStarted:t}=this.state,{targetWindow:n,onDragEnd:i}=this.props;n.removeEventListener("mousemove",this.handleMouseMove),n.removeEventListener("mouseup",this.handleOperationEnd);let l=t?()=>{let{onUpdate:t,id:n}=this.props;t(e,n,this.anchor,this.size,C(this.ref.current,this.size))}:void 0;if(t){let{maxX:e,maxY:t}=this.props.container,{width:n,height:l}=C(this.ref.current,this.size),r=(0,h.PY)(this.anchor,e,t,n,l),o=(0,h.R)(r);this.setDOMPositions(o),this.setDOMSize({width:n,height:l}),null!=i&&i()}this.setState({operation:null,operationStarted:!1},l)}),f(this,"setLockExtras",e=>{this.setState({lockExtras:e})}),this.anchor=x(e.anchor),this.size=E(e.size,e.minSize.width,e.minSize.height)}}f(y,"Operations",g)},350663:function(e,t,n){n.d(t,{Z:()=>m,z:()=>_});var i=n(200651),l=n(192379),r=n(120356),o=n.n(r),a=n(642128),s=n(481060),d=n(110924),u=n(752802),c=n(340101),h=n(625130);let _=8,p=e=>{let{participant:t,width:n,locked:l,widgetId:r,pinned:o}=e;return(0,i.jsx)("div",{className:h.tileContainer,children:(0,i.jsx)(u.Z,{participant:t,width:n,locked:l,widgetId:r,pinned:o},t.user.id)})},f={mass:1,tension:250,friction:18,clamp:!0},m=l.memo(function(e){let{widgetId:t,tileWidth:n,layout:l,locked:r,streamParticipants:u,participantsVersion:m,pinned:g}=e,v=9/16*n,E=u.map(e=>({participant:e,key:e.user.id,width:n,locked:r,widgetId:t,height:v,pinned:g})),x=(0,d.Z)(n),I=l===c.C5.VERTICAL,C=0,S=0,Z=(0,s.Yzy)(I?E.map((e,t)=>({...e,y:(C+=e.height+(t>0?_:0))-e.height,x:0})):E.map((e,t)=>({...e,x:(S+=e.width+(t>0?_:0))-e.width,y:0})),{key:e=>e.key,from:{height:0,opacity:0},leave:{height:0,opacity:0},enter:e=>{let{x:t,y:n,width:i,height:l}=e;return{x:t,y:n,width:i,height:l,opacity:1}},update:e=>{let{x:t,y:n,width:i,height:l}=e;return{x:t,y:n,width:i,height:l}},config:f,trail:n!==x?0:100},n!==x?"animate-never":"respect-motion-settings");return(0,i.jsx)("div",{className:o()({[h.gridContainer]:!0,[h.vertical]:I,[h.horizontal]:!I}),style:I?{height:C}:{width:S},children:Z((e,t,l,r)=>(0,i.jsx)(a.animated.div,{className:h.gridItem,style:Object.assign({},e,{width:n,height:v,zIndex:E.length-r}),children:p(t)}))})})},1226:function(e,t,n){n.d(t,{BO:()=>s,cq:()=>u,gI:()=>c,xN:()=>h,yA:()=>d});var i=n(348327),l=n.n(i),r=n(972959),o=n(569545);let a=(0,r.H)(()=>({streams:{}}));function s(e){var t,n;let i=(0,o.V9)(e);return null!==(n=null===(t=a.useState(e=>e.streams,l())[i])||void 0===t?void 0:t.zoom)&&void 0!==n?n:100}function d(e){return s(e)/100}function u(e,t){let n=(0,o.V9)(e);a.setState(e=>{var i;return{...e,streams:{...e.streams,[n]:{zoom:t,fitOverride:null===(i=e.streams[n])||void 0===i?void 0:i.fitOverride}}}},!0)}function c(e,t){let n=(0,o.V9)(e);a.setState(e=>{var i;return{...e,streams:{...e.streams,[n]:{zoom:null===(i=e.streams[n])||void 0===i?void 0:i.zoom,fitOverride:t}}}})}function h(e){var t;let n=(0,o.V9)(e);return null===(t=a.useState(e=>e.streams,l())[n])||void 0===t?void 0:t.fitOverride}},752802:function(e,t,n){n.d(t,{Z:()=>D}),n(47120);var i=n(200651),l=n(192379),r=n(120356),o=n.n(r),a=n(399606),s=n(46973),d=n(481060),u=n(846027),c=n(239091),h=n(765250),_=n(872810),p=n(40851),f=n(414910),m=n(194082),g=n(979264),v=n(871118),E=n(352978),x=n(833519),I=n(839662),C=n(199902),S=n(314897),Z=n(131951),y=n(594174),O=n(5192),N=n(444295),b=n(1226),T=n(981631),w=n(388032),A=n(233654);function j(e){let{participant:t}=e,n=t.user.id,r=(0,a.e7)([Z.Z],()=>{let e=(0,f.Z)(t.type);return Z.Z.isLocalMute(t.user.id,e)},[t]),o=(0,a.e7)([S.default],()=>S.default.getId()),{hasVideo:c}=(0,I.Z)(t,o),h=r&&c,_=l.useCallback(()=>{u.Z.toggleLocalMute(n,s.Yn.STREAM)},[n]);return(0,i.jsx)(d.ua7,{text:h?w.intl.string(w.t.YqAjX1):w.intl.string(w.t["w4m94+"]),children:e=>{let{onClick:n,...l}=e;return(0,i.jsx)(d.P3F,{...l,className:A.controlAction,onClick:e=>{e.stopPropagation(),(0,N.Ws)(T.Odu.GO_LIVE,{type:N.Qu.AUDIO,value:h?N.bk.ENABLED:N.bk.DISABLED,userId:t.user.id}),null==n||n(),_()},children:h?(0,i.jsx)(d.OyP,{size:"sm",color:"currentColor"}):(0,i.jsx)(d.gj8,{size:"sm",color:"currentColor"})})}})}function k(e,t,l){return r=>{(0,N.Ws)(T.Odu.GO_LIVE,{type:N.Qu.GO_LIVE,value:N.bk.SETTINGS_OPENED,userId:e.user.id}),r.stopPropagation(),null==l||l(),(0,c.jW)(r,async()=>{let{default:l}=await n.e("5704").then(n.bind(n,782270));return n=>(0,i.jsx)(l,{...n,stream:e.stream,exitFullscreen:()=>{},appContext:t})})}}function R(e){let{hasActiveStream:t,participant:n,onEnablePin:l}=e,r=(0,p.bp)(),s=n.user,u=(0,a.e7)([y.default],()=>{var e;return null!==(e=y.default.getUser(s.id))&&void 0!==e?e:s},[s]),c=t?w.intl.string(w.t.tLxK4u):w.intl.string(w.t.E5RDnJ);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:o()(A.controlBackground,{[A.controlsWithActiveStream]:t})}),!t&&(0,i.jsx)("div",{className:A.watchActionContainer,children:(0,i.jsx)(d.ua7,{text:c,children:e=>(0,i.jsxs)(d.P3F,{...e,className:A.watchButton,onClick:()=>{var t;null===(t=e.onClick)||void 0===t||t.call(e),(0,_.rn)(n.stream,{forceMultiple:!0,noFocus:!0}),l(),(0,N.Ws)(T.Odu.GO_LIVE,{type:N.Qu.GO_LIVE,value:N.bk.ENABLED,userId:n.user.id})},children:[(0,i.jsx)(d.Text,{variant:"text-sm/semibold",color:"always-white",children:w.intl.string(w.t["I6JG4+"])}),(0,i.jsx)(d.OgY,{size:"sm",color:"currentColor"})]})})}),(0,i.jsxs)("div",{className:A.controls,children:[(0,i.jsx)("div",{className:A.controlUser,children:(0,i.jsxs)("div",{className:A.controlUserContainer,children:[(0,i.jsx)(d.pzj,{size:"xs",color:d.TVs.colors.INTERACTIVE_ACTIVE}),(0,i.jsx)(d.Text,{variant:"text-md/medium",color:"always-white",children:O.ZP.getName(n.stream.guildId,n.stream.channelId,s)}),(0,i.jsx)(g.ZP,{primaryGuild:u.primaryGuild,userId:s.id,onShowProfile:()=>{(0,N.Ws)(T.Odu.GO_LIVE,{type:N.Qu.GO_LIVE,value:N.bk.GUILD_PROFILE_OPENED,userId:n.user.id})}})]})}),(0,i.jsx)("div",{className:A.controlActions,children:t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j,{participant:n}),(0,i.jsx)(d.ua7,{text:w.intl.string(w.t["3D5yo6"]),children:e=>{let{onClick:t,...l}=e;return(0,i.jsx)(d.P3F,{...l,className:A.controlAction,onClick:k(n,r,t),children:(0,i.jsx)(d.xhG,{size:"sm",color:"currentColor"})})}})]})})]})]})}let L=new Set([T.jm8.ENDED,T.jm8.FAILED,T.jm8.PAUSED]),D=l.memo(function(e){let{participant:t,width:n,locked:l,widgetId:r,pinned:s}=e,u=(0,a.e7)([C.Z],()=>C.Z.getActiveStreamForUser(t.user.id,t.stream.guildId),[t.user.id,t.stream.guildId]),c=(0,p.bp)(),_=null!=u&&L.has(u.state),f=null!=u,g=(0,b.yA)(t.stream),I=(0,b.xN)(t.stream);return!f&&l||_?null:(0,i.jsxs)("div",{className:A.tile,children:[f&&!l&&(0,i.jsx)(m.ZP,{size:m.ZP.Sizes.SMALL,className:A.liveIndicator}),f?(0,i.jsx)("div",{className:A.streamTile,children:(0,i.jsx)(d.kL8,{"aria-label":w.intl.formatToPlainString(w.t.gHPz3d,{streamerName:t.user.username}),onClick:()=>{},onContextMenu:k(t,c),className:A.streamTile,style:{transform:"scale(".concat(g,")")},children:(0,i.jsx)(x.Z,{participant:t,width:n,fit:null!=I?I:E.L.CONTAIN,inPopout:!0,focused:!l,paused:!1,selected:!1,wrapperClassName:l?A.streamTileWrapper:void 0,inOverlayPopout:!0})})}):(0,i.jsx)("div",{className:A.streamPreview,children:(0,i.jsx)(v.Z,{noText:!0,className:o()(A.absoluteFill),stream:t.stream})}),l?null:(0,i.jsx)(R,{participant:t,hasActiveStream:f,onEnablePin:()=>{s||(0,h.xh)(r)}})]})})},761374:function(e,t,n){n.d(t,{Z:()=>T}),n(47120);var i=n(200651),l=n(192379),r=n(442837),o=n(481060),a=n(765250),s=n(13245),d=n(393238),u=n(493773),c=n(358221),h=n(569545),_=n(199902),p=n(314897),f=n(592125),m=n(355863),g=n(944486),v=n(237997),E=n(444295),x=n(804570),I=n(350663),C=n(610394),S=n(340101),Z=n(981631),y=n(388032),O=n(667933);let N=[];function b(e,t,n,i){let l=(i-1)*I.z;return e===S.C5.HORIZONTAL?Math.min(Math.max((t-l)/i,256),Math.max(16*n/9,256)):Math.min(Math.max(t,256),Math.max((n-l)/i*16/9,256))}function T(e){let{id:t,size:n,locked:T,padding:w,borderWidth:A,opacity:j,horizontal:k,pinned:R,anchorTop:L,anchorLeft:D}=e,P=2*w+2*A,{width:M,height:z}={width:"number"==typeof n.width?n.width:256,height:"number"==typeof n.height?n.height:144},V=(0,r.e7)([g.Z],()=>g.Z.getVoiceChannelId()),{width:W,height:U,ref:F}=(0,d.Z)(),B=(0,r.e7)([m.Z],()=>{var e;let n=m.Z.getWidget(t);return!!(0,S.ZL)(n)&&(null===(e=n.meta.showAllStreams)||void 0===e||e)},[t]),G=!k,H=(0,r.e7)([f.Z],()=>f.Z.getChannel(V)),Y=(0,r.e7)([p.default],()=>p.default.getId()),Q=L&&G||D&&k,K=!L&&G||!D&&k,{participantsVersion:X,streamParticipants:J,participantIds:q}=(0,r.cj)([_.Z,c.Z],()=>{if(null==V)return{streamParticipants:N,participantsVersion:-1,participantIds:[]};let e=new Set(_.Z.getAllActiveStreamsForChannel(V).map(e=>(0,h.V9)(e))),t=t=>e.has((0,h.V9)(t.stream)),n=c.Z.getStreamParticipants(V).filter(e=>e.user.id!==Y&&(!!B||t(e)));return n.sort((e,n)=>{if(Q){if(t(e)&&!t(n))return -1;if(!t(e)&&t(n))return 1}else if(K){if(t(e)&&!t(n))return 1;if(!t(e)&&t(n))return -1}return e.user.username.localeCompare(n.user.username)}),{streamParticipants:n,activeStreams:e,participantIds:n.map(e=>e.user.id),participantsVersion:c.Z.getParticipantsVersion(V)}},[V,Y,B,Q,K]),$=J.length,ee=null==H||0===$,et=k?S.C5.HORIZONTAL:S.C5.VERTICAL,{tileWidth:en,layout:ei}=function(e,t,n,i,r){let o=function(e,t,n,i){let l=b(S.C5.HORIZONTAL,e,t,n),r=b(S.C5.VERTICAL,e,t,n);switch(i){case S.C5.VERTICAL:return r;case S.C5.HORIZONTAL:return l}let o=(9*r/16+I.z)*n-I.z;return e>16*t/9?l:o<=t?r:9*l/16<=t?l:r}(n,i,t,r),a=b(S.C5.VERTICAL,n,i,t),s=null!=r?r:o===a?S.C5.VERTICAL:S.C5.HORIZONTAL,[d,u]=l.useState(o);return l.useEffect(()=>{e||u(o)},[e,o]),{layout:s,tileWidth:d}}(!1,J.length,null!=W?W:M-P,null!=U?U:z-P,et),el={id:t,width:M,height:z,sizeOffset:P,layout:ei,padding:w,participants:J.length};!function(e){let{id:t,streamParticipants:n,layout:i,widgetLayoutSpecs:r}=e,o=l.useRef(r);l.useEffect(()=>{o.current=r});let s=n.length;l.useEffect(()=>{let{id:e,width:t,height:n,sizeOffset:i,layout:l,padding:r}=o.current;if(0===s){(256!==t||144!==n)&&(0,a.nv)({widgetId:e,size:{fixed:!0,width:256,height:144}});return}if(l===S.C5.HORIZONTAL){let t=16/9*(n-i);(0,a.nv)({widgetId:e,size:{fixed:!0,height:n,width:t*s+r*(s-1)+i}})}else{let n=9/16*(t-i);(0,a.nv)({widgetId:e,size:{fixed:!0,width:t,height:n*s+r*(s-1)+i}})}},[s]),l.useEffect(()=>{if(o.current.participants<=1)return;let{id:e,width:t,height:n,sizeOffset:l,padding:r,participants:s}=o.current;if(i===S.C5.HORIZONTAL){let n=t-l;(0,a.nv)({widgetId:e,size:{fixed:!0,width:n*s+r*(s-1)+l,height:9/16*n+l}})}else{let t=n-l;(0,a.nv)({widgetId:e,size:{fixed:!0,width:16/9*t+l,height:t*s+r*(s-1)+l}})}},[i]),l.useEffect(()=>()=>{(0,a.nv)({widgetId:t,size:{fixed:!0,width:256,height:144}})},[t])}({id:t,streamParticipants:J,layout:ei,widgetLayoutSpecs:el}),l.useEffect(()=>{s.Z.setGpuBoostRequested(C.zS.OVERLAY_VIDEO_STREAM_RENDERING,!ee)},[ee]),(0,u.ZP)(()=>()=>{s.Z.setGpuBoostRequested(C.zS.OVERLAY_VIDEO_STREAM_RENDERING,!1)});let[er,eo]=l.useState(new Set);l.useEffect(()=>{-1!==X&&eo(e=>{let t=new Set(q);return Array.from(e).filter(e=>!t.has(e)).length>0||Array.from(t).filter(t=>!e.has(t)).length>0?t:e})},[q,X]);let ea=R||!T;return(l.useEffect(()=>{0!==er.size&&ea&&(0,E.zi)(Z.Odu.VIDEO,{locked:v.Z.isInstanceLocked(),shownUserIds:Array.from(er),liveUserIds:Array.from(er),contentInventoryIds:[]})},[er,ea]),ee&&T)?null:ee&&!T?T?null:(0,i.jsx)(x.E,{emptyText:y.intl.string(y.t["T6+rX1"]),icon:o.hGI,absolute:!0}):(0,i.jsx)("div",{className:O.goLiveGridContainer,style:{opacity:j},ref:F,children:(0,i.jsx)(I.Z,{widgetId:t,tileWidth:en,locked:T,layout:ei,streamParticipants:J,participantsVersion:X,pinned:R})})}},915614:function(e,t,n){n.d(t,{Z:()=>d});var i=n(200651);n(192379);var l=n(120356),r=n.n(l),o=n(481060),a=n(809357),s=n(4119);function d(e){let{onClick:t,keybind:n,className:l,IconComponent:d}=e,u=(0,a.o)();return(0,i.jsxs)("div",{className:r()(s.buttonContainer,l),children:[(0,i.jsx)(o.P3F,{className:s.button,onClick:t,"aria-hidden":!0,children:(0,i.jsx)(d,{size:"md",color:"currentColor","aria-hidden":!0})}),null!=n&&u?(0,i.jsx)(o.Text,{className:r()(s.keybind),"aria-hidden":!0,variant:"text-xxs/bold",color:"interactive-normal",children:n}):null]})}},554370:function(e,t,n){n.d(t,{Z:()=>eu}),n(653041),n(47120);var i=n(200651),l=n(192379),r=n(120356),o=n.n(r),a=n(442837),s=n(952265),d=n(481060),u=n(239091),c=n(13245),h=n(615287),_=n(100527),p=n(906732),f=n(146282),m=n(70097),g=n(567409),v=n(74299),E=n(199902),x=n(592125),I=n(430824),C=n(355863),S=n(131951),Z=n(944486),y=n(574254),O=n(556296),N=n(808506),b=n(237997),T=n(451478),w=n(585483),A=n(358085),j=n(13140),k=n(145597),R=n(830917),L=n(86071),D=n(32300),P=n(681603),M=n(915614),z=n(268861),V=n(690336),W=n(333031),U=n(371651),F=n(610394),B=n(388627),G=n(319414),H=n(561064),Y=n(987650),Q=n(501787),K=n(981631),X=n(206583),J=n(388032),q=n(470102);let $=!A.isPlatformEmbedded&&!1,ee=$?(0,i.jsx)(m.Z,{src:"https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExNzdpcnRrYXdrNzVuNjZ3NXpmeTJvNGl4Z2N4OXBsamx5aXphdHhxaCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9dg/OPg2B0FPBL94H12uM0/giphy480p.mp4",className:q.videoDev,autoPlay:!0,loop:!0,muted:!0}):null,et=null;function en(e){e.preventDefault()}function ei(e){(0,u.jW)(e,async()=>{let{default:e}=await n.e("17610").then(n.bind(n,385620));return t=>(0,i.jsx)(e,{...t,layoutId:Q.OVERLAY_V3_LAYOUT_ID,version:1})})}let el=l.memo(function(e){let{keybind:t,onClick:n,locked:l}=e;return(0,i.jsx)(d.P3F,{className:o()(q.overlayBackground,{[q.overlayActive]:!l,[q.overlayLocked]:l}),onMouseDown:e=>{let{currentTarget:t,target:i,button:l}=e;l===K.AeJ.PRIMARY&&t===i&&n()},onContextMenu:ei,children:l?null:(0,i.jsx)(W.Z,{className:q.closeContainer,children:(0,i.jsx)(M.Z,{keybind:t,onClick:n,IconComponent:d.Uz9})})})}),er=l.memo(function(e){let{locked:t,focused:n}=e;return t&&n?(0,i.jsx)(W.Z,{className:q.closeContainer,children:(0,i.jsx)(M.Z,{onClick:()=>c.Z.setInputLocked(!1,(0,k.QF)()),IconComponent:d.d$P})}):null});function eo(){if(null!=y.Z.getContextMenu()){(0,u.Zy)();return}c.Z.setInputLocked(!0,(0,k.QF)())}function ea(){c.Z.setFocusedPID(k.Js)}function es(){c.Z.setFocusedPID(null)}function ed(e){let t=F.ZP.isInputLocked((0,k.QF)());"alt"!==e.key.toLowerCase()||t||("keyup"===e.type.toLowerCase()?w.S.dispatch(K.CkL.OVERLAY_V3_SHOW_WIDGETS,{show:!0}):"keydown"===e.type.toLowerCase()&&w.S.dispatch(K.CkL.OVERLAY_V3_SHOW_WIDGETS,{show:!1}))}function eu(e){let{isEmbeddedActivity:t}=e,n=(0,H.Z)(),{locked:r,focused:u,incompatibleApp:m,hasValidResolution:y,hasZeroSizeDimension:w,keybind:A}=(0,a.cj)([F.ZP,b.Z,T.Z,O.ZP],()=>{let e=T.Z.windowSize((0,R.ZY)(n)),t=O.ZP.getOverlayKeybind(),i=(0,k.QF)();return{locked:F.ZP.isInputLocked(i),focused:i===k.Js?b.Z.isFocused(i):F.ZP.isFocused((0,k.QF)()),incompatibleApp:b.Z.incompatibleApp,hasValidResolution:(0,k.Te)(e),hasZeroSizeDimension:0===e.height||0===e.width,keybind:null!=t?(0,j.BB)(t.shortcut,!0):"???"}},[n]),{analyticsLocations:M}=(0,p.ZP)(_.Z.OVERLAY);return!function(e,t){let n=l.useRef({mount:e,unmount:t});l.useEffect(()=>{n.current={mount:e,unmount:t}}),l.useEffect(()=>(n.current.mount(),()=>{n.current.unmount()}),[])}(()=>{c.Z.overlayReady((0,k.QF)()),n.addEventListener("keydown",ed),n.addEventListener("keyup",ed),$&&(n.document.hasFocus()&&c.Z.setFocusedPID(k.Js),n.addEventListener("focus",ea),n.addEventListener("blur",es))},()=>{n.removeEventListener("keydown",ed),n.removeEventListener("keyup",ed),$&&(n.removeEventListener("focus",ea),n.removeEventListener("blur",es))}),!function(){let e=l.useRef(!1),t=(0,B.pL)(),n=Z.Z.getVoiceChannelId(),i=x.Z.getChannel(n),r=null!=i?I.Z.getGuild(i.guild_id):null,o=null!=E.Z.getCurrentUserActiveStream(),s=null!=n,d=(0,v.Z)(S.Z)&&!o&&null!=t,u=s&&null!=r&&null!=n,_=(0,g.Ns)(null==t?void 0:t.id),p=(0,a.e7)([f.Z],()=>null!=f.Z.getLastFeedFetchDate(X.YN.GAME_PROFILE_FEED)),m=(0,D.o4)("overlay");l.useEffect(()=>{var i;if(!p||e.current)return;e.current=!0;let l=null!==(i=N.Z.getFocusedPID())&&void 0!==i?i:(0,k.QF)();if(c.Z.track(K.rMx.OVERLAY_INITIALIZED,{voice_widget_connected:s,text_widget_connected:!1,overlay_render_method:h.gl[U.default.getOverlayMethod(l)],unpinned_widget_types:C.Z.getAllUnpinnedPinnedWidgets(Q.OVERLAY_V3_LAYOUT_ID)}),U.default.hasChangedRenderMode(l))return;let o=[{type:Y.nc.WELCOME}];if(d&&u?o.push({type:Y.nc.GO_LIVE_VOICE,game:t,voiceChannelId:n,voiceGuild:r}):d&&o.push({type:Y.nc.GO_LIVE_NON_VOICE,game:t}),_.length>0){let{enabled:e}=L.Z.getCurrentConfig({location:"Overlay"},{autoTrackExposure:!0});(e||m.allowActivityWidget)&&o.push({type:Y.nc.CONTENT_INVENTORY,entries:_})}c.Z.overlayMounted(...o)},[p,_,s,d,u,t,n,r,m])}(),l.useEffect(()=>{if(r){if((0,s.Ay)(d.u1M),n.addEventListener("contextmenu",en,!1),null!=et){let e=Date.now()-et;c.Z.track(K.rMx.OVERLAY_LOCKED,{unlocked_duration:e}),et=null}return()=>{n.removeEventListener("contextmenu",en,!1)}}n.removeEventListener("contextmenu",en,!1),null==et&&(et=Date.now(),c.Z.track(K.rMx.OVERLAY_UNLOCKED))},[r,n]),(0,i.jsx)(p.Gt,{value:M,children:(0,i.jsx)(d.vWI,{children:w||m?null:(0,i.jsx)(d.f6W,{theme:K.BRd.DARK,children:e=>(0,i.jsxs)("div",{className:o()(q.overlay,e),children:[!t&&ee,(0,i.jsx)(el,{locked:r,keybind:A,onClick:eo}),y?(0,i.jsx)(V.Z,{className:o()({[q.layoutLocked]:r,[q.layoutUnlocked]:!r})}):r?null:(0,i.jsx)("div",{className:q.invalidContainer,children:(0,i.jsx)("div",{className:q.inactiveContainer,children:J.intl.format(J.t.ketnW1,k.FW)})}),(0,i.jsx)(G.Z,{}),!t&&$&&(0,i.jsx)(er,{locked:r,focused:u}),(0,i.jsx)(P.Z,{}),(0,i.jsx)(z.Z,{locked:r})]})})})})}},268861:function(e,t,n){n.d(t,{Z:()=>c}),n(47120);var i=n(200651),l=n(192379),r=n(704215),o=n(481060),a=n(243778),s=n(921944),d=n(388032),u=n(87296);function c(e){let{locked:t}=e,[n,c]=(0,a.US)(t?[]:[r.z.OVERLAY_OOP_WELCOME_BACKGROUND_NUX],void 0,!0);return(l.useEffect(()=>{if(!t&&n===r.z.OVERLAY_OOP_WELCOME_BACKGROUND_NUX)return()=>{n===r.z.OVERLAY_OOP_WELCOME_BACKGROUND_NUX&&c(s.L.AUTO_DISMISS)}},[t,c,n]),t||n!==r.z.OVERLAY_OOP_WELCOME_BACKGROUND_NUX)?null:(0,i.jsx)("div",{className:u.overlayBackgroundNux,children:(0,i.jsxs)("div",{className:u.mainContainer,children:[(0,i.jsxs)("div",{className:u.mainTitleContainer,children:[(0,i.jsx)(o.X6q,{variant:"heading-xl/medium",color:"header-primary",children:d.intl.string(d.t.jzjJQk)}),(0,i.jsx)(o.Text,{variant:"text-md/normal",color:"text-muted",children:d.intl.string(d.t["5dOfxc"])})]}),(0,i.jsxs)("div",{className:u.widgetCalloutContainer,children:[(0,i.jsxs)("div",{className:u.widgetCallout,children:[(0,i.jsx)(o.qjv,{}),(0,i.jsx)(o.Text,{variant:"text-md/medium",color:"interactive-normal",children:d.intl.string(d.t.S6VRyM)})]}),(0,i.jsxs)("div",{className:u.widgetCallout,children:[(0,i.jsx)(o.Dkj,{}),(0,i.jsx)(o.Text,{variant:"text-md/medium",color:"interactive-normal",children:d.intl.string(d.t.xq8CKS)})]}),(0,i.jsxs)("div",{className:u.widgetCallout,children:[(0,i.jsx)(o.Odl,{}),(0,i.jsx)(o.Text,{variant:"text-md/medium",color:"interactive-normal",children:d.intl.string(d.t.GwpRe3)})]}),(0,i.jsxs)("div",{className:u.widgetCallout,children:[(0,i.jsx)(o.KY1,{}),(0,i.jsx)(o.Text,{variant:"text-md/medium",color:"interactive-normal",children:d.intl.string(d.t.VUoC5O)})]})]})]})})}},690336:function(e,t,n){n.d(t,{Z:()=>v}),n(653041),n(47120);var i=n(200651),l=n(192379),r=n(442837),o=n(481060),a=n(355863),s=n(451478),d=n(830917),u=n(388627),c=n(892127),h=n(84346),_=n(561064),p=n(501787);function f(e){return e.widget.id}function m(e,t,n,l){return n===o.pJH.YEETED?null:(0,i.jsx)(c.Z,{...t,transitionState:n,cleanUp:l},e)}let g=[],v=l.memo(function(e){let{className:t}=e,n=(0,_.Z)(),c=(0,r.e7)([s.Z],()=>s.Z.windowSize((0,d.ZY)(n))),v=(0,r.e7)([a.Z],()=>{let e=a.Z.getLayout(p.OVERLAY_V3_LAYOUT_ID);if(null==e)return g;let t=[];for(let n of e.widgets){let e=a.Z.getWidget(n);if(null==e)continue;let i=h.Z[e.type];null!=i&&(null==i.predicate||i.predicate())&&t.push({widget:e,...i})}return t},[],u.HP),E=l.useCallback(e=>(0,i.jsx)("div",{className:t,style:c,children:e}),[t,c]);return(0,i.jsx)(o.W3x,{items:v,renderItem:m,getItemKey:f,wrapChildren:E})})},273816:function(e,t,n){n.d(t,{Z:()=>m}),n(47120);var i=n(200651),l=n(192379),r=n(120356),o=n.n(r),a=n(442837),s=n(481060),d=n(493773),u=n(178821),c=n(38618),h=n(522474),_=n(333031),p=n(501787),f=n(249582);function m(e){let{locked:t,pinned:n,anchorLeft:r}=e,m=(0,a.e7)([c.Z],()=>c.Z.getSocket());(0,u.nU)();let g=(0,a.e7)([h.Z],()=>h.Z.getWindow(p.$J)),[v,E]=(0,u.m8)(m),{currentFPS:x,averageFrameTime:I,timeSinceLastDrop:C,onResetFrameData:S,droppedFramesRef:Z,renderedFrameCount:y,bufferFramecountRef:O,frameCheckerEffect:N}=(0,u.d6)(!0,v,!0),[b,T,w]=(0,u.ZF)(m),[A,j]=(0,u.Y5)(b,N,g),k=performance.now()-E.current<u.MC,R=T(I,O.current);(0,d.ZP)(()=>(A(),()=>{j()}));let L=l.useCallback(()=>{S(),w(),A()},[S,w,A]),[D,P]=l.useState(!0),[M,z]=l.useState(!0),[V,W]=l.useState(!0),[U,F]=l.useState(!0),[B,G]=l.useState(!0);return t&&!n?null:(0,i.jsxs)("div",{className:o()(f.panelGroup,!r&&f.rightAligned),children:[(D||!t)&&(0,i.jsxs)("div",{className:f.measurement,children:[!t&&(0,i.jsx)("div",{className:f.measurementCheckbox,children:(0,i.jsx)(s.XZJ,{size:16,value:D,onChange:(e,t)=>P(t)})}),(0,i.jsxs)(s.Text,{variant:"text-md/normal",color:"text-secondary",className:f.measurementText,children:["FPS:"," ",(0,i.jsx)(s.Text,{tag:"span",variant:"code",color:x<30?"text-danger":x<45?"text-warning":"text-primary",children:x.toFixed(2)})]})]}),(M||!t)&&(0,i.jsxs)("div",{className:f.measurement,children:[!t&&(0,i.jsx)("div",{className:f.measurementCheckbox,children:(0,i.jsx)(s.XZJ,{size:16,value:M,onChange:(e,t)=>z(t)})}),(0,i.jsxs)(s.Text,{variant:"text-md/normal",color:"text-secondary",className:f.measurementText,children:["Frame Times:"," ",(0,i.jsxs)(s.Text,{tag:"span",variant:"code",color:I>1.1*u.tO?"text-warning":"text-primary",children:[I.toFixed(2),"ms"]})]})]}),(V||!t)&&(0,i.jsxs)("div",{className:f.measurement,children:[!t&&(0,i.jsx)("div",{className:f.measurementCheckbox,children:(0,i.jsx)(s.XZJ,{size:16,value:V,onChange:(e,t)=>W(t)})}),(0,i.jsxs)(s.Text,{variant:"text-md/normal",color:"text-secondary",className:f.measurementText,children:["Dropped Frames:"," ",(0,i.jsx)(s.Text,{tag:"span",variant:"code",color:C<2?"text-danger":C<5?"text-warning":"text-primary",children:Z.current}),(0,i.jsxs)(s.Text,{tag:"span",variant:"code",color:"text-secondary",className:f.secondaryInfoText,children:["(",(Z.current/y.current*100).toFixed(3),"%)"]})]})]}),(U||!t)&&(0,i.jsxs)("div",{className:f.measurement,children:[!t&&(0,i.jsx)("div",{className:f.measurementCheckbox,children:(0,i.jsx)(s.XZJ,{size:16,value:U,onChange:(e,t)=>F(t)})}),(0,i.jsxs)(s.Text,{variant:"text-md/normal",color:"text-secondary",className:f.measurementText,children:["Rendered Frames:"," ",(0,i.jsx)(s.Text,{tag:"span",variant:"code",color:"text-primary",children:y.current.toFixed(0)})]})]}),(B||!t)&&(0,i.jsxs)("div",{className:f.measurement,children:[!t&&(0,i.jsx)("div",{className:f.measurementCheckbox,children:(0,i.jsx)(s.XZJ,{size:16,value:B,onChange:(e,t)=>G(t)})}),(0,i.jsx)(s.ua7,{position:"left",text:"The average amount of 'lag' between us rendering a frame and being able to process background tasks. Values constantly above 1-2ms means our main thread is being burried by work and is taking all of its time in animation frames, most likely producing user interaciton blocking jank. (This doesn't work when the app is backgrounded though)",children:e=>(0,i.jsx)("div",{...e,children:(0,i.jsxs)(s.Text,{variant:"text-md/normal",color:"text-secondary",className:f.measurementText,children:["Idle Frame Delta:"," ",(0,i.jsxs)(s.Text,{tag:"span",variant:"code",color:R>1?"text-danger":"text-primary",children:[R.toFixed(2),"ms"]})]})})})]}),k&&(0,i.jsx)(s.ua7,{position:"left",text:"We don't track frames while the app is in the background, because requestAnimationFrame doesn't fire in the background",children:e=>(0,i.jsx)("span",{...e,children:(0,i.jsx)(s.Text,{tag:"span",variant:"code",color:"text-danger",children:"(Main App Backgrounded)"})})}),!t&&(0,i.jsx)("div",{className:f.bottomPanelButton,children:(0,i.jsx)(_.Z,{children:(0,i.jsx)(s.zxk,{onClick:L,children:"Reset Frame Data"})})})]})}},293224:function(e,t,n){n.d(t,{L:()=>eu,N3:()=>el,Ox:()=>en,SE:()=>ei,aG:()=>eo,c_:()=>ea,sm:()=>er});var i=n(200651),l=n(192379),r=n(691324),o=n(442837),a=n(685072),s=n(400354),d=n(652844),u=n(864094),c=n(582019),h=n(75735),_=n(481060),p=n(846027),f=n(239091),m=n(287734),g=n(571250),v=n(628581),E=n(659580),x=n(793865),I=n(55311),C=n(575175),S=n(933557),Z=n(471445),y=n(44315),O=n(74299),N=n(803647),b=n(565138),T=n(917405),w=n(763296),A=n(603074),j=n(879815),k=n(189771),R=n(294629),L=n(67844),D=n(544384),P=n(892807),M=n(560688),z=n(871499),V=n(199902),W=n(314897),U=n(430824),F=n(131951),B=n(19780),G=n(944486),H=n(594174),Y=n(979651),Q=n(444295),K=n(388627),X=n(810632),J=n(981631),q=n(388032),$=n(658397);function ee(e){let t=l.useRef(null);return l.useEffect(()=>{if(e){var n;null===(n=t.current)||void 0===n||n.call(t),t.current=null}},[e]),e=>(t.current=e,e)}function et(e){let{isToggled:t,disabled:n,iconComponent:l,iconColor:r,tooltip:o,defaultColor:a="primaryDark",highlightedColor:s="white",popoutOpen:d,onClick:u,popoutDisabled:c,onPopoutClick:h,onMouseEnter:_,onMouseLeave:p,onContextMenu:f,fullRegionButton:m,...g}=e;return(0,i.jsx)(z.d,{onClick:null!=u?u:()=>{},color:t?s:a,className:$.button,disabled:n,popoutOpen:d,popoutDisabled:c,label:o,fullRegionButton:m,forceGroupedButtons:!0,onMouseEnter:e=>{null==_||_(e)},onMouseLeave:e=>{null==p||p(e)},ignoreColorForCaret:!d,iconComponent:l,iconColor:r,isActive:t,onContextMenu:f,onPopoutClick:h,"aria-label":g["aria-label"]})}function en(e){let{voiceChannel:t,locked:n}=e,{suppress:o,selfMute:a,mute:s}=(0,R.Z)(t),u=a||s||o,c=(0,v.Z)(a,s,o,!1),{Component:h,play:p,events:f}=(0,d.O)(u?"unmute":"mute");l.useEffect(()=>()=>p(),[p,u]);let m=ee(n),g=e=>t=>{e(t),(0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.MICROPHONE,value:Q.bk.SETTINGS_OPENED})};return(0,i.jsx)(_.yRy,{renderPopout:e=>{let{closePopout:t}=e;return(0,i.jsx)(E.default,{onClose:m(t),renderInputDevices:!0,renderInputModes:!0,appContext:J.IlC.OVERLAY})},align:"center",position:"top",animation:_.yRy.Animation.FADE,children:(e,t)=>{let{onClick:n}=e,{isShown:l}=t;return(0,i.jsx)(et,{iconComponent:h,tooltip:c,onClick:()=>{(0,C.Z)(s,o,J.jXE.OVERLAY),(0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.MICROPHONE,value:u?Q.bk.ENABLED:Q.bk.DISABLED,userId:W.default.getId()})},onPopoutClick:g(n),onContextMenu:g(n),popoutOpen:l,iconColor:u?(0,y.Lq)(r.I.RED_400):void 0,onMouseEnter:()=>{f.onMouseEnter()},onMouseLeave:()=>{f.onMouseLeave()}})}})}function ei(e){let{voiceChannel:t,locked:n}=e,{selfDeaf:r,deaf:o}=(0,j.Z)(t),a=r||o,{Component:d,play:u,events:{onMouseEnter:c,onMouseLeave:h}}=(0,s.l)(a?"undeafen":"deafen"),p=o?_.Vm4:d;l.useEffect(()=>()=>u(),[a,u]);let f=()=>{(0,I.Z)(o,J.jXE.OVERLAY),(0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.AUDIO,value:o?Q.bk.ENABLED:Q.bk.DISABLED,userId:W.default.getId()})},m=e=>t=>{e(t),(0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.AUDIO,value:Q.bk.SETTINGS_OPENED})},v=ee(n);return(0,i.jsx)(_.yRy,{renderPopout:e=>{let{closePopout:t}=e;return(0,i.jsx)(E.default,{onClose:v(t),renderOutputDevices:!0,renderOutputVolume:!0,appContext:J.IlC.OVERLAY})},align:"center",position:"top",animation:_.yRy.Animation.FADE,children:(e,t)=>{let{onClick:n}=e,{isShown:l}=t;return(0,i.jsx)(et,{iconComponent:p,tooltip:(0,g.Z)(r,o,!1),isToggled:a,onClick:f,onContextMenu:m(n),onMouseEnter:c,onMouseLeave:h,onPopoutClick:m(n),popoutOpen:l})}})}function el(e){var t;let{voiceChannel:n,locked:r}=e,a=(0,o.e7)([F.Z],()=>F.Z.isVideoEnabled()),s=(0,o.e7)([F.Z],()=>Object.values(F.Z.getVideoDevices())[0]),d=null===(t=null==s?void 0:s.disabled)||void 0===t||t,u=!1===d,c=(0,k.Z)(n),f=e=>{p.Z.setVideoEnabled(e)},m=()=>{u?f(!0):(0,M.Z)()},g=e=>t=>{e(t),(0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.CAMERA,value:Q.bk.SETTINGS_OPENED})},v=()=>{d?m():f(!a),(0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.CAMERA,value:a?Q.bk.DISABLED:Q.bk.ENABLED,userId:W.default.getId()})},{Component:E,play:I,events:{onMouseEnter:C,onMouseLeave:S}}=(0,h.o)(a?"disable":"enable"),Z=null!=n?(0,L.X)({enabled:a,cameraUnavailable:d,hasPermission:c,channel:n}):void 0;l.useEffect(()=>()=>I(),[a,I]);let y=ee(r),O=null==n||!c;return(0,i.jsx)(_.yRy,{renderPopout:e=>{let{closePopout:t}=e;return(0,i.jsx)(x.Z,{onClose:y(t),appContext:J.IlC.OVERLAY})},align:"center",position:"top",animation:_.yRy.Animation.FADE,children:(e,t)=>{let{onClick:n}=e,{isShown:l}=t;return(0,i.jsx)(et,{iconComponent:E,tooltip:Z,onClick:v,isToggled:a,highlightedColor:a?"green":"white",defaultColor:a?"green":"primaryDark",onPopoutClick:g(n),popoutOpen:l,onContextMenu:g(n),onMouseEnter:C,onMouseLeave:S,disabled:O})}})}function er(e){let t,{voiceChannel:n,locked:r}=e,a=(0,o.e7)([H.default],()=>H.default.getCurrentUser()),s=(0,k.Z)(n),d=(0,o.cj)([F.Z],()=>(0,O.Z)(F.Z)),c=(0,o.e7)([V.Z],()=>V.Z.getCurrentUserActiveStream()),h=(0,X.B)(),p=()=>{h(),(0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.GO_LIVE,value:Q.bk.ENABLED,userId:W.default.getId()})},f=null!=c;if(f)t=q.intl.string(q.t.S5anIS);else if(null!=n){let e=(0,K.pL)();t=s?null!=e?q.intl.format(q.t.AB5gT0,{game:e.name}):q.intl.string(q.t.FeUKeH):q.intl.string(q.t.uQn9Bw)}let m=()=>{if(f)return(0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.GO_LIVE,value:Q.bk.DISABLED,userId:W.default.getId()}),(0,N.Z)(c,!1);p()},g=e=>t=>{e(t),(0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.SCREEN_SHARE,value:Q.bk.SETTINGS_OPENED})},{Component:v,events:{onMouseEnter:E,onMouseLeave:x},play:I}=(0,u.P)(f?"disable":"enable");l.useEffect(()=>()=>I(),[f,I]);let C=ee(r);return(0,i.jsx)(_.yRy,{renderPopout:e=>{let{closePopout:t}=e;return(0,i.jsx)(D.Z,{channel:n,currentUser:a,activeStreams:f?[c]:[],handleGoLive:p,onClose:C(t),appContext:J.IlC.OVERLAY,disableChangeWindows:!0})},align:"center",position:"top",animation:_.yRy.Animation.FADE,children:(e,n)=>{let{onClick:l}=e,{isShown:r}=n;return(0,i.jsx)(et,{iconComponent:v,tooltip:t,"aria-label":q.intl.string(q.t.FeUKeH),isToggled:f,onClick:m,popoutOpen:r,popoutDisabled:!f,onPopoutClick:g(l),onContextMenu:g(l),onMouseEnter:E,onMouseLeave:x,highlightedColor:f?"green":"white",defaultColor:f?"green":"primaryDark",disabled:!d||!s})}})}function eo(e){var t;let{voiceChannel:l,locked:r}=e,a=null!==(t=null==l?void 0:l.getGuildId())&&void 0!==t?t:null,{mute:s,suppress:d}=(0,R.Z)(l),u=(0,o.e7)([F.Z],()=>F.Z.isDeaf()),h=null==l||s||d||u;function p(e){null!=a&&((0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.SOUNDBOARD,value:Q.bk.SETTINGS_OPENED}),(0,f.jW)(e,async()=>{let{default:e}=await n.e("56049").then(n.bind(n,338991));return t=>(0,i.jsx)(e,{guildId:a,...t})}))}let{Component:m,events:{onClick:g,onMouseEnter:v,onMouseLeave:E}}=(0,c.j)(),x=ee(r),I=(0,o.e7)([w.Z,W.default],()=>w.Z.isUserPlayingSounds(W.default.getId()),[]);return(0,i.jsx)(_.yRy,{renderPopout:e=>{let{closePopout:t}=e;return h||null==l?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(A.Z,{guildId:a,channel:l,onClose:x(t),analyticsSource:"action bar button"})},align:"center",position:"top",animation:_.yRy.Animation.FADE,children:(e,t)=>{let{onClick:n}=e,{isShown:l}=t;return(0,i.jsx)(et,{iconComponent:m,tooltip:s?q.intl.string(q.t["Ox4/zc"]):d?q.intl.string(q.t["+YBKYG"]):u?q.intl.string(q.t.X1lQlp):void 0,onClick:e=>{g(),(0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.SOUNDBOARD,value:Q.bk.PANEL_OPENED,userId:W.default.getId()}),n(e)},highlightedColor:I?"green":"white",defaultColor:I?"green":"primaryDark",onContextMenu:p,onMouseEnter:v,onMouseLeave:E,isToggled:l,popoutOpen:l,disabled:h})}})}function ea(e){let{voiceChannel:t,locked:n}=e,l=(0,o.e7)([G.Z],()=>G.Z.getVoiceChannelId()===(null==t?void 0:t.id)),r=()=>{(0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.CALL_BUTTON,value:Q.bk.DISABLED,userId:W.default.getId()}),l&&m.default.disconnect()},s=e=>{m.default.selectVoiceChannel(e.id),(0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.CALL_BUTTON,value:Q.bk.ENABLED,userId:W.default.getId()})},d=e=>t=>{e(t),(0,Q.Ws)(J.Odu.QUICK_ACTIONS,{type:Q.Qu.CALL_BUTTON,value:Q.bk.SETTINGS_OPENED})},{Component:u,events:{onMouseEnter:c,onMouseLeave:h}}=(0,a.K)(),p=ee(n),f=l?u:_.Csw;return(0,i.jsx)(_.yRy,{renderPopout:e=>{let{closePopout:n}=e;return(0,i.jsx)(P.Z,{currentVoiceChannel:t,onClose:p(n),onSelect:s})},align:"center",position:"top",animation:_.yRy.Animation.FADE,children:(e,n)=>{let{onClick:o}=e,{isShown:a}=n;return(0,i.jsx)(et,{iconComponent:f,tooltip:null!=t?q.intl.string(q.t["6vrfgo"]):q.intl.string(q.t.S0W8Z2),onClick:l?r:d(o),defaultColor:l?"red":"primaryDark",onMouseEnter:c,onMouseLeave:h,onContextMenu:d(o),isToggled:a,onPopoutClick:l?d(o):void 0,popoutOpen:a})}})}function es(e){let{voiceChannel:t}=e,n=(0,o.e7)([U.Z],()=>U.Z.getGuild(t.getGuildId()),[t]);switch(!0){case t.isGroupDM()||t.isDM():case t.isDM():return null;case null!=n:return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:$.separatorDot}),(0,i.jsxs)("div",{className:$.guildIconContainer,children:[(0,i.jsx)(b.Z,{guild:n,size:b.Z.Sizes.SMOL,className:$.guildIcon}),(0,i.jsx)(_.Text,{tag:"div",variant:"text-xs/semibold",color:"text-primary",className:$.guildName,children:n.name})]})]});default:return null}}function ed(e){let{voiceChannel:t}=e,n=(0,Z.KS)(t),l=(0,S.ZP)(t);return(0,i.jsxs)("div",{className:$.voiceChannelNameContainer,children:[null!=n&&(0,i.jsx)(_.Text,{tag:"div",color:"text-muted",variant:"text-xs/normal",className:$.channelIcon,children:(0,i.jsx)(n,{size:"sm",color:"currentColor"})}),null!=l&&(0,i.jsx)(_.Text,{variant:"text-xs/semibold",color:"text-muted",className:$.channelName,children:l})]})}function eu(e){let{voiceChannel:t}=e,n=null==t?void 0:t.id,l=(0,o.cj)([B.Z],()=>({channelId:B.Z.getChannelId(),quality:B.Z.getQuality(),state:B.Z.getState(),lastPing:B.Z.getLastPing()})),r=null!=n,a=(0,o.e7)([Y.Z],()=>null!=n&&Y.Z.hasVideo(n),[n]);return r&&null!=t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T.Z,{...l,hasVideo:a,connectionStatusTextVariant:"text-xs/semibold"}),(0,i.jsx)(es,{voiceChannel:t}),(0,i.jsx)("div",{className:$.separatorDot}),(0,i.jsx)(ed,{voiceChannel:t})]})}},810632:function(e,t,n){n.d(t,{B:()=>T}),n(47120);var i=n(200651),l=n(192379),r=n(512722),o=n.n(r),a=n(442837),s=n(481060),d=n(872810),u=n(594190),c=n(74299),h=n(451467),_=n(537413),p=n(989941),f=n(567126),m=n(143135),g=n(751571),v=n(361291),E=n(592125),x=n(430824),I=n(131951),C=n(944486),S=n(594174),Z=n(449224),y=n(358085),O=n(981631),N=n(37113),b=n(761274);function T(e){let t=(0,a.e7)([C.Z],()=>C.Z.getVoiceChannelId()),r=(0,a.e7)([E.Z],()=>E.Z.getChannel(t),[t]),T=(0,a.e7)([S.default],()=>{let e=S.default.getCurrentUser();return o()(null!=e,"useGoLiveImmidateAction: user cannot be undefined"),e}),w=null==r?void 0:r.getGuildId(),A=(0,a.e7)([I.Z],()=>(0,c.Z)(I.Z));async function j(){var e;return null!==(e=(await (0,f._Q)()).sort((e,t)=>(0,f.ov)(t)-(0,f.ov)(e))[0])&&void 0!==e?e:null}let k=l.useCallback(async()=>{var e,n;if(null==r||null==t)return!1;let i=await j(),l=(0,y.isWindows)()?(0,p.Z)(u.ZP,Z.Z):null;if(null==l&&null==i)return!1;let o=null!=w?null===(e=x.Z.getGuild(w))||void 0===e?void 0:e.premiumTier:null,{preset:a,resolution:s,fps:c,soundshareEnabled:f}=v.Z.getState(),[E,C]=null!==(n=(0,_.Z)(a,T,o))&&void 0!==n?n:[N.LY.RESOLUTION_720,N.ws.FPS_30],S=a,O=s,A=c;S!==N.tI.PRESET_CUSTOM&&(O=E,A=C),(0,h.Z)(S,O,A,T,o)||(O=E,A=C),(0,h.Z)(S,O,A,T,o,r)||(S=N.tI.PRESET_VIDEO,O=N.LY.RESOLUTION_720,A=N.ws.FPS_30),(0,d.Rc)({preset:S,resolution:O,frameRate:A,soundshareEnabled:f});let k=(0,m.Z)(l,i,u.ZP.getRunningGames()),R=!(0,y.isWindows)()||null==k||(null==i?void 0:i.id.startsWith("camera:"))||null==k?null:k.pid,L=null,D=null;return null==R&&null!=i&&(L=i.id,D=i.name),!!(I.Z.getUseSystemScreensharePicker()||await g.Z.hasPermission(b.Eu.SCREEN_RECORDING,{showAuthorizationError:!1}))&&((0,d.WH)(w,t,{pid:R,sourceId:L,sourceName:D,audioSourceId:null,sound:f,previewDisabled:!0}),!0)},[r,w,T,t]);return l.useCallback(async()=>{!(!A||null==t||await k())&&(0,s.ZDy)(async()=>{let{default:e}=await Promise.all([n.e("79477"),n.e("68723")]).then(n.bind(n,60594));return t=>(0,i.jsx)(e,{...t,selectSource:!1,guildId:w,analyticsLocation:O.Sbl.UNLOCKED_OVERLAY})},{contextKey:null!=e?(0,s.VnL)(e):void 0})},[A,k,w,t,e])}},2923:function(e,t,n){n.d(t,{Z:()=>c});var i=n(200651);n(192379);var l=n(120356),r=n.n(l),o=n(442837),a=n(592125),s=n(944486),d=n(293224),u=n(622230);function c(e){let{locked:t}=e,n=(0,o.e7)([s.Z],()=>s.Z.getVoiceChannelId()),l=(0,o.e7)([a.Z],()=>a.Z.getChannel(n)),c=null!=l;return(0,i.jsxs)("div",{className:r()({[u.panelContainer]:!0,[u.locked]:t}),children:[(0,i.jsxs)("div",{className:u.panelRow,children:[(0,i.jsxs)("div",{className:u.buttonSection,children:[(0,i.jsx)(d.Ox,{voiceChannel:l,locked:t}),(0,i.jsx)(d.SE,{voiceChannel:l,locked:t}),(0,i.jsx)(d.N3,{voiceChannel:l,locked:t})]}),(0,i.jsxs)("div",{className:u.buttonSection,children:[(0,i.jsx)(d.sm,{voiceChannel:l,locked:t}),(0,i.jsx)(d.aG,{voiceChannel:l,locked:t})]}),(0,i.jsx)("div",{className:r()(u.buttonSection,c&&u.inCall),children:(0,i.jsx)(d.c_,{voiceChannel:l,locked:t})})]}),c&&(0,i.jsx)("div",{className:u.panelRow,children:(0,i.jsx)(d.L,{voiceChannel:l,locked:t})})]})}},319414:function(e,t,n){n.d(t,{Z:()=>_}),n(47120);var i=n(200651);n(192379);var l=n(442837),r=n(352527),o=n(183584),a=n(487029),s=n(592125),d=n(944486),u=n(554174),c=n(710111),h=n(122593);function _(){let[e,t]=(0,l.Wu)([r.Z],()=>[r.Z.enabled,r.Z.keepOpen]),n=(0,l.e7)([d.Z],()=>d.Z.getVoiceChannelId()),_=(0,l.e7)([s.Z],()=>s.Z.getChannel(n),[n]),p=null==_?void 0:_.getGuildId();return e&&null!=_?(0,i.jsx)("div",{className:h.container,children:(0,i.jsx)(a.Z,{width:c.FW.width,height:c.FW.height,guildId:p,channel:_,keepOpen:t,onClose:function(){let e=(0,u.Z)();null!=e&&(0,o.oZ)(e)},analyticsSource:"overlay"})}):null}},586742:function(e,t,n){n.d(t,{Z:()=>A});var i=n(200651),l=n(192379),r=n(120356),o=n.n(r),a=n(442837),s=n(481060),d=n(239091),u=n(765250),c=n(393238),h=n(358221),_=n(933557),p=n(352978),f=n(27457),m=n(796638),g=n(592125),v=n(131951),E=n(944486),x=n(237997),I=n(444295),C=n(906037),S=n(804570),Z=n(501787),y=n(981631),O=n(65154),N=n(388032),b=n(435525);function T(e){var t;let{participant:n,channel:l,context:r}=e,o=null===(t=n.user)||void 0===t?void 0:t.id;return(0,a.e7)([v.Z],()=>null!=n.user&&null!=r&&null!=l&&v.Z.isLocalVideoDisabled(o,r),[o,n.user,r,l])?null:(0,i.jsx)(f.ZP,{...e})}function w(e){let{context:t=O.Yn.DEFAULT,participants:r,locked:a,widget:u,channel:c,width:h,height:_,containerRef:f}=e,m=(e,l)=>{let r=e.user;(0,I.Ws)(y.Odu.VIDEO,{type:I.Qu.CAMERA,value:I.bk.SETTINGS_OPENED,userId:null==r?void 0:r.id}),(0,d.jW)(l,async()=>{let{default:e}=await Promise.all([n.e("79695"),n.e("6524")]).then(n.bind(n,27900));return n=>(0,i.jsx)(e,{...n,user:r,mediaEngineContext:t})})},g=r.length>0&&null!=t&&null!=c&&(!a||u.pinned);l.useEffect(()=>{(0,C.m3)({locked:a,pinned:u.pinned,widget:u.type,isPreviewingInGame:!1},g)},[a,u,g]);let v="boolean"!=typeof u.meta.horizontal||u.meta.horizontal;return 0!==r.length||a?null==c?null:(0,i.jsx)("div",{ref:f,className:o()({[b.videoList]:!0,[b.vertical]:!v,[b.hidden]:!g&&a}),style:{opacity:u.opacity},children:r.map(e=>(0,i.jsx)(T,{participant:e,width:h,className:b.tile,containerStyle:{width:h,height:_},fit:p.L.COVER,channel:c,inPopout:!0,inCall:!0,noBorder:!0,onContextMenu:a?void 0:m,forceIdle:a,paused:!g,inOverlayPopout:!0,context:t},e.id))}):a?null:(0,i.jsx)("div",{ref:f,children:(0,i.jsx)(S.E,{emptyText:N.intl.string(N.t["aTiM4+"]),icon:s.Odl,absolute:!0})})}function A(e){let t=(0,a.e7)([E.Z,g.Z],()=>g.Z.getChannel(E.Z.getVoiceChannelId())),n=(0,_.ZP)(t),r=null==t?void 0:t.id,o=(0,a.Wu)([h.Z],()=>null!=r?h.Z.getVideoParticipants(r):[]),s=(0,a.e7)([h.Z],()=>null!=r?h.Z.getParticipantsVersion(r):0),d=(0,a.Wu)([h.Z],()=>null==r?[]:h.Z.getVideoParticipants(r).map(e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.id}),[r]),p=e.widget.pinned||!e.locked;l.useEffect(()=>{p&&(0,I.zi)(y.Odu.VIDEO,{locked:x.Z.isInstanceLocked(),shownUserIds:d,liveUserIds:d,contentInventoryIds:[]})},[d,p]);let f="boolean"!=typeof e.widget.meta.horizontal||e.widget.meta.horizontal,{width:v,height:C,ref:S}=(0,c.Z)(e.locked,e.widget.pinned),{participantTileWidth:O,visibleParticipants:N}=(0,m.ZB)(f?null!=v?v:e.width:null!=C?C:e.height,o,{tileWidth:Z.vZ,tileMinWidth:Z.mo,tileMargin:Z.F$,limit:8,cropSelfVideo:!0,version:s}),b={id:e.widget.id,size:e.widget.size,containerWidth:e.width,containerHeight:e.height},T=l.useRef(b);return l.useLayoutEffect(()=>void(T.current=b)),l.useLayoutEffect(()=>{let{size:e,id:t,containerWidth:n,containerHeight:i}=T.current;(f&&e.height>e.width||!f&&e.width>e.height)&&(0,u.nv)({widgetId:t,size:{fixed:!0,width:i,height:n}})},[f]),(0,i.jsx)(w,{...e,channel:t,title:null!=n?n:"",participants:N,participantsVersion:s,width:f?O:null!=v?v:e.width,height:f?null!=C?C:e.height:O,containerRef:S})}},892127:function(e,t,n){n.d(t,{Z:()=>C});var i=n(200651),l=n(192379),r=n(120356),o=n.n(r),a=n(442837),s=n(765250),d=n(13245),u=n(355863),c=n(237997),h=n(451478),_=n(434529),p=n(145597),f=n(830917),m=n(353038),g=n(306381),v=n(610394),E=n(561064),x=n(981631),I=n(377335);let C=l.memo(function(e){let{widget:t,renderWidget:n,renderTitle:r,renderButtons:C,resizeValidation:S,className:Z,dragContainerClassName:y}=e,O=u.Z.getWidgetConfig(t.type),N=(0,a.e7)([c.Z],()=>c.Z.isLocked((0,p.QF)())),b=(0,E.Z)(),T=(0,a.e7)([h.Z],()=>h.Z.windowSize((0,f.ZY)(b))),w=l.useCallback((e,t,n,i,l)=>{let r=h.Z.windowSize((0,f.ZY)((0,E.i)())),o=(0,_.jL)(n,r),a=(0,_.Ox)(i,r);(0,s.Os)(t),(0,s.nv)({widgetId:t,anchor:o,size:a});let c=e===m.B.MOVE,p=(0,_.PY)(n,r.width,r.height,l.width,l.height);d.Z.track(x.rMx.OVERLAY_LAYOUT_UPDATED,{was_resized:!c,was_dragged:c,widget_type:u.Z.getWidgetType(t),window_width:r.width,window_height:r.height,widget_width:l.width,widget_height:l.height,widget_left:p.left,widget_top:p.top})},[]),A=l.useCallback(e=>{(0,s.Os)(e)},[]),{id:j,pinned:k,zIndex:R,size:L,anchor:D}=t,P=(0,_.w_)(L,T),M=(0,_.KR)(D,T),{minSize:z,resizeX:V,resizeY:W,dragAnywhere:U}=null!=O?O:{},F=k||!N,B=l.useMemo(()=>({minX:0,minY:0,maxX:T.width,maxY:T.height}),[T]),G=l.useCallback(e=>n({...e,widget:t,dragging:null!=e.dragOperation,className:Z}),[t,n,Z]),H=l.useCallback(e=>null!=r||null!=C?(0,i.jsxs)("div",{className:I.extrasContainer,children:[null==r?void 0:r(t),null==C?void 0:C(t,e)]}):null,[t,r,C]),Y=(0,a.e7)([v.ZP],()=>v.ZP.hasRenderDebugMode(g.G.WidgetAreas)),Q=l.useMemo(()=>{if(null!=S)return e=>S({...e,widget:t})},[S,t]);return(0,i.jsx)(m.Z,{className:o()({[I.debug]:Y,[I.debugUnpinned]:Y&&!k,[I.debugPinned]:Y&&k},y),id:j,size:P,anchor:M,container:B,minSize:null!=z?z:{width:0,height:0},hidden:!F,locked:N,resizeX:null!=V&&V,resizeY:null!=W&&W,style:{zIndex:R},dragAnywhere:null!=U&&U,active:!N,onUpdate:w,onClick:A,targetWindow:b,renderExtras:H,resizeValidation:Q,children:G})})},84346:function(e,t,n){n.d(t,{Z:()=>x});var i=n(200651),l=n(239091),r=n(32300),o=n(603618),a=n(926086),s=n(353038),d=n(761374),u=n(340101),c=n(273816),h=n(2923),_=n(586742),p=n(243487),f=n(430561),m=n(134849),g=n(501787),v=n(981631),E=n(388032);let x={[v.Odu.VIDEO]:{renderWidget(e){let{widget:t,locked:n,size:l,padding:r,borderWidth:o}=e;return(0,i.jsx)(_.Z,{id:t.id,locked:n,widget:t,height:"auto"===l.height?0:l.height-2*r-2*o,width:"auto"===l.width?0:l.width-2*r-2*o})},renderTitle:()=>(0,i.jsx)(f.PI,{children:E.intl.string(E.t.UPvOiY)}),renderButtons:(e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.ls,{onClick:r=>{var o,a,s;return o=r,a=e,s=t,void((0,u.js)(a)&&(0,l.jW)(o,async()=>{let{default:e}=await n.e("26775").then(n.bind(n,740579));return s(!0),t=>(0,i.jsx)(e,{...t,widget:a,onClose:()=>s(!1)})}))}}),(0,i.jsx)(f.RT,{id:e.id,pinned:e.pinned})]}),resizeValidation(e){let{widget:t,computedSize:n,borderWidth:i,padding:l}=e;return(0,u.js)(t)?"boolean"!=typeof t.meta.horizontal||t.meta.horizontal?{width:Math.max(n.width,g.vZ),height:Math.min(n.height,2*g.mo+2*i+2*l)}:{height:Math.max(n.height,g.vZ),width:Math.min(n.width,2*g.mo+2*i+2*l)}:n}},[v.Odu.VOICE_V3]:{renderWidget(e){let{widget:t,anchorLeft:n,locked:l}=e;return(0,i.jsx)(p.Z,{anchorLeft:n,id:t.id,locked:l,pinned:t.pinned,widget:v.Odu.VOICE,isPreviewingInGame:!1})},renderTitle:()=>(0,i.jsx)(f.PI,{children:E.intl.string(E.t.nFv3GR)}),renderButtons:(e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.ls,{onClick:e=>{(0,l.jW)(e,async()=>{let{default:e}=await n.e("32382").then(n.bind(n,955280));return t(!0),n=>(0,i.jsx)(e,{...n,onClose:()=>t(!1)})})}}),(0,i.jsx)(f.RT,{id:e.id,pinned:e.pinned})]})},[v.Odu.CLICK_ZONE_DEBUG]:{renderWidget(e){let{widget:t,locked:n}=e;return(0,i.jsx)(a.Z,{id:t.id,locked:n,pinned:t.pinned})},renderTitle:()=>(0,i.jsx)(f.PI,{children:"Click Zone Tester"}),renderButtons:(e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.ls,{onClick:e=>{(0,l.jW)(e,async()=>{let{default:e}=await n.e("38813").then(n.bind(n,541501));return t(!0),n=>(0,i.jsx)(e,{...n,onClose:()=>t(!1)})})}}),(0,i.jsx)(f.RT,{id:e.id,pinned:e.pinned})]})},[v.Odu.PERFORMANCE_DEBUG]:{renderWidget(e){let{widget:t,locked:n,anchorLeft:l}=e;return(0,i.jsx)(c.Z,{id:t.id,anchorLeft:l,locked:n,pinned:t.pinned})},renderTitle:()=>(0,i.jsx)(f.PI,{children:"Overlay Performance"}),renderButtons:e=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(f.RT,{id:e.id,pinned:e.pinned})})},[v.Odu.GO_LIVE]:{renderWidget(e){var t;let{widget:n,locked:l,size:r,dragStart:o,anchorTop:a,anchorLeft:s}=e;return(0,u.ZL)(n)?(0,i.jsx)(d.Z,{id:n.id,locked:l,pinned:n.pinned,opacity:n.opacity,size:r,anchorTop:a,anchorLeft:s,widget:v.Odu.GO_LIVE,isPreviewingInGame:!1,dragStart:o,horizontal:null!==(t=n.meta.horizontal)&&void 0!==t&&t,padding:8,borderWidth:2}):null},renderTitle:()=>(0,i.jsx)(f.PI,{children:E.intl.string(E.t["386XRk"])}),renderButtons(e,t){var r;return(0,u.ZL)(e)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.ls,{onClick:r=>{var o,a,s;return o=r,a=e,s=t,void((0,u.ZL)(a)&&(0,l.jW)(o,async()=>{let{default:e}=await n.e("34684").then(n.bind(n,68738));return s(!0),t=>(0,i.jsx)(e,{...t,widget:a,onClose:()=>s(!1)})}))}}),(0,i.jsx)(f.GY,{widgetId:e.id,showAllStreams:null===(r=e.meta.showAllStreams)||void 0===r||r}),(0,i.jsx)(f.RT,{id:e.id,pinned:e.pinned})]}):null},resizeValidation(e){let{operation:t,computedSize:n,originSize:i,borderWidth:l,padding:r,containerSpecs:o}=e,a=2*l+2*r,d=i.width-a,u=i.height-a,c=d/u,h=u/d,_=(()=>{switch(t){case s.B.RESIZE_NORTH:case s.B.RESIZE_SOUTH:return{height:n.height,width:Math.round((n.height-a)*c+a)};default:return{width:n.width,height:Math.round((n.width-a)*h+a)}}})();return _.width>o.maxX&&(_.width=o.maxX,_.height=(o.maxX-a)*h+a),_.height>o.maxY&&(_.height=o.maxY,_.width=(o.maxY-a)*c+a),_}},[v.Odu.QUICK_ACTIONS]:{renderWidget(e){let{locked:t}=e;return(0,i.jsx)(h.Z,{locked:t})}},[v.Odu.NOTIFICATIONS]:{renderWidget(e){let{locked:t}=e;return(0,i.jsx)(m.Z,{locked:t})},renderTitle:()=>(0,i.jsx)(f.PI,{children:E.intl.string(E.t.gnKWdX)}),renderButtons:(e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.ls,{onClick:e=>{(0,l.jW)(e,async()=>{let{default:e}=await n.e("94706").then(n.bind(n,168133));return t(!0),n=>(0,i.jsx)(e,{...n,onClose:()=>t(!1)})})}}),(0,i.jsx)(f.RT,{id:e.id,pinned:e.pinned})]})},[v.Odu.ACTIVITY]:{renderWidget(e){let{locked:t}=e;return(0,i.jsx)(o.ZP,{locked:t})},renderTitle:()=>(0,i.jsx)(f.PI,{children:E.intl.string(E.t["6gwSFR"])}),renderButtons:()=>null,predicate:()=>(0,r.Rb)("ActivityPopout").allowActivityWidget}}},516542:function(e,t,n){n.d(t,{Z:()=>m}),n(47120);var i=n(200651),l=n(192379),r=n(904245),o=n(13245),a=n(655687),s=n(541716),d=n(752305),u=n(893718),c=n(957730),h=n(849522),_=n(145597),p=n(981631),f=n(776439);function m(e){let{id:t,channel:n,onSend:m}=e,g=(0,h.Z)(),{placeholder:v,accessibilityLabel:E}=(0,a.Z)({channel:n}),[x,I]=l.useState(()=>(0,d.H2)()),{textValue:C,richValue:S}=x,[Z,y]=l.useState(!1),O=l.useCallback(()=>y(!0),[]),N=l.useCallback(()=>y(!1),[]),b=l.useCallback((e,t,n)=>{I({textValue:t,richValue:n})},[]),T=l.useCallback(e=>{"Escape"===e.key&&o.Z.updateNotificationStatus(t,p._1z.ACTIVE)},[t]),w=l.useCallback(()=>(C.length>g||(r.Z.sendMessage(n.id,c.ZP.parse(n,C),!1),o.Z.setInputLocked(!0,(0,_.QF)()),o.Z.updateNotificationStatus(t,p._1z.DISMISSED),null==m||m(C)),Promise.resolve({shouldClear:!1,shouldRefocus:!0})),[C,g,n,t,m]);return(0,i.jsx)(u.Z,{innerClassName:f.textArea,onChange:b,placeholder:v,accessibilityLabel:E,channel:n,textValue:C,richValue:S,type:s.Ie.OVERLAY_INLINE_REPLY,onBlur:N,onFocus:O,focused:Z,onSubmit:w,onKeyDown:T,autoCompletePosition:"bottom",disableThemedBackground:!0})}},134849:function(e,t,n){n.d(t,{Z:()=>C}),n(653041),n(47120);var i=n(200651),l=n(192379),r=n(442837),o=n(481060),a=n(237997),s=n(804570),d=n(388627),u=n(561064),c=n(380736),h=n(693091),_=n(371467),p=n(981631),f=n(388032),m=n(348094);let g=[];function v(e){return e.notification.id}function E(e,t,n,l){let{index:r,notification:o,locked:a}=t;return(0,i.jsx)(c.ZP,{index:r,notification:o,locked:a,transitionState:n,cleanUp:l},e)}function x(e){return(0,i.jsx)("div",{className:m.container,children:e})}let I=e=>l.useState(()=>new h.AS(e))[0],C=l.memo(function(e){let{locked:t}=e,n=(0,r.e7)([a.Z,_.Z],()=>{if(a.Z.getNotificationPositionMode()===p._vf.DISABLED)return g;let e=[],n=0;for(let i of _.Z.getNotifications()){if(n>4)break;(!t||i.status!==p._1z.TIMED_OUT)&&(e.push({index:n,locked:t,notification:i}),n++)}return e},[t],d.E6),c=I(t);return(l.useLayoutEffect(()=>c.updateState(n,t)),l.useLayoutEffect(()=>(c.initialize((0,u.i)()),()=>c.cleanUp()),[c]),0!==n.length||t)?(0,i.jsx)(h.S4.Provider,{value:c,children:(0,i.jsx)(o.W3x,{items:n,renderItem:E,getItemKey:v,wrapChildren:x})}):t?null:(0,i.jsx)(s.E,{emptyText:f.intl.string(f.t.O1Nbjo),icon:o.Dkj,absolute:!0})})},371467:function(e,t,n){n.d(t,{Z:()=>el}),n(47120),n(733860),n(653041);var i,l,r,o=n(512722),a=n.n(o),s=n(772848),d=n(442837),u=n(570140),c=n(13245),h=n(435064),_=n(786761),p=n(695346),f=n(163612),m=n(314897),g=n(592125),v=n(375954),E=n(292959),x=n(158776),I=n(885110),C=n(246946),S=n(594174),Z=n(974180),y=n(237997),O=n(70956),N=n(150097),b=n(129724),T=n(145597),w=n(371651),A=n(610394),j=n(388627),k=n(996050),R=n(609626),L=n(421824),D=n(777036),P=n(333727),M=n(585708),z=n(588909),V=n(981631),W=n(388032);let U=5*O.Z.Millis.SECOND,F=8*O.Z.Millis.SECOND,B=30*O.Z.Millis.SECOND,G=30*O.Z.Millis.SECOND,H=Object.freeze({timestamp:0,priority:0,duration:U,expirationExternallyManaged:!1,type:0}),Y=[],Q=!1,K=[];function X(){if(Q&&null==Y.find(e=>e.status===V._1z.FOCUSED))for(let e of(Q=!1,Y=[...Y,...K],K=[],Y.length>40&&(Y.length=40),Y))e.timer.start()}function J(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;Y.filter(e=>1===e.type&&e.status===V._1z.TIMED_OUT).sort((e,t)=>t.timestamp-e.timestamp).forEach((t,n)=>{(n>=e||t.timestamp<Date.now()-B)&&q(t.id,V._1z.DISMISSED)})}function q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V._1z.DISMISSED;if(null==e)return!1;let n=Y.findIndex(t=>t.id===e);if(-1===n)return!1;let i=Y[n];if(i.timer.stop(),Y=[...Y],t===V._1z.FOCUSED){let[e]=Y.splice(n,1);e={...e,status:t},Y.unshift(e),Q=!0;return}t===V._1z.DISMISSED?Y.splice(n,1):Y[n]={...i,status:t},X()}function $(e){let t=Y.length,n=(Y=Y.filter(t=>1!==t.type||t.channelId!==e)).length!==t;return n&&X(),n}function ee(e){let t=Y.find(t=>2===t.type&&t.channelId===e);return null!=t?t.id:null}function et(e,t){let n={...H,timestamp:Date.now(),...t},i=(0,s.Z)(),l=!1,r={id:i,status:V._1z.ACTIVE,timer:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=-1;return{start(){let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=l?V._1z.TIMED_OUT:V._1z.DISMISSED;-1===i&&(i=setTimeout(()=>c.Z.updateNotificationStatus(e,r),null!=n?n:U))},stop(){clearTimeout(i),i=-1}}}(i,n.expirationExternallyManaged,n.duration),props:{...e,onNotificationShow:()=>{var t;l||(l=!0,null===(t=e.onNotificationShow)||void 0===t||t.call(e,i))}},...n},o=Q?K:[...Y],a=o.findIndex(e=>e.priority<=n.priority);if(-1===a?o.push(r):o.splice(a,0,r),o.length>40){let e=o.pop();Q||e.timer.stop()}return Q||(Y=o,r.timer.start()),i}function en(e){let{channelId:t,ringing:n}=e,i=ee(t);if(!n.includes(m.default.getId()))return q(i);if(null!=i)return!1;let l=g.Z.getChannel(t);if(null==l||!l.isRingable()||"GUILD_RING_START"===e.type&&!f.Z.getCurrentConfig({guildId:e.guildId,location:"OverlayV3StartRinging"}).enabled||I.Z.getStatus()===V.Skl.DND||p.QZ.getSetting())return!1;let r=Y.find(e=>1===e.type&&e.channelId===t&&e.messageType===V.uaV.CALL);null!=r&&q(r.id),et((0,D.Z)(l),{priority:1,expirationExternallyManaged:!0,type:2,channelId:l.id})}class ei extends(i=d.ZP.Store){initialize(){this.waitFor(g.Z,S.default)}getNotifications(){return Y}}r="OverlayNotificationsStore",(l="displayName")in ei?Object.defineProperty(ei,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):ei[l]=r;let el=new ei(u.Z,{OVERLAY_UPDATE_NOTIFICATION_STATUS:function(e){let{notificationId:t,status:n}=e;q(t,n)},OVERLAY_MOUNTED:function(e){var t;let{nudges:n}=e;J(0);let i=null!==(t=A.ZP.getFocusedPID())&&void 0!==t?t:T.R2;if(w.default.hasChangedRenderMode(i))return;let l=(0,z.Z)((0,j.pL)(),n);null!=l&&et(l,{priority:2,type:3,duration:F})},OVERLAY_SET_INPUT_LOCKED:function(e){let{locked:t}=e;if(t){for(let e of Y)e.status===V._1z.FOCUSED&&q(e.id,V._1z.ACTIVE);return!0}for(let e of(J(),Y))3===e.type?q(e.id,V._1z.DISMISSED):e.status!==V._1z.ACTIVE||e.expirationExternallyManaged||(e.timer.stop(),e.timer.start(e.expirationExternallyManaged));if(Y.length>0){var n;return q(null===(n=Y.filter(e=>1===e.type).sort((e,t)=>t.timestamp-e.timestamp)[0])||void 0===n?void 0:n.id,V._1z.FOCUSED)}},MESSAGE_CREATE:function(e){var t,n,i,l;let{channelId:r,message:o}=e,s=g.Z.getChannel(r),d=S.default.getUser(null===(t=o.author)||void 0===t?void 0:t.id);if(null==s||null==d)return!1;if((null===(n=o.activity)||void 0===n?void 0:n.type)===V.mFx.JOIN||(null===(i=o.activity)||void 0===i?void 0:i.type)===V.mFx.JOIN_REQUEST){if(!(0,N.eF)(o,r,!0,!0))return!1;let e=function(e,t,n){var i;let l,r;if(a()(null!=t.activity,"received null message activity"),n.id===m.default.getId())return!1;let o=(0,j.pL)(),s=null!==(i=null==o?void 0:o.altId)&&void 0!==i?i:null==o?void 0:o.id;if(null==o||null==s)return!1;switch(t.activity.type){case V.mFx.JOIN:if(null==(l=x.Z.getApplicationActivity(n.id,s))||null==l.party||l.party.id!==t.activity.party_id)return!1;r=(0,k.Z)(e,t,n,o,l);break;case V.mFx.JOIN_REQUEST:if(null==(l=I.Z.getApplicationActivity(s))||null==l.party||l.party.id!==t.activity.party_id)return!1;r=(0,P.Z)(e,n,o,l)}return null!=r&&(et(r,{priority:2,expirationExternallyManaged:!0,channelId:e.id,duration:G}),!0)}(s,o,d);if(!1!==e)return e}if(y.Z.getTextChatNotificationMode()===V.Ypu.DISABLED||C.Z.disableNotifications||!(0,N.eF)(o,r))return!1;let u=!E.Z.isSoundDisabled(Z.Ay),c=null!==(l=v.Z.getMessage(r,o.id))&&void 0!==l?l:(0,_.e5)(o);et((0,M.Z)(s,c,d,u),{type:1,channelId:s.id,expirationExternallyManaged:!0,messageType:o.type}),J()},CHANNEL_SELECT:function(e){let{channelId:t}=e;return null!=t&&$(t)},MESSAGE_ACK:function(e){let{channelId:t}=e;return $(t)},CALL_CREATE:en,CALL_UPDATE:en,CALL_DELETE:function(e){let{channelId:t}=e;q(ee(t))},GUILD_RING_START:en,GUILD_RING_STOP:function(e){let{channelId:t,guildId:n,ringing:i}=e;if(!f.Z.getCurrentConfig({guildId:n,location:"OverlayV3StopRinging"}).enabled)return!1;i.includes(m.default.getId())&&q(ee(t))},ACTIVITY_USER_ACTION:function(e){let t,{actionType:n,user:i,applicationId:l}=e,r=(0,j.pL)();return null!=r&&(null==r?void 0:r.id)!=null&&(r.id===l||r.altId===l)&&(n===V.mFx.JOIN&&(t=(0,R.Z)(i,r)),null!=t&&void et(t,{priority:2,type:0}))},CLIPS_SAVE_CLIP_START:function(){et((0,L.f)(W.intl.string(W.t.NBMK9v)))},CLIPS_SAVE_CLIP:function(){et((0,L.f)(W.intl.format(W.t.KLhk6u,{duration:(0,b.A)(h.Z.getSettings().clipsLength/1e3,!0)})))},CLIPS_SAVE_CLIP_ERROR:function(){et((0,L.f)(W.intl.string(W.t["1ZbZur"])))},STREAM_START:function(e){let t=(0,L.y)();null!=t&&et(t)}})},620954:function(e,t,n){n.d(t,{P:()=>c,R:()=>u});var i=n(13245),l=n(556296),r=n(237997),o=n(13140),a=n(145597),s=n(987650),d=n(981631);function u(e,t){return{trackView(){i.Z.track(d.rMx.NOTIFICATION_VIEWED,t),i.Z.notificationEvent(e,s.bv.Viewed)},trackClick(n){let l=r.Z.isLocked((0,a.QF)())?d.Sbl.LOCKED_OVERLAY:d.Sbl.UNLOCKED_OVERLAY;i.Z.track(d.rMx.NOTIFICATION_CLICKED,{...t,location:l,action_type:n}),i.Z.notificationEvent(e,s.bv.Clicked)}}}function c(){let e=l.ZP.getOverlayKeybind();return null!=e?(0,o.BB)(e.shortcut,!0).split(" + "):["???"]}},996050:function(e,t,n){n.d(t,{Z:()=>d});var i=n(224706),l=n(13245),r=n(150097),o=n(620954),a=n(987650),s=n(388032);function d(e,t,n,d,u){if(null==t.activity||null==d.id)return null;let c=t.activity.type,h=u.session_id;if(null==h)return null;let{icon:_,title:p,body:f}=(0,r.Xi)(e,t,n),{trackView:m,trackClick:g}=(0,o.R)(a.n0.ActivityInvite,{notif_type:a.n0.ActivityInvite,notif_user_id:n.id,message_id:t.id,message_type:t.type,guild_id:e.guild_id,channel_id:e.id,channel_type:e.type,activity_type:c,activity_name:u.name});return{icon:_,title:p,body:f,onNotificationShow:()=>{m()},confirmText:s.intl.string(s.t.VJlc0d),onConfirmClick:(r,o)=>{var a;i.Z.join({userId:n.id,sessionId:h,applicationId:null!==(a=d.altId)&&void 0!==a?a:d.id,channelId:e.id,messageId:t.id}),l.Z.updateNotificationStatus(o),g("join")},onDismissClick:()=>{g("dismiss")}}}},609626:function(e,t,n){n.d(t,{Z:()=>s});var i=n(768581),l=n(620954),r=n(987650),o=n(981631),a=n(388032);function s(e,t){let n=e.username,s=a.intl.format(a.t["Yk+uYG"],{username:""}),d=(0,i.ov)(e),u=a.intl.string(a.t.WRj1Wl),{trackView:c,trackClick:h}=(0,l.R)(r.n0.ActivityUserJoin,{notif_type:r.n0.ActivityUserJoin,notif_user_id:e.id,activity_type:o.mFx.JOIN,activity_name:t.name});return{icon:d,title:n,body:s,hint:u,onNotificationShow:()=>{c()},onDismissClick:()=>{h("dismiss")}}}},421824:function(e,t,n){n.d(t,{f:()=>p,y:()=>_});var i=n(200651);n(192379);var l=n(481060),r=n(522474),o=n(556296),a=n(13140),s=n(44359),d=n(620954),u=n(987650),c=n(981631),h=n(388032);function _(){if(r.Z.getWindowOpen(c.KJ3.ACTIVITY_POPOUT))return null;let{trackView:e,trackClick:t}=(0,d.R)(u.n0.ClipsReminderNotification,{notif_type:u.n0.ClipsReminderNotification}),n=o.ZP.getKeybindForAction(c.kg4.SAVE_CLIP);if(null==n)return null;let _=a.BB(n.shortcut,!0);return{title:h.intl.format(h.t.S5uhCA,{keybind:_,keybindHook:(e,t)=>(0,i.jsx)(s.Z,{keybind:_.split("+")},t)}),icon:(0,i.jsx)(l.AlX,{size:"lg",color:"currentColor"}),onNotificationShow:()=>{e()},onDismissClick:()=>{t("dismiss")}}}function p(e){let{trackView:t,trackClick:n}=(0,d.R)(u.n0.ClipsNotification,{notif_type:u.n0.ClipsNotification});return{title:e,icon:(0,i.jsx)(l.AlX,{size:"lg",color:"currentColor"}),onNotificationShow:()=>{t()},onDismissClick:()=>{n("dismiss")}}}},777036:function(e,t,n){n.d(t,{Z:()=>f});var i=n(26151),l=n(13245),r=n(287734),o=n(43267),a=n(933557),s=n(699516),d=n(594174),u=n(614554),c=n(620954),h=n(987650),_=n(981631),p=n(388032);function f(e){let t=(0,a.F6)(e,d.default,s.Z),n=p.intl.string(p.t.ssrVzM),f=(0,o.x)(e),m=(0,u.Z)(e),{trackView:g,trackClick:v}=(0,c.R)(h.n0.IncomingCall,{notif_type:h.n0.IncomingCall,notif_user_id:m,guild_id:e.guild_id,channel_id:e.id,channel_type:e.type});return{icon:f,title:t,body:n,confirmText:p.intl.string(p.t["0D/6R0"]),cancelText:p.intl.string(p.t.BVN4pK),onNotificationShow:()=>{g()},onConfirmClick:(t,n)=>{if(v("join"),_.TPd.CALLABLE.has(e.type))i.Z.call(e.id,!1,!1);else{if(e.type!==_.d4z.GUILD_VOICE)return;r.default.selectVoiceChannel(e.id)}l.Z.updateNotificationStatus(n),l.Z.track(_.rMx.VOICE_CHANNEL_SELECTED,{location:"Overlay Notificaiton",guild_id:e.guild_id,channel_id:e.id,video_enabled:!1})},onCancelClick:()=>{v("decline"),i.Z.stopRinging(e.id)},onDismissClick:()=>{v("dismiss")}}}},333727:function(e,t,n){n.d(t,{Z:()=>h});var i=n(278323),l=n(13245),r=n(45114),o=n(237997),a=n(145597),s=n(620954),d=n(987650),u=n(981631),c=n(388032);function h(e,t,n,h){let _=t.username,p=c.intl.format(c.t.VDODnp,{username:"",game:n.name}),f=t.getAvatarURL(e.guild_id,80),{trackView:m,trackClick:g}=(0,s.R)(d.n0.ActivityInvite,{notif_type:d.n0.ActivityInvite,notif_user_id:t.id,activity_type:u.mFx.JOIN_REQUEST,activity_name:h.name});return{icon:f,title:_,body:p,confirmText:c.intl.string(c.t["fgP/wc"]),cancelText:c.intl.string(c.t.tpXzJy),onNotificationShow:()=>{m()},onConfirmClick:(t,n)=>{i.Z.sendActivityInvite({channelId:e.id,type:u.mFx.JOIN,activity:h,location:o.Z.isLocked((0,a.QF)())?u.Sbl.LOCKED_OVERLAY:u.Sbl.UNLOCKED_OVERLAY}),g("join"),l.Z.updateNotificationStatus(n)},onCancelClick:(t,n)=>{(0,r.In)(e.id,!0,!0),l.Z.updateNotificationStatus(n),g("decline")},onDismissClick:()=>{g("dismiss")}}}},585708:function(e,t,n){n.d(t,{Z:()=>x});var i=n(200651);n(192379);var l=n(13245),r=n(937889),o=n(703656),a=n(460181),s=n(974180),d=n(150097),u=n(358085),c=n(998502),h=n(145597),_=n(610394),p=n(516542),f=n(380736),m=n(620954),g=n(987650),v=n(981631),E=n(388032);function x(e,t,n,x){var I;let{icon:C,title:S,body:Z}=(0,d.Xi)(e,t,n),{trackView:y,trackClick:O}=(0,m.R)(g.n0.TextChat,{notif_type:g.n0.TextChat,notif_user_id:null===(I=t.author)||void 0===I?void 0:I.id,message_id:t.id,message_type:t.type,guild_id:e.guild_id,channel_id:e.id,channel_type:e.type});return{icon:C,title:S,body:t.content.length>0?(0,r.ZP)(t,{noStyleAndInteraction:!0,formatInline:!0,hideSimpleEmbedContent:!1}).content:Z,hint:e=>e?null:(0,f.QR)((0,m.P)(),E.t.ykjOAA,E.intl.string(E.t.jZkzVF)),maxBodyLines:2,renderFooter:(t,n)=>t?(0,i.jsx)(p.Z,{id:n,channel:e,onSend:()=>O("send")}):null,onNotificationShow:()=>{x&&(0,a.GN)(s.Ay,s.yk),y()},onNotificationClick:()=>{let n=(0,h.QF)();_.ZP.isInputLocked(n)?(O("unlock"),l.Z.setInputLocked(!1,n)):(O("jump"),(0,o.uL)(v.Z5c.CHANNEL(e.guild_id,e.id,t.id)),u.isPlatformEmbedded&&c.ZP.focus())},onDismissClick:()=>{O("dismiss")}}}},588909:function(e,t,n){n.d(t,{Z:()=>O}),n(47120);var i=n(200651);n(192379);var l=n(704215),r=n(952265),o=n(24124),a=n(13245),s=n(620662),d=n(835473),u=n(442550),c=n(605236),h=n(293273),_=n(145597),p=n(32300),f=n(603618),m=n(380736),g=n(620954),v=n(987650),E=n(981631),x=n(602091),I=n(701488),C=n(388032),S=n(837449),Z=n(725083);function y(e){let{game:t}=e,n=(0,d.q)(t.id);return null==n?null:(0,i.jsx)(u.f,{src:n.getIconURL(I.Si.LARGE),size:40})}function O(e,t){let{trackView:d,trackClick:u}=(0,g.R)(v.n0.WelcomeNudge,{notif_type:v.n0.WelcomeNudge,secondary_notif_types:t.map(e=>v.nc[e.type])}),I={};for(let l of t)switch(l.type){case v.nc.WELCOME:{let t=(null==e?void 0:e.altId)!=null?h.Z.getApplicationActivity(e.altId):(null==e?void 0:e.id)!=null?h.Z.getApplicationActivity(e.id):null;null!=t&&(0,s.Z)(t,E.xjy.JOIN)&&(I.cancelText=C.intl.string(C.t["6F9ivr"]),I.onCancelClick=(e,n)=>{u("unlock"),a.Z.updateNotificationStatus(n),a.Z.setInputLocked(!1,(0,_.QF)()),(0,o.h7)(t,!1,E.IlC.POPOUT)});break}case v.nc.GO_LIVE_VOICE:case v.nc.GO_LIVE_NON_VOICE:I.confirmText=C.intl.string(C.t.U76Ft7),I.onConfirmClick=(e,t)=>{u("unlock"),a.Z.updateNotificationStatus(t),a.Z.setInputLocked(!1,(0,_.QF)()),(0,r.ZD)(async()=>{let{default:e}=await Promise.all([n.e("79477"),n.e("68723")]).then(n.bind(n,60594));return t=>(0,i.jsx)(e,{...t,selectSource:!1,guildId:l.type===v.nc.GO_LIVE_VOICE?l.voiceGuild.id:void 0,selectGuild:l.type===v.nc.GO_LIVE_NON_VOICE,analyticsLocation:E.Sbl.OVERLAY_NUDGE})},{contextKey:x.u1})};break;case v.nc.CONTENT_INVENTORY:(0,p.Rb)("welcomeNotification").allowActivityWidget&&(I.renderFooter=()=>(0,i.jsx)("div",{className:Z.container,children:(0,i.jsx)(f.lX,{gamingId:null==e?void 0:e.id,maxUserShowCount:5})}),I.onNotificationShow=()=>{a.Z.track(E.rMx.OVERLAY_GAME_INVITE_NOTIFICATION_SHOWN,{user_ids:l.entries.map(e=>e.author_id),entry_ids:l.entries.map(e=>e.id)})})}let O=(0,c.un)(l.z.OVERLAY_OOP_WELCOME_NUX),N=null!=e?C.intl.format(C.t.bJ1QAQ,{gameName:e.name}):C.intl.string(C.t.KWDIrq),b=null!=e?void 0:C.intl.string(C.t.y7BLbm),T=O?N:C.intl.string(C.t["prl+ra"]),w=O?b:C.intl.string(C.t.R3CpPT);return{icon:null!=e?(0,i.jsx)(y,{game:e}):(0,i.jsx)("img",{src:n(328756),className:S.icon,alt:""}),title:null!=e&&O?e.name:T,body:w,hint:()=>(0,m.QR)((0,g.P)(),C.t.e6giBQ,C.intl.string(C.t.jZkzVF)),confirmText:O?void 0:C.intl.string(C.t.TxyTbm),onConfirmClick:O?void 0:()=>{u("unlock"),a.Z.setInputLocked(!1,(0,_.QF)())},onNotificationShow:e=>{var t;d(),null===(t=I.onNotificationShow)||void 0===t||t.call(I,e),O||(0,c.EW)(l.z.OVERLAY_OOP_WELCOME_NUX)},onNotificationClick:()=>{u("unlock"),a.Z.setInputLocked(!1,(0,_.QF)())},onDismissClick:()=>{u("dismiss")},...I}}},352527:function(e,t,n){n.d(t,{Z:()=>c});var i,l,r,o=n(442837),a=n(570140);let s=!1,d=!1;class u extends(r=o.ZP.Store){get keepOpen(){return d}get enabled(){return s}}l="SoundboardOverlayStore",(i="displayName")in u?Object.defineProperty(u,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):u[i]=l;let c=new u(a.Z,{SOUNDBOARD_SET_OVERLAY_ENABLED:function(e){if(s=e.enabled,e.enabled){var t;d=null!==(t=e.keepOpen)&&void 0!==t&&t}}})},892807:function(e,t,n){n.d(t,{Z:()=>b}),n(724458),n(653041),n(47120);var i=n(200651),l=n(192379),r=n(120356),o=n.n(r),a=n(442837),s=n(481060),d=n(410575),u=n(933557),c=n(471445),h=n(318374),_=n(46145),p=n(814443),f=n(592125),m=n(430824),g=n(496675),v=n(699516),E=n(594174),x=n(979651),I=n(823379),C=n(981631),S=n(388032),Z=n(181435);function y(e){let{channel:t,currentVoiceChannel:n}=e,l=(0,c.KS)(t),r=t.id===(null==n?void 0:n.id),a=r?s.TVs.colors.TEXT_POSITIVE:s.TVs.colors.INTERACTIVE_NORMAL;return(0,i.jsxs)("div",{className:Z.channelNameContainer,children:[null!=l?(0,i.jsx)(l,{color:a,size:"xs"}):void 0,(0,i.jsx)(s.Text,{variant:"text-sm/semibold",className:o()(Z.label,Z.channelName),color:r?"text-positive":"text-normal",children:(0,u.F6)(t,E.default,v.Z)})]})}function O(e){let{channel:t,currentVoiceChannel:n}=e,l=t.getGuildId(),r=(0,a.e7)([m.Z],()=>m.Z.getGuild(l),[l]),o=t.id===(null==n?void 0:n.id);return null==r?null:(0,i.jsx)("div",{className:Z.channelMenuSubContainer,children:(0,i.jsx)(s.Text,{variant:"text-xs/normal",color:o?"text-positive":void 0,children:r.name})})}function N(e){let{channel:t}=e,n=(0,a.Wu)([x.Z,E.default,p.Z],()=>Object.values(x.Z.getVoiceStatesForChannel(t.id)).map(e=>E.default.getUser(e.userId)).filter(I.lm).sort((e,t)=>{var n,i,l,r;return(null!==(l=null===(n=p.Z.getUserAffinity(t.id))||void 0===n?void 0:n.affinity)&&void 0!==l?l:0)-(null!==(r=null===(i=p.Z.getUserAffinity(e.id))||void 0===i?void 0:i.affinity)&&void 0!==r?r:0)}),[t.id]),l=t.getGuildId();return null==l?null:(0,i.jsx)(h.Z,{users:n,guildId:l,maxUsers:3,size:s.EFr.SIZE_20,overflowCountClassName:Z.overflowCount,overflowCountVariant:"text-xxs/semibold",disableUserPopout:!0})}function b(e){let{currentVoiceChannel:t,onClose:n,onSelect:r}=e,o=(0,a.Wu)([v.Z,p.Z],()=>v.Z.getFriendIDs().sort((e,t)=>{var n,i,l,r;return null==e&&null==t?0:null==e?1:null==t?-1:(null!==(l=null===(n=p.Z.getUserAffinity(t))||void 0===n?void 0:n.affinity)&&void 0!==l?l:0)-(null!==(r=null===(i=p.Z.getUserAffinity(e))||void 0===i?void 0:i.affinity)&&void 0!==r?r:0)})),u=(0,a.Wu)([E.default],()=>o.reduce((e,t)=>{let n=E.default.getUser(t);return null!=n&&e.push(n),e},[]),[o]),c=(0,a.Wu)([_.Z,x.Z,f.Z,g.Z],()=>{let e=new Set(_.Z.getChannelHistory().reduce((e,t)=>{let n=f.Z.getChannel(t);return null!=n&&g.Z.can(C.Plq.CONNECT,n)&&e.length<5&&e.push(t),e},[])),t=u.map(e=>x.Z.getDiscoverableVoiceStateForUser(e.id)).reduce((t,n)=>{let i=null==n?void 0:n.channelId;if(null==i)return t;let l=f.Z.getChannel(i);return null!=l&&g.Z.can(C.Plq.CONNECT,l)&&!e.has(i)&&t.size<3&&t.add(i),t},new Set);return[...Array.from(e),...t].map(e=>f.Z.getChannel(e)).filter(I.lm)},[u]),h=l.useCallback(e=>{r(e),n()},[r,n]);return(0,i.jsx)(d.Z,{section:C.jXE.CONTEXT_MENU,children:(0,i.jsx)(s.v2r,{onSelect:n,navId:"manage-streams",onClose:n,"aria-label":S.intl.string(S.t["+9QSnp"]),children:(0,i.jsx)(s.kSQ,{children:c.map(e=>(0,i.jsx)(s.sNh,{id:e.id,label:(0,i.jsx)(y,{channel:e,currentVoiceChannel:t}),subtext:(0,i.jsx)(O,{channel:e,currentVoiceChannel:t}),icon:(0,i.jsx)("div",{className:Z.icon,children:(0,i.jsx)(N,{channel:e,currentVoiceChannel:t})}),subtextLineClamp:1,action:()=>h(e)},e.id))})})})}},129724:function(e,t,n){n.d(t,{A:()=>o});var i=n(913527),l=n.n(i),r=n(388032);function o(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.intl.string(r.t["Yl1D8/"]),i=l().duration(e,"seconds");return i.days()>0?r.intl.formatToPlainString(t?r.t.GBLpQ0:r.t.k2UNz8,{days:i.days()}):i.hours()>0?r.intl.formatToPlainString(t?r.t.rhY1Rk:r.t.xCjYxM,{hours:i.hours()}):i.minutes()>0?r.intl.formatToPlainString(t?r.t["XIGt+f"]:r.t.iXLF9f,{minutes:i.minutes()}):e>0?r.intl.formatToPlainString(t?r.t.pyvjRk:r.t.geSp4O,{seconds:i.seconds()}):t?r.intl.string(r.t["Yl1D8/"]):n}},353488:function(e,t,n){e.exports={grid:"grid__8ca5f",tile:"tile__8ca5f"}},273762:function(e,t,n){e.exports={panel:"panel_ef5082",panelGroup:"panelGroup_ef5082",bottomPanelButton:"bottomPanelButton_ef5082",topPanelToggle:"topPanelToggle_ef5082",secondaryInfoText:"secondaryInfoText_ef5082"}},658951:function(e,t,n){e.exports={panel:"panel_fe7ab2",headerBar:"headerBar_fe7ab2",headerTitle:"headerTitle_fe7ab2",inspectorWrapper:"inspectorWrapper_fe7ab2",tabBar:"tabBar_fe7ab2",tabItem:"tabItem_fe7ab2",selected:"selected_fe7ab2",overflowChevron:"overflowChevron_fe7ab2",table:"table_fe7ab2",tableContainer:"tableContainer_fe7ab2",tableHeader:"tableHeader_fe7ab2",tableRow:"tableRow_fe7ab2",selectedTableRow:"selectedTableRow_fe7ab2",properties:"properties_fe7ab2",propertyName:"propertyName_fe7ab2",toolbar:"toolbar_fe7ab2",toolbarGroup:"toolbarGroup_fe7ab2",toolbarButton:"toolbarButton_fe7ab2"}},918138:function(e,t,n){e.exports={divider:"divider__33f29",separator:"separator__33f29"}},596124:function(e,t,n){e.exports={nativePickerGuide:"nativePickerGuide_afdbcd",windowIcon_to:"windowIcon_to_afdbcd",windowIcon_to__to:"windowIcon_to__to_afdbcd",windowIcon_ts:"windowIcon_ts_afdbcd",windowIcon_ts__ts:"windowIcon_ts__ts_afdbcd",windowIcon:"windowIcon_afdbcd",windowIcon_c_o:"windowIcon_c_o_afdbcd",clydeIcon_to:"clydeIcon_to_afdbcd",clydeIcon_to__to:"clydeIcon_to__to_afdbcd",clydeIcon_ts:"clydeIcon_ts_afdbcd",clydeIcon_ts__ts:"clydeIcon_ts__ts_afdbcd",clydeIcon:"clydeIcon_afdbcd",clydeIcon_c_o:"clydeIcon_c_o_afdbcd",screenIcon_to:"screenIcon_to_afdbcd",screenIcon_to__to:"screenIcon_to__to_afdbcd",screenIcon_ts:"screenIcon_ts_afdbcd",screenIcon_ts__ts:"screenIcon_ts__ts_afdbcd",screenIcon:"screenIcon_afdbcd",screenIcon_c_o:"screenIcon_c_o_afdbcd",screenIconHighlight_fill_g1_0:"screenIconHighlight_fill_g1_0_afdbcd",screenIconHighlight_fill_g1_0__c:"screenIconHighlight_fill_g1_0__c_afdbcd",screenIconHighlight_fill_g1_1:"screenIconHighlight_fill_g1_1_afdbcd",screenIconHighlight_fill_g1_1__c:"screenIconHighlight_fill_g1_1__c_afdbcd",screenIconHighlight:"screenIconHighlight_afdbcd",screenIconHighlight_f_o:"screenIconHighlight_f_o_afdbcd",windowCard_ts:"windowCard_ts_afdbcd",windowCard_ts__ts:"windowCard_ts__ts_afdbcd",windowCard:"windowCard_afdbcd",windowCard_c_o:"windowCard_c_o_afdbcd",buttonOverWindow_ts:"buttonOverWindow_ts_afdbcd",buttonOverWindow_ts__ts:"buttonOverWindow_ts__ts_afdbcd",buttonOverWindow:"buttonOverWindow_afdbcd",buttonOverWindow_c_o:"buttonOverWindow_c_o_afdbcd",buttonOverWindowHighlight_fill_g1_0:"buttonOverWindowHighlight_fill_g1_0_afdbcd",buttonOverWindowHighlight_fill_g1_0__c:"buttonOverWindowHighlight_fill_g1_0__c_afdbcd",buttonOverWindowHighlight_fill_g1_1:"buttonOverWindowHighlight_fill_g1_1_afdbcd",buttonOverWindowHighlight_fill_g1_1__c:"buttonOverWindowHighlight_fill_g1_1__c_afdbcd",buttonOverWindowHighlight:"buttonOverWindowHighlight_afdbcd",buttonOverWindowHighlight_f_p:"buttonOverWindowHighlight_f_p_afdbcd",buttonOverWindowHighlight_f_o:"buttonOverWindowHighlight_f_o_afdbcd",cursor_to:"cursor_to_afdbcd",cursor_to__to:"cursor_to__to_afdbcd",cursor_ts:"cursor_ts_afdbcd",cursor_ts__ts:"cursor_ts__ts_afdbcd",cursor:"cursor_afdbcd",cursor_c_o:"cursor_c_o_afdbcd"}},949:function(e,t,n){e.exports={spinner:"spinner_a2de16",tile:"tile_a2de16",sourceThumbnail:"sourceThumbnail_a2de16",sourceScroller:"sourceScroller_a2de16",sourceContainer:"sourceContainer_a2de16",selected:"selected_a2de16",sourceName:"sourceName_a2de16",segmentContainer:"segmentContainer_a2de16",segmentControl:"segmentControl_a2de16",segmentControlOption:"segmentControlOption_a2de16",errorMessage:"errorMessage_a2de16",nativePickerScroll:"nativePickerScroll_a2de16",nativeCaptureDevicesText:"nativeCaptureDevicesText_a2de16",captureDevicesToggleIndicator:"captureDevicesToggleIndicator_a2de16",nativePickerCollapsed:"nativePickerCollapsed_a2de16",nativePickerCaptureList:"nativePickerCaptureList_a2de16",nativePickerRadioItem:"nativePickerRadioItem_a2de16",nativePickerGuide:"nativePickerGuide_a2de16",nativePickerLabel:"nativePickerLabel_a2de16",nativePickerCaptureSection:"nativePickerCaptureSection_a2de16",nativeSourceSingleTypeButton:"nativeSourceSingleTypeButton_a2de16",nativeSourceSingleTypeButtonInner:"nativeSourceSingleTypeButtonInner_a2de16",nativeSourceSingleTypeImage:"nativeSourceSingleTypeImage_a2de16",nativePickerTypes:"nativePickerTypes_a2de16",nativeSourceTypeButton:"nativeSourceTypeButton_a2de16",nativeSourceTypeButtonInner:"nativeSourceTypeButtonInner_a2de16",hideRadioCheckbox:"hideRadioCheckbox_a2de16"}},422163:function(e,t,n){e.exports={container:"container__2af41",activityCard:"activityCard__2af41",row:"row__2af41",inviteFriendsButton:"inviteFriendsButton__2af41",avatar:"avatar__2af41",details:"details__2af41",usernameWrapper:"usernameWrapper__2af41",username:"username__2af41",inviteButton:"inviteButton__2af41",inviteButtonWrapper:"inviteButtonWrapper__2af41",inviteButtonInner:"inviteButtonInner__2af41",liveIndicator:"liveIndicator__2af41",badgesContainer:"badgesContainer__2af41"}},380917:function(e,t,n){e.exports={clickZone:"clickZone__29c87",clickZoneDebugContainer:"clickZoneDebugContainer__29c87",clickBackground:"clickBackground__29c87",clickable:"clickable__29c87"}},355266:function(e,t,n){e.exports={wrapper:"wrapper__58ece",unlocked:"unlocked__58ece",lockExtras:"lockExtras__58ece",operation:"operation__58ece",handle:"handle__58ece",resizeNorth:"resizeNorth__58ece handle__58ece",resizeSouth:"resizeSouth__58ece handle__58ece",resizeNSCursor:"resizeNSCursor__58ece",resizeWest:"resizeWest__58ece handle__58ece",resizeEast:"resizeEast__58ece handle__58ece",resizeEWCursor:"resizeEWCursor__58ece",resizeNorthWest:"resizeNorthWest__58ece handle__58ece",resizeNorthEast:"resizeNorthEast__58ece handle__58ece",resizeSouthWest:"resizeSouthWest__58ece handle__58ece",resizeSouthEast:"resizeSouthEast__58ece handle__58ece",resizeNWSECursor:"resizeNWSECursor__58ece",resizeNESWCursor:"resizeNESWCursor__58ece",extras:"extras__58ece",extrasBottomOriented:"extrasBottomOriented__58ece",extrasRightOriented:"extrasRightOriented__58ece"}},625130:function(e,t,n){e.exports={gridContainer:"gridContainer_ad58e7",gridItem:"gridItem_ad58e7",horizontal:"horizontal_ad58e7",vertical:"vertical_ad58e7",tileContainer:"tileContainer_ad58e7"}},233654:function(e,t,n){e.exports={streamTile:"streamTile__8151b",tile:"tile__8151b",streamTileWrapper:"streamTileWrapper__8151b",controls:"controls__8151b",controlBackground:"controlBackground__8151b",controlsWithActiveStream:"controlsWithActiveStream__8151b",controlUser:"controlUser__8151b",controlUserContainer:"controlUserContainer__8151b",controlAction:"controlAction__8151b",controlActions:"controlActions__8151b",absoluteFill:"absoluteFill__8151b",streamPreview:"streamPreview__8151b",liveIndicator:"liveIndicator__8151b",watchActionContainer:"watchActionContainer__8151b",watchButton:"watchButton__8151b"}},667933:function(e,t,n){e.exports={goLiveGridContainer:"goLiveGridContainer__466c6"}},4119:function(e,t,n){e.exports={buttonContainer:"buttonContainer__7e329",keybind:"keybind__7e329",button:"button__7e329"}},470102:function(e,t,n){e.exports={videoDev:"videoDev_eb35c5",overlay:"overlay_eb35c5",overlayBackground:"overlayBackground_eb35c5",overlayActive:"overlayActive_eb35c5",overlayLocked:"overlayLocked_eb35c5",closeContainer:"closeContainer_eb35c5",invalidContainer:"invalidContainer_eb35c5",inactiveContainer:"inactiveContainer_eb35c5",layoutLocked:"layoutLocked_eb35c5",layoutUnlocked:"layoutUnlocked_eb35c5 layoutLocked_eb35c5"}},87296:function(e,t,n){e.exports={overlayBackgroundNux:"overlayBackgroundNux__3db18",overlayInprocessBackgroundNux:"overlayInprocessBackgroundNux__3db18",mainContainer:"mainContainer__3db18",mainTitleContainer:"mainTitleContainer__3db18",widgetCalloutContainer:"widgetCalloutContainer__3db18",widgetCallout:"widgetCallout__3db18",nuxImage:"nuxImage__3db18",mainTitleBody:"mainTitleBody__3db18",mainTitle:"mainTitle__3db18"}},249582:function(e,t,n){e.exports={panelGroup:"panelGroup__2f37f",rightAligned:"rightAligned__2f37f",measurement:"measurement__2f37f",measurementText:"measurementText__2f37f",measurementCheckbox:"measurementCheckbox__2f37f",bottomPanelButton:"bottomPanelButton__2f37f",secondaryInfoText:"secondaryInfoText__2f37f"}},658397:function(e,t,n){e.exports={button:"button__46219",separatorDot:"separatorDot__46219",guildIconContainer:"guildIconContainer__46219",guildName:"guildName__46219",guildIcon:"guildIcon__46219",voiceChannelNameContainer:"voiceChannelNameContainer__46219",channelIcon:"channelIcon__46219",channelName:"channelName__46219"}},622230:function(e,t,n){e.exports={panelContainer:"panelContainer_a83780",locked:"locked_a83780",buttonSection:"buttonSection_a83780",panelRow:"panelRow_a83780",inCall:"inCall_a83780"}},122593:function(e,t,n){e.exports={container:"container_c39fe3"}},435525:function(e,t,n){e.exports={videoList:"videoList__95c18",vertical:"vertical__95c18",tile:"tile__95c18",hidden:"hidden__95c18"}},377335:function(e,t,n){e.exports={extrasContainer:"extrasContainer__19b74",debug:"debug__19b74",debugUnpinned:"debugUnpinned__19b74",debugPinned:"debugPinned__19b74"}},776439:function(e,t,n){e.exports={textArea:"textArea_ab8e5c"}},348094:function(e,t,n){e.exports={container:"container_fb1c43"}},725083:function(e,t,n){e.exports={container:"container__32c39"}},838521:function(e,t,n){e.exports={wrapper:"wrapper_d5ee5c",content:"content_d5ee5c",gameTile:"gameTile_d5ee5c",copy:"copy_d5ee5c",subheading:"subheading_d5ee5c"}},181435:function(e,t,n){e.exports={channelNameContainer:"channelNameContainer_c99562",label:"label_c99562",channelName:"channelName_c99562",channelMenuSubContainer:"channelMenuSubContainer_c99562",icon:"icon_c99562",overflowCount:"overflowCount_c99562"}}}]);
//# sourceMappingURL=8a93ccb2e26be500.js.map