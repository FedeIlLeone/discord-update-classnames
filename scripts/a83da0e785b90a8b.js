"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["69057"],{194188:function(e,t,i){i.d(t,{x:()=>l});let l=(0,i(818083).B)({kind:"user",id:"2024-10_weighted_sample_activity_shelf",label:"Weighted Sample Activity Shelf",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Perform weighted sampling of top N activities in shelf and disable frecency sorting in shelf",config:{enabled:!0}}]})},694312:function(e,t,i){i.d(t,{E:()=>p}),i(47120);var l=i(192379),n=i(442837),a=i(835473),r=i(594174),d=i(695103),o=i(823379),u=i(358085),c=i(317381),s=i(761122);function p(e){let t=(0,n.e7)([r.default],r.default.getCurrentUser),i=(0,n.Wu)([c.ZP],()=>c.ZP.getShelfActivities(e)),p=(0,n.e7)([d.Z],()=>d.Z.testModeEmbeddedApplicationId),f=i.map(e=>e.application_id),v=null!=p?[p,...f]:f,h=(0,a.Z)(v),Z=l.useMemo(()=>h.filter(o.lm),[h]),g=l.useMemo(()=>null!=p&&Z.length>0&&Z[0].id===p&&null!=Z[0].embeddedActivityConfig?[{activity:Z[0].embeddedActivityConfig,application:Z[0]}]:[],[Z,p]),m=l.useMemo(()=>i.map(e=>{let t=Z.find(t=>t.id===e.application_id);return null==t?null:{activity:e,application:t}}).filter(o.lm),[i,Z]);return l.useMemo(()=>[...g,...m].filter(e=>{var t;let{activity:i}=e;return(null!==(t=i.supported_platforms)&&void 0!==t?t:[]).includes((0,s.Z)((0,u.getOS)()))}).filter(e=>{let{activity:i}=e;return!i.requires_age_gate||(null==t?void 0:t.nsfwAllowed)===!0||(null==t?void 0:t.nsfwAllowed)==null}),[null==t?void 0:t.nsfwAllowed,m,g])}},127255:function(e,t,i){i.d(t,{Z:()=>u}),i(47120),i(653041);var l=i(192379),n=i(442837),a=i(115130),r=i(694312),d=i(405625),o=i(664097);function u(e){let{guildId:t,enableFilter:i=!1}=e,{filter:u}=(0,n.cj)([a.Z],()=>({filter:a.Z.getFilter()})),c=(0,r.E)(t),s=(0,d.Z)(c),p=(0,o.o)();return l.useMemo(()=>{function e(e){return!!(!i||""===u||e.application.name.toLowerCase().includes(u.toLowerCase()))}let t=[...p].filter(e),l=new Set(t.map(e=>e.application.id));for(let i of s)!l.has(i.application.id)&&e(i)&&t.push(i);return t},[p,i,u,s])}},405625:function(e,t,i){i.d(t,{Z:()=>c}),i(653041),i(47120);var l=i(192379),n=i(911969),a=i(822245),r=i(675478),d=i(358085),o=i(194188),u=i(761122);function c(e){r.DZ.loadIfNecessary();let{enabled:t}=o.x.getCurrentConfig({location:"useActivityShelfItemsSorting"},{autoTrackExposure:!1});return l.useMemo(()=>{let i=[];e.forEach(e=>i.push(e.application.id));let l=[...i];return l.sort((e,l)=>{if(!t){let t=a.Z.getScoreWithoutLoadingLatest(e),i=a.Z.getScoreWithoutLoadingLatest(l);if(t!==i)return i-t}return i.findIndex(t=>t===e)<i.findIndex(e=>e===l)?-1:1}),s(e,l)},[e,t])}let s=(e,t)=>{let i=[...e],l=0;return t.forEach(e=>{let t=i.findIndex(t=>t.application.id===e);if(-1!==t){let e=i[t];i.splice(t,1),i=[...i.slice(0,l),e,...i.slice(l)],++l}}),i.map((e,t)=>[e,t]).filter(e=>{var t,i;let[l]=e,a=null===(i=l.application.embeddedActivityConfig)||void 0===i?void 0:null===(t=i.client_platform_config[(0,u.Z)((0,d.getOS)())])||void 0===t?void 0:t.label_type;return!!a&&(a===n.ww.NEW||a===n.ww.UPDATED)}).forEach(e=>{let[t,l]=e,n=null!=t.application.embeddedActivityConfig&&null!=t.application.embeddedActivityConfig.shelf_rank?t.application.embeddedActivityConfig.shelf_rank-1:l;if(n<l){let e=i[l];i.splice(l,1),i=[...i.slice(0,n),e,...i.slice(n)]}}),i}},664097:function(e,t,i){i.d(t,{o:()=>d});var l=i(192379),n=i(442837),a=i(115130),r=i(701488);let d=()=>{let{isEnabled:e,lastUsedObject:t}=(0,n.cj)([a.Z],()=>({isEnabled:a.Z.getIsEnabled(),lastUsedObject:a.Z.getLastUsedObject()}),[]),i=(0,n.Wu)([a.Z],()=>a.Z.getDeveloperShelfItems(),[]);return l.useMemo(()=>e?i.map(e=>({application:e,activity:{...r.wT,...e.embeddedActivityConfig,application_id:e.id}})).sort((e,i)=>{let l=t[e.application.id],n=t[i.application.id];return null==l?1:null==n?-1:n-l}):[],[i,e,t])}},619915:function(e,t,i){i.d(t,{QN:()=>p,ZP:()=>s,gb:()=>f,uF:()=>v}),i(47120),i(653041);var l=i(192379),n=i(442837),a=i(835473),r=i(158776),d=i(594174),o=i(823379),u=i(317381),c=i(16609);function s(e,t){return f((0,n.Wu)([u.ZP],()=>null!=e&&null!=e.id&&""!==e.id?u.ZP.getEmbeddedActivitiesForChannel(e.id):u.i6),t)}function p(e){let t=f((0,n.e7)([u.ZP],()=>null!=e?u.ZP.getEmbeddedActivitiesForGuild(e):u.i6));return l.useMemo(()=>{let e=new Map;return t.forEach(t=>{var i;let l=(0,c.pY)(t.embeddedActivity.location);if(null==l)return;let n=null!==(i=e.get(l))&&void 0!==i?i:[];n.push(t),e.set(l,n)}),e},[t])}function f(e,t){let i=e.map(e=>e.applicationId),r=(0,a.Z)(i),u=new Set([]);for(let t of e)for(let e of t.userIds)u.add(e);let c=(0,n.Wu)([d.default],()=>{let e=[];for(let t of u)e.push(d.default.getUser(t));return e},[u]);return l.useMemo(()=>{let i=new Map;return c.forEach(e=>{null!=e&&i.set(e.id,e)}),e.map((e,l)=>{let n=r[l],a=[];if(null!=a)for(let l of e.userIds){let e=i.get(l);if(null!=e&&null!=t){let i=t(e);null!=i&&a.push(i)}}return null==n?null:{embeddedActivity:e,application:n,userParticipantAvatarUrls:a}}).filter(o.lm)},[e,r,c,t])}function v(e){return(0,n.e7)([r.Z],()=>{let t=new Map;return e.forEach(e=>{var i;let l=r.Z.findActivity(null==e?void 0:e.embeddedActivity.userIds.values().next().value,t=>{var i;return t.application_id===(null==e?void 0:null===(i=e.application)||void 0===i?void 0:i.id)});t.set(null==e?void 0:null===(i=e.application)||void 0===i?void 0:i.id,{...e,presenceActivity:l})}),t},[e],n.pF)}},880308:function(e,t,i){i.d(t,{g:()=>u});var l=i(192379),n=i(442837),a=i(695346),r=i(115130),d=i(566620),o=i(782769);function u(){let e=(0,o.z)(),t=a.Sb.getSetting(),i=(0,n.e7)([r.Z],()=>r.Z.getFetchState(),[]);return l.useEffect(()=>{e&&t&&i===r.O.INITIALIZED&&(0,d.$h)()},[e,i,t]),null}},542094:function(e,t,i){i.d(t,{JS:()=>b,Qv:()=>C,ZP:()=>w,fD:()=>A,w1:()=>I}),i(789020),i(757143);var l,n=i(493683),a=i(911969),r=i(906732),d=i(835473),o=i(630388),u=i(358085),c=i(317381),s=i(638880),p=i(122613),f=i(619915),v=i(16609),h=i(761122),Z=i(361213),g=i(716600),m=i(952561),y=i(778569),_=i(701488),E=i(981631),b=((l={})[l.START=0]="START",l[l.JOIN=1]="JOIN",l[l.LEAVE=2]="LEAVE",l);function w(e){let{activityItem:t,context:i,locationObject:l,onActivityItemSelected:n,embeddedActivitiesManager:r,assetNames:d=["embedded_cover"],backgroundResolution:o=250,launchingComponentId:c,commandOrigin:s,source:p}=e,{application:v,activity:g}=t,m=g.client_platform_config[(0,h.Z)((0,u.getOS)())],_=null!=m.label_until&&Date.now()<Date.parse(m.label_until),E=(0,y.Z)({applicationId:v.id,size:o,names:d}),b=null!=g.activity_preview_video_asset_id?(0,Z.Z)(v.id,g.activity_preview_video_asset_id):null,w=(0,f.ZP)("channel"===i.type?i.channel:void 0).find(e=>{let{embeddedActivity:t}=e;return v.id===t.applicationId}),S=C({context:i,applicationId:v.id}),x=I({applicationId:t.application.id,context:i,locationObject:l,embeddedActivitiesManager:r,onActivityItemSelectedProp:n,launchingComponentId:c,commandOrigin:s,source:p}),P=A(v,t.activity);return{imageBackground:E,videoUrl:b,joinableEmbeddedApp:w,activityAction:S,onActivityItemSelected:x,labelType:_?m.label_type:a.ww.NONE,staffReleasePhase:P}}function A(e,t){var i;let l=null!==(i=e.flags)&&void 0!==i?i:0;if(!((0,o.yE)(l,E.udG.EMBEDDED_RELEASED)||(0,o.yE)(l,E.udG.EMBEDDED_FIRST_PARTY)))return;let n=t.client_platform_config[(0,h.Z)((0,u.getOS)())].release_phase;return _.eB.includes(n)?n.replace("_"," ").replace(/(^\w|\s\w)/g,e=>e.toUpperCase()):void 0}function C(e){let{context:t,applicationId:i,fetchesApplication:l=!0}=e,n=0,a="channel"===t.type?t.channel:void 0,r=(0,g.Z)(),o=(0,m.Z)({fetchesApplication:l}),u=(0,d.q)(i,l),c=(0,f.ZP)(a).find(e=>{let{embeddedActivity:t}=e;return null!=u&&u.id===t.applicationId});if(null==u)return n;let s=(0,v.pY)(null==r?void 0:r.location);return null!=a&&s===a.id&&(null==o?void 0:o.id)===u.id?n=2:null!=c&&(n=1),n}function I(e){let{applicationId:t,botUserIdForAppDM:i,context:l,locationObject:a,embeddedActivitiesManager:d,onActivityItemSelectedProp:o,launchingComponentId:u,commandOrigin:f,sectionName:v,source:h,fetchesApplication:Z=!0,customId:m,referrerId:y}=e,_=C({context:l,applicationId:t,fetchesApplication:Z}),{analyticsLocations:E}=(0,r.ZP)(),b=(0,g.Z)();switch(_){case 0:return async()=>{let e="channel"===l.type?l.channel.id:void 0;if(null!=i)try{e=await n.Z.openPrivateChannel(i)}catch(e){return}await (0,p.Z)({targetApplicationId:t,locationObject:a,channelId:e,analyticsLocations:E,componentId:u,commandOrigin:f,sectionName:v,source:h,customId:m,referrerId:y}).then(e=>e&&(null==o?void 0:o({applicationId:t})))};case 1:return async()=>{c.ZP.isLaunchingActivity()||await (0,s.Z)({applicationId:t,activityChannelId:"channel"===l.type?l.channel.id:void 0,locationObject:a,analyticsLocations:E,componentId:u,sectionName:v,source:h,customId:m,referrerId:y}).then(e=>e&&(null==o?void 0:o({applicationId:t})))};case 2:return()=>{c.ZP.isLaunchingActivity()||(null!=b&&d.leaveActivity({location:b.location,applicationId:t}),null==o||o({applicationId:t}))}}}},716600:function(e,t,i){i.d(t,{Z:()=>a});var l=i(442837),n=i(317381);function a(){return(0,l.e7)([n.ZP],()=>n.ZP.getCurrentEmbeddedActivity())}},952561:function(e,t,i){i.d(t,{Z:()=>a}),i(47120);var l=i(835473),n=i(716600);function a(){let{fetchesApplication:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,n.Z)(),[i]=(0,l.Z)(null==t?[]:[t.applicationId],e);return null!=i?i:void 0}},427996:function(e,t,i){i.d(t,{W:()=>p});var l=i(200651);i(192379);var n=i(120356),a=i.n(n),r=i(399606),d=i(481060),o=i(337682),u=i(115130),c=i(388032),s=i(505869);function p(e){let{hideSearch:t,className:i}=e,{activityUrlOverride:n,useActivityUrlOverride:p,filter:f}=(0,r.cj)([u.Z],()=>({activityUrlOverride:u.Z.getActivityUrlOverride(),useActivityUrlOverride:u.Z.getUseActivityUrlOverride(),filter:u.Z.getFilter()}),[]);return(0,l.jsxs)("div",{className:a()(s.container,i),children:[(0,l.jsx)(d.XZJ,{type:d.XZJ.Types.INVERTED,value:p,onClick:o.Y$,children:(0,l.jsx)(d.Text,{variant:"text-md/semibold",children:c.intl.string(c.t["3TSGuL"])})}),p?(0,l.jsx)(d.xJW,{title:c.intl.string(c.t["9rnmen"]),children:(0,l.jsx)(d.oil,{disabled:!p,value:null!=n?n:void 0,onChange:o.jS,placeholder:"https://localhost:3000"})}):null,!0===t?null:(0,l.jsx)("div",{children:(0,l.jsx)(d.E1j,{className:s.searchBar,query:f,onChange:o.a8,onClear:function(){o.a8("")}})})]})}},880448:function(e,t,i){i.d(t,{Z:()=>a});var l=i(200651);i(192379);var n=i(325767);function a(e){let{width:t=24,height:i=24,color:a="currentColor",foreground:r,...d}=e;return(0,l.jsx)("svg",{...(0,n.Z)(d),width:t,height:i,viewBox:"0 0 24 24",fill:"none",children:(0,l.jsx)("path",{d:"M7.39344 5.33333L5.33333 7.39344V16.6065L7.39348 18.6667H16.6065L18.6667 16.6065V7.39344L16.6065 5.33333H7.39344ZM11.0485 15.6879H9.20459C9.20459 14.1627 7.96392 12.922 6.43868 12.922V11.078C7.96392 11.078 9.20459 9.83735 9.20459 8.31211H11.0485C11.0485 9.82534 10.3057 11.159 9.17607 12C10.3057 12.8411 11.0485 14.1747 11.0485 15.6879ZM17.5556 12.922C16.0304 12.922 14.7896 14.1627 14.7896 15.6879H12.9457C12.9457 14.1747 13.6885 12.8411 14.8181 12C13.6885 11.159 12.9457 9.82534 12.9457 8.31211H14.7896C14.7896 9.83735 16.0304 11.078 17.5556 11.078V12.922Z",fill:a,className:r})})}}}]);
//# sourceMappingURL=a83da0e785b90a8b.js.map