"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["86513"],{17894:function(n,e,t){t.d(e,{Z:()=>x});var i=t(525654),l=t.n(i),r=t(39612),a=t(271579),o=t(756647),s=t(232567),u=t(703656),c=t(314897),d=t(896797),m=t(626135),f=t(954824),h=t(981631);async function p(n){var e,t;let i=null===(e=l().os)||void 0===e?void 0:e.family;if("Android"===i||"iOS"===i){let e=null!==(t=c.default.getFingerprint())&&void 0!==t?t:c.default.getId(),i=(0,a.WS)();if(null==e&&c.default.isAuthenticated())try{await (0,s.k)(),e=c.default.getId()}catch{}return(0,a.ZP)((0,r.Gk)(),{utmSource:n,fingerprint:e,attemptId:i})}return"discord://"}async function x(n){let e=await p(n),t=(0,a.zS)(e);null!=t&&m.default.track(h.rMx.DEEP_LINK_CLICKED,{fingerprint:(0,o.K)(t.fingerprint),attempt_id:t.attemptId,source:t.utmSource}),f.Z.launch(e,n=>{n||(0,u.dL)(d.Z.fallbackRoute)})}},721165:function(n,e,t){t.d(e,{Z:()=>g}),t(789020);var i=t(200651),l=t(192379),r=t(442837),a=t(131388),o=t(171246),s=t(689011),u=t(931905),c=t(430824),d=t(563132),m=t(409813),f=t(586585),h=t(614277),p=t(750143),x=t(388032);function g(n){let{handleStepChange:e,handleClose:t}=n,{subscriptionMetadataRequest:g,selectedSku:v,selectedStoreListing:b,application:C}=(0,d.JL)(),j=(0,a.Z)(p.i),S=(0,r.e7)([c.Z],()=>c.Z.getGuild(null==g?void 0:g.guild_id)),N=l.useCallback(()=>e(m.h8.REVIEW),[e]);if(null==v)return null;let k=(0,o.KW)(v.flags);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.C3,{children:j?(0,i.jsx)(u.h,{confirmCta:x.intl.string(x.t.PBHFSk),onConfirm:N,onCancel:t,title:x.intl.format(x.t["6n6oXF"],{tier:v.name}),subtitle:k?x.intl.string(x.t.lzAoKC):x.intl.formatToPlainString(x.t["GqaY/v"],{guildName:null==S?void 0:S.name}),showOpenDiscord:!1}):(0,i.jsx)(s.Oc,{icon:null==b?void 0:b.thumbnail,storeListingBenefits:null==b?void 0:b.benefits,application:null!=C?C:void 0,title:x.intl.format(x.t.haiCxc,{tier:v.name}),subtitle:k?x.intl.string(x.t.RvtbPz):x.intl.string(x.t.zY39Zm),description:k?x.intl.formatToPlainString(x.t.QCe4ra,{applicationName:null==C?void 0:C.name}):x.intl.string(x.t.n1Pu8P)})}),!j&&(0,i.jsx)(h.O3,{children:(0,i.jsx)(f.Z,{onBack:t,backText:x.intl.string(x.t.TQBY1N),onPrimary:N,primaryCTA:f.g.CONTINUE,primaryText:x.intl.string(x.t["gZhF+/"])})})]})}},519801:function(n,e,t){t.d(e,{Z:()=>b}),t(789020);var i=t(200651),l=t(192379),r=t(131388),a=t(607070),o=t(745510),s=t(171246),u=t(689011),c=t(931905),d=t(563132),m=t(409813),f=t(586585),h=t(456251),p=t(614277),x=t(698708),g=t(750143),v=t(388032);function b(n){var e,t;let b,C,{showBenefits:j,handleClose:S,onSubscriptionConfirmation:N}=n,{updatedSubscription:k,readySlideId:_,selectedSku:T,selectedStoreListing:E,application:Z}=(0,d.JL)(),P=(0,r.Z)(g.i),{createMultipleConfettiAt:y}=l.useContext(o.h),I=null!==(e=null==T?void 0:T.name)&&void 0!==e?e:"",A=()=>{S(),null==N||N()},L=_===m.h8.CONFIRM,R=(0,s.KW)(null!==(t=null==T?void 0:T.flags)&&void 0!==t?t:0),w=null!=E&&E.benefits.length>0?v.intl.formatToPlainString(v.t["+IQQVF"],{benefitCount:E.benefits.length}):null;return j?P?b=(0,i.jsx)(c.h,{title:v.intl.format(v.t.ea6tZm,{tierName:I}),subtitle:null!=E&&E.benefits.length>0?v.intl.formatToPlainString(v.t.HNepfn,{benefits:w}):null,onConfirm:A,confirmCta:v.intl.string(v.t.nlkyw8)}):(b=null!=E&&null!=Z?(0,i.jsx)(u.Oc,{icon:E.thumbnail,storeListingBenefits:E.benefits,application:Z,title:v.intl.format(v.t["Q+qktb"],{tier:I}),subtitle:v.intl.string(v.t.ECKxXV),description:R?v.intl.format(v.t.MAtQk5,{applicationName:null==Z?void 0:Z.name}):v.intl.format(v.t.vHkMFx,{tier:I})}):(0,i.jsx)(h.Z,{}),C=(0,i.jsx)(f.Z,{onPrimary:A,primaryCTA:f.g.CONTINUE,primaryText:v.intl.string(v.t["JtWl+f"])})):b=P?(0,i.jsx)(c.m,{tierName:I,onConfirm:A,subscription:k}):(0,i.jsx)(u.xe,{tierName:I,onConfirm:A,subscription:k}),l.useEffect(()=>{a.Z.useReducedMotion&&L&&y(window.innerWidth/2,window.innerHeight/2)},[y,L]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(p.C3,{children:[(0,i.jsx)(x.Z,{}),b]}),null!=C&&(0,i.jsx)(p.O3,{children:C})]})}},759386:function(n,e,t){t.d(e,{getApplicationPaymentSteps:()=>m}),t(47120);var i=t(200651);t(192379);var l=t(409813),r=t(276442),a=t(961830),o=t(721165),s=t(519801),u=t(589771),c=t(883419),d=t(388032);function m(n){let{guildId:e,showBenefitsFirst:t}=n;return[{key:null,renderStep:n=>(0,i.jsx)(u.Z,{initialStep:t?l.h8.BENEFITS:l.h8.REVIEW,guildId:e,...n})},{key:l.h8.BENEFITS,renderStep:n=>(0,i.jsx)(o.Z,{...n}),options:{useBreadcrumbLabel:()=>d.intl.string(d.t["5LD2+P"])}},{key:l.h8.ADD_PAYMENT_STEPS,renderStep:n=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(r.J,{...n,breadcrumbSteps:[l.h8.ADD_PAYMENT_STEPS,l.h8.REVIEW,l.h8.CONFIRM]})}),options:{renderHeader:!0}},...a.yp,{key:l.h8.REVIEW,renderStep:n=>(0,i.jsx)(c.Z,{backButtonEligible:!!t||void 0,prevStep:t?l.h8.BENEFITS:void 0,...n}),options:{renderHeader:!0,useBreadcrumbLabel:()=>d.intl.string(d.t.QBnNHh)}},{key:l.h8.CONFIRM,renderStep:n=>(0,i.jsx)(s.Z,{showBenefits:!t,...n})}]}},589771:function(n,e,t){t.d(e,{Z:()=>d}),t(47120);var i=t(200651),l=t(192379),r=t(89057),a=t(509545),o=t(74538),s=t(987209),u=t(563132),c=t(456251);function d(n){let{initialStep:e,initialPlanId:t,guildId:d,setAnalyticsData:m,handleClose:f}=n,{blockedPayments:h,setStep:p,hasFetchedSubscriptions:x,hasFetchedSubscriptionPlans:g,currencyLoading:v,selectedSkuId:b,setSelectedSkuId:C,setSelectedPlanId:j,priceOptions:S,setSubscriptionMetadataRequest:N}=(0,u.JL)(),{isGift:k}=(0,s.wD)(),[_,T]=l.useState(!x||!g||v);return(l.useEffect(()=>{T(!x||!g||v)},[v,g,x]),l.useEffect(()=>{null!=d&&N({guild_id:d})},[d,N]),l.useEffect(()=>{j(t);let n=null!=t?a.Z.get(t):null;!_&&!h&&(m(e=>{let t=null!=n?(0,o.aS)(n.id,!1,k,S):void 0;return{...e,subscription_plan_id:null==n?void 0:n.id,price:null==t?void 0:t.amount,regular_price:null==n?void 0:n.price,currency:S.currency}}),null!=n&&(C(null==n?void 0:n.skuId),p(e)))},[h,t,k,_,S,b,m,j,C,p,e]),_)?(0,i.jsx)(c.Z,{}):h?(0,i.jsx)(r.Vq,{onClose:f}):null}},883419:function(n,e,t){t.d(e,{Z:()=>k}),t(47120),t(789020);var i=t(200651),l=t(192379),r=t(512722),a=t.n(r),o=t(442837),s=t(481060),u=t(330726),c=t(716534),d=t(664891),m=t(171246),f=t(430824),h=t(563132),p=t(409813),x=t(45572),g=t(51499),v=t(678334),b=t(456251),C=t(614277),j=t(698708),S=t(388032),N=t(48809);function k(n){var e,t;let{backButtonEligible:r,prevStep:k,handleStepChange:_,trialFooterMessageOverride:T,reviewWarningMessage:E,planGroup:Z,openInvoiceId:P,analyticsData:y,analyticsLocation:I,handleClose:A}=n,{activeSubscription:L,application:R,setUpdatedSubscription:w,contextMetadata:F,currencies:B,paymentSources:D,priceOptions:O,purchaseError:M,purchaseTokenAuthState:H,selectedPlan:W,selectedSku:z,setCurrency:K,setPaymentSourceId:G,setPurchaseState:Y,setPurchaseError:V,purchaseState:q,subscriptionMetadataRequest:Q,setHasAcceptedTerms:J}=(0,h.JL)();a()(null!=W,"Expected plan to be selected");let X=l.useRef(null),[U,$]=(0,u.Z)(!1,500),nn=null==Q?void 0:Q.guild_id,ne=(0,o.e7)([f.Z],()=>f.Z.getGuild(nn),[nn]),[nt,ni]=l.useState(null),nl=(0,m.KW)(null!==(e=null==z?void 0:z.flags)&&void 0!==e?e:0);l.useEffect(()=>{null!=M&&null!=X.current&&X.current.scrollIntoView({behavior:"smooth"})},[M]);let nr=l.useCallback(n=>{w(n),_(p.h8.CONFIRM)},[_,w]),na=l.useRef(null);return q===x.A.PURCHASING?(0,i.jsx)(b.Z,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.Z,{className:N.breadcrumbs}),(0,i.jsxs)(C.C3,{children:[(0,i.jsx)(j.Z,{}),nl&&(0,i.jsxs)("div",{className:N.userSubscriptionDetailsContainer,children:[(0,i.jsx)(s.Text,{variant:"eyebrow",color:"header-secondary",children:S.intl.string(S.t.nf5LOT)}),(0,i.jsx)(s.Text,{variant:"text-xs/medium",color:"interactive-normal",children:S.intl.format(S.t.y4n0GR,{applicationName:null==R?void 0:R.name})})]}),!nl&&(0,i.jsxs)("div",{className:N.guildPickerContainer,children:[(0,i.jsx)(s.vwX,{tag:s.RB0.H5,children:S.intl.string(S.t["5qyruL"])}),(0,i.jsxs)("div",{className:N.guildNameContainer,children:[(0,i.jsx)(s.Text,{variant:"text-md/normal",children:S.intl.string(S.t.dBih7e)}),(0,i.jsx)(s.Text,{variant:"text-md/normal",lineClamp:1,children:null!==(t=null==ne?void 0:ne.name)&&void 0!==t?t:S.intl.string(S.t.dtwqPT)})]})]}),null==L?(0,i.jsx)(c.Z,{selectedPlanId:W.id,paymentSources:D,onPaymentSourceChange:n=>G(null!=n?n.id:null),priceOptions:O,currencies:B,onCurrencyChange:n=>K(n),handlePaymentSourceAdd:()=>_(p.h8.ADD_PAYMENT_STEPS),setHasAcceptedTerms:J,legalTermsNodeRef:na,hasLegalTermsFlash:U,trialFooterMessageOverride:T,reviewWarningMessage:E,metadata:nl?void 0:Q,purchaseState:q,hideSubscriptionDetails:!0,handleClose:A}):(0,i.jsx)(d.Z,{premiumSubscription:L,paymentSources:D,priceOptions:O,onPaymentSourceChange:n=>G(null!=n?n.id:null),onPaymentSourceAdd:()=>{_(p.h8.ADD_PAYMENT_STEPS)},planId:W.id,setHasAcceptedTerms:J,legalTermsNodeRef:na,hasLegalTermsFlash:U,onInvoiceError:n=>{ni(n)},planGroup:Z,currencies:B,onCurrencyChange:n=>K(n),hasOpenInvoice:null!=P,purchaseState:q,handleClose:A})]}),(0,i.jsx)(C.O3,{children:(0,i.jsx)(v.Z,{premiumSubscription:null!=L?L:null,setPurchaseState:Y,onBack:()=>null!=k&&_(k),onNext:nr,onPurchaseError:n=>V(n),legalTermsNodeRef:na,flashLegalTerms:()=>$(!0),analyticsLocation:I,baseAnalyticsData:y,flowStartTime:F.startTime,planGroup:Z,purchaseTokenAuthState:H,openInvoiceId:P,metadata:nl?void 0:Q,backButtonEligible:r,invoiceError:nt,disablePurchase:(null==Q?void 0:Q.guild_id)==null&&!nl})})]})}},931905:function(n,e,t){t.d(e,{h:()=>s,m:()=>u});var i=t(200651);t(192379);var l=t(481060),r=t(17894),a=t(388032),o=t(191494);let s=n=>{let{onConfirm:e,onCancel:t,title:s,subtitle:u,confirmCta:c,showOpenDiscord:d=!0}=n;return(0,i.jsxs)("div",{className:o.confirmationContainer,children:[(0,i.jsx)(l.X6q,{className:o.confirmationHeader,variant:"heading-lg/extrabold",children:s}),null!=u?(0,i.jsx)(l.Text,{className:o.confirmationSubtitle,variant:"text-sm/normal",color:"header-secondary",children:u}):null,(0,i.jsxs)("div",{className:o.buttonContainer,children:[d&&(0,i.jsx)(l.zxk,{fullWidth:!0,onClick:()=>(0,r.Z)("application_sub_mweb_success_modal"),children:a.intl.string(a.t["8L5bZG"])}),(0,i.jsx)(l.zxk,{fullWidth:!0,color:l.zxk.Colors.PRIMARY,onClick:e,children:c}),null!=t&&(0,i.jsx)(l.zxk,{fullWidth:!0,color:l.zxk.Colors.PRIMARY,look:l.zxk.Looks.LINK,onClick:t,children:a.intl.string(a.t.iAfxo6)})]})]})};function u(n){let{onConfirm:e,tierName:t,subscription:s}=n;return(0,i.jsxs)("div",{className:o.confirmationContainer,children:[(0,i.jsx)(l.X6q,{className:o.confirmationHeader,variant:"heading-lg/extrabold",children:a.intl.format(a.t["wLFT6+"],{tier:t})}),(0,i.jsx)(l.Text,{className:o.confirmationSubtitle,variant:"text-sm/normal",color:"header-secondary",children:a.intl.format(a.t.OsAK9v,{timestamp:null==s?void 0:s.currentPeriodEnd})}),(0,i.jsxs)("div",{className:o.buttonContainer,children:[(0,i.jsx)(l.zxk,{className:o.__invalid_openDiscordButton,onClick:()=>(0,r.Z)("application_sub_mweb_success_modal"),children:a.intl.string(a.t["8L5bZG"])}),(0,i.jsx)(l.zxk,{className:o.__invalid_doneButton,look:l.zxk.Looks.BLANK,onClick:e,children:a.intl.string(a.t.nlkyw8)})]})]})}},48809:function(n,e,t){n.exports={guildPickerContainer:"guildPickerContainer__99854",breadcrumbs:"breadcrumbs__99854",userSubscriptionDetailsContainer:"userSubscriptionDetailsContainer__99854",guildNameContainer:"guildNameContainer__99854"}},191494:function(n,e,t){n.exports={confirmationContainer:"confirmationContainer_f473af",confirmationHeader:"confirmationHeader_f473af",confirmationSubtitle:"confirmationSubtitle_f473af",buttonContainer:"buttonContainer_f473af"}}}]);
//# sourceMappingURL=9450d1597ddd0476.js.map