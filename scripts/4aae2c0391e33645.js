"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["95468"],{216019:function(e){e.exports="/assets/050c2ac76232eff6.svg"},524094:function(e){e.exports="/assets/fe7f670e6ffe6cf6.svg"},802670:function(e){e.exports="/assets/4d5f9c527be0f6cd.svg"},17754:function(e){e.exports="/assets/6ab87cfd55c95d33.svg"},231239:function(e,t,n){n.d(t,{Z:()=>o});var l=n(990547),i=n(283693),s=n(570140),a=n(573261),r=n(981631);let o={signup:(e,t)=>a.Z.post({url:r.ANM.HUB_WAITLIST_SIGNUP,body:{email:e,school:t},trackedActionData:{event:l.NetworkActionNames.HUB_WAITLIST_SIGNUP,properties:e=>{var t;let n=!1,l=null==e?void 0:null===(t=e.body)||void 0===t?void 0:t.email_domain;return null!=l&&(n=-1!==l.split(".").indexOf("edu")),(0,i.iG)({is_edu_email:n})}},rejectWithError:!1}),sendVerificationEmail:async(e,t,n)=>(await a.Z.post({url:r.ANM.HUB_EMAIL_VERIFY_SEND,body:{email:e,guild_id:n,allow_multiple_guilds:t,use_verification_code:!0},trackedActionData:{event:l.NetworkActionNames.HUB_EMAIL_VERIFY_SEND,properties:e=>{var t;let n=null==e?void 0:null===(t=e.body)||void 0===t?void 0:t.has_matching_guild;return(0,i.iG)({has_matching_guild:n})}},rejectWithError:!1})).body,async verify(e){if(null!=e)try{var t;let n=await a.Z.post({url:r.ANM.HUB_EMAIL_VERIFY,body:{token:e},trackedActionData:{event:l.NetworkActionNames.HUB_EMAIL_VERIFY},rejectWithError:!1}),i=null===(t=n.body.guild)||void 0===t?void 0:t.id;s.Z.dispatch({type:"HUB_VERIFY_EMAIL_SUCCESS",guildId:i})}catch(e){s.Z.dispatch({type:"HUB_VERIFY_EMAIL_FAILURE",errors:e.body})}},async verifyCode(e,t,n){if(null!=e)try{var i;let o=await a.Z.post({url:r.ANM.HUB_EMAIL_VERIFY_CODE,body:{code:e,guild_id:t,email:n},trackedActionData:{event:l.NetworkActionNames.HUB_EMAIL_VERIFY},rejectWithError:!1}),c=null===(i=o.body.guild)||void 0===i?void 0:i.id;return s.Z.dispatch({type:"HUB_VERIFY_EMAIL_SUCCESS",guildId:c}),o.body}catch(e){throw s.Z.dispatch({type:"HUB_VERIFY_EMAIL_FAILURE",errors:e.body}),e}}}},951716:function(e,t,n){n.d(t,{Z:()=>s});var l=n(344532),i=n(23434);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.Z,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Z;return null!=t.getAction()||Object.keys(e.getState()).length>0}},645792:function(e,t,n){n.d(t,{Z:()=>i,b:()=>s});let l=(0,n(818083).B)({kind:"user",id:"2022-08_back_to_school",label:"Back to School Event",defaultConfig:{enabled:!1},treatments:[{id:1,label:"Back to School experience enabled",config:{enabled:!0}}]}),i=l;function s(){return l.getCurrentConfig({location:"68acbb_1"},{autoTrackExposure:!1}).enabled}},888592:function(e,t,n){n.d(t,{fQ:()=>s,tF:()=>i});var l,i=((l={}).STUDENT_PROMPT="STUDENT_PROMPT",l.VERIFY_EMAIL="VERIFY_EMAIL",l.VERIFY_PIN="VERIFY_PIN",l.SELECT_SCHOOL="SELECT_SCHOOL",l.SELECT_SCHOOL_SEARCH="SELECT_SCHOOL_SEARCH",l.SUBMIT_SCHOOL="SUBMIT_SCHOOL",l.EMAIL_CONFIRMATION="EMAIL_CONFIRMATION",l.EMAIL_WAITLIST="EMAIL_WAITLIST",l);let s="884924873015689226"},495784:function(e,t,n){n.d(t,{Z:()=>N});var l=n(913527),i=n.n(l),s=n(704215),a=n(951716),r=n(605236),o=n(972830),c=n(430824),d=n(594174),u=n(374023),m=n(709054),x=n(645792),h=n(981631),_=n(921944);let N={init(e){let{hasModalOpen:t,openModal:n}=e;!u.s.isDisallowPopupsSet()&&(0,o.h)(()=>{if((0,a.Z)())return;let e=d.default.getCurrentUser(),l=null!=e&&7>i()().diff(i()(m.default.extractTimestamp(e.id)),"days"),o=null!=Object.values(c.Z.getGuilds()).find(e=>e.hasFeature(h.oNc.HUB)),u=!(0,r.un)(s.z.HUB_BACK_TO_SCHOOL_UPSELL);!(l||t()||o||!u)&&(0,x.b)()&&(x.Z.trackExposure({location:"8b792a_1"}),n(),(0,r.kk)(s.z.HUB_BACK_TO_SCHOOL_UPSELL))})},hideHubUpsell(){(0,r.EW)(s.z.HUB_BACK_TO_SCHOOL_UPSELL,{dismissAction:_.L.AUTO})}}},994640:function(e,t,n){n.d(t,{Z:()=>v}),n(47120);var l=n(200651),i=n(192379),s=n(120356),a=n.n(s),r=n(481060),o=n(231239),c=n(881052),d=n(313201),u=n(592125),m=n(888592),x=n(981631),h=n(388032),_=n(267096);let N=(0,d.hQ)(),v=e=>{let{setStep:t,setGuildsInfo:n,email:s,setEmail:d,setGuildId:v,invite:g,onClose:E,isNUXFlow:I}=e,[f,S]=i.useState(null),[p,C]=i.useState(!1),T=async e=>{e.preventDefault(),S(null),C(!0);try{var l,i,a,r,d;let e=null!==(d=null!==(r=null==g?void 0:null===(l=g.guild)||void 0===l?void 0:l.id)&&void 0!==r?r:null===(i=u.Z.getChannel(null==g?void 0:null===(a=g.channel)||void 0===a?void 0:a.id))||void 0===i?void 0:i.getGuildId())&&void 0!==d?d:void 0;e===m.fQ&&(e=void 0);let c=await o.Z.sendVerificationEmail(s,!0,e),x=c.guilds_info;c.has_matching_guild?(v(e),t(m.tF.VERIFY_PIN)):0===x.length?t(m.tF.SUBMIT_SCHOOL):1===x.length?(v(x[0].id),await o.Z.sendVerificationEmail(s,!0,x[0].id),t(m.tF.VERIFY_PIN)):(n(x),t(m.tF.SELECT_SCHOOL))}catch(e){S(new c.Hx(e))}finally{C(!1)}},A=h.intl.string(h.t.H1jCHB),j=h.intl.string(h.t.YfeHRE);if(I)A=h.intl.string(h.t.LVyxND),j=h.intl.string(h.t.ECd7Rk);else if((null==g?void 0:g.guild)!=null&&g.guild.id!==m.fQ&&(null==g?void 0:g.approximate_member_count)!=null){let{name:e}=g.guild;A=h.intl.formatToPlainString(h.t["4T4+p6"],{guildName:e,count:g.approximate_member_count})}return(0,l.jsxs)("div",{className:_.container,children:[(0,l.jsx)("div",{className:_.topImage}),(0,l.jsx)(r.X6q,{className:a()(_.centerText,_.header),variant:"heading-xl/semibold",children:A}),(0,l.jsx)("div",{className:_.descriptionWidth,children:(0,l.jsx)(r.Text,{className:_.centerText,variant:"text-sm/normal",color:"header-secondary",children:j})}),(0,l.jsxs)("form",{className:_.formContent,onSubmit:T,children:[(0,l.jsxs)(r.xJW,{children:[(0,l.jsx)(r.vwX,{id:N,children:h.intl.string(h.t.kmCxkZ)}),(0,l.jsx)(r.oil,{placeholder:h.intl.string(h.t.ImAOh4),onChange:e=>{d(e)},error:null==f?void 0:f.getAnyErrorMessage(),"aria-labelledby":N})]}),(0,l.jsx)(r.Text,{color:"header-secondary",className:_.formDescription,variant:"text-sm/normal",children:h.intl.string(h.t.Cv7mmJ)}),(0,l.jsx)(r.zxk,{type:"submit",size:r.zxk.Sizes.LARGE,color:r.zxk.Colors.BRAND,className:_.submitButton,submitting:p,children:h.intl.string(h.t["8vmKOz"])}),(0,l.jsx)(r.Text,{className:_.termsPhrase,color:"header-secondary",variant:"text-xs/normal",children:h.intl.format(h.t.RPT0vr,{termsURL:x.EYA.TERMS,privacyURL:x.EYA.PRIVACY})}),I&&(0,l.jsx)(r.zxk,{look:r.zxk.Looks.LINK,onClick:E,className:_.cancelButton,children:h.intl.string(h.t.hO6qJy)})]})]})}},950012:function(e,t,n){n.d(t,{Z:()=>u}),n(47120);var l=n(200651),i=n(192379),s=n(994640),a=n(247007),r=n(999464),o=n(503406),c=n(463115),d=n(888592);let u=e=>{let{onClose:t,invite:n,forceGuildScrollHeight:u=!0,isNUXFlow:m}=e,[x,h]=i.useState([d.tF.VERIFY_EMAIL]),[_,N]=i.useState(""),[v,g]=i.useState(""),[E,I]=i.useState(void 0),[f,S]=i.useState([]),p=e=>{h(x.concat(e).slice(-4))};switch(x[x.length-1]){case d.tF.VERIFY_EMAIL:return(0,l.jsx)(s.Z,{setGuildsInfo:S,setStep:p,email:_,setEmail:N,setGuildId:I,invite:n,onClose:t,isNUXFlow:m});case d.tF.SELECT_SCHOOL:return(0,l.jsx)(a.Z,{guildsInfo:f,setStep:p,email:_,setGuildId:I,forceGuildScrollHeight:u});case d.tF.SUBMIT_SCHOOL:return(0,l.jsx)(r.Z,{onBack:()=>{x.length>1&&h(x.slice(0,-1).slice(-4))},setStep:p,email:_,school:v,setSchool:g});case d.tF.VERIFY_PIN:return(0,l.jsx)(o.Z,{email:_,onClose:t,guildId:E});case d.tF.EMAIL_WAITLIST:return(0,l.jsx)(c.Z,{setStep:p,school:v});default:return null}}},247007:function(e,t,n){n.d(t,{Z:()=>f}),n(47120);var l=n(200651),i=n(192379),s=n(120356),a=n.n(s),r=n(658722),o=n.n(r),c=n(481060),d=n(231239),u=n(881052),m=n(686546),x=n(565138),h=n(601964),_=n(768581),N=n(888592),v=n(388032),g=n(994655),E=n(216019);function I(e){var t;let{guildInfo:n,onClick:i,submitting:s}=e,a=null!==(t=_.ZP.getGuildIconURL({id:n.id,icon:n.icon,size:40}))&&void 0!==t?t:void 0;return(0,l.jsxs)(c.P3F,{className:g.clickableGuildInfoRow,onClick:i,children:[(0,l.jsx)(m.ZP,{mask:m.ZP.Masks.AVATAR_DEFAULT,width:40,height:40,children:(0,l.jsx)(x.Z,{className:g.guildIcon,iconSrc:a,guild:new h.ZP(n),size:x.Z.Sizes.MEDIUM})}),(0,l.jsx)(c.Text,{className:g.guildName,variant:"text-md/semibold",children:n.name}),s?(0,l.jsx)(c.$jN,{type:c.$jN.Type.PULSING_ELLIPSIS}):(0,l.jsx)("img",{className:g.__invalid_arrow,alt:"",src:E})]})}let f=e=>{let{setStep:t,email:n,guildsInfo:s,setGuildId:r,forceGuildScrollHeight:m}=e,[x,h]=i.useState(null),[_,E]=i.useState(void 0),[f,S]=i.useState(null),p=e=>async()=>{h(null),r(e),S(e);try{await d.Z.sendVerificationEmail(n,!0,e),t(N.tF.VERIFY_PIN)}catch(e){h(new u.Hx(e))}finally{S(null)}},C=()=>t(N.tF.SUBMIT_SCHOOL),T=s;return null!=_&&""!==_&&(T=s.filter(e=>o()(_.toLowerCase(),e.name.toLowerCase()))),(0,l.jsxs)("div",{className:g.container,children:[(0,l.jsx)(c.X6q,{className:a()(g.centerText,g.header),variant:"heading-xl/semibold",children:v.intl.string(v.t.mOMeiY)}),(0,l.jsx)("div",{className:g.description,children:(0,l.jsx)(c.Text,{className:g.centerText,variant:"text-sm/normal",color:"header-secondary",children:v.intl.format(v.t.dZeiTE,{onJoinWaitlist:C})})}),(0,l.jsxs)("div",{className:a()(g.guildList,{[g.forcedHeight]:m}),children:[(0,l.jsxs)("div",{className:g.searchContainer,children:[(0,l.jsx)(c.Rj2,{placeholder:v.intl.string(v.t["5h0QOD"]),className:g.searchBox,inputClassName:g.searchBoxInput,searchIconClassName:g.searchBoxIcon,closeIconClassName:g.searchBoxIcon,onChange:e=>{E(e)},label:v.intl.string(v.t["5h0QOD"]),searchTerm:_,onClear:()=>{E(void 0)}}),(0,l.jsx)(c.Text,{color:"text-danger",variant:"text-xs/normal",children:null==x?void 0:x.getAnyErrorMessage()})]}),T.length>0?(0,l.jsx)(c.zJl,{className:g.scroller,children:T.map(e=>void 0===e?null:(0,l.jsx)(I,{guildInfo:e,onClick:p(e.id),submitting:f===e.id},e.id))}):(0,l.jsx)("div",{className:g.noResultsContainer,children:(0,l.jsxs)("div",{className:g.noResultsContent,children:[(0,l.jsx)("div",{className:g.noResultsImage}),(0,l.jsx)(c.X6q,{className:a()(g.centerText,g.header),variant:"heading-xl/semibold",children:v.intl.string(v.t["1eUrDQ"])}),(0,l.jsx)(c.Text,{className:g.centerText,variant:"text-md/normal",children:v.intl.format(v.t.flgDKC,{onJoinWaitlist:C})})]})})]})]})}},650233:function(e,t,n){n.d(t,{H:()=>_,default:()=>h});var l=n(200651),i=n(192379),s=n(990547),a=n(481060),r=n(390885),o=n(495784),c=n(950012),d=n(161836),u=n(630724),m=n(388032),x=n(588292);function h(e){let{transitionState:t,onClose:n,isNUXFlow:h}=e;return i.useEffect(()=>{o.Z.hideHubUpsell(),h&&r.Z.flowStep(u.MK.ORGANIC,u.EW.HUB_CONNECTION)},[h]),(0,l.jsx)(a.Y0X,{className:x.modalRoot,transitionState:t,"aria-label":m.intl.string(m.t["3khS8P"]),impression:{impressionName:s.ImpressionNames.HUB_EMAIL_SIGNUP},children:(0,l.jsx)(a.hzk,{style:{overflow:"hidden",paddingRight:"0px"},paddingFix:!1,className:x.modalContent,children:(0,l.jsxs)("div",{className:x.container,children:[(0,l.jsx)("div",{className:x.sidebarContainer,children:(0,l.jsx)(d.Z,{})}),(0,l.jsxs)("div",{className:x.contentContainer,children:[(0,l.jsx)(a.olH,{onClick:n,className:x.closeButton}),(0,l.jsx)(c.Z,{isNUXFlow:h,onClose:n})]})]})})})}let _=e=>{let{invite:t}=e;return(0,l.jsxs)("div",{className:x.container,children:[(0,l.jsx)("div",{className:x.sidebarContainer,children:(0,l.jsx)(d.Z,{})}),(0,l.jsx)("div",{className:x.contentContainer,children:(0,l.jsx)(c.Z,{invite:t})})]})}},161836:function(e,t,n){n.d(t,{Z:()=>r});var l=n(200651);n(192379);var i=n(481060),s=n(388032),a=n(521487);let r=()=>(0,l.jsxs)("div",{className:a.container,children:[(0,l.jsx)("div",{className:a.iconContainer,children:(0,l.jsx)("div",{className:a.icon})}),(0,l.jsx)(i.Text,{color:"header-primary",variant:"text-lg/semibold",className:a.header,children:s.intl.string(s.t.PAnzbW)}),(0,l.jsx)(i.Text,{color:"header-secondary",variant:"text-sm/normal",className:a.description,children:s.intl.format(s.t["8Kp48/"],{})})]})},999464:function(e,t,n){n.d(t,{Z:()=>N}),n(47120);var l=n(200651),i=n(192379),s=n(120356),a=n.n(s),r=n(481060),o=n(231239),c=n(881052),d=n(313201),u=n(888592),m=n(981631),x=n(388032),h=n(149982);let _=(0,d.hQ)(),N=e=>{let{email:t,setStep:n,onBack:s,school:d,setSchool:N}=e,[v,g]=i.useState(null),[E,I]=i.useState(!1),f=async()=>{g(null),I(!0);try{await o.Z.signup(t,d),n(u.tF.EMAIL_WAITLIST)}catch(e){g(new c.Hx(e))}finally{I(!1)}},S=async e=>{null!=d&&""!==d&&e.charCode===m.yXg.ENTER&&await f()};return(0,l.jsxs)("div",{className:h.container,children:[(0,l.jsx)("div",{className:h.__invalid_topImage}),(0,l.jsx)(r.X6q,{className:a()(h.centerText,h.header),variant:"heading-xl/semibold",children:x.intl.string(x.t["2FNWBA"])}),(0,l.jsx)("div",{className:h.descriptionWidth,children:(0,l.jsx)(r.Text,{className:h.centerText,variant:"text-sm/normal",color:"header-secondary",children:x.intl.string(x.t["/4y6o6"])})}),(0,l.jsxs)(r.xJW,{className:h.formItem,children:[(0,l.jsx)(r.vwX,{id:_,children:x.intl.string(x.t["L+AfJi"])}),(0,l.jsx)(r.oil,{onKeyPress:S,placeholder:x.intl.string(x.t.Y1btJS),onChange:e=>{N(e)},error:null==v?void 0:v.getAnyErrorMessage(),"aria-labelledby":_})]}),(0,l.jsxs)("div",{className:h.footer,children:[(0,l.jsx)(r.zxk,{className:h.backButton,onClick:s,look:r.zxk.Looks.LINK,size:r.zxk.Sizes.NONE,color:r.zxk.Colors.PRIMARY,children:x.intl.string(x.t["13/7kZ"])}),(0,l.jsx)(r.zxk,{onClick:f,size:r.zxk.Sizes.MEDIUM,color:r.zxk.Colors.BRAND,className:h.__invalid_submitButton,submitting:E,children:x.intl.string(x.t.PDsYAg)})]})]})}},503406:function(e,t,n){n.d(t,{Z:()=>g}),n(47120);var l=n(200651),i=n(192379),s=n(120356),a=n.n(s),r=n(392711),o=n.n(r),c=n(481060),d=n(231239),u=n(881052),m=n(313201),x=n(703656),h=n(981631),_=n(388032),N=n(879943);let v=(0,m.hQ)(),g=e=>{let{email:t,guildId:n,onClose:s}=e,[r,m]=i.useState(""),[g,E]=i.useState(null),I=i.useCallback(async()=>{if(null!=n)try{let e=await d.Z.verifyCode(r,n,t);e.guild&&(null==s||s(),(0,x.uL)(h.Z5c.CHANNEL(e.guild.id)))}catch(e){E(new u.Hx(e))}},[r,t,n,s]),f=o().throttle(()=>{d.Z.sendVerificationEmail(t,!0,n)},1e3),S=async e=>{null!=r&&""!==r&&e.charCode===h.yXg.ENTER&&await I()};return(0,l.jsxs)("div",{className:N.container,children:[(0,l.jsx)("div",{className:N.topImage}),(0,l.jsx)(c.X6q,{className:a()(N.centerText,N.header),variant:"heading-xl/semibold",children:_.intl.string(_.t.SJ3Lxc)}),(0,l.jsx)("div",{className:N.descriptionWidth,children:(0,l.jsx)(c.Text,{className:N.centerText,variant:"text-sm/normal",color:"header-secondary",children:_.intl.format(_.t["b+W0oq"],{email:t,onClick:f})})}),(0,l.jsxs)(c.xJW,{className:N.formItem,children:[(0,l.jsx)(c.vwX,{id:v,children:_.intl.string(_.t.rpWT1t)}),(0,l.jsx)(c.oil,{onKeyPress:S,onChange:e=>{null!=e&&""!==e&&m(e)},error:null==g?void 0:g.getAnyErrorMessage(),"aria-labelledby":v})]}),(0,l.jsx)(c.zxk,{fullWidth:!0,onClick:I,size:c.zxk.Sizes.LARGE,color:c.zxk.Colors.BRAND,children:(0,l.jsx)(c.Text,{className:N.submitText,variant:"text-sm/normal",children:_.intl.string(_.t.geKm7u)})})]})}},463115:function(e,t,n){n.d(t,{Z:()=>d});var l=n(200651);n(192379);var i=n(120356),s=n.n(i),a=n(481060),r=n(888592),o=n(388032),c=n(267096);let d=e=>{let{school:t,setStep:n}=e;return(0,l.jsxs)("div",{className:c.container,children:[(0,l.jsx)("div",{className:c.topImage}),(0,l.jsx)(a.X6q,{className:s()(c.centerText,c.header),variant:"heading-xl/semibold",children:o.intl.string(o.t.OaloU1)}),(0,l.jsx)("div",{className:c.descriptionWidth,children:(0,l.jsx)(a.Text,{className:c.centerText,variant:"text-sm/normal",color:"header-secondary",children:o.intl.format(o.t.Rs7MXF,{school:t})})}),(0,l.jsx)(a.zxk,{look:a.zxk.Looks.LINK,size:a.zxk.Sizes.SMALL,color:a.zxk.Colors.LINK,onClick:()=>{n(r.tF.VERIFY_EMAIL)},className:c.__invalid_resendLink,children:o.intl.string(o.t.Zg63h4)})]})}},630724:function(e,t,n){n.d(t,{EW:()=>m,FF:()=>c,MK:()=>o,X2:()=>u,mx:()=>d});var l,i,s,a,r,o=((l={}).UNKNOWN="unknown",l.ANY="any",l.INVITE="invite",l.ORGANIC="organic_registration",l.ORGANIC_MARKETING="organic_marketing",l.ORGANIC_GUILD_TEMPLATES="organic_guild_template",l.CREATE_GUILD="create_guild",l),c=((i={}).AGE_GATE="age_gate",i.AGE_GATE_UNDERAGE="age_gate_underage",i),d=((s={}).CLAIM_ACCOUNT="claim_account",s.CLAIM_ACCOUNT_SUCCESS="claim_account_success",s),u=((a={}).GUILD_TEMPLATES="guild_templates",a.GUILD_CREATE="guild_create",a.CREATION_INTENT="creation_intent",a.CHANNEL_PROMPT="channel_prompt",a.JOIN_GUILD="join_guild",a.SUCCESS="create_success",a),m=((r={}).NUF_STARTED="nuf_started",r.AGE_GATE="age_gate",r.NUF_COMPLETE="nuf_complete",r.HUB_CONNECTION="hub_connection",r)},390885:function(e,t,n){n.d(t,{Z:()=>g});var l=n(15729),i=n(877124),s=n(731965),a=n(433517),r=n(710845),o=n(626135),c=n(630724),d=n(981631);let u="UserFlowAnalyticsStore_current",m="UserFlowAnalyticsStore";function x(e){if(e===c.MK.UNKNOWN)return null;let t=a.K.get("".concat(m,"-").concat(e));if(null==t)return null;let{version:n,...l}=t;return 1!==n?null:l}new r.Z("UserFlowAnalytics");let h=(0,l.U)()((0,i.XR)((e,t)=>({flows:{},currentFlow:null,activeFlow:()=>{var e;let n=null!==(e=t().currentFlow)&&void 0!==e?e:a.K.get(u);if(null==n)return null;let{[n]:l}=t().flows,i=null!=l?l:x(n);return(null==i?void 0:i.currentStep)!=null?n:null}})));function _(e,t){let{[e]:n,...l}=h.getState().flows,i=null!=n?n:x(e);((null==i?void 0:i.currentStep)==null||i.currentStep!==t)&&(0,s.j)(()=>{h.setState({flows:{...l,[e]:{type:e,lastStep:null,lastTimestamp:null,currentStep:t,currentTimestamp:new Date,skipped:!1}},currentFlow:e})})}function N(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=e;if(e===c.MK.ANY){var i;l=null!==(i=h.getState().activeFlow())&&void 0!==i?i:c.MK.UNKNOWN}let{[l]:a,...r}=h.getState().flows,o=null!=a?a:x(l);null!=o&&null!=o.currentStep&&o.currentStep!==t&&(0,s.j)(()=>{h.setState({flows:{...r,[l]:{...o,lastStep:o.currentStep,lastTimestamp:o.currentTimestamp,currentStep:t,currentTimestamp:new Date,ended:n}},currentFlow:l})})}function v(){return null!=h.getState().activeFlow()}h.subscribe(e=>null!=e.currentFlow?e.flows[e.currentFlow]:void 0,e=>{var t;if(null!=e&&(!function(e){if(e.type===c.MK.UNKNOWN)return;let t="".concat(m,"-").concat(e.type);e.ended?(a.K.remove(t),a.K.remove(u)):(a.K.set("".concat(m,"-").concat(e.type),{...e,version:1}),a.K.set(u,e.type))}(e),o.default.track(d.rMx.NUO_TRANSITION,{flow_type:e.type,from_step:e.lastStep,to_step:e.currentStep,seconds_on_from_step:"function"!=typeof(null===(t=e.lastTimestamp)||void 0===t?void 0:t.getTime)?0:(e.currentTimestamp.getTime()-e.lastTimestamp.getTime())/1e3},{flush:!0}),e.ended)){let t={...h.getState().flows};delete t[e.type],(0,s.j)(()=>{h.setState({flows:t,currentFlow:null})})}});let g={flowStart:_,flowStepOrStart:function(e,t){v()?N(e,t):_(e,t)},flowStep:N,hasActiveFlow:v}}}]);
//# sourceMappingURL=4aae2c0391e33645.js.map