"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["87267"],{477488:function(e,n,t){var a=t(147018),i=t(863664),r=t(299623),l=t(345374),o=Array;a({target:"Array",proto:!0},{toReversed:function(){return i(r(this),o)}}),l("toReversed")},817718:function(e,n,t){t.d(n,{U3:()=>_,XM:()=>u,hd:()=>c,lI:()=>s,py:()=>d});var a=t(481060),i=t(819640),r=t(585483),l=t(981631);let o=()=>i.Z.hasLayers()||(0,a.$sL)(),s=12633==t.j?{binds:["right"],comboKeysBindGlobal:!0,action(){if(!o())return r.S.dispatch(l.CkL.CAROUSEL_NEXT),!1}}:null,c=12633==t.j?{binds:["left"],comboKeysBindGlobal:!0,action(){if(!o())return r.S.dispatch(l.CkL.CAROUSEL_PREV),!1}}:null,u={binds:["right","down","space"],comboKeysBindGlobal:!0,action:()=>(r.S.dispatch(l.CkL.MODAL_CAROUSEL_NEXT),!1)},d={binds:["left","up"],comboKeysBindGlobal:!0,action:()=>(r.S.dispatch(l.CkL.MODAL_CAROUSEL_PREV),!1)},_={binds:["esc"],comboKeysBindGlobal:!0,action(){if(r.S.hasSubscribers(l.CkL.MODAL_CLOSE))return r.S.dispatch(l.CkL.MODAL_CLOSE),!1}}},376641:function(e,n,t){t.d(n,{P:()=>r,v:()=>l});var a=t(817718),i=t(981631);let r={[i.EkH.MODAL_CAROUSEL_NEXT]:a.XM,[i.EkH.MODAL_CAROUSEL_PREV]:a.py,[i.EkH.CLOSE_MODAL]:a.U3},l={[i.EkH.CLOSE_MODAL]:a.U3}},822869:function(e,n,t){t.d(n,{Ad:()=>p,Lb:()=>c,ZF:()=>h,gP:()=>d,mh:()=>f,sF:()=>u,xp:()=>_});var a=t(192379),i=t(392711),r=t(367907),l=t(592125),o=t(626135),s=t(981631);function c(e,n,t){o.default.track(s.rMx.FORWARD_MESSAGE_STARTED,{channel_id:e,message_id:n,source:t})}function u(e){let{channelId:n,messageId:t,numDestinationChanges:a,numQueryChanges:i}=e;o.default.track(s.rMx.FORWARD_MESSAGE_CANCELLED,{channel_id:n,message_id:t,num_destination_changes:a,num_query_changes:i})}function d(e){let{channelId:n,messageId:t,hasError:a,hasContextMessage:i,numDestinations:c,numDestinationChanges:u,numQueryChanges:d,anyDestinationHasSlowmode:_,source:h}=e;if(o.default.track(s.rMx.FORWARD_MESSAGE_SENT,{channel_id:n,message_id:t,has_error:a,has_context_message:i,num_destinations:c,num_destination_changes:u,num_query_changes:d,any_destination_has_slowmode:_}),"message-shortcut"===h){let e=l.Z.getChannel(n);o.default.track(s.rMx.MESSAGE_SHORTCUT_ACTION_SENT,{action:"forward",original_message_id:t,...(0,r.hH)(null==e?void 0:e.guild_id),...(0,r.v_)(e)})}}function _(e,n){o.default.track(s.rMx.FORWARD_COPY_LINK,{channel_id:e,message_id:n})}function h(){return a.useMemo(()=>(0,i.once)((e,n,t)=>{o.default.track(s.rMx.FORWARD_ADD_RECIPIENT,{channel_id:e,message_id:n,has_query:t})}),[])}function f(){return a.useMemo(()=>(0,i.once)((e,n)=>{o.default.track(s.rMx.FORWARD_EDIT_SEARCH,{channel_id:e,message_id:n})}),[])}function p(){return a.useMemo(()=>(0,i.once)((e,n)=>{o.default.track(s.rMx.FORWARD_EDIT_CONTEXT_MESSAGE,{channel_id:e,message_id:n})}),[])}},868643:function(e,n,t){t.d(n,{a:()=>h,h:()=>_}),t(789020);var a=t(192379),i=t(442837),r=t(430198),l=t(592125),o=t(430824),s=t(630388),c=t(981631);let u=c.iLy.CROSSPOSTED|c.iLy.FAILED_TO_MENTION_SOME_ROLES_IN_THREAD|c.iLy.GUILD_FEED_HIDDEN|c.iLy.HAS_SNAPSHOT|c.iLy.HAS_THREAD|c.iLy.IS_CROSSPOST|c.iLy.IS_VOICE_MESSAGE|c.iLy.SHOULD_SHOW_LINK_NOT_DISCORD_WARNING|c.iLy.SUPPRESS_EMBEDS|c.iLy.SUPPRESS_NOTIFICATIONS|c.iLy.URGENT|c.iLy.IS_COMPONENTS_V2;function d(e){return!!(e.state!==c.yb.SEND_FAILED&&c.V$x.FORWARDABLE.has(e.type))&&null==e.poll&&null==e.activity&&null==e.call&&null==e.activityInstance&&0===(0,s.Ge)(e.flags,u)}function _(e){var n;if(!d(e))return!1;let t=null===(n=l.Z.getChannel(e.channel_id))||void 0===n?void 0:n.guild_id;return!(null!=t&&r.Z.isChannelOrThreadParentGated(t,e.channel_id))}function h(e){let n=(0,i.e7)([o.Z,r.Z,l.Z],()=>{var n,t;if(null==e)return!0;let a=null===(n=l.Z.getChannel(e.channel_id))||void 0===n?void 0:n.guild_id;return!!(null!=a&&(null===(t=o.Z.getGuild(a))||void 0===t?void 0:t.hasFeature(c.oNc.FORWARDING_DISABLED)))||null!=a&&r.Z.isChannelOrThreadParentGated(a,e.channel_id)});return a.useMemo(()=>!n&&null!=e&&d(e),[n,e])}},394779:function(e,n,t){t.d(n,{s:()=>C});var a=t(200651),i=t(192379),r=t(120356),l=t.n(r),o=t(481060),s=t(346610),c=t(868643),u=t(912332),d=t(701865),_=t(388032),h=t(643124);function f(){(0,o.Mr3)(d.U)}function p(e){let{className:n,message:t,target:r,onClick:s}=e,c=i.useCallback(()=>{if(null==s||s(),"embed"===r.type){(0,u.l8)({message:t,source:"media-viewer",forwardOptions:{onlyEmbedIndices:[r.embedIndex]},onRequestSent:f});return}(0,u.l8)({message:t,source:"media-viewer",forwardOptions:{onlyAttachmentIds:[r.attachmentId]},onRequestSent:f})},[t,r,s]);return(0,a.jsx)(o.P3F,{className:l()(h.container,n),onClick:c,children:(0,a.jsx)(o.Text,{className:h.text,variant:"text-sm/medium",color:"always-white",children:_.intl.string(_.t.I3ltXF)})})}function C(e,n,t){let{canForwardMessages:i}=(0,s.WT)({location:"ForwardLink"},{autoTrackExposure:!1});return i&&(0,c.h)(e)?i=>{let{className:r}=i;return(0,a.jsx)(p,{className:r,message:e,target:n,onClick:t})}:()=>null}},912332:function(e,n,t){t.d(n,{Np:()=>c,l8:()=>o,mc:()=>s,so:()=>l});var a=t(200651);t(192379);var i=t(481060),r=t(822869);let l="forward-modal";function o(e){let{message:n,source:o,initialSelectedDestinations:s=[],forwardOptions:c,onRequestSent:u}=e;(0,r.Lb)(n.channel_id,n.id,o),(0,i.ZDy)(async()=>{let{ForwardModal:e}=await Promise.all([t.e("25292"),t.e("6380"),t.e("91717")]).then(t.bind(t,930864));return t=>(0,a.jsx)(e,{...t,message:n,initialSelectedDestinations:s,forwardOptions:c,onRequestSent:u})},{modalKey:l})}function s(){(0,i.Mr3)(l)}function c(e){let{message:n,failedDestinations:r,forwardOptions:l}=e;(0,i.ZDy)(async()=>{let{ForwardFailedAlertModal:e}=await t.e("86590").then(t.bind(t,384331));return t=>(0,a.jsx)(e,{...t,message:n,failedDestinations:r,forwardOptions:l})})}},44488:function(e,n,t){t.d(n,{Pz:()=>p,ZP:()=>C,am:()=>f}),t(47120);var a,i=t(200651),r=t(192379),l=t(120356),o=t.n(l),s=t(481060),c=t(768762),u=t(843436);function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}let _={CENTER:u.alignCenter,LEFT:u.alignLeft};class h extends(a=r.PureComponent){componentDidUpdate(e){let{selectedIndex:n}=this.props;e.selectedIndex!==n&&this.handleSelectedIndexChange(n)}render(){let{renderItem:e,items:n,vertical:t,paginationContainerClass:a,align:l}=this.props,c=t?u.verticalPaginationItemContainer:u.horizontalPaginationItemContainer;return(0,i.jsx)(s.yWw,{orientation:t?"vertical":"horizontal",className:o()(c,a,l),ref:this.handleSetScrollerRef,children:n.map((n,t)=>r.cloneElement(e(n,t),{onClick:()=>this.handlePageClick(t),key:t,ref:e=>{this._paginationItemRefs[t]=e}}))})}constructor(...e){super(...e),d(this,"_scrollerRef",null),d(this,"_paginationItemRefs",[]),d(this,"handleSetScrollerRef",e=>{this._scrollerRef=e}),d(this,"handleSelectedIndexChange",e=>{let n=this._scrollerRef;if(null==n)return;let t=this._paginationItemRefs[e];null!=t&&n.scrollIntoViewNode({node:t,animate:!0,padding:this.props.scrollToPadding})}),d(this,"handlePageClick",e=>{let{onSetItem:n}=this.props;n(e)})}}d(h,"Align",_),d(h,"defaultProps",{scrollToPadding:{top:0,left:0,bottom:0,right:0},align:_.CENTER});class f extends r.PureComponent{render(){let{className:e}=this.props;return(0,i.jsx)(s.zxk,{look:s.zxk.Looks.BLANK,size:s.zxk.Sizes.NONE,className:o()(u.prevButtonContainer,e),onClick:this.handlePrevClick,children:(0,i.jsx)(c.Z,{className:u.arrow,direction:c.Z.Directions.LEFT})})}constructor(...e){super(...e),d(this,"handlePrevClick",e=>{e.stopPropagation(),e.preventDefault();let{onClick:n}=this.props;null==n||n(e)})}}class p extends r.PureComponent{render(){let{className:e}=this.props;return(0,i.jsx)(s.zxk,{look:s.zxk.Looks.BLANK,size:s.zxk.Sizes.NONE,className:o()(u.nextButtonContainer,e),onClick:this.handleNextClick,children:(0,i.jsx)(c.Z,{className:u.arrow,direction:c.Z.Directions.RIGHT})})}constructor(...e){super(...e),d(this,"handleNextClick",e=>{e.stopPropagation(),e.preventDefault();let{onClick:n}=this.props;null==n||n(e)})}}let C=12633==t.j?h:null},341176:function(e,n,t){t.d(n,{D:()=>f,Z:()=>p});var a=t(200651),i=t(120356),r=t.n(i),l=t(524444),o=t(52824),s=t(956664),c=t(589530),u=t(591759),d=t(124347),_=t(80966),h=t(201262);let f={DEFAULT:null,CONTAIN:h.contain,SCALE_DOWN:h.scaleDown};function p(e){let{media:n,fit:t=f.DEFAULT,obscured:i=!1,onContextMenu:p}=e,{width:C,height:m,url:E,proxyUrl:S,alt:g,type:L,maxWidth:x,maxHeight:O,...v}=n,{width:b,height:A}=(0,s.zp)(null!=C?C:0,null!=m?m:0),N=(0,o.q)({proxyURL:S,url:E}),D=!(null==C||0===C||null==m||0===m);if("VIDEO"===L&&D&&null!=S){var R;let e=function(e){let n=u.Z.toURLSafe(e);return null==n?null:(n.searchParams.append("format","webp"),n.toString())}(S);if(null==e)return null;let t=null!==(R=n.renderLinkComponent)&&void 0!==R?R:l.iT;return(0,a.jsx)(_.Z,{...v,src:N,width:C,height:m,maxWidth:b,maxHeight:A,poster:e,naturalWidth:C,naturalHeight:m,volume:c.FC,autoMute:c.rs,onVolumeChange:c.jA,onMute:c.Zj,renderLinkComponent:t,autoPlay:!i,alt:g,onContextMenu:p})}return"IMAGE"===L?D?(0,a.jsx)(d.ZP,{...v,imageClassName:r()(h.slide,t),src:N,width:C,height:m,shouldLink:!1,maxWidth:b,maxHeight:A,animated:!i&&n.animated,autoPlay:!i,alt:g,zoomThumbnailPlaceholder:n.zoomThumbnailPlaceholder,onContextMenu:p}):(0,a.jsx)("img",{src:N,alt:g,className:r()(h.slide,t),onContextMenu:p}):null}},288229:function(e,n,t){t.d(n,{Z:()=>D}),t(477488),t(47120);var a=t(200651),i=t(192379),r=t(120356),l=t.n(r),o=t(299608),s=t.n(o),c=t(642128),u=t(442837),d=t(481060),_=t(794295),h=t(95398),f=t(247206),p=t(394779),C=t(134432),m=t(254109),E=t(169525),S=t(375954),g=t(585483),L=t(44488),x=t(341176),O=t(981631),v=t(388032),b=t(737387);function A(e){let{width:n,height:t}=e;return null==n||0===n||null==t||0===t}function N(e){let{children:n,hasMediaControls:t,isObscured:r,src:o}=e,[s,c]=(0,i.useState)(!1);return r?(0,a.jsx)(h.a.Provider,{value:s,children:(0,a.jsx)(h.Z,{type:h.Z.Types.ATTACHMENT,reason:E.wk.EXPLICIT_CONTENT,className:b.obscureContainer,obscured:!0,isSingleMosaicItem:!0,obscurityControlClassName:l()({[b.controlsOffset]:t&&s}),onToggleObscurity:e=>{e.stopPropagation(),e.nativeEvent.stopPropagation(),c(e=>!e)},children:e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:l()(b.obscureWrapper,{[b.obscure]:e}),children:n(e)})})},o)}):(0,a.jsx)(a.Fragment,{children:n(!1)})}function D(e){var n,t,r;let{items:l,fit:o,startIndex:h=0,shouldRedactExplicitContent:E=!1,shouldHideMediaOptions:D=!1,shouldAnimateCarousel:R=!1}=e,[k,M]=(0,i.useState)(h),T=(0,i.useRef)(h),[y,P]=(0,i.useState)([]);(0,i.useEffect)(()=>{var e,n;let t=((k+1)%(e=l.length)+e)%e,a=((k-1)%(n=l.length)+n)%n;A(l[t])&&(0,C.po)(l[t].url),A(l[a])&&(0,C.po)(l[a].url)},[k,l]);let I=(0,i.useCallback)(e=>{var n;let t=e-T.current;M(e=(e%(n=l.length)+n)%n),T.current=e,P(e=>[...e,t]),(0,m.yg)(m.uG.SELECTED_ITEM_CHANGE)},[l]);(0,i.useEffect)(()=>{let e=s()(()=>{I(T.current+1)},300),n=s()(()=>{I(T.current-1)},300);return g.S.subscribe(O.CkL.MODAL_CAROUSEL_NEXT,e),g.S.subscribe(O.CkL.MODAL_CAROUSEL_PREV,n),()=>{g.S.unsubscribe(O.CkL.MODAL_CAROUSEL_NEXT,e),g.S.unsubscribe(O.CkL.MODAL_CAROUSEL_PREV,n)}},[I]);let w=l[k],j=null!==(r=w.sourceMetadata)&&void 0!==r?r:{},Z=null==j?void 0:null===(n=j.message)||void 0===n?void 0:n.id,F=null==j?void 0:null===(t=j.message)||void 0===t?void 0:t.channel_id,W=(0,u.e7)([S.Z],()=>null!=F&&null!=Z?S.Z.getMessage(F,Z):null,[F,Z]),G=null!=W?W:null==j?void 0:j.message,U=(0,i.useCallback)(()=>(0,m.yg)(m.uG.FORWARD_PRESSED),[]),z=null!=G&&null!=j.identifier?(0,p.s)(G,j.identifier,U):null,H=(0,f.KP)({type:f.lJ.GenericMedia,media:w},E),X=D?e=>{e.stopPropagation(),e.preventDefault()}:()=>(0,m.yg)(m.uG.CONTEXT_MENU_OPENED),B=function(e){if(0===e)return["translateX(0)"];let n=["translateX(100px)","translateX(-100px)"];return e>0?n:n.toReversed()}(y[y.length-1]),V=(0,d.Yzy)(w,{key:w.url,from:{opacity:0,transform:B[0]},enter:{opacity:1,transform:"translateX(0)"},leave:{opacity:0,transform:B[B.length-1]},config:{friction:20,tension:250}},R?"respect-motion-settings":"animate-never");return(0,a.jsxs)("div",{className:b.wrapper,children:[l.length>1?(0,a.jsx)(L.am,{className:b.navPrev,onClick:()=>g.S.dispatch(O.CkL.MODAL_CAROUSEL_PREV)}):null,V((e,n)=>{var t;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(c.animated.div,{style:e,className:b.zoomedMediaFitWrapper,children:(0,a.jsxs)("div",{onClick:e=>null!=o&&[x.D.CONTAIN,x.D.SCALE_DOWN].includes(o)?null:e.stopPropagation(),children:[(0,a.jsx)(N,{isObscured:H,src:n.url,children:e=>(0,a.jsx)(x.Z,{media:n,fit:o,obscured:e,onContextMenu:X})}),("IMAGE"!==n.type||null!=n.original)&&!D&&(0,a.jsxs)("div",{className:b.optionsContainer,children:[(0,a.jsx)(_.Z,{href:null!==(t=n.original)&&void 0!==t?t:n.url,className:b.downloadLink,onClick:()=>((0,m.yg)(m.uG.OPEN_LINK_PRESSED),!1),children:v.intl.string(v.t.q5jLJC)}),null!=z&&(0,a.jsx)(z,{className:b.forward})]})]})},n.url)})}),l.length>1?(0,a.jsx)(L.Pz,{className:b.navNext,onClick:()=>g.S.dispatch(O.CkL.MODAL_CAROUSEL_NEXT)}):null]})}},950120:function(e,n,t){t.r(n),t.d(n,{default:()=>E});var a=t(200651),i=t(192379),r=t(120356),l=t.n(r),o=t(873546),s=t(481060),c=t(425493),u=t(376641),d=t(714338),_=t(585483),h=t(288229),f=t(981631),p=t(388032),C=t(362943);function m(e){let{onClose:n}=e,t=i.useRef(null);return(0,a.jsx)("div",{className:C.mobileCloseWrapper,ref:t,children:(0,a.jsx)(s.JcV,{containerRef:t,children:(0,a.jsx)("div",{children:(0,a.jsx)(c.Z,{closeAction:n,keybind:"ESC"})})})})}function E(e){let{onClose:n,items:t,startingIndex:r,fit:c,shouldRedactExplicitContent:E,shouldHideMediaOptions:S,shouldAnimateCarousel:g,className:L,transitionState:x,...O}=e,v=o.tq&&null!=n;return i.useEffect(()=>{if(null!=n)return _.S.subscribe(f.CkL.MEDIA_MODAL_CLOSE,n),()=>{_.S.unsubscribe(f.CkL.MEDIA_MODAL_CLOSE,n)}},[n]),i.useEffect(()=>(x===s.Dvm.ENTERED&&(d.Z.disable(),d.Z.enableTemp(u.P)),x===s.Dvm.HIDDEN&&(d.Z.disable(),d.Z.enableTemp(u.v)),()=>{d.Z.disableTemp()}),[x]),(0,a.jsxs)(s.Y0X,{hideShadow:!0,className:l()(C.carouselModal,L),transitionState:x,...O,size:s.CgR.DYNAMIC,"aria-label":p.intl.string(p.t.AMTX3t),onClick:n,children:[v?(0,a.jsx)(m,{onClose:n}):null,(0,a.jsx)(h.Z,{items:t,startIndex:r,fit:c,shouldRedactExplicitContent:E,shouldHideMediaOptions:S,shouldAnimateCarousel:g})]})}},643124:function(e,n,t){e.exports={container:"container__96e72",text:"text__96e72"}},843436:function(e,n,t){e.exports={alignCenter:"alignCenter__31873",alignLeft:"alignLeft__31873",horizontalPaginationItemContainer:"horizontalPaginationItemContainer__31873",verticalPaginationItemContainer:"verticalPaginationItemContainer__31873 alignLeft__31873",arrow:"arrow__31873",arrowContainer:"arrowContainer__31873",prevButtonContainer:"prevButtonContainer__31873 arrowContainer__31873",nextButtonContainer:"nextButtonContainer__31873 arrowContainer__31873"}},201262:function(e,n,t){e.exports={slide:"slide_fd65ff",scaleDown:"scaleDown_fd65ff",contain:"contain_fd65ff"}},737387:function(e,n,t){e.exports={wrapper:"wrapper__1bcc7",zoomedMediaFitWrapper:"zoomedMediaFitWrapper__1bcc7",optionsContainer:"optionsContainer__1bcc7",nav:"nav__1bcc7",navPrev:"navPrev__1bcc7 nav__1bcc7",navNext:"navNext__1bcc7 nav__1bcc7",downloadLink:"downloadLink__1bcc7",forward:"forward__1bcc7",obscureContainer:"obscureContainer__1bcc7",obscureWrapper:"obscureWrapper__1bcc7",obscure:"obscure__1bcc7",controlsOffset:"controlsOffset__1bcc7"}},362943:function(e,n,t){e.exports={carouselModal:"carouselModal__8a837",mobileCloseWrapper:"mobileCloseWrapper__8a837",forcedTransparency:"forcedTransparency__8a837"}}}]);
//# sourceMappingURL=4e27248e3be7c495.js.map