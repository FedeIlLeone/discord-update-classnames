(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["18298"],{817080:function(e){var t=t||function(e){"use strict";if(!("undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,i=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),s=e.webkitRequestFileSystem,l=e.requestFileSystem||s||e.mozRequestFileSystem,d=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c="application/octet-stream",u=0,h=function(e){setTimeout(function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()},4e4)},p=function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var o=e["on"+t[r]];if("function"==typeof o)try{o.call(e,n||e)}catch(e){d(e)}}},f=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\xef\xbb\xbf",e],{type:e.type}):e},_=function(t,d,_){_||(t=f(t));var E,m,N=this,g=t.type,S=!1,b=function(){p(N,"writestart progress write writeend".split(" "))},x=function(){if(m&&a&&"undefined"!=typeof FileReader){var r=new FileReader;r.onloadend=function(){var e=r.result;m.location.href="data:attachment/file"+e.slice(e.search(/[,;]/)),N.readyState=N.DONE,b()},r.readAsDataURL(t),N.readyState=N.INIT;return}(S||!E)&&(E=n().createObjectURL(t)),m?m.location.href=E:void 0===e.open(E,"_blank")&&a&&(e.location.href=E),N.readyState=N.DONE,b(),h(E)},y=function(e){return function(){if(N.readyState!==N.DONE)return e.apply(this,arguments)}},C={create:!0,exclusive:!1};if(N.readyState=N.INIT,d||(d="download"),o){E=n().createObjectURL(t),setTimeout(function(){r.href=E,r.download=d,i(r),b(),h(E),N.readyState=N.DONE});return}if(e.chrome&&g&&g!==c&&(t=(t.slice||t.webkitSlice).call(t,0,t.size,c),S=!0),s&&"download"!==d&&(d+=".download"),(g===c||s)&&(m=e),!l){x();return}u+=t.size,l(e.TEMPORARY,u,y(function(e){e.root.getDirectory("saved",C,y(function(e){var n=function(){e.getFile(d,C,y(function(e){e.createWriter(y(function(n){n.onwriteend=function(t){m.location.href=e.toURL(),N.readyState=N.DONE,p(N,"writeend",t),h(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&x()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=N["on"+e]}),n.write(t),N.abort=function(){n.abort(),N.readyState=N.DONE},N.readyState=N.WRITING}),x)}),x)};e.getFile(d,{create:!1},y(function(e){e.remove(),n()}),y(function(e){e.code===e.NOT_FOUND_ERR?n():x()}))}),x)}),x)},E=_.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return n||(e=f(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(E.abort=function(){this.readyState=this.DONE,p(this,"abort")},E.readyState=E.INIT=0,E.WRITING=1,E.DONE=2,E.error=E.onwritestart=E.onprogress=E.onwrite=E.onabort=E.onerror=E.onwriteend=null,function(e,t,n){return new _(e,t,n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);e.exports?e.exports.saveAs=t:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define([],function(){return t})},23645:function(e,t,n){"use strict";n.d(t,{Z:()=>s}),n(47120);var r=n(192379),o=n(817080),i=n(579806),a=n(358085);class s extends r.Component{getFileContents(){let{fileContents:e}=this.props;return"function"==typeof e&&(e=e()),e}downloadNative(e,t){i.Z.fileManager.saveWithDialog(e,t)}downloadHtml5(e,t){let n=new Blob([e],{type:this.props.contentType});(0,o.saveAs)(n,t)}render(){let{children:e}=this.props,t=r.Children.only(e);return r.cloneElement(t,{onClick:this.handleFileDownload})}constructor(...e){var t,n;super(...e),t="handleFileDownload",n=e=>{e.preventDefault();let t=this.getFileContents(),{fileName:n,onDownload:r}=this.props;a.isPlatformEmbedded?this.downloadNative(t,n):this.downloadHtml5(t,n),null==r||r()},t in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}}},628908:function(e,t,n){"use strict";n.d(t,{default:()=>P}),n(47120);var r=n(200651),o=n(192379),i=n(512722),a=n.n(i),s=n(442837),l=n(481060),d=n(570140),c=n(816814),u=n(23645),h=n(600164),p=n(454585),f=n(144114),_=n(607018),E=n(325067),m=n(594174),N=n(279837),g=n(981631),S=n(815660),b=n(388032),x=n(764269);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let C=e=>{let{label:t,text:n,children:o,...i}=e;return(0,r.jsxs)(h.Z,{direction:h.Z.Direction.VERTICAL,...i,children:[(0,r.jsx)(l.vwX,{tag:"h2",children:t}),null!=n?(0,r.jsx)(l.Text,{variant:"text-md/normal",className:x.sectionBody,children:n}):null,(0,r.jsx)(h.Z.Child,{wrap:!0,children:o})]})};class w extends o.PureComponent{renderSMSSection(){let{currentUser:e}=this.props,t=null!=this.props.currentUser.phone,n=e.hasFlag(g.xW$.MFA_SMS),o=e.hasFlag(g.xW$.PARTNER)||e.hasFlag(g.xW$.STAFF);return t?(0,r.jsxs)(C,{label:b.intl.string(b.t.DZQe29),text:b.intl.string(b.t.fspJ4O),children:[(0,r.jsxs)(l.Text,{variant:"text-md/normal",className:x.sectionBody,children:[(0,r.jsx)("strong",{className:x.phoneNumber,children:b.intl.format(b.t.PXVoEB,{phoneNumber:e.phone})}),(0,r.jsx)(l.zxk,{look:l.zxk.Looks.LINK,color:l.zxk.Colors.LINK,size:l.zxk.Sizes.MIN,className:x.linkButton,onClick:this.handleChangePhoneNumber,children:b.intl.string(b.t.Ulqq6O)})]}),(0,r.jsx)(l.zxk,{onClick:this.handleEnableSMS,disabled:n||o,color:l.zxk.Colors.GREEN,size:l.zxk.Sizes.SMALL,children:o?b.intl.string(b.t.Sq6Q1t):n?b.intl.string(b.t.kSbHTE):b.intl.string(b.t.DZQe29)})]}):(0,r.jsx)(C,{label:b.intl.string(b.t.DZQe29),text:b.intl.string(b.t.fspJ4O),children:(0,r.jsx)(l.zxk,{onClick:this.handleEnableSMS,color:l.zxk.Colors.GREEN,size:l.zxk.Sizes.SMALL,disabled:o,children:o?b.intl.string(b.t.Sq6Q1t):b.intl.string(b.t["O5qS/v"])})})}renderBackupCodesSection(){return(0,r.jsx)(C,{label:b.intl.string(b.t.qZZUy8),text:b.intl.format(b.t.M0Dogo,{}),children:(0,r.jsx)(u.Z,{fileContents:this.getDownloadFileContents,contentType:"text/plain",fileName:"discord_backup_codes.txt",onDownload:()=>d.Z.dispatch({type:"MFA_SEEN_BACKUP_CODE_PROMPT"}),children:(0,r.jsx)(l.zxk,{color:l.zxk.Colors.GREEN,size:l.zxk.Sizes.SMALL,children:b.intl.string(b.t.qZZUy8)})})})}renderHeader(e){return(0,r.jsxs)(l.xBx,{separator:!1,children:[(0,r.jsxs)(h.Z.Child,{grow:1,shrink:1,children:[(0,r.jsx)(l.X6q,{variant:"heading-lg/semibold",className:x.header,children:p.Z.parse(b.intl.string(b.t["681MPT"]))}),(0,r.jsx)(l.Text,{variant:"text-xs/normal",className:x.subHeader,children:e})]}),(0,r.jsx)(h.Z.Child,{grow:0,children:(0,r.jsx)(l.olH,{onClick:this.handleCloseModal})})]})}renderConfirmModal(e){let{onClose:t}=this.props;return(0,r.jsx)(l.sYh,{dismissable:!0,header:b.intl.string(b.t.mwVXnJ),confirmText:b.intl.string(b.t.MwSEo6),cancelText:b.intl.string(b.t["ETE/oK"]),onCancel:()=>this.setState({showConfirmModal:!1}),onConfirm:()=>{d.Z.dispatch({type:"MFA_SEEN_BACKUP_CODE_PROMPT"}),t()},children:(0,r.jsx)(l.Text,{variant:"text-md/normal",color:"text-normal",children:e})})}render(){let{isTotp:e}=this.props;return e?this.renderTotp():this.renderWebAuthn()}renderTotp(){let{transitionState:e}=this.props,{showConfirmModal:t}=this.state;return(0,r.jsxs)(l.Y0X,{transitionState:e,className:x.modal,children:[this.renderHeader(b.intl.format(b.t.pQioMz,{})),(0,r.jsxs)(l.hzk,{className:x.modalInner,children:[this.renderSMSSection(),(0,r.jsx)(l.$i$,{className:x.divider}),this.renderBackupCodesSection()]}),t&&this.renderConfirmModal(b.intl.string(b.t.WJFPHB))]})}renderWebAuthn(){let{transitionState:e}=this.props,{showConfirmModal:t}=this.state;return(0,r.jsxs)(l.Y0X,{transitionState:e,className:x.modal,children:[this.renderHeader(b.intl.format(b.t.Xb5JGh,{})),(0,r.jsx)(l.hzk,{className:x.modalInner,children:this.renderBackupCodesSection()}),t&&this.renderConfirmModal(b.intl.string(b.t.aoNIXF))]})}openPhoneVerificationModal(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.h7j)(t=>(0,r.jsx)(_.default,{reason:f.L.MFA_PHONE_UPDATE,...t,...e}),{modalKey:S.M})}constructor(...e){super(...e),y(this,"state",{showConfirmModal:!1}),y(this,"handleCloseModal",()=>{let{onClose:e,hasSeenBackupPrompt:t}=this.props;t?null==e||e():this.setState({showConfirmModal:!0})}),y(this,"getDownloadFileContents",()=>{let e=this.props.backupCodes.map(e=>{let{consumed:t,code:n}=e;return"* ".concat(n.substr(0,4),"-").concat(n.substr(4)," ").concat(t?"(".concat(b.intl.string(b.t["ycME+/"]),")"):"")}).join("\r\n"),t=b.intl.formatToPlainString(b.t.uYWwh4,{email:this.props.currentUser.email});return"".concat(t,"\r\n\r\n").concat(e)}),y(this,"handleChangePhoneNumber",()=>{this.openPhoneVerificationModal()}),y(this,"handleEnableSMS",()=>{let{currentUser:e}=this.props,t=()=>{(0,l.h7j)(e=>(0,r.jsx)(N.default,{...e,handleSubmit:e=>c.Z.enableSMS(e),title:b.intl.string(b.t.DZQe29)}))};null==e.phone?this.openPhoneVerificationModal({onAddedPhone:t}):t()})}}let P=s.ZP.connectStores([m.default,E.Z],()=>{let e=m.default.getCurrentUser();return a()(null!=e,"MFAEnableSuccess: currentUser cannot be undefined"),{currentUser:e,backupCodes:E.Z.getBackupCodes(),hasSeenBackupPrompt:E.Z.hasSeenBackupPrompt}})(w)},144114:function(e,t,n){"use strict";n.d(t,{L:()=>u,Z:()=>h});var r,o=n(990547),i=n(544891),a=n(570140),s=n(314897),l=n(573261),d=n(815660),c=n(981631),u=((r={}).USER_ACTION_REQUIRED="user_action_required",r.USER_SETTINGS_UPDATE="user_settings_update",r.GUILD_PHONE_REQUIRED="guild_phone_required",r.MFA_PHONE_UPDATE="mfa_phone_update",r.CONTACT_SYNC="contact_sync",r);let h={setCountryCode(e){a.Z.dispatch({type:"PHONE_SET_COUNTRY_CODE",countryCode:e})},removePhone:(e,t)=>i.tn.del({url:c.ANM.PHONE,body:{password:e,change_phone_reason:t},oldFormErrors:!0,rejectWithError:!1}),resendCode(e){let t={},n=s.default.getFingerprint();return null!=n&&""!==n&&(t["X-Fingerprint"]=n),i.tn.post({url:c.ANM.RESEND_PHONE,headers:t,body:{phone:e},rejectWithError:!1})},beginAddPhone:(e,t)=>i.tn.post({url:c.ANM.PHONE,body:{phone:e,change_phone_reason:t},rejectWithError:!1}),addPhone:(e,t,n)=>i.tn.post({url:c.ANM.PHONE,body:{phone_token:e,password:t,change_phone_reason:n},oldFormErrors:!0,rejectWithError:!1}),addPhoneWithoutPassword:e=>i.tn.post({url:c.ANM.PHONE_VERIFY_NO_PASSWORD,body:{code:e},rejectWithError:!1}),beginReverifyPhone:(e,t)=>i.tn.post({url:c.ANM.PHONE_REVERIFY,body:{phone:e,change_phone_reason:t},rejectWithError:!1}),reverifyPhone:(e,t,n)=>i.tn.post({url:c.ANM.PHONE_REVERIFY,body:{phone_token:e,password:t,change_phone_reason:n},oldFormErrors:!0,rejectWithError:!1}),validatePhoneForSupport:e=>i.tn.post({url:c.ANM.VERIFY_PHONE_FOR_TICKET,body:{token:e},oldFormErrors:!0,rejectWithError:!1}),async verifyPhone(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={},u=s.default.getFingerprint();null!=u&&""!==u&&(i["X-Fingerprint"]=u),r&&(i.authorization="");let h=await l.Z.post({url:c.ANM.VERIFY_PHONE,headers:i,body:{phone:e,code:t},oldFormErrors:!0,trackedActionData:{event:o.NetworkActionNames.USER_VERIFY_PHONE},rejectWithError:!1});return n&&a.Z.dispatch({type:"MODAL_POP",key:d.M}),h.body}}},815660:function(e,t,n){"use strict";n.d(t,{M:()=>r,z:()=>o});let r="PHONE_VERIFICATION_MODAL_KEY",o=6},23434:function(e,t,n){"use strict";n.d(t,{Z:()=>u});var r,o,i,a=n(442837),s=n(570140);let l=null;class d extends(i=a.ZP.Store){hasAction(){return null!=l}getAction(){return l}}function c(e){l=e.requiredAction}o="UserRequiredActionStore",(r="displayName")in d?Object.defineProperty(d,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):d[r]=o;let u=new d(s.Z,{CONNECTION_OPEN:c,USER_REQUIRED_ACTION_UPDATE:c})},764269:function(e,t,n){"use strict";e.exports={modal:"modal__7e85a",modalInner:"modalInner__7e85a",header:"header__7e85a",divider:"divider__7e85a",sectionBody:"sectionBody__7e85a",phoneNumber:"phoneNumber__7e85a",linkButton:"linkButton__7e85a",subHeader:"subHeader__7e85a"}},204905:function(e,t,n){"use strict";e.exports={card:"card__594f1",spacing:"spacing__594f1",error:"error__594f1",warning:"warning__594f1"}},778888:function(e,t,n){"use strict";e.exports={spacer:"spacer__5ecaa",input:"input__5ecaa"}},920178:function(e,t,n){"use strict";e.exports={phoneFieldPopout:"phoneFieldPopout__61a01",phoneFieldScroller:"phoneFieldScroller__61a01",countryItem:"countryItem__61a01",countryName:"countryName__61a01",countryCode:"countryCode__61a01"}},772840:function(e,t,n){"use strict";e.exports={phoneField:"phoneField_a0c54f",countryButton:"countryButton_a0c54f",countryButtonInner:"countryButtonInner_a0c54f",countryCodeContainer:"countryCodeContainer_a0c54f",plusSign:"plusSign_a0c54f",countryCode:"countryCode_a0c54f",inputField:"inputField_a0c54f",sendButton:"sendButton_a0c54f",phoneFieldExpand:"phoneFieldExpand_a0c54f"}},468515:function(e,t,n){"use strict";e.exports={phoneVerificationModal:"phoneVerificationModal_db41ea",animationContainer:"animationContainer_db41ea",title:"title_db41ea",description:"description_db41ea",error:"error_db41ea",field:"field_db41ea"}}}]);
//# sourceMappingURL=e6c458e0078faee4.js.map