"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["84722"],{430927:function(e,n,i){i.d(n,{T:()=>h,o:()=>u});var l=i(512722),t=i.n(l),a=i(287734),s=i(471253),r=i(922482),c=i(592125),o=i(19780),d=i(765305);async function u(e,n){let{entity_type:i}=e;switch(i){case d.WX.STAGE_INSTANCE:{let n=o.Z.getChannelId(),i=c.Z.getChannel(e.channel_id);t()(null!=i,"could not find channel"),n!==i.id&&(await r.TM(i,!0),await r.R5(i,null,!1)),await (0,s.RK)(i,!1,!0);break}case d.WX.VOICE:{let n=o.Z.getChannelId(),i=c.Z.getChannel(e.channel_id);t()(null!=i,"could not find channel"),n!==i.id&&a.default.selectVoiceChannel(i.id)}}}function h(e,n){let{entity_type:i}=e;switch(i){case d.WX.STAGE_INSTANCE:case d.WX.VOICE:case d.WX.EXTERNAL:null==n||n()}return Promise.resolve()}},610665:function(e,n,i){i.d(n,{GV:()=>x,iQ:()=>m}),i(653041),i(47120),i(411104);var l=i(512722),t=i.n(l),a=i(333848),s=i(706058),r=i(131704),c=i(592125),o=i(430824),d=i(482241),u=i(765305),h=i(981631);async function v(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=[];l.push(...i);let t=await a.Z.createChannel({guildId:e.id,type:h.d4z.GUILD_STAGE_VOICE,name:n.substring(0,100),permissionOverwrites:l});if(null==t||201!==t.status)throw Error("Can't create channel for event");return(0,r.q_)(t.body)}async function x(e,n){let{entity_type:i}=e;if(i===u.WX.STAGE_INSTANCE){let i=await function(e,n){let{guild_id:i,channel_id:l}=e,t=o.Z.getGuild(i);if(null==t)return Promise.resolve(null);let a=c.Z.getChannel(l);return null==a?v(t,e.name,n):Promise.resolve(a)}(e,n);t()(null!=i,"could not find or create channel")}}async function m(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{channel_id:i,entity_type:l,name:a,id:r,guild_id:c}=e;switch(l){case u.WX.STAGE_INSTANCE:t()(null!=i,"channel_id is required"),await (0,s.me)(i,a,u.j8.GUILD_ONLY,n,r);break;case u.WX.VOICE:t()(null!=i,"channel_id is required"),await d.Z.startEvent(r,c);break;case u.WX.EXTERNAL:await d.Z.startEvent(r,c)}}},305298:function(e,n,i){i.d(n,{Z:()=>c}),i(47120);var l=i(192379),t=i(881052),a=i(430927),s=i(610665);let r={onSuccess:()=>{},permissionOverwrites:[]};function c(){let[e,n]=l.useState(!1),[i,c]=l.useState(null);return[async function(e,i){let{onSuccess:l=r.onSuccess,permissionOverwrites:o=r.permissionOverwrites}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;n(!0);try{await s.GV(e,o),await s.iQ(e,i),await (0,a.o)(e,l),await (0,a.T)(e,l),n(!1)}catch(e){c(new t.Hx(e)),n(!1)}n(!1)},{loading:e,error:i}]}},460838:function(e,n,i){i.d(n,{Q:()=>w,Z:()=>A});var l,t=i(200651),a=i(192379),s=i(120356),r=i.n(s),c=i(442837),o=i(481060),d=i(447003),u=i(471445),h=i(565138),v=i(357156),x=i(496675),m=i(725436),g=i(274311),C=i(854698),N=i(285784),j=i(95291),p=i(742593),k=i(810561),E=i(187443),I=i(131154),Z=i(765305),y=i(981631),f=i(388032),T=i(820137),w=((l={})[l.BANNER=0]="BANNER",l[l.THUMBNAIL=1]="THUMBNAIL",l);function _(e){let{channel:n,onClick:i}=e,{canManageAllEvents:l}=(0,v.XJ)(n),s=(0,c.e7)([x.Z],()=>!n.isGuildVocal()||x.Z.can(y.Plq.CONNECT,n),[n]),h=a.useMemo(()=>(0,d.Z)(n),[n]),m=(0,u.KS)(n);return(0,t.jsx)(o.ua7,{text:f.intl.string(f.t.nHjY9P),shouldShow:!s&&null!=i,children:e=>(0,t.jsxs)(o.P3F,{...e,className:r()(T.inline,T.channelContainer,{[T.channelContainerEnabled]:s&&null!=i,[T.channelContainerDisabled]:!s&&null!=i}),onClick:i,children:[(0,t.jsx)(o.ua7,{text:f.intl.string(f.t["48WXaW"]),shouldShow:l&&h&&s&&null!=i,children:e=>null!=m?(0,t.jsx)(m,{...e,color:"currentColor",size:"custom",width:20,height:20,className:T.icon}):null}),(0,t.jsx)(o.Text,{variant:"text-sm/normal",color:"none",className:T.channelLocation,children:n.name})]})})}function S(e){let{guild:n,channel:i,onJoinClick:l,handleLocationClick:a,location:s,isExternal:c,isHub:d}=e;return d?null==n?(0,t.jsx)("div",{}):(0,t.jsxs)("div",{className:T.inline,children:[(0,t.jsx)(h.Z,{className:T.guildIcon,size:h.Z.Sizes.MINI,active:!0,guild:n}),(0,t.jsx)(o.Text,{variant:"text-sm/normal",color:"header-secondary",children:null==n?void 0:n.name})]}):null!=i?(0,t.jsx)(_,{channel:i,onClick:l}):(0,t.jsxs)(o.P3F,{className:T.inline,onClick:a,children:[(0,t.jsx)(o._tJ,{size:"custom",color:"currentColor",height:20,width:20,className:r()(T.channelContainer,T.icon)}),(0,t.jsx)(o.Text,{className:c?T.externalLocation:T.channelLocation,variant:"text-sm/normal",children:(0,m.m)(s,!0)})]})}function A(e){let{className:n,guild:i,channel:l,creator:a,name:s,entityType:c,description:d,imageLocation:u=0,imageSource:h,isActive:v,isUserLurking:x,isJoined:m=!1,isMember:y=!1,isHub:f=!1,speakers:w,speakerCount:_,rsvped:A,canInvite:G,location:L,truncate:b,onContextMenu:X,onJoinClick:R,onJoinGuildClick:P,onGoToGuildClick:M,onRsvpClick:z,onStartClick:W,onInviteClick:U,onEndClick:J,onClick:V,isNew:H,guildEvent:O,eventPreview:q,recurrenceRule:B,recurrenceId:D}=e,K=(0,g.Q)(l,c),Q=c===Z.WX.EXTERNAL,Y=Q?e=>e.stopPropagation():void 0,F=[];if(null!=B&&null!=event){let e=(0,C.Ho)(B);F=(0,C.PJ)(4,e,new Date(O.scheduled_start_time))}let $=F.length>0;return(0,t.jsxs)(o.kL8,{"aria-label":s,onClick:()=>null==V?void 0:V(D),onContextMenu:X,className:r()(T.card,{[T.joined]:m,[T.lurking]:x},n),children:[(0,t.jsxs)("div",{className:r()(T.padding,{[T.isRecurring]:$}),children:[0===u&&(0,t.jsx)(j.Z,{source:h}),(0,t.jsx)(p.ZP,{creator:a,name:s,description:d,imageSource:1===u?h:null,truncate:b,guildId:null==i?void 0:i.id,isHub:f,isNew:H,guildEvent:O,eventPreview:q,recurrenceId:D}),v&&null!=i&&null!=w&&_>0&&(0,t.jsx)(I.Z,{guild:i,speakers:w,speakerCount:_,className:T.spacing}),(0,t.jsx)("hr",{className:T.divider}),(0,t.jsxs)("div",{className:r()(T.inline,T.footer),children:[(0,t.jsx)(S,{guild:i,channel:l,onJoinClick:R,handleLocationClick:Y,location:L,isExternal:Q,isHub:f}),f?(0,t.jsx)(E.Z,{isActive:v,isUserLurking:x,isMember:y,rsvped:A,onRsvpClick:z,onJoinGuildClick:P,onGoToGuildClick:M,guildName:null==i?void 0:i.name,canInvite:G,isChannelPublic:K,onInviteClick:U}):(0,t.jsx)(N.ZP,{entityType:c,isJoined:m,isActive:v,isUserLurking:x,rsvped:A,canInvite:G,isChannelPublic:K,onContextMenu:X,onJoinClick:R,onRsvpClick:z,onStartClick:W,onInviteClick:U,onEndClick:J})]}),$&&(0,t.jsx)("hr",{className:T.divider})]}),$&&(0,t.jsx)(k.Z,{guildId:null==i?void 0:i.id,recurrenceRule:B,guildEventId:O.id,onRecurrenceClick:V})]})}},131154:function(e,n,i){i.d(n,{Z:()=>o});var l=i(200651);i(192379);var t=i(120356),a=i.n(t),s=i(481060),r=i(388032),c=i(947396);function o(e){let{guild:n,speakers:i,speakerCount:t,className:o}=e,d=i.slice(0,5),u=d.map(e=>{var i,t;return(0,l.jsxs)("div",{className:c.speakerContainer,children:[(0,l.jsx)(s.qEK,{src:null==e?void 0:null===(i=e.user)||void 0===i?void 0:i.getAvatarURL(n.id,20),size:s.EFr.SIZE_20,className:c.avatar,"aria-label":"".concat(null==e?void 0:e.userNick,"-avatar")}),(0,l.jsx)("div",{className:c.textInGridContainer,children:(0,l.jsx)(s.Text,{color:"header-secondary",variant:"text-sm/normal",className:c.textInGrid,children:null==e?void 0:e.userNick})})]},null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.id)}),h=t-d.length;return(0,l.jsxs)("div",{className:a()(c.grid,o),children:[u,h>0&&(0,l.jsxs)("div",{className:c.speakerContainer,children:[(0,l.jsx)("div",{className:c.iconMicrophone,children:(0,l.jsx)(s.S6n,{size:"custom",color:"currentColor",height:12})}),(0,l.jsx)(s.Text,{color:"header-secondary",variant:"text-sm/normal",className:c.textInGrid,children:r.intl.format(r.t["185ggI"],{count:h})})]})]})}},296864:function(e,n,i){i.d(n,{default:()=>k}),i(47120);var l=i(200651),t=i(192379),a=i(120356),s=i.n(a),r=i(442837),c=i(481060),o=i(313201),d=i(41776),u=i(357156),h=i(513449),v=i(592125),x=i(430824),m=i(305298),g=i(405613),C=i(460838),N=i(765305),j=i(388032),p=i(618575);function k(e){var n;let{transitionState:i,event:a,onSuccess:k,onClose:E}=e,I=(0,o.Dt)(),{guild_id:Z,privacy_level:y}=a,f=(0,r.e7)([v.Z],()=>v.Z.getChannel(a.channel_id),[a]),T=(0,r.e7)([x.Z],()=>x.Z.getGuild(Z),[Z]),{canManageGuildEvent:w}=(0,u.XJ)(null!=f?f:T),_=w(a),S=(0,r.e7)([d.Z],()=>d.Z.isLurking(Z),[Z]),A=a.entity_type===N.WX.STAGE_INSTANCE,[G,L]=t.useState(A),[b,{loading:X,error:R}]=(0,m.Z)();if(!_)return null;let P=y===N.j8.PUBLIC?j.intl.string(j.t.HhlaLC):j.intl.string(j.t.GI3xXV),M=()=>{null==k||k(),E(),(0,h.Ku)(!1)},z=async()=>{await b(a,G,{onSuccess:M})};return(0,l.jsx)(c.Y0X,{transitionState:i,"aria-labelledby":I,children:(0,l.jsxs)(c.hzk,{className:p.content,children:[(0,l.jsx)("div",{className:p.previewCard,children:(0,l.jsx)(C.Z,{guild:T,channel:f,name:a.name,description:null!==(n=a.description)&&void 0!==n?n:void 0,imageSource:(0,g.Z)(a),isActive:!1,isUserLurking:S,speakers:[],speakerCount:0,rsvped:!0,guildEvent:a})}),(0,l.jsx)(c.Text,{color:"header-secondary",className:p.privacyLevel,variant:"text-sm/normal",children:j.intl.format(j.t.UMajoq,{privacyLevel:P,privacyLevelHook:(e,n)=>y!==N.j8.PUBLIC?null:(0,l.jsxs)("div",{className:p.privacyLevel,children:[(0,l.jsx)(c.enf,{size:"xs",color:"currentColor",className:p.publicIcon}),(0,l.jsx)(c.Text,{variant:"text-sm/normal",children:e})]},n)})}),(0,l.jsx)(c.X6q,{variant:"heading-xl/semibold",className:p.header,children:a.name}),A&&(0,l.jsx)(c.XZJ,{className:p.verticalSpacing,type:c.XZJ.Types.INVERTED,value:G,onChange:e=>{let{currentTarget:n}=e;return L(n.checked)},children:(0,l.jsx)(c.Text,{variant:"text-sm/normal",children:j.intl.string(j.t.dGNtgI)})}),(0,l.jsxs)("div",{className:s()(p.inline,p.buttons,p.verticalSpacing),children:[(0,l.jsx)(c.zxk,{color:c.zxk.Colors.PRIMARY,onClick:()=>{E()},className:s()(p.button,p.spacing),children:j.intl.string(j.t.CZGqeX)}),(0,l.jsx)(c.zxk,{color:c.zxk.Colors.GREEN,onClick:z,submitting:X,className:p.button,children:j.intl.string(j.t.cK1GGR)})]}),null!=R&&null!=R.getAnyErrorMessage()?(0,l.jsx)(c.Text,{color:"text-danger",variant:"text-sm/normal",className:p.errorMessage,children:R.getAnyErrorMessage()}):null]})})}}}]);
//# sourceMappingURL=a81efeface06b25d.js.map