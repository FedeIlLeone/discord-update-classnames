"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["30419"],{623714:function(e){e.exports="/assets/52c92d8492ebe041.svg"},267988:function(e){e.exports="/assets/52c92d8492ebe041.svg"},396767:function(e){e.exports="/assets/c278e895ac47b4af.svg"},987656:function(e){e.exports="/assets/2d416896e0bbb412.svg"},395199:function(e,l,n){n.d(l,{Z:()=>y}),n(724458),n(653041),n(47120);var t,s=n(200651),i=n(192379),r=n(120356),a=n.n(r),o=n(442837),d=n(215569),c=n(481060),u=n(600164),m=n(777789),x=n(78839),h=n(709054),C=n(388032),g=n(329209);function j(e,l,n){return l in e?Object.defineProperty(e,l,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[l]=n,e}class p extends i.PureComponent{render(){let{onClose:e}=this.props;return(0,s.jsxs)(c.xBx,{separator:!1,justify:u.Z.Justify.BETWEEN,children:[(0,s.jsx)(c.X6q,{variant:"heading-md/semibold",children:this.props.text}),null!=e?(0,s.jsx)(c.olH,{onClick:e}):null]})}}function f(e){let{imageClass:l,children:n,error:t,onDismissError:i}=e;return(0,s.jsxs)("div",{className:g.content,children:[(0,s.jsx)("div",{className:a()(g.image,l)}),n,(0,s.jsx)(d.W,{children:null!=t?(0,s.jsx)(c.oXn,{className:g.error,children:(0,s.jsx)(c.kzN,{onDismiss:i,children:t.message})}):null})]})}let v=e=>{let{canceledCount:l}=e,n=(0,o.e7)([x.ZP],()=>x.ZP.getPremiumTypeSubscription());return null==n?null:(0,s.jsxs)("div",{className:g.pendingCancellation,children:[(0,s.jsx)(c.P4T,{size:"custom",width:20,height:20,color:"currentColor",className:g.pendingCancellationIcon}),(0,s.jsx)(c.Text,{variant:"text-md/normal",className:g.pendingCancellationMessage,children:C.intl.format(C.t.SFpsCA,{date:n.currentPeriodEnd,canceledCount:l})})]})};function S(e){let{imageClass:l,blurb:n,guild:t,warning:i,error:r,onDismissError:a,slotCount:o=1,canceledCount:d=0}=e;return(0,s.jsxs)(f,{imageClass:l,error:r,onDismissError:a,children:[(0,s.jsx)(c.Text,{variant:"text-md/normal",children:n}),(0,s.jsx)(m.Z,{className:g.guildCard,guild:t,subscriptionChange:o}),(0,s.jsx)(c.Text,{variant:"text-md/normal",children:i}),d>0?(0,s.jsx)(v,{canceledCount:d}):null]})}class N extends i.PureComponent{render(){let{confirmation:e,confirmationLabel:l,isModifyingSubscription:n,onConfirm:t,onCancel:i}=this.props;return(0,s.jsxs)(c.mzw,{children:[(0,s.jsx)(c.zxk,{onClick:t,submitting:n,"aria-label":l,children:e}),(0,s.jsx)(c.zxk,{look:c.zxk.Looks.LINK,color:c.zxk.Colors.PRIMARY,onClick:i,disabled:n,children:C.intl.string(C.t["ETE/oK"])})]})}}class b extends(t=i.PureComponent){render(){let{guild:e,header:l,blurb:n,warning:t,confirmation:r,confirmationLabel:a,imageClass:o,error:d,isModifyingSubscription:u,onConfirm:m,onCancel:x,onDismissError:h,canceledCount:C}=this.props;return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(p,{text:l}),(0,s.jsx)(c.hzk,{children:(0,s.jsx)(S,{guild:e,blurb:n,warning:t,imageClass:o,error:d,onDismissError:h,canceledCount:C})}),(0,s.jsx)(N,{confirmation:r,confirmationLabel:a,isModifyingSubscription:u,onConfirm:m,onCancel:x})]})}}j(b,"Header",p),j(b,"ApplyBody",S),j(b,"TransferBody",function(e){var l,n;let{imageClass:t,blurb:r,fromGuilds:a,toGuild:o,error:d,onDismissError:u,slotCount:x=1,canceledCount:j=0}=e,p=i.useRef(a),S=null===(l=p.current)||void 0===l?void 0:l.length,N=null===(n=p.current)||void 0===n?void 0:n.reduce((e,l)=>(e.hasOwnProperty(l.id)||(e[l.id]=[]),e[l.id].push(l),e),{});return(0,s.jsxs)(f,{imageClass:t,error:d,onDismissError:u,children:[(0,s.jsx)(c.Text,{variant:"text-md/normal",children:r}),(0,s.jsx)(c.Text,{variant:"text-xs/bold",className:g.transferGuildCardHeader,children:C.intl.format(C.t["5zQYEx"],{guildCount:S})}),null!=N?h.default.keys(N).map(e=>(0,s.jsx)(m.Z,{className:g.transferFromGuildCard,guild:N[e][0],subscriptionChange:-1*N[e].length},e)):null,(0,s.jsx)(c.Text,{variant:"text-xs/normal",className:g.transferGuildCardHeader,children:C.intl.format(C.t.ct6oxM,{slotCount:x})}),(0,s.jsx)("div",{className:g.activeTransferGuildCardBorder,children:(0,s.jsx)(m.Z,{className:g.transferToGuildCard,guild:o,subscriptionChange:null!=a?a.length:1})}),j>0?(0,s.jsx)(v,{canceledCount:j}):null]})}),j(b,"Footer",N);let y=b},760558:function(e,l,n){n.d(l,{default:()=>S}),n(47120);var t=n(200651),s=n(192379),i=n(512722),r=n.n(i),a=n(442837),o=n(481060),d=n(179360),c=n(899667),u=n(430824),m=n(314884),x=n(626135),h=n(267642),C=n(395199),g=n(719228),j=n(4434),p=n(981631),f=n(388032),v=n(713361);let S=e=>{var l,n;let{guildBoostSlots:i,selectedGuild:S,locationSection:N,transitionState:b,onClose:y}=e,T=(0,h.vx)(m.Z.boostSlots);r()(null!=i||null!=S,"Must either provide slots or an initial selected guild"),r()(!(null==i?void 0:i.some(e=>e.isOnCooldown())),"If slots are provided, they must not be on cooldown");let E=[null==i?"UNUSED_QUANTITY_SELECT":null,null==S?"GUILD_SELECT":null,"CONFIRM","SUCCESS"].filter(e=>null!=e),[L,Z]=(0,a.Wu)([c.Z],()=>[c.Z.isModifyingAppliedBoost,c.Z.applyBoostError]),[I,P]=s.useState(""),[M,k]=s.useState(E[0]),[G,w]=s.useState(!1),[D,U]=s.useState(S),[z,R]=s.useState(null!=i?i:T.slice(0,1)),B=s.useMemo(()=>null==z?[]:z.map(e=>{let{premiumGuildSubscription:l}=e;return u.Z.getGuild(null==l?void 0:l.guildId)}).filter(e=>null!=e),[z]),F=s.useMemo(()=>{var e;return(null==z?void 0:null===(e=z[0])||void 0===e?void 0:e.premiumGuildSubscription)!=null},[z]),_=()=>{y("SUCCESS"===M),x.default.track(p.rMx.MODAL_DISMISSED,{type:p.jXE.PREMIUM_GUILD_SUBSCRIBE_MODAL,location_section:N})},A={UNUSED_QUANTITY_SELECT:{body:()=>(r()(!(null==i&&0===T.length),"Cannot provide no slots if there are no other available slots"),(0,t.jsxs)("div",{className:v.quantitySelectorBody,children:[(0,t.jsx)(o.X6q,{variant:"heading-md/semibold",className:v.quantitySelectorHeader,children:f.intl.string(f.t["9FFrra"])}),(0,t.jsx)(o.Text,{variant:"text-md/normal",className:v.quantitySelectorDescription,children:f.intl.string(f.t.x5qw5e)}),(0,t.jsxs)("div",{className:v.quantitySelectorWrapper,children:[(0,t.jsx)(o.FiK,{value:z.length,onChange:e=>R(T.slice(0,e)),minValue:1,maxValue:T.length}),(0,t.jsx)(o.Text,{className:v.quantitySelectorLabel,variant:"text-md/normal",children:f.intl.string(f.t.Vl8TCw)})]})]})),footer:()=>(0,t.jsxs)(o.mzw,{children:[(0,t.jsx)(o.zxk,{onClick:()=>k("CONFIRM"),children:f.intl.string(f.t["/uwYdX"])}),(0,t.jsx)(o.zxk,{look:o.zxk.Looks.LINK,color:o.zxk.Colors.PRIMARY,onClick:_,children:f.intl.string(f.t["1BPTsL"])})]})},GUILD_SELECT:{header:()=>(0,t.jsx)(g.g,{isTransfer:F,query:I,setQuery:P}),bodyClass:v.selectContent,body:()=>(0,t.jsx)(g.e,{onClose:_,onSelectGuild:e=>{U(e),k("CONFIRM")},isTransfer:F,selectedSlotGuilds:B,query:I})},CONFIRM:{body(){if(null==D)return null;let e=z.filter(e=>(0,h.tl)(e)).length,l=z.length,n=B.length;return F?(0,t.jsx)(C.Z.TransferBody,{fromGuilds:B,toGuild:D,blurb:f.intl.formatToPlainString(f.t.SSA2lp,{slotCount:l,guildCount:n}),imageClass:v.transferConfirmImage,error:G?Z:null,onDismissError:()=>w(!1),slotCount:l,canceledCount:e}):(0,t.jsx)(C.Z.ApplyBody,{guild:D,blurb:f.intl.string(f.t.yTlZV1),warning:f.intl.formatToPlainString(f.t.KPnDlp,{days:p.o3l,slotCount:l}),imageClass:v.confirmImage,error:G?Z:null,onDismissError:()=>w(!1),slotCount:l,canceledCount:e})},footer(){let e=z.length,l="CONFIRM"===E[0]?_:()=>k(E[E.indexOf(M)-1]),n=async()=>{if(null!=D&&(null==z?void 0:z.length)!==0){r()(!z.some(e=>e.isOnCooldown()),"Cannot use a premium guild subscription slot while on cooldown");try{await Promise.all(z.map(e=>{let{premiumGuildSubscription:l}=e;return null!=l?(0,d.dG)(l.guildId,l.id):Promise.resolve()})),await (0,d.W3)(D.id,z.map(e=>{let{id:l}=e;return l})),k("SUCCESS")}catch(e){w(!0)}}};return(0,t.jsx)(C.Z.Footer,{confirmation:F?f.intl.formatToPlainString(f.t.Oh6mxc,{slotCount:e}):f.intl.formatToPlainString(f.t["ZU5x5+"],{slotCount:e}),confirmationLabel:F?f.intl.formatToPlainString(f.t.fnZRmZ,{slotCount:e}):f.intl.formatToPlainString(f.t.d0vwWV,{slotCount:e}),onConfirm:n,onCancel:l,isModifyingSubscription:L})}},SUCCESS:{body:()=>(0,t.jsx)(j.R7,{guild:D,isTransfer:F,guildBoostQuantity:z.length,onClose:_})}};s.useEffect(()=>{x.default.track(p.rMx.OPEN_MODAL,{type:p.jXE.PREMIUM_GUILD_SUBSCRIBE_MODAL,location_section:N})},[N]);let O=A[M];return(0,t.jsxs)(o.Y0X,{transitionState:b,className:v.modal,size:o.CgR.SMALL,children:[null===(l=O.header)||void 0===l?void 0:l.call(O),(0,t.jsx)(o.hzk,{className:O.bodyClass,children:(0,t.jsx)(o.qBt,{step:M,steps:E,children:O.body()})}),null===(n=O.footer)||void 0===n?void 0:n.call(O),(0,t.jsx)(o.olH,{className:v.modalCloseButton,onClick:_})]})}},719228:function(e,l,n){n.d(l,{default:()=>v,e:()=>f,g:()=>p}),n(724458),n(653041),n(47120);var t=n(200651),s=n(192379),i=n(658722),r=n.n(i),a=n(442837),o=n(481060),d=n(37234),c=n(565138),u=n(703656),m=n(430824),x=n(771845),h=n(267642),C=n(981631),g=n(388032),j=n(495408);function p(e){let{isTransfer:l=!1,setQuery:n,query:s}=e;return(0,t.jsxs)(o.xBx,{className:j.selectHeaderContainer,children:[(0,t.jsx)(o.X6q,{className:j.selectHeader,variant:"heading-md/semibold",children:l?g.intl.string(g.t.IB13DQ):g.intl.string(g.t.cQYceX)}),(0,t.jsx)(o.E1j,{size:o.E1j.Sizes.MEDIUM,placeholder:g.intl.string(g.t.vf3ZTU),"aria-label":g.intl.string(g.t.vf3ZTU),className:j.selectSearch,query:s,onChange:n,onClear:()=>n("")})]})}function f(e){let{isTransfer:l=!1,selectedSlotGuilds:n,onClose:s,onSelectGuild:i,query:p}=e,f=(0,a.e7)([x.ZP],()=>x.ZP.getFlattenedGuildIds()),v=(0,a.Wu)([m.Z],()=>f.reduce((e,l)=>{let t=m.Z.getGuild(l);return null==t||null!=n&&n.some(e=>e.id===l)||(p.length<=0||r()(p.toLowerCase(),null==t?void 0:t.name.toLowerCase()))&&e.push(t),e},[]));function S(){s(),(0,d.xf)(),(0,u.uL)(C.Z5c.GUILD_DISCOVERY)}return(0,t.jsxs)(t.Fragment,{children:[0===v.length&&(0,t.jsx)("div",{className:j.emptyStateWrapper,children:(0,t.jsx)(o.Text,{variant:"text-md/normal",children:0===f.length?g.intl.format(g.t["E3tB6+"],{publicGuildDirectoryHook:(e,l)=>(0,t.jsx)(o.P3F,{onClick:S,tag:"a",children:e},l)}):g.intl.string(g.t.w3GLl5)})}),v.map(e=>(0,t.jsxs)(o.P3F,{className:j.selectGuild,onClick:()=>{i(e)},children:[(0,t.jsx)(c.Z,{className:j.selectGuildIcon,guild:e,size:c.Z.Sizes.SMALL}),(0,t.jsxs)("div",{className:j.selectGuildCopy,children:[(0,t.jsx)(o.Text,{className:j.selectGuildName,variant:"text-md/normal",children:e.name}),(0,t.jsx)(o.Text,{className:j.selectGuildLevel,color:"text-muted",variant:"text-xs/normal",children:(0,h.nW)(e.premiumTier)})]}),(0,t.jsx)(o.Text,{className:j.selectGuildPseudoCta,color:"always-white",variant:"text-sm/medium",children:l?g.intl.string(g.t.dUgaFx):g.intl.string(g.t.Uj0md3)})]},e.id))]})}function v(e){let{onClose:l,onSelectGuild:n,transitionState:i}=e,[r,a]=s.useState("");return(0,t.jsxs)(o.Y0X,{transitionState:i,className:j.modal,size:o.CgR.SMALL,children:[(0,t.jsx)(p,{query:r,setQuery:a}),(0,t.jsx)(o.hzk,{className:j.modalContent,children:(0,t.jsx)(f,{onClose:l,onSelectGuild:n,query:r})}),(0,t.jsx)(o.olH,{className:j.modalCloseButton,onClick:l})]})}},777789:function(e,l,n){n.d(l,{Z:()=>C});var t=n(200651),s=n(192379),i=n(120356),r=n.n(i),a=n(565138),o=n(297700),d=n(471885),c=n(424625),u=n(267642),m=n(474310);class x extends s.PureComponent{render(){let{tier:e}=this.props;return(0,t.jsxs)("div",{className:m.tierPill,children:[(0,t.jsx)(o.Z,{className:m.tierPillStar,children:(0,t.jsx)(d.Z,{tier:e,className:m.tierPillGem})}),(0,u.nW)(e)]})}}let h=e=>{let{subscriptionChange:l,guild:n}=e;if(0===l)return null;let s=Math.max(n.premiumSubscriberCount+l,0),i=(0,u.rF)(s,n.id),r=i-(0,u.rF)(n.premiumSubscriberCount,n.id);return 0===r?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Z,{className:r>0?m.levelUpIcon:m.levelDownIcon}),(0,t.jsx)(x,{tier:i})]})};class C extends s.PureComponent{render(){let{guild:e,className:l,subscriptionChange:n}=this.props;return(0,t.jsxs)("div",{className:r()(m.subscription,l),children:[(0,t.jsx)(a.Z,{guild:e,size:a.Z.Sizes.LARGE}),(0,t.jsxs)("div",{className:m.subscriptionInfo,children:[(0,t.jsx)("div",{className:m.guildName,children:e.name}),(0,t.jsxs)("div",{className:m.tierInfo,children:[(0,t.jsx)(x,{tier:e.premiumTier}),(0,t.jsx)(h,{guild:e,subscriptionChange:null!=n?n:0})]})]})]})}}},424625:function(e,l,n){n.d(l,{Z:()=>i});var t=n(200651);n(192379);var s=n(325767);function i(e){let{width:l=24,height:n=24,color:i="currentColor",...r}=e;return(0,t.jsxs)("svg",{...(0,s.Z)(r),width:l,height:n,viewBox:"0 0 16 16",children:[(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.45329 8.53891L3.26217 13.7844C2.95995 14.0719 2.49772 14.0719 2.21328 13.7844C1.92883 13.497 1.92883 13.0299 2.21328 12.7245L6.88884 7.99999L2.21328 3.27543C1.92883 2.988 1.92883 2.50297 2.21328 2.21555C2.49772 1.92812 2.95995 1.92812 3.26217 2.21555L8.45329 7.47903C8.73774 7.76645 8.73774 8.23352 8.45329 8.53891Z",fill:i}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.4533 8.53891L9.26217 13.7844C8.95995 14.0719 8.49772 14.0719 8.21328 13.7844C7.92883 13.497 7.92883 13.0299 8.21328 12.7245L12.8888 7.99999L8.21328 3.27543C7.92883 2.988 7.92883 2.50297 8.21328 2.21555C8.49772 1.92812 8.95995 1.92812 9.26217 2.21555L14.4533 7.47903C14.7377 7.76645 14.7377 8.23352 14.4533 8.53891Z",fill:i})]})}}}]);
//# sourceMappingURL=ef6bb6cec83eba78.js.map