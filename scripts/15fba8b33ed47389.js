"use strict";(this.webpackChunkdiscord_app=this.webpackChunkdiscord_app||[]).push([["27278"],{863942:function(e,t,n){var r=n(22092);(0,n(192291).exportTypedArrayStaticMethod)("from",n(12367),r)},781780:function(e,t,n){n.d(t,{Z:()=>d});var r=n(200651),i=n(963614),l=n(208156),o=n(701488),a=n(225934);function d(e){var t,n,d;let{channelId:c,guildId:u,embeddedActivity:s,application:f}=e,p={instance_id:null!==(d=null!==(n=s.compositeInstanceId)&&void 0!==n?n:s.launchId)&&void 0!==d?d:"",location_id:null===(t=s.location)||void 0===t?void 0:t.id,launch_id:s.launchId,referrer_id:s.referrerId,custom_id:s.customId};return null!=u&&""!==u&&(p.guild_id=u),null!=c&&""!==c&&(p.channel_id=c),(0,r.jsx)(l.J,{allowPopups:(0,i.h)(f),referrerPolicy:o.um.has(s.applicationId)?"no-referrer":"origin",url:s.url,queryParams:p,className:a.iframe,shouldRefocus:!1})}},325749:function(e,t,n){n.d(t,{Z:()=>T}),n(47120);var r=n(200651),i=n(192379),l=n(120356),o=n.n(l),a=n(442837),d=n(481060),c=n(13245),u=n(753972),s=n(812206),f=n(726721),p=n(610394),m=n(695346),h=n(390322),x=n(961048),v=n(871499),_=n(786915),Z=n(592125),C=n(271383),b=n(594174),j=n(51144),I=n(145597),g=n(214629),S=n(317381),A=n(884338),y=n(473179),P=n(981631),N=n(388032),w=n(432132);let k=A.u.SIZE_24;function T(e){let{applicationId:t,channelId:n}=e,l=(0,a.e7)([s.Z],()=>s.Z.getApplication(t)),T=(0,a.e7)([S.ZP],()=>S.ZP.getSelfEmbeddedActivities().get(t)),E=(0,a.e7)([Z.Z],()=>Z.Z.getChannel(n)),R=m.Sb.useSetting(),L=(0,a.Wu)([C.ZP],()=>{var e;return null==E||null==T?[]:Array.from(null!==(e=T.userIds)&&void 0!==e?e:[]).map(e=>C.ZP.getMember(E.guild_id,e))},[T,E]),U=i.useMemo(()=>{let e=new Map;return L.forEach(t=>{null!=t&&void 0!==t&&e.set(t.userId,t)}),e},[L]),B=i.useCallback((e,t)=>{var n;if(null==e)return null;let i=U.get(e.id),l=null!==(n=null==i?void 0:i.nick)&&void 0!==n?n:j.ZP.getName(e);return(0,r.jsx)(d.DY3,{text:l,position:"bottom",children:(0,r.jsx)("img",{src:e.getAvatarURL(null==t?void 0:t.guild_id,k),alt:l,className:w.avatar},e.id)},e.id)},[U]),M=null==T?void 0:T.userIds,O=(0,a.Wu)([b.default],()=>Array.from(null!=M?M:[]).map(e=>b.default.getUser(e)).filter(e=>null!=e),[M]),Y=f.Z.useExperiment({location:"activity_popout_overflow_menu"},{autoTrackExposure:!0}).enabled,z=i.useCallback(()=>{let e=(0,I.QF)();c.Z.setInputLocked(!p.ZP.isInputLocked(e),e)},[]),D=(0,g.PR)();if(null==l||null==T)return null;let G=(0,r.jsx)(u.Z,{application:l,size:24,className:w.appIcon});return R&&(G=(0,r.jsx)(d.DY3,{text:T.compositeInstanceId,position:"bottom",children:G})),(0,r.jsx)(d.f6W,{theme:P.BRd.DARK,children:e=>(0,r.jsxs)("div",{className:o()(w.container,e),children:[(0,r.jsxs)("div",{className:o()(w.headerSection,w.headerSectionLeft),children:[G,(0,r.jsx)(d.Text,{variant:"text-md/normal",color:"header-primary",children:l.name}),(0,r.jsx)("div",{className:w.dotSpacer,children:(0,r.jsx)(d.Text,{variant:"text-md/normal",color:"text-muted",children:"."})}),(0,r.jsx)(A.Z,{renderIcon:!1,users:O,size:k,max:6,className:w.userAvatars,renderUser:e=>B(e,E)})]}),(0,r.jsx)("div",{className:o()(w.headerSection,w.headerSectionRight),children:(0,r.jsxs)("div",{className:w.actionButtonsContainer,children:[(0,r.jsx)(_.Z,{appContext:P.IlC.POPOUT,applicationId:t,channel:E,shouldPrioritizeGroupPlusIcon:!0,embeddedActivity:T}),D?(0,r.jsx)(v.Z,{onClick:z,iconComponent:d.epB,label:N.intl.string(N.t.mseZsL)}):null,Y&&(0,r.jsx)(d.yRy,{position:"bottom",renderPopout:e=>{let{closePopout:t}=e;return(0,r.jsx)(h.Z,{children:(0,r.jsx)(y.Z,{application:l,channelId:n,onClose:t})})},children:(e,t)=>{let{isShown:n}=t;return(0,i.createElement)(x.Z,{...e,key:"more-options",isActive:n})}},"more-options-popout")]})})]})})}},473179:function(e,t,n){n.d(t,{Z:()=>a});var r=n(200651),i=n(481060),l=n(870745),o=n(388032);function a(e){let{onClose:t,onSelect:n,application:a,channelId:d}=e,c=(0,l.Z)(a,d);return(0,r.jsx)(i.v2r,{navId:"activity-popout-overflow-popout",onClose:t,onSelect:n,"aria-label":o.intl.string(o.t.SS9Y6O),children:c})}},701011:function(e,t,n){n.d(t,{Z:()=>_});var r=n(200651),i=n(192379),l=n(442837),o=n(481060),a=n(110924),d=n(812206),c=n(554370),u=n(788983),s=n(214629),f=n(317381),p=n(16609),m=n(781780),h=n(325749),x=n(981631),v=n(169006);function _(){let{embeddedActivity:e,channelId:t,guildId:n}=(0,l.cj)([f.ZP],()=>{let e=f.ZP.getCurrentEmbeddedActivity(),t=(0,p.pY)(null==e?void 0:e.location),n=(0,p.jS)(null==e?void 0:e.location);return{embeddedActivity:e,channelId:t,guildId:n}}),_=i.useRef(null),Z=(0,a.Z)(e);i.useEffect(()=>{null!=e?clearTimeout(_.current):null!=Z&&null==e&&(_.current=window.setTimeout(()=>{(0,u.xv)(x.KJ3.ACTIVITY_POPOUT)},5e3))},[e,Z]);let C=(0,l.e7)([d.Z],()=>{let t=null==e?void 0:e.applicationId;return null==t?void 0:d.Z.getApplication(t)}),b=(0,s.PR)();return(0,r.jsx)("div",{className:v.container,children:null==e||null==C?(0,r.jsx)(o.$jN,{className:v.iframe}):(0,r.jsx)("div",{className:v.loadedContentContainer,children:(0,r.jsxs)("div",{className:v.iframeAndHeaderContainer,children:[(0,r.jsx)("div",{className:v.headerContainer,children:(0,r.jsx)(h.Z,{applicationId:C.id,channelId:t})}),(0,r.jsx)("div",{className:v.iframeContainer,children:(0,r.jsx)(m.Z,{channelId:t,guildId:n,embeddedActivity:e,application:C})}),b?(0,r.jsx)(c.Z,{isEmbeddedActivity:!0}):null]})})})}},748623:function(e,t,n){n.r(t),n.d(t,{default:()=>d});var r=n(200651),i=n(238246),l=n(952561),o=n(701011),a=n(388032);function d(e){var t;let{windowKey:n}=e,d=(0,l.Z)();return(0,r.jsx)(i.Z,{withTitleBar:!0,windowKey:n,title:null!==(t=null==d?void 0:d.name)&&void 0!==t?t:a.intl.string(a.t.IC5Anp),children:(0,r.jsx)(o.Z,{})})}},870745:function(e,t,n){n.d(t,{Z:()=>u});var r=n(200651),i=n(442837),l=n(481060),o=n(726721),a=n(726521),d=n(592125),c=n(388032);function u(e,t){let n=o.Z.useExperiment({location:"activity_popout_overflow_menu"},{autoTrackExposure:!0}).enabled,u=(0,i.e7)([d.Z],()=>d.Z.getChannel(t)),s=null==u?void 0:u.getGuildId();return!1===n?null:(0,r.jsx)(l.sNh,{id:"report-app",color:"danger",label:c.intl.string(c.t.NgA5vr),action:()=>(0,a.uu)({application:e,entrypoint:"activity_ui_popout",contextualGuildId:null!=s?s:void 0,contextualChannelId:null==u?void 0:u.id}),icon:l.U65})}},225934:function(e,t,n){e.exports={iframe:"iframe__8c55d"}},432132:function(e,t,n){e.exports={container:"container_c8f358",headerSection:"headerSection_c8f358",headerSectionLeft:"headerSectionLeft_c8f358",headerSectionRight:"headerSectionRight_c8f358",appIcon:"appIcon_c8f358",avatar:"avatar_c8f358",userAvatars:"userAvatars_c8f358",dotSpacer:"dotSpacer_c8f358",actionButtonsContainer:"actionButtonsContainer_c8f358"}},169006:function(e,t,n){e.exports={container:"container__0b406",loadedContentContainer:"loadedContentContainer__0b406",iframeAndHeaderContainer:"iframeAndHeaderContainer__0b406",headerContainer:"headerContainer__0b406",iframeContainer:"iframeContainer__0b406",iframe:"iframe__0b406"}},788900:function(e,t,n){n.d(t,{xS:()=>r});function r(e){let t=function(e){var t;let n,r,i;let{PI:l,min:o,max:a,cos:d,round:c}=Math,u=e[0]|e[1]<<8|e[2]<<16,s=e[3]|e[4]<<8,f=(63&u)/63,p=(u>>6&63)/31.5-1,m=(u>>12&63)/31.5-1,h=u>>23,x=s>>15,v=a(3,x?h?5:7:7&s),_=a(3,x?7&s:h?5:7),Z=h?(15&e[5])/15:1,C=(e[5]>>4)/15,b=h?6:5,j=0,I=(t,n,r)=>{let i=[];for(let l=0;l<n;l++)for(let o=l?0:1;o*n<t*(n-l);o++)i.push(((e[b+(j>>1)]>>((1&j++)<<2)&15)/7.5-1)*r);return i},g=I(v,_,(u>>18&31)/31),S=I(3,3,(s>>3&63)/63*1.25),A=I(3,3,(s>>9&63)/63*1.25),y=h&&I(5,5,C),P=(n=(t=e)[3],r=128&t[2],((i=128&t[4])?r?5:7:7&n)/(i?7&n:r?5:7)),N=c(P>1?32:32*P),w=c(P>1?32/P:32),k=new Uint8Array(N*w*4),T=[],E=[];for(let e=0,t=0;e<w;e++)for(let n=0;n<N;n++,t+=4){let r=f,i=p,c=m,u=Z;for(let e=0,t=a(v,h?5:3);e<t;e++)T[e]=d(l/N*(n+.5)*e);for(let t=0,n=a(_,h?5:3);t<n;t++)E[t]=d(l/w*(e+.5)*t);for(let e=0,t=0;e<_;e++)for(let n=e?0:1,i=2*E[e];n*_<v*(_-e);n++,t++)r+=g[t]*T[n]*i;for(let e=0,t=0;e<3;e++)for(let n=e?0:1,r=2*E[e];n<3-e;n++,t++){let e=T[n]*r;i+=S[t]*e,c+=A[t]*e}if(h)for(let e=0,t=0;e<5;e++)for(let n=e?0:1,r=2*E[e];n<5-e;n++,t++)u+=y[t]*T[n]*r;let s=r-2/3*i,x=(3*r-s+c)/2,C=x-c;k[t]=a(0,255*o(1,x)),k[t+1]=a(0,255*o(1,C)),k[t+2]=a(0,255*o(1,s)),k[t+3]=a(0,255*o(1,u))}return{w:N,h:w,rgba:k}}(e);return function(e,t,n){let r=4*e+1,i=6+t*(5+r),l=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,0,0,e>>8,255&e,0,0,t>>8,255&t,8,6,0,0,0,0,0,0,0,i>>>24,i>>16&255,i>>8&255,255&i,73,68,65,84,120,1],o=[0,0x1db71064,0x3b6e20c8,0x26d930ac,0x76dc4190,0x6b6b51f4,0x4db26158,0x5005713c,-0x12477ce0,-0xff06cbc,-0x29295c18,-0x349e4c74,-0x649b3d50,-0x792c2d2c,-0x5ff51d88,-0x42420de4],a=1,d=0;for(let e=0,i=0,o=r-1;e<t;e++,o+=r-1)for(l.push(e+1<t?0:1,255&r,r>>8,255&~r,r>>8^255,0),d=(d+a)%65521;i<o;i++){let e=255&n[i];l.push(e),d=(d+(a=(a+e)%65521))%65521}for(let[e,t]of(l.push(d>>8,255&d,a>>8,255&a,0,0,0,0,0,0,0,0,73,69,78,68,174,66,96,130),[[12,29],[37,41+i]])){let n=-1;for(let r=e;r<t;r++)n^=l[r],n=(n=n>>>4^o[15&n])>>>4^o[15&n];n=~n,l[t++]=n>>>24,l[t++]=n>>16&255,l[t++]=n>>8&255,l[t++]=255&n}return"data:image/png;base64,"+btoa(String.fromCharCode(...l))}(t.w,t.h,t.rgba)}}}]);
//# sourceMappingURL=15fba8b33ed47389.js.map