name: "Discord Update Class Names"
author: "FedeIlLeone"
description: "Automated CSS class name synchronization tool for Discord theme developers"
inputs:
    token:
        description: "GitHub token"
        required: true
    files:
        description: |
            Files/directories to process (comma/newline separated)
            Example: |
                src/theme/**/*.scss
                theme.css
                components/*.scss
        required: true
    follow-symbolic-links:
        description: "Indicates whether to follow symbolic links"
        required: false
        default: true
    ignores:
        description: |
            Files/directories to ignore (comma/newline separated)
            Example: |
                src/theme/**/*.scss
                theme.css
                components/*.scss
        required: false
    report-outdated:
        description: "Indicates whether to report outdated class names, without a possible automatic replacement"
        required: false
        default: true
    target-branch:
        description: "Branch name for PR creation"
        required: false
        default: "classname-updates"
    commit-message:
        description: "Commit message template"
        required: false
        default: "chore: update Discord class names (automated)"
    pr-title:
        description: "PR title template"
        required: false
        default: "Class Name Updates"
runs:
    using: "composite"
    steps:
        - name: Checkout repository
          uses: actions/checkout@v4

        - name: Run Class Name Updates
          shell: bash
          env:
              INPUT_FILES: ${{ inputs.files }}
              INPUT_FOLLOW_SYMBOLIC_LINKS: ${{ inputs.follow-symbolic-links }}
              INPUT_IGNORES: ${{ inputs.ignores }}
              INPUT_REPORT_OUTDATED: ${{ inputs.report-outdated }}
          run: |
              git config --global user.email "41898282+github-actions[bot]@users.noreply.github.com"
              git config --global user.name "github-actions[bot]"

              node "$GITHUB_ACTION_PATH/dist/action/index.js"

        - name: Create Pull Request
          uses: peter-evans/create-pull-request@v7
          with:
              token: ${{ inputs.token }}
              branch: ${{ inputs.target-branch }}
              commit-message: ${{ inputs.commit-message }}
              title: ${{ inputs.pr-title }}
              body: "Automated class name updates from Discord's latest changes"
              delete-branch: true
branding:
    color: "gray-dark"
    icon: "code"
